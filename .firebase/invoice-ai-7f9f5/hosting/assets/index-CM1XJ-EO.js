(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function vm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pp={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function Fw(){if(Fv)return Ll;Fv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Ll.Fragment=e,Ll.jsx=t,Ll.jsxs=t,Ll}var Bv;function Bw(){return Bv||(Bv=1,pp.exports=Fw()),pp.exports}var I=Bw(),mp={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Hw(){if(Hv)return Me;Hv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function Q(L,ee,ie){this.props=L,this.context=ee,this.refs=B,this.updater=ie||O}Q.prototype.isReactComponent={},Q.prototype.setState=function(L,ee){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ee,"setState")},Q.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function j(){}j.prototype=Q.prototype;function $(L,ee,ie){this.props=L,this.context=ee,this.refs=B,this.updater=ie||O}var ue=$.prototype=new j;ue.constructor=$,F(ue,Q.prototype),ue.isPureReactComponent=!0;var de=Array.isArray;function re(){}var M={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function x(L,ee,ie){var le=ie.ref;return{$$typeof:n,type:L,key:ee,ref:le!==void 0?le:null,props:ie}}function D(L,ee){return x(L.type,ee,L.props)}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function U(L){var ee={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return ee[ie]})}var b=/\/+/g;function Te(L,ee){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):ee.toString(36)}function Ce(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(re,re):(L.status="pending",L.then(function(ee){L.status==="pending"&&(L.status="fulfilled",L.value=ee)},function(ee){L.status==="pending"&&(L.status="rejected",L.reason=ee)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function G(L,ee,ie,le,ye){var Ie=typeof L;(Ie==="undefined"||Ie==="boolean")&&(L=null);var Be=!1;if(L===null)Be=!0;else switch(Ie){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(L.$$typeof){case n:case e:Be=!0;break;case v:return Be=L._init,G(Be(L._payload),ee,ie,le,ye)}}if(Be)return ye=ye(L),Be=le===""?"."+Te(L,0):le,de(ye)?(ie="",Be!=null&&(ie=Be.replace(b,"$&/")+"/"),G(ye,ee,ie,"",function(Ei){return Ei})):ye!=null&&(V(ye)&&(ye=D(ye,ie+(ye.key==null||L&&L.key===ye.key?"":(""+ye.key).replace(b,"$&/")+"/")+Be)),ee.push(ye)),1;Be=0;var Ct=le===""?".":le+":";if(de(L))for(var dt=0;dt<L.length;dt++)le=L[dt],Ie=Ct+Te(le,dt),Be+=G(le,ee,ie,Ie,ye);else if(dt=w(L),typeof dt=="function")for(L=dt.call(L),dt=0;!(le=L.next()).done;)le=le.value,Ie=Ct+Te(le,dt++),Be+=G(le,ee,ie,Ie,ye);else if(Ie==="object"){if(typeof L.then=="function")return G(Ce(L),ee,ie,le,ye);throw ee=String(L),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ae(L,ee,ie){if(L==null)return L;var le=[],ye=0;return G(L,le,"","",function(Ie){return ee.call(ie,Ie,ye++)}),le}function ce(L){if(L._status===-1){var ee=L._result;ee=ee(),ee.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=ee)}if(L._status===1)return L._result.default;throw L._result}var De=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},xe={map:ae,forEach:function(L,ee,ie){ae(L,function(){ee.apply(this,arguments)},ie)},count:function(L){var ee=0;return ae(L,function(){ee++}),ee},toArray:function(L){return ae(L,function(ee){return ee})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Me.Activity=E,Me.Children=xe,Me.Component=Q,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=$,Me.StrictMode=i,Me.Suspense=h,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Me.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},Me.cache=function(L){return function(){return L.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(L,ee,ie){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=F({},L.props),ye=L.key;if(ee!=null)for(Ie in ee.key!==void 0&&(ye=""+ee.key),ee)!P.call(ee,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ee.ref===void 0||(le[Ie]=ee[Ie]);var Ie=arguments.length-2;if(Ie===1)le.children=ie;else if(1<Ie){for(var Be=Array(Ie),Ct=0;Ct<Ie;Ct++)Be[Ct]=arguments[Ct+2];le.children=Be}return x(L.type,ye,le)},Me.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Me.createElement=function(L,ee,ie){var le,ye={},Ie=null;if(ee!=null)for(le in ee.key!==void 0&&(Ie=""+ee.key),ee)P.call(ee,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=ee[le]);var Be=arguments.length-2;if(Be===1)ye.children=ie;else if(1<Be){for(var Ct=Array(Be),dt=0;dt<Be;dt++)Ct[dt]=arguments[dt+2];ye.children=Ct}if(L&&L.defaultProps)for(le in Be=L.defaultProps,Be)ye[le]===void 0&&(ye[le]=Be[le]);return x(L,Ie,ye)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(L){return{$$typeof:d,render:L}},Me.isValidElement=V,Me.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ce}},Me.memo=function(L,ee){return{$$typeof:m,type:L,compare:ee===void 0?null:ee}},Me.startTransition=function(L){var ee=M.T,ie={};M.T=ie;try{var le=L(),ye=M.S;ye!==null&&ye(ie,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(re,De)}catch(Ie){De(Ie)}finally{ee!==null&&ie.types!==null&&(ee.types=ie.types),M.T=ee}},Me.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Me.use=function(L){return M.H.use(L)},Me.useActionState=function(L,ee,ie){return M.H.useActionState(L,ee,ie)},Me.useCallback=function(L,ee){return M.H.useCallback(L,ee)},Me.useContext=function(L){return M.H.useContext(L)},Me.useDebugValue=function(){},Me.useDeferredValue=function(L,ee){return M.H.useDeferredValue(L,ee)},Me.useEffect=function(L,ee){return M.H.useEffect(L,ee)},Me.useEffectEvent=function(L){return M.H.useEffectEvent(L)},Me.useId=function(){return M.H.useId()},Me.useImperativeHandle=function(L,ee,ie){return M.H.useImperativeHandle(L,ee,ie)},Me.useInsertionEffect=function(L,ee){return M.H.useInsertionEffect(L,ee)},Me.useLayoutEffect=function(L,ee){return M.H.useLayoutEffect(L,ee)},Me.useMemo=function(L,ee){return M.H.useMemo(L,ee)},Me.useOptimistic=function(L,ee){return M.H.useOptimistic(L,ee)},Me.useReducer=function(L,ee,ie){return M.H.useReducer(L,ee,ie)},Me.useRef=function(L){return M.H.useRef(L)},Me.useState=function(L){return M.H.useState(L)},Me.useSyncExternalStore=function(L,ee,ie){return M.H.useSyncExternalStore(L,ee,ie)},Me.useTransition=function(){return M.H.useTransition()},Me.version="19.2.0",Me}var Gv;function Em(){return Gv||(Gv=1,mp.exports=Hw()),mp.exports}var he=Em();const ft=vm(he);var gp={exports:{}},Ol={},yp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function Gw(){return zv||(zv=1,(function(n){function e(G,ae){var ce=G.length;G.push(ae);e:for(;0<ce;){var De=ce-1>>>1,xe=G[De];if(0<o(xe,ae))G[De]=ae,G[ce]=xe,ce=De;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ae=G[0],ce=G.pop();if(ce!==ae){G[0]=ce;e:for(var De=0,xe=G.length,L=xe>>>1;De<L;){var ee=2*(De+1)-1,ie=G[ee],le=ee+1,ye=G[le];if(0>o(ie,ce))le<xe&&0>o(ye,ie)?(G[De]=ye,G[le]=ce,De=le):(G[De]=ie,G[ee]=ce,De=ee);else if(le<xe&&0>o(ye,ce))G[De]=ye,G[le]=ce,De=le;else break e}}return ae}function o(G,ae){var ce=G.sortIndex-ae.sortIndex;return ce!==0?ce:G.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var h=[],m=[],v=1,E=null,S=3,w=!1,O=!1,F=!1,B=!1,Q=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ue(G){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=G)i(m),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(m)}}function de(G){if(F=!1,ue(G),!O)if(t(h)!==null)O=!0,re||(re=!0,U());else{var ae=t(m);ae!==null&&Ce(de,ae.startTime-G)}}var re=!1,M=-1,P=5,x=-1;function D(){return B?!0:!(n.unstable_now()-x<P)}function V(){if(B=!1,re){var G=n.unstable_now();x=G;var ae=!0;try{e:{O=!1,F&&(F=!1,j(M),M=-1),w=!0;var ce=S;try{t:{for(ue(G),E=t(h);E!==null&&!(E.expirationTime>G&&D());){var De=E.callback;if(typeof De=="function"){E.callback=null,S=E.priorityLevel;var xe=De(E.expirationTime<=G);if(G=n.unstable_now(),typeof xe=="function"){E.callback=xe,ue(G),ae=!0;break t}E===t(h)&&i(h),ue(G)}else i(h);E=t(h)}if(E!==null)ae=!0;else{var L=t(m);L!==null&&Ce(de,L.startTime-G),ae=!1}}break e}finally{E=null,S=ce,w=!1}ae=void 0}}finally{ae?U():re=!1}}}var U;if(typeof $=="function")U=function(){$(V)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Te=b.port2;b.port1.onmessage=V,U=function(){Te.postMessage(null)}}else U=function(){Q(V,0)};function Ce(G,ae){M=Q(function(){G(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(G){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ce=S;S=ae;try{return G()}finally{S=ce}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=S;S=G;try{return ae()}finally{S=ce}},n.unstable_scheduleCallback=function(G,ae,ce){var De=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?De+ce:De):ce=De,G){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ce+xe,G={id:v++,callback:ae,priorityLevel:G,startTime:ce,expirationTime:xe,sortIndex:-1},ce>De?(G.sortIndex=ce,e(m,G),t(h)===null&&G===t(m)&&(F?(j(M),M=-1):F=!0,Ce(de,ce-De))):(G.sortIndex=xe,e(h,G),O||w||(O=!0,re||(re=!0,U()))),G},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(G){var ae=S;return function(){var ce=S;S=ae;try{return G.apply(this,arguments)}finally{S=ce}}}})(_p)),_p}var Yv;function zw(){return Yv||(Yv=1,yp.exports=Gw()),yp.exports}var vp={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function Yw(){if(Kv)return an;Kv=1;var n=Em();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(h,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:h,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(h,m,null,v)},an.flushSync=function(h){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=m,i.p=v,i.d.f()}},an.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(h,m))},an.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},an.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):v==="script"&&i.d.X(h,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},an.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(h)},an.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);i.d.L(h,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},an.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(h)},an.requestFormReset=function(h){i.d.r(h)},an.unstable_batchedUpdates=function(h,m){return h(m)},an.useFormState=function(h,m,v){return u.H.useFormState(h,m,v)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.0",an}var Jv;function Kw(){if(Jv)return vp.exports;Jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=Yw(),vp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function Jw(){if(Qv)return Ol;Qv=1;var n=zw(),e=Em(),t=Kw();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(l(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var a=s,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return h(y),s;if(_===c)return h(y),r;_=_.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===a){A=!0,a=y,c=_;break}if(R===c){A=!0,c=y,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,c=y;break}if(R===c){A=!0,c=_,a=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var b=Symbol.for("react.client.reference");function Te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===b?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case Q:return"Profiler";case B:return"StrictMode";case de:return"Suspense";case re:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case $:return s.displayName||"Context";case j:return(s._context.displayName||"Context")+".Consumer";case ue:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Te(s.type)||"Memo";case P:r=s._payload,s=s._init;try{return Te(s(r))}catch{}}return null}var Ce=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},De=[],xe=-1;function L(s){return{current:s}}function ee(s){0>xe||(s.current=De[xe],De[xe]=null,xe--)}function ie(s,r){xe++,De[xe]=s.current,s.current=r}var le=L(null),ye=L(null),Ie=L(null),Be=L(null);function Ct(s,r){switch(ie(Ie,r),ie(ye,s),ie(le,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?uv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=uv(r),s=cv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(le),ie(le,s)}function dt(){ee(le),ee(ye),ee(Ie)}function Ei(s){s.memoizedState!==null&&ie(Be,s);var r=le.current,a=cv(r,s.type);r!==a&&(ie(ye,s),ie(le,a))}function Ve(s){ye.current===s&&(ee(le),ee(ye)),Be.current===s&&(ee(Be),Dl._currentValue=ce)}var He,Le;function Ne(s){if(He===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);He=r&&r[1]||"",Le=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+He+s+Le}var Nn=!1;function hn(s,r){if(!s||Nn)return"";Nn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var J=X}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(X){J=X}s.call(ne.prototype)}}else{try{throw Error()}catch(X){J=X}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),K=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===K.length)for(c=k.length-1,y=K.length-1;1<=c&&0<=y&&k[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==K[y]){var Z=`
`+k[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Nn=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?Ne(a):""}function xn(s,r){switch(s.tag){case 26:case 27:case 5:return Ne(s.type);case 16:return Ne("Lazy");case 13:return s.child!==r&&r!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return hn(s.type,!1);case 11:return hn(s.type.render,!1);case 1:return hn(s.type,!0);case 31:return Ne("Activity");default:return""}}function Xt(s){try{var r="",a=null;do r+=xn(s,a),a=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ht=Object.prototype.hasOwnProperty,Ft=n.unstable_scheduleCallback,Ns=n.unstable_cancelCallback,gd=n.unstable_shouldYield,Iu=n.unstable_requestPaint,pn=n.unstable_now,Rr=n.unstable_getCurrentPriorityLevel,Ua=n.unstable_ImmediatePriority,La=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,yd=n.unstable_LowPriority,wu=n.unstable_IdlePriority,Ru=n.log,Nu=n.unstable_setDisableYieldValue,si=null,$t=null;function Bn(s){if(typeof Ru=="function"&&Nu(s),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(si,s)}catch{}}var It=Math.clz32?Math.clz32:bu,xu=Math.log,vo=Math.LN2;function bu(s){return s>>>=0,s===0?32:31-(xu(s)/vo|0)|0}var Ti=256,Nr=262144,bt=4194304;function Si(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ai(s,r,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=Si(c):(A&=R,A!==0?y=Si(A):a||(a=R&~s,a!==0&&(y=Si(a))))):(R=c&~_,R!==0?y=Si(R):A!==0?y=Si(A):a||(a=c&~s,a!==0&&(y=Si(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function ri(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function _d(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mu(){var s=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),s}function Ci(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function xr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vd(s,r,a,c,y,_){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,K=s.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-It(a),ne=1<<Z;R[Z]=0,k[Z]=-1;var J=K[Z];if(J!==null)for(K[Z]=null,Z=0;Z<J.length;Z++){var X=J[Z];X!==null&&(X.lane&=-536870913)}a&=~ne}c!==0&&br(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function br(s,r,a){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-It(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Oa(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var c=31-It(a),y=1<<c;y&r|s[c]&r&&(s[c]|=r),a&=~y}}function qa(s,r){var a=r&-r;return a=(a&42)!==0?1:Mr(a),(a&(s.suspendedLanes|r))!==0?0:a}function Mr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pu(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Dv(s.type))}function oi(s,r){var a=ae.p;try{return ae.p=s,r()}finally{ae.p=a}}var ai=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ai,zt="__reactProps$"+ai,Ii="__reactContainer$"+ai,Eo="__reactEvents$"+ai,Ed="__reactListeners$"+ai,Du="__reactHandles$"+ai,Vu="__reactResources$"+ai,wi="__reactMarker$"+ai;function To(s){delete s[Mt],delete s[zt],delete s[Eo],delete s[Ed],delete s[Du]}function Ri(s){var r=s[Mt];if(r)return r;for(var a=s.parentNode;a;){if(r=a[Ii]||a[Mt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=yv(s);s!==null;){if(a=s[Mt])return a;s=yv(s)}return r}s=a,a=s.parentNode}return null}function Hn(s){if(s=s[Mt]||s[Ii]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function bn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ni(s){var r=s[Vu];return r||(r=s[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(s){s[wi]=!0}var Fa=new Set,Ba={};function xi(s,r){bi(s,r),bi(s+"Capture",r)}function bi(s,r){for(Ba[s]=r,s=0;s<r.length;s++)Fa.add(r[s])}var Ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ga={},za={};function ku(s){return ht.call(za,s)?!0:ht.call(Ga,s)?!1:Ha.test(s)?za[s]=!0:(Ga[s]=!0,!1)}function So(s,r,a){if(ku(r))if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+a)}}function Mn(s,r,a){if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+a)}}function Dt(s,r,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(r,a,""+c)}}function Yt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function bs(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ya(s,r,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function nt(s){if(!s._valueTracker){var r=bs(s)?"checked":"value";s._valueTracker=Ya(s,r,""+s[r])}}function Pr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return s&&(c=bs(s)?s.checked?"true":"false":s.value),s=c,s!==a?(r.setValue(s),!0):!1}function Mi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Dr=/[\n"\\]/g;function _n(s){return s.replace(Dr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ao(s,r,a,c,y,_,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Yt(r)):s.value!==""+Yt(r)&&(s.value=""+Yt(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Ka(s,A,Yt(r)):a!=null?Ka(s,A,Yt(a)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Yt(R):s.removeAttribute("name")}function Uu(s,r,a,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){nt(s);return}a=a!=null?""+Yt(a):"",r=r!=null?""+Yt(r):a,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),nt(s)}function Ka(s,r,a){r==="number"&&Mi(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function Ms(s,r,a,c){if(s=s.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=r.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+Yt(a),r=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Lu(s,r,a){if(r!=null&&(r=""+Yt(r),r!==s.value&&(s.value=r),a==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=a!=null?""+Yt(a):""}function Ps(s,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(Ce(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Yt(r),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),nt(s)}function vn(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var Ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ja(s,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,a):typeof a!="number"||a===0||Ou.has(r)?r==="float"?s.cssFloat=a:s[r]=(""+a).trim():s[r]=a+"px"}function Qa(s,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Ja(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Ja(s,_,r[_])}function Co(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(s){return Ds.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function li(){}var Wa=null;function Gn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vs=null,Pi=null;function Vr(s){var r=Hn(s);if(r&&(s=r.stateNode)){var a=s[zt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ao(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==s&&c.form===s.form){var y=c[zt]||null;if(!y)throw Error(i(90));Ao(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===s.form&&Pr(c)}break e;case"textarea":Lu(s,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ms(s,!!a.multiple,r,!1)}}}var wo=!1;function ks(s,r,a){if(wo)return s(r,a);wo=!0;try{var c=s(r);return c}finally{if(wo=!1,(Vs!==null||Pi!==null)&&(Pc(),Vs&&(r=Vs,s=Pi,Pi=Vs=null,Vr(r),s)))for(r=0;r<s.length;r++)Vr(s[r])}}function ui(s,r){var a=s.stateNode;if(a===null)return null;var c=a[zt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(zn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){kr=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{kr=!1}var Di=null,Xa=null,Ur=null;function $a(){if(Ur)return Ur;var s,r=Xa,a=r.length,c,y="value"in Di?Di.value:Di.textContent,_=y.length;for(s=0;s<a&&r[s]===y[s];s++);var A=a-s;for(c=1;c<=A&&r[a-c]===y[_-c];c++);return Ur=y.slice(s,1<c?1-c:void 0)}function Lr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function $i(){return!0}function ci(){return!1}function jt(s){function r(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(a=s[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$i:ci,this.isPropagationStopped=ci,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=jt(ji),Us=E({},ji,{view:0,detail:0}),ja=jt(Us),Ls,Ro,ki,No=E({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Ls=s.screenX-ki.screenX,Ro=s.screenY-ki.screenY):Ro=Ls=0,ki=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:Ro}}),Za=jt(No),Or=E({},No,{dataTransfer:0}),Fu=jt(Or),Bu=E({},Us,{relatedTarget:0}),qr=jt(Bu),el=E({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Hu=jt(el),xo=E({},ji,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Gu=jt(xo),zu=E({},ji,{data:0}),Ui=jt(zu),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Ju[s])?!!r[s]:!1}function Os(){return Qu}var mn=E({},Us,{key:function(s){if(s.key){var r=Yu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Lr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ku[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(s){return s.type==="keypress"?Lr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wu=jt(mn),Xu=E({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=jt(Xu),p=E({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),T=jt(p),C=E({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=jt(C),z=E({},No,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),W=jt(z),fe=E({},ji,{newState:0,oldState:0}),ke=jt(fe),wt=[9,13,27,32],Ze=zn&&"CompositionEvent"in window,_t=null;zn&&"documentMode"in document&&(_t=document.documentMode);var Yn=zn&&"TextEvent"in window&&!_t,Li=zn&&(!Ze||_t&&8<_t&&11>=_t),fi=" ",di=!1;function Fr(s,r){switch(s){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Mo=!1;function cI(s,r){switch(s){case"compositionend":return bo(r);case"keypress":return r.which!==32?null:(di=!0,fi);case"textInput":return s=r.data,s===fi&&di?null:s;default:return null}}function fI(s,r){if(Mo)return s==="compositionend"||!Ze&&Fr(s,r)?(s=$a(),Ur=Xa=Di=null,Mo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Li&&r.locale!=="ko"?null:r.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!dI[s.type]:r==="textarea"}function Tg(s,r,a,c){Vs?Pi?Pi.push(c):Pi=[c]:Vs=c,r=qc(r,"onChange"),0<r.length&&(a=new Vi("onChange","change",null,a,c),s.push({event:a,listeners:r}))}var tl=null,nl=null;function hI(s){iv(s,0)}function $u(s){var r=bn(s);if(Pr(r))return s}function Sg(s,r){if(s==="change")return r}var Ag=!1;if(zn){var Td;if(zn){var Sd="oninput"in document;if(!Sd){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Sd=typeof Cg.oninput=="function"}Td=Sd}else Td=!1;Ag=Td&&(!document.documentMode||9<document.documentMode)}function Ig(){tl&&(tl.detachEvent("onpropertychange",wg),nl=tl=null)}function wg(s){if(s.propertyName==="value"&&$u(nl)){var r=[];Tg(r,nl,s,Gn(s)),ks(hI,r)}}function pI(s,r,a){s==="focusin"?(Ig(),tl=r,nl=a,tl.attachEvent("onpropertychange",wg)):s==="focusout"&&Ig()}function mI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $u(nl)}function gI(s,r){if(s==="click")return $u(r)}function yI(s,r){if(s==="input"||s==="change")return $u(r)}function _I(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Pn=typeof Object.is=="function"?Object.is:_I;function il(s,r){if(Pn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!ht.call(r,y)||!Pn(s[y],r[y]))return!1}return!0}function Rg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ng(s,r){var a=Rg(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=r&&c>=r)return{node:a,offset:r-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rg(a)}}function xg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?xg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function bg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Mi(s.document);r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=Mi(s.document)}return r}function Ad(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var vI=zn&&"documentMode"in document&&11>=document.documentMode,Po=null,Cd=null,sl=null,Id=!1;function Mg(s,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Id||Po==null||Po!==Mi(c)||(c=Po,"selectionStart"in c&&Ad(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sl&&il(sl,c)||(sl=c,c=qc(Cd,"onSelect"),0<c.length&&(r=new Vi("onSelect","select",null,r,a),s.push({event:r,listeners:c}),r.target=Po)))}function Br(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var Do={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},wd={},Pg={};zn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Hr(s){if(wd[s])return wd[s];if(!Do[s])return s;var r=Do[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in Pg)return wd[s]=r[a];return s}var Dg=Hr("animationend"),Vg=Hr("animationiteration"),kg=Hr("animationstart"),EI=Hr("transitionrun"),TI=Hr("transitionstart"),SI=Hr("transitioncancel"),Ug=Hr("transitionend"),Lg=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function hi(s,r){Lg.set(s,r),xi(r,[s])}var ju=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Kn=[],Vo=0,Nd=0;function Zu(){for(var s=Vo,r=Nd=Vo=0;r<s;){var a=Kn[r];Kn[r++]=null;var c=Kn[r];Kn[r++]=null;var y=Kn[r];Kn[r++]=null;var _=Kn[r];if(Kn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Og(a,y,_)}}function ec(s,r,a,c){Kn[Vo++]=s,Kn[Vo++]=r,Kn[Vo++]=a,Kn[Vo++]=c,Nd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function xd(s,r,a,c){return ec(s,r,a,c),tc(s)}function Gr(s,r){return ec(s,null,null,r),tc(s)}function Og(s,r,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=s.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-It(a),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function tc(s){if(50<wl)throw wl=0,Oh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ko={};function AI(s,r,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,r,a,c){return new AI(s,r,a,c)}function bd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function es(s,r){var a=s.alternate;return a===null?(a=Dn(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function qg(s,r){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function nc(s,r,a,c,y,_){var A=0;if(c=s,typeof s=="function")bd(s)&&(A=1);else if(typeof s=="string")A=Nw(s,a,le.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Dn(31,a,r,y),s.elementType=x,s.lanes=_,s;case F:return zr(a.children,y,_,r);case B:A=8,y|=24;break;case Q:return s=Dn(12,a,r,y|2),s.elementType=Q,s.lanes=_,s;case de:return s=Dn(13,a,r,y),s.elementType=de,s.lanes=_,s;case re:return s=Dn(19,a,r,y),s.elementType=re,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:A=10;break e;case j:A=9;break e;case ue:A=11;break e;case M:A=14;break e;case P:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Dn(A,a,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function zr(s,r,a,c){return s=Dn(7,s,c,r),s.lanes=a,s}function Md(s,r,a){return s=Dn(6,s,null,r),s.lanes=a,s}function Fg(s){var r=Dn(18,null,null,0);return r.stateNode=s,r}function Pd(s,r,a){return r=Dn(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Bg=new WeakMap;function Jn(s,r){if(typeof s=="object"&&s!==null){var a=Bg.get(s);return a!==void 0?a:(r={value:s,source:r,stack:Xt(r)},Bg.set(s,r),r)}return{value:s,source:r,stack:Xt(r)}}var Uo=[],Lo=0,ic=null,rl=0,Qn=[],Wn=0,qs=null,Oi=1,qi="";function ts(s,r){Uo[Lo++]=rl,Uo[Lo++]=ic,ic=s,rl=r}function Hg(s,r,a){Qn[Wn++]=Oi,Qn[Wn++]=qi,Qn[Wn++]=qs,qs=s;var c=Oi;s=qi;var y=32-It(c)-1;c&=~(1<<y),a+=1;var _=32-It(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Oi=1<<32-It(r)+y|a<<y|c,qi=_+s}else Oi=1<<_|a<<y|c,qi=s}function Dd(s){s.return!==null&&(ts(s,1),Hg(s,1,0))}function Vd(s){for(;s===ic;)ic=Uo[--Lo],Uo[Lo]=null,rl=Uo[--Lo],Uo[Lo]=null;for(;s===qs;)qs=Qn[--Wn],Qn[Wn]=null,qi=Qn[--Wn],Qn[Wn]=null,Oi=Qn[--Wn],Qn[Wn]=null}function Gg(s,r){Qn[Wn++]=Oi,Qn[Wn++]=qi,Qn[Wn++]=qs,Oi=r.id,qi=r.overflow,qs=s}var Zt=null,pt=null,Qe=!1,Fs=null,Xn=!1,kd=Error(i(519));function Bs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(Jn(r,s)),kd}function zg(s){var r=s.stateNode,a=s.type,c=s.memoizedProps;switch(r[Mt]=s,r[zt]=c,a){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Fe(Nl[a],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Uu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Ps(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||av(r.textContent,a)?(c.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),c.onScroll!=null&&Fe("scroll",r),c.onScrollEnd!=null&&Fe("scrollend",r),c.onClick!=null&&(r.onclick=li),r=!0):r=!1,r||Bs(s,!0)}function Yg(s){for(Zt=s.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Zt=Zt.return}}function Oo(s){if(s!==Zt)return!1;if(!Qe)return Yg(s),Qe=!0,!1;var r=s.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||Zh(s.type,s.memoizedProps)),a=!a),a&&pt&&Bs(s),Yg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=gv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=gv(s)}else r===27?(r=pt,tr(s.type)?(s=sp,sp=null,pt=s):pt=r):pt=Zt?jn(s.stateNode.nextSibling):null;return!0}function Yr(){pt=Zt=null,Qe=!1}function Ud(){var s=Fs;return s!==null&&(An===null?An=s:An.push.apply(An,s),Fs=null),s}function ol(s){Fs===null?Fs=[s]:Fs.push(s)}var Ld=L(null),Kr=null,ns=null;function Hs(s,r,a){ie(Ld,r._currentValue),r._currentValue=a}function is(s){s._currentValue=Ld.current,ee(Ld)}function Od(s,r,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===a)break;s=s.return}}function qd(s,r,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<r.length;k++)if(R.context===r[k]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Od(_.return,a,s),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Od(A,a,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function qo(s,r,a,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;Pn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===Be.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Dl):s=[Dl])}y=y.return}s!==null&&qd(r,s,a,c),r.flags|=262144}function sc(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jr(s){Kr=s,ns=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function en(s){return Kg(Kr,s)}function rc(s,r){return Kr===null&&Jr(s),Kg(s,r)}function Kg(s,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ns===null){if(s===null)throw Error(i(308));ns=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ns=ns.next=r;return a}var CI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(a){return a()})}},II=n.unstable_scheduleCallback,wI=n.unstable_NormalPriority,Vt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new CI,data:new Map,refCount:0}}function al(s){s.refCount--,s.refCount===0&&II(wI,function(){s.controller.abort()})}var ll=null,Bd=0,Fo=0,Bo=null;function RI(s,r){if(ll===null){var a=ll=[];Bd=0,Fo=zh(),Bo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Bd++,r.then(Jg,Jg),r}function Jg(){if(--Bd===0&&ll!==null){Bo!==null&&(Bo.status="fulfilled");var s=ll;ll=null,Fo=0,Bo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function NI(s,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Qg=G.S;G.S=function(s,r){M_=pn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&RI(s,r),Qg!==null&&Qg(s,r)};var Qr=L(null);function Hd(){var s=Qr.current;return s!==null?s:ut.pooledCache}function oc(s,r){r===null?ie(Qr,Qr.current):ie(Qr,r.pool)}function Wg(){var s=Hd();return s===null?null:{parent:Vt._currentValue,pool:s}}var Ho=Error(i(460)),Gd=Error(i(474)),ac=Error(i(542)),lc={then:function(){}};function Xg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function $g(s,r,a){switch(a=s[a],a===void 0?s.push(r):a!==r&&(r.then(li,li),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Zg(s),s;default:if(typeof r.status=="string")r.then(li,li);else{if(s=ut,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Zg(s),s}throw Xr=r,Ho}}function Wr(s){try{var r=s._init;return r(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xr=a,Ho):a}}var Xr=null;function jg(){if(Xr===null)throw Error(i(459));var s=Xr;return Xr=null,s}function Zg(s){if(s===Ho||s===ac)throw Error(i(483))}var Go=null,ul=0;function uc(s){var r=ul;return ul+=1,Go===null&&(Go=[]),$g(Go,s,r)}function cl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function cc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ey(s){function r(H,q){if(s){var Y=H.deletions;Y===null?(H.deletions=[q],H.flags|=16):Y.push(q)}}function a(H,q){if(!s)return null;for(;q!==null;)r(H,q),q=q.sibling;return null}function c(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function y(H,q){return H=es(H,q),H.index=0,H.sibling=null,H}function _(H,q,Y){return H.index=Y,s?(Y=H.alternate,Y!==null?(Y=Y.index,Y<q?(H.flags|=67108866,q):Y):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function R(H,q,Y,te){return q===null||q.tag!==6?(q=Md(Y,H.mode,te),q.return=H,q):(q=y(q,Y),q.return=H,q)}function k(H,q,Y,te){var Ee=Y.type;return Ee===F?Z(H,q,Y.props.children,te,Y.key):q!==null&&(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&Wr(Ee)===q.type)?(q=y(q,Y.props),cl(q,Y),q.return=H,q):(q=nc(Y.type,Y.key,Y.props,null,H.mode,te),cl(q,Y),q.return=H,q)}function K(H,q,Y,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=Pd(Y,H.mode,te),q.return=H,q):(q=y(q,Y.children||[]),q.return=H,q)}function Z(H,q,Y,te,Ee){return q===null||q.tag!==7?(q=zr(Y,H.mode,te,Ee),q.return=H,q):(q=y(q,Y),q.return=H,q)}function ne(H,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Md(""+q,H.mode,Y),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return Y=nc(q.type,q.key,q.props,null,H.mode,Y),cl(Y,q),Y.return=H,Y;case O:return q=Pd(q,H.mode,Y),q.return=H,q;case P:return q=Wr(q),ne(H,q,Y)}if(Ce(q)||U(q))return q=zr(q,H.mode,Y,null),q.return=H,q;if(typeof q.then=="function")return ne(H,uc(q),Y);if(q.$$typeof===$)return ne(H,rc(H,q),Y);cc(H,q)}return null}function J(H,q,Y,te){var Ee=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:R(H,q,""+Y,te);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ee?k(H,q,Y,te):null;case O:return Y.key===Ee?K(H,q,Y,te):null;case P:return Y=Wr(Y),J(H,q,Y,te)}if(Ce(Y)||U(Y))return Ee!==null?null:Z(H,q,Y,te,null);if(typeof Y.then=="function")return J(H,q,uc(Y),te);if(Y.$$typeof===$)return J(H,q,rc(H,Y),te);cc(H,Y)}return null}function X(H,q,Y,te,Ee){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(Y)||null,R(q,H,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return H=H.get(te.key===null?Y:te.key)||null,k(q,H,te,Ee);case O:return H=H.get(te.key===null?Y:te.key)||null,K(q,H,te,Ee);case P:return te=Wr(te),X(H,q,Y,te,Ee)}if(Ce(te)||U(te))return H=H.get(Y)||null,Z(q,H,te,Ee,null);if(typeof te.then=="function")return X(H,q,Y,uc(te),Ee);if(te.$$typeof===$)return X(H,q,Y,rc(q,te),Ee);cc(q,te)}return null}function ge(H,q,Y,te){for(var Ee=null,Xe=null,_e=q,Oe=q=0,ze=null;_e!==null&&Oe<Y.length;Oe++){_e.index>Oe?(ze=_e,_e=null):ze=_e.sibling;var $e=J(H,_e,Y[Oe],te);if($e===null){_e===null&&(_e=ze);break}s&&_e&&$e.alternate===null&&r(H,_e),q=_($e,q,Oe),Xe===null?Ee=$e:Xe.sibling=$e,Xe=$e,_e=ze}if(Oe===Y.length)return a(H,_e),Qe&&ts(H,Oe),Ee;if(_e===null){for(;Oe<Y.length;Oe++)_e=ne(H,Y[Oe],te),_e!==null&&(q=_(_e,q,Oe),Xe===null?Ee=_e:Xe.sibling=_e,Xe=_e);return Qe&&ts(H,Oe),Ee}for(_e=c(_e);Oe<Y.length;Oe++)ze=X(_e,H,Oe,Y[Oe],te),ze!==null&&(s&&ze.alternate!==null&&_e.delete(ze.key===null?Oe:ze.key),q=_(ze,q,Oe),Xe===null?Ee=ze:Xe.sibling=ze,Xe=ze);return s&&_e.forEach(function(or){return r(H,or)}),Qe&&ts(H,Oe),Ee}function Ae(H,q,Y,te){if(Y==null)throw Error(i(151));for(var Ee=null,Xe=null,_e=q,Oe=q=0,ze=null,$e=Y.next();_e!==null&&!$e.done;Oe++,$e=Y.next()){_e.index>Oe?(ze=_e,_e=null):ze=_e.sibling;var or=J(H,_e,$e.value,te);if(or===null){_e===null&&(_e=ze);break}s&&_e&&or.alternate===null&&r(H,_e),q=_(or,q,Oe),Xe===null?Ee=or:Xe.sibling=or,Xe=or,_e=ze}if($e.done)return a(H,_e),Qe&&ts(H,Oe),Ee;if(_e===null){for(;!$e.done;Oe++,$e=Y.next())$e=ne(H,$e.value,te),$e!==null&&(q=_($e,q,Oe),Xe===null?Ee=$e:Xe.sibling=$e,Xe=$e);return Qe&&ts(H,Oe),Ee}for(_e=c(_e);!$e.done;Oe++,$e=Y.next())$e=X(_e,H,Oe,$e.value,te),$e!==null&&(s&&$e.alternate!==null&&_e.delete($e.key===null?Oe:$e.key),q=_($e,q,Oe),Xe===null?Ee=$e:Xe.sibling=$e,Xe=$e);return s&&_e.forEach(function(qw){return r(H,qw)}),Qe&&ts(H,Oe),Ee}function lt(H,q,Y,te){if(typeof Y=="object"&&Y!==null&&Y.type===F&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ee=Y.key;q!==null;){if(q.key===Ee){if(Ee=Y.type,Ee===F){if(q.tag===7){a(H,q.sibling),te=y(q,Y.props.children),te.return=H,H=te;break e}}else if(q.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&Wr(Ee)===q.type){a(H,q.sibling),te=y(q,Y.props),cl(te,Y),te.return=H,H=te;break e}a(H,q);break}else r(H,q);q=q.sibling}Y.type===F?(te=zr(Y.props.children,H.mode,te,Y.key),te.return=H,H=te):(te=nc(Y.type,Y.key,Y.props,null,H.mode,te),cl(te,Y),te.return=H,H=te)}return A(H);case O:e:{for(Ee=Y.key;q!==null;){if(q.key===Ee)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){a(H,q.sibling),te=y(q,Y.children||[]),te.return=H,H=te;break e}else{a(H,q);break}else r(H,q);q=q.sibling}te=Pd(Y,H.mode,te),te.return=H,H=te}return A(H);case P:return Y=Wr(Y),lt(H,q,Y,te)}if(Ce(Y))return ge(H,q,Y,te);if(U(Y)){if(Ee=U(Y),typeof Ee!="function")throw Error(i(150));return Y=Ee.call(Y),Ae(H,q,Y,te)}if(typeof Y.then=="function")return lt(H,q,uc(Y),te);if(Y.$$typeof===$)return lt(H,q,rc(H,Y),te);cc(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(a(H,q.sibling),te=y(q,Y),te.return=H,H=te):(a(H,q),te=Md(Y,H.mode,te),te.return=H,H=te),A(H)):a(H,q)}return function(H,q,Y,te){try{ul=0;var Ee=lt(H,q,Y,te);return Go=null,Ee}catch(_e){if(_e===Ho||_e===ac)throw _e;var Xe=Dn(29,_e,null,H.mode);return Xe.lanes=te,Xe.return=H,Xe}finally{}}}var $r=ey(!0),ty=ey(!1),Gs=!1;function zd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(s,r,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=tc(s),Og(s,null,a),r}return ec(s,c,r,a),tc(s)}function fl(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,Oa(s,a)}}function Kd(s,r){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}var Jd=!1;function dl(){if(Jd){var s=Bo;if(s!==null)throw s}}function hl(s,r,a,c){Jd=!1;var y=s.updateQueue;Gs=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,K=k.next;k.next=null,A===null?_=K:A.next=K,A=k;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==A&&(R===null?Z.firstBaseUpdate=K:R.next=K,Z.lastBaseUpdate=k))}if(_!==null){var ne=y.baseState;A=0,Z=K=k=null,R=_;do{var J=R.lane&-536870913,X=J!==R.lane;if(X?(Ge&J)===J:(c&J)===J){J!==0&&J===Fo&&(Jd=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Ae=R;J=r;var lt=a;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){ne=ge.call(lt,ne,J);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,J=typeof ge=="function"?ge.call(lt,ne,J):ge,J==null)break e;ne=E({},ne,J);break e;case 2:Gs=!0}}J=R.callback,J!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[J]:X.push(J))}else X={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(K=Z=X,k=ne):Z=Z.next=X,A|=J;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);Z===null&&(k=ne),y.baseState=k,y.firstBaseUpdate=K,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Xs|=A,s.lanes=A,s.memoizedState=ne}}function ny(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function iy(s,r){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)ny(a[s],r)}var zo=L(null),fc=L(0);function sy(s,r){s=ds,ie(fc,s),ie(zo,r),ds=s|r.baseLanes}function Qd(){ie(fc,ds),ie(zo,zo.current)}function Wd(){ds=fc.current,ee(zo),ee(fc)}var Vn=L(null),$n=null;function Ks(s){var r=s.alternate;ie(Rt,Rt.current&1),ie(Vn,s),$n===null&&(r===null||zo.current!==null||r.memoizedState!==null)&&($n=s)}function Xd(s){ie(Rt,Rt.current),ie(Vn,s),$n===null&&($n=s)}function ry(s){s.tag===22?(ie(Rt,Rt.current),ie(Vn,s),$n===null&&($n=s)):Js()}function Js(){ie(Rt,Rt.current),ie(Vn,Vn.current)}function kn(s){ee(Vn),$n===s&&($n=null),ee(Rt)}var Rt=L(0);function dc(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||np(a)||ip(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ss=0,Ue=null,ot=null,kt=null,hc=!1,Yo=!1,jr=!1,pc=0,pl=0,Ko=null,xI=0;function St(){throw Error(i(321))}function $d(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!Pn(s[a],r[a]))return!1;return!0}function jd(s,r,a,c,y,_){return ss=_,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=s===null||s.memoizedState===null?Hy:hh,jr=!1,_=a(c,y),jr=!1,Yo&&(_=ay(r,a,c,y)),oy(s),_}function oy(s){G.H=yl;var r=ot!==null&&ot.next!==null;if(ss=0,kt=ot=Ue=null,hc=!1,pl=0,Ko=null,r)throw Error(i(300));s===null||Ut||(s=s.dependencies,s!==null&&sc(s)&&(Ut=!0))}function ay(s,r,a,c){Ue=s;var y=0;do{if(Yo&&(Ko=null),pl=0,Yo=!1,25<=y)throw Error(i(301));if(y+=1,kt=ot=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}G.H=Gy,_=r(a,c)}while(Yo);return _}function bI(){var s=G.H,r=s.useState()[0];return r=typeof r.then=="function"?ml(r):r,s=s.useState()[0],(ot!==null?ot.memoizedState:null)!==s&&(Ue.flags|=1024),r}function Zd(){var s=pc!==0;return pc=0,s}function eh(s,r,a){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~a}function th(s){if(hc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}hc=!1}ss=0,kt=ot=Ue=null,Yo=!1,pl=pc=0,Ko=null}function gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ue.memoizedState=kt=s:kt=kt.next=s,kt}function Nt(){if(ot===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=ot.next;var r=kt===null?Ue.memoizedState:kt.next;if(r!==null)kt=r,ot=s;else{if(s===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));ot=s,s={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},kt===null?Ue.memoizedState=kt=s:kt=kt.next=s}return kt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(s){var r=pl;return pl+=1,Ko===null&&(Ko=[]),s=$g(Ko,s,r),r=Ue,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?Hy:hh),s}function gc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ml(s);if(s.$$typeof===$)return en(s)}throw Error(i(438,String(s)))}function nh(s){var r=null,a=Ue.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=mc(),Ue.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(s),c=0;c<s;c++)a[c]=D;return r.index++,a}function rs(s,r){return typeof r=="function"?r(s):r}function yc(s){var r=Nt();return ih(r,ot,s)}function ih(s,r,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var R=A=null,k=null,K=r,Z=!1;do{var ne=K.lane&-536870913;if(ne!==K.lane?(Ge&ne)===ne:(ss&ne)===ne){var J=K.revertLane;if(J===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ne===Fo&&(Z=!0);else if((ss&J)===J){K=K.next,J===Fo&&(Z=!0);continue}else ne={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(R=k=ne,A=_):k=k.next=ne,Ue.lanes|=J,Xs|=J;ne=K.action,jr&&a(_,ne),_=K.hasEagerState?K.eagerState:a(_,ne)}else J={lane:ne,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(R=k=J,A=_):k=k.next=J,Ue.lanes|=ne,Xs|=ne;K=K.next}while(K!==null&&K!==r);if(k===null?A=_:k.next=R,!Pn(_,s.memoizedState)&&(Ut=!0,Z&&(a=Bo,a!==null)))throw a;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function sh(s){var r=Nt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Pn(_,r.memoizedState)||(Ut=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function ly(s,r,a){var c=Ue,y=Nt(),_=Qe;if(_){if(a===void 0)throw Error(i(407));a=a()}else a=r();var A=!Pn((ot||y).memoizedState,a);if(A&&(y.memoizedState=a,Ut=!0),y=y.queue,ah(fy.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,Jo(9,{destroy:void 0},cy.bind(null,c,y,a,r),null),ut===null)throw Error(i(349));_||(ss&127)!==0||uy(c,r,a)}return a}function uy(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=Ue.updateQueue,r===null?(r=mc(),Ue.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function cy(s,r,a,c){r.value=a,r.getSnapshot=c,dy(r)&&hy(s)}function fy(s,r,a){return a(function(){dy(r)&&hy(s)})}function dy(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!Pn(s,a)}catch{return!0}}function hy(s){var r=Gr(s,2);r!==null&&Cn(r,s,2)}function rh(s){var r=gn();if(typeof s=="function"){var a=s;if(s=a(),jr){Bn(!0);try{a()}finally{Bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:s},r}function py(s,r,a,c){return s.baseState=a,ih(s,ot,typeof c=="function"?c:rs)}function MI(s,r,a,c,y){if(Ec(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};G.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,my(r,_)):(_.next=a.next,r.pending=a.next=_)}}function my(s,r){var a=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=G.T,A={};G.T=A;try{var R=a(y,c),k=G.S;k!==null&&k(A,R),gy(s,r,R)}catch(K){oh(s,r,K)}finally{_!==null&&A.types!==null&&(_.types=A.types),G.T=_}}else try{_=a(y,c),gy(s,r,_)}catch(K){oh(s,r,K)}}function gy(s,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){yy(s,r,c)},function(c){return oh(s,r,c)}):yy(s,r,a)}function yy(s,r,a){r.status="fulfilled",r.value=a,_y(r),s.state=a,r=s.pending,r!==null&&(a=r.next,a===r?s.pending=null:(a=a.next,r.next=a,my(s,a)))}function oh(s,r,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,_y(r),r=r.next;while(r!==c)}s.action=null}function _y(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function vy(s,r){return r}function Ey(s,r){if(Qe){var a=ut.formState;if(a!==null){e:{var c=Ue;if(Qe){if(pt){t:{for(var y=pt,_=Xn;y.nodeType!==8;){if(!_){y=null;break t}if(y=jn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pt=jn(y.nextSibling),c=y.data==="F!";break e}}Bs(c)}c=!1}c&&(r=a[0])}}return a=gn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:r},a.queue=c,a=qy.bind(null,Ue,c),c.dispatch=a,c=rh(!1),_=dh.bind(null,Ue,!1,c.queue),c=gn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,a=MI.bind(null,Ue,y,_,a),y.dispatch=a,c.memoizedState=s,[r,a,!1]}function Ty(s){var r=Nt();return Sy(r,ot,s)}function Sy(s,r,a){if(r=ih(s,r,vy)[0],s=yc(rs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=ml(r)}catch(A){throw A===Ho?ac:A}else c=r;r=Nt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ue.flags|=2048,Jo(9,{destroy:void 0},PI.bind(null,y,a),null)),[c,_,s]}function PI(s,r){s.action=r}function Ay(s){var r=Nt(),a=ot;if(a!==null)return Sy(r,a,s);Nt(),r=r.memoizedState,a=Nt();var c=a.queue.dispatch;return a.memoizedState=s,[r,c,!1]}function Jo(s,r,a,c){return s={tag:s,create:a,deps:c,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=mc(),Ue.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,r.lastEffect=s),s}function Cy(){return Nt().memoizedState}function _c(s,r,a,c){var y=gn();Ue.flags|=s,y.memoizedState=Jo(1|r,{destroy:void 0},a,c===void 0?null:c)}function vc(s,r,a,c){var y=Nt();c=c===void 0?null:c;var _=y.memoizedState.inst;ot!==null&&c!==null&&$d(c,ot.memoizedState.deps)?y.memoizedState=Jo(r,_,a,c):(Ue.flags|=s,y.memoizedState=Jo(1|r,_,a,c))}function Iy(s,r){_c(8390656,8,s,r)}function ah(s,r){vc(2048,8,s,r)}function DI(s){Ue.flags|=4;var r=Ue.updateQueue;if(r===null)r=mc(),Ue.updateQueue=r,r.events=[s];else{var a=r.events;a===null?r.events=[s]:a.push(s)}}function wy(s){var r=Nt().memoizedState;return DI({ref:r,nextImpl:s}),function(){if((et&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Ry(s,r){return vc(4,2,s,r)}function Ny(s,r){return vc(4,4,s,r)}function xy(s,r){if(typeof r=="function"){s=s();var a=r(s);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function by(s,r,a){a=a!=null?a.concat([s]):null,vc(4,4,xy.bind(null,r,s),a)}function lh(){}function My(s,r){var a=Nt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&$d(r,c[1])?c[0]:(a.memoizedState=[s,r],s)}function Py(s,r){var a=Nt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&$d(r,c[1]))return c[0];if(c=s(),jr){Bn(!0);try{s()}finally{Bn(!1)}}return a.memoizedState=[c,r],c}function uh(s,r,a){return a===void 0||(ss&1073741824)!==0&&(Ge&261930)===0?s.memoizedState=r:(s.memoizedState=a,s=D_(),Ue.lanes|=s,Xs|=s,a)}function Dy(s,r,a,c){return Pn(a,r)?a:zo.current!==null?(s=uh(s,a,c),Pn(s,r)||(Ut=!0),s):(ss&42)===0||(ss&1073741824)!==0&&(Ge&261930)===0?(Ut=!0,s.memoizedState=a):(s=D_(),Ue.lanes|=s,Xs|=s,r)}function Vy(s,r,a,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=G.T,R={};G.T=R,dh(s,!1,r,a);try{var k=y(),K=G.S;if(K!==null&&K(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=NI(k,c);gl(s,r,Z,On(s))}else gl(s,r,c,On(s))}catch(ne){gl(s,r,{then:function(){},status:"rejected",reason:ne},On())}finally{ae.p=_,A!==null&&R.types!==null&&(A.types=R.types),G.T=A}}function VI(){}function ch(s,r,a,c){if(s.tag!==5)throw Error(i(476));var y=ky(s).queue;Vy(s,y,r,ce,a===null?VI:function(){return Uy(s),a(c)})}function ky(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:a},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Uy(s){var r=ky(s);r.next===null&&(r=s.alternate.memoizedState),gl(s,r.next.queue,{},On())}function fh(){return en(Dl)}function Ly(){return Nt().memoizedState}function Oy(){return Nt().memoizedState}function kI(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var a=On();s=zs(a);var c=Ys(r,s,a);c!==null&&(Cn(c,r,a),fl(c,r,a)),r={cache:Fd()},s.payload=r;return}r=r.return}}function UI(s,r,a){var c=On();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ec(s)?Fy(r,a):(a=xd(s,r,a,c),a!==null&&(Cn(a,s,c),By(a,r,c)))}function qy(s,r,a){var c=On();gl(s,r,a,c)}function gl(s,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ec(s))Fy(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,R=_(A,a);if(y.hasEagerState=!0,y.eagerState=R,Pn(R,A))return ec(s,r,y,0),ut===null&&Zu(),!1}catch{}finally{}if(a=xd(s,r,y,c),a!==null)return Cn(a,s,c),By(a,r,c),!0}return!1}function dh(s,r,a,c){if(c={lane:2,revertLane:zh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ec(s)){if(r)throw Error(i(479))}else r=xd(s,a,c,2),r!==null&&Cn(r,s,2)}function Ec(s){var r=s.alternate;return s===Ue||r!==null&&r===Ue}function Fy(s,r){Yo=hc=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function By(s,r,a){if((a&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,Oa(s,a)}}var yl={readContext:en,use:gc,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};yl.useEffectEvent=St;var Hy={readContext:en,use:gc,useCallback:function(s,r){return gn().memoizedState=[s,r===void 0?null:r],s},useContext:en,useEffect:Iy,useImperativeHandle:function(s,r,a){a=a!=null?a.concat([s]):null,_c(4194308,4,xy.bind(null,r,s),a)},useLayoutEffect:function(s,r){return _c(4194308,4,s,r)},useInsertionEffect:function(s,r){_c(4,2,s,r)},useMemo:function(s,r){var a=gn();r=r===void 0?null:r;var c=s();if(jr){Bn(!0);try{s()}finally{Bn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(s,r,a){var c=gn();if(a!==void 0){var y=a(r);if(jr){Bn(!0);try{a(r)}finally{Bn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=UI.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var r=gn();return s={current:s},r.memoizedState=s},useState:function(s){s=rh(s);var r=s.queue,a=qy.bind(null,Ue,r);return r.dispatch=a,[s.memoizedState,a]},useDebugValue:lh,useDeferredValue:function(s,r){var a=gn();return uh(a,s,r)},useTransition:function(){var s=rh(!1);return s=Vy.bind(null,Ue,s.queue,!0,!1),gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,a){var c=Ue,y=gn();if(Qe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),ut===null)throw Error(i(349));(Ge&127)!==0||uy(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Iy(fy.bind(null,c,_,s),[s]),c.flags|=2048,Jo(9,{destroy:void 0},cy.bind(null,c,_,a,r),null),a},useId:function(){var s=gn(),r=ut.identifierPrefix;if(Qe){var a=qi,c=Oi;a=(c&~(1<<32-It(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=pc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=xI++,r="_"+r+"r_"+a.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:fh,useFormState:Ey,useActionState:Ey,useOptimistic:function(s){var r=gn();r.memoizedState=r.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=dh.bind(null,Ue,!0,a),a.dispatch=r,[s,r]},useMemoCache:nh,useCacheRefresh:function(){return gn().memoizedState=kI.bind(null,Ue)},useEffectEvent:function(s){var r=gn(),a={impl:s};return r.memoizedState=a,function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},hh={readContext:en,use:gc,useCallback:My,useContext:en,useEffect:ah,useImperativeHandle:by,useInsertionEffect:Ry,useLayoutEffect:Ny,useMemo:Py,useReducer:yc,useRef:Cy,useState:function(){return yc(rs)},useDebugValue:lh,useDeferredValue:function(s,r){var a=Nt();return Dy(a,ot.memoizedState,s,r)},useTransition:function(){var s=yc(rs)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:ml(s),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:fh,useFormState:Ty,useActionState:Ty,useOptimistic:function(s,r){var a=Nt();return py(a,ot,s,r)},useMemoCache:nh,useCacheRefresh:Oy};hh.useEffectEvent=wy;var Gy={readContext:en,use:gc,useCallback:My,useContext:en,useEffect:ah,useImperativeHandle:by,useInsertionEffect:Ry,useLayoutEffect:Ny,useMemo:Py,useReducer:sh,useRef:Cy,useState:function(){return sh(rs)},useDebugValue:lh,useDeferredValue:function(s,r){var a=Nt();return ot===null?uh(a,s,r):Dy(a,ot.memoizedState,s,r)},useTransition:function(){var s=sh(rs)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:ml(s),r]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:fh,useFormState:Ay,useActionState:Ay,useOptimistic:function(s,r){var a=Nt();return ot!==null?py(a,ot,s,r):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:nh,useCacheRefresh:Oy};Gy.useEffectEvent=wy;function ph(s,r,a,c){r=s.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var mh={enqueueSetState:function(s,r,a){s=s._reactInternals;var c=On(),y=zs(c);y.payload=r,a!=null&&(y.callback=a),r=Ys(s,y,c),r!==null&&(Cn(r,s,c),fl(r,s,c))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var c=On(),y=zs(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ys(s,y,c),r!==null&&(Cn(r,s,c),fl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=On(),c=zs(a);c.tag=2,r!=null&&(c.callback=r),r=Ys(s,c,a),r!==null&&(Cn(r,s,a),fl(r,s,a))}};function zy(s,r,a,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!il(a,c)||!il(y,_):!0}function Yy(s,r,a,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==s&&mh.enqueueReplaceState(r,r.state,null)}function Zr(s,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(s=s.defaultProps){a===r&&(a=E({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function Ky(s){ju(s)}function Jy(s){console.error(s)}function Qy(s){ju(s)}function Tc(s,r){try{var a=s.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Wy(s,r,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function gh(s,r,a){return a=zs(a),a.tag=3,a.payload={element:null},a.callback=function(){Tc(s,r)},a}function Xy(s){return s=zs(s),s.tag=3,s}function $y(s,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){Wy(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Wy(r,a,c),typeof y!="function"&&($s===null?$s=new Set([this]):$s.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function LI(s,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&qo(r,a,y,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return $n===null?Dc():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===lc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Bh(s,c,y)),!1;case 22:return a.flags|=65536,c===lc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Bh(s,c,y)),!1}throw Error(i(435,a.tag))}return Bh(s,c,y),Dc(),!1}if(Qe)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==kd&&(s=Error(i(422),{cause:c}),ol(Jn(s,a)))):(c!==kd&&(r=Error(i(423),{cause:c}),ol(Jn(r,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Jn(c,a),y=gh(s.stateNode,c,y),Kd(s,y),At!==4&&(At=2)),!1;var _=Error(i(520),{cause:c});if(_=Jn(_,a),Il===null?Il=[_]:Il.push(_),At!==4&&(At=2),r===null)return!0;c=Jn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=gh(a.stateNode,c,s),Kd(a,s),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Xy(y),$y(y,s,a,c),Kd(a,y),!1}a=a.return}while(a!==null);return!1}var yh=Error(i(461)),Ut=!1;function tn(s,r,a,c){r.child=s===null?ty(r,null,a,c):$r(r,s.child,a,c)}function jy(s,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Jr(r),c=jd(s,r,a,A,_,y),R=Zd(),s!==null&&!Ut?(eh(s,r,y),os(s,r,y)):(Qe&&R&&Dd(r),r.flags|=1,tn(s,r,c,y),r.child)}function Zy(s,r,a,c,y){if(s===null){var _=a.type;return typeof _=="function"&&!bd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,e_(s,r,_,c,y)):(s=nc(a.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Ih(s,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(A,c)&&s.ref===r.ref)return os(s,r,y)}return r.flags|=1,s=es(_,c),s.ref=r.ref,s.return=r,r.child=s}function e_(s,r,a,c,y){if(s!==null){var _=s.memoizedProps;if(il(_,c)&&s.ref===r.ref)if(Ut=!1,r.pendingProps=c=_,Ih(s,y))(s.flags&131072)!==0&&(Ut=!0);else return r.lanes=s.lanes,os(s,r,y)}return _h(s,r,a,c,y)}function t_(s,r,a,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return n_(s,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&oc(r,_!==null?_.cachePool:null),_!==null?sy(r,_):Qd(),ry(r);else return c=r.lanes=536870912,n_(s,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(oc(r,_.cachePool),sy(r,_),Js(),r.memoizedState=null):(s!==null&&oc(r,null),Qd(),Js());return tn(s,r,y,a),r.child}function _l(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function n_(s,r,a,c,y){var _=Hd();return _=_===null?null:{parent:Vt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},s!==null&&oc(r,null),Qd(),ry(r),s!==null&&qo(s,r,c,!0),r.childLanes=y,null}function Sc(s,r){return r=Cc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function i_(s,r,a){return $r(r,s.child,null,a),s=Sc(r,r.pendingProps),s.flags|=2,kn(r),r.memoizedState=null,s}function OI(s,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Qe){if(c.mode==="hidden")return s=Sc(r,c),r.lanes=536870912,_l(null,s);if(Xd(r),(s=pt)?(s=mv(s,Xn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:Oi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(s),a.return=r,r.child=a,Zt=r,pt=null)):s=null,s===null)throw Bs(r);return r.lanes=536870912,null}return Sc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(Xd(r),y)if(r.flags&256)r.flags&=-257,r=i_(s,r,a);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ut||qo(s,r,a,!1),y=(a&s.childLanes)!==0,Ut||y){if(c=ut,c!==null&&(A=qa(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Gr(s,A),Cn(c,s,A),yh;Dc(),r=i_(s,r,a)}else s=_.treeContext,pt=jn(A.nextSibling),Zt=r,Qe=!0,Fs=null,Xn=!1,s!==null&&Gg(r,s),r=Sc(r,c),r.flags|=4096;return r}return s=es(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Ac(s,r){var a=r.ref;if(a===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(r.flags|=4194816)}}function _h(s,r,a,c,y){return Jr(r),a=jd(s,r,a,c,void 0,y),c=Zd(),s!==null&&!Ut?(eh(s,r,y),os(s,r,y)):(Qe&&c&&Dd(r),r.flags|=1,tn(s,r,a,y),r.child)}function s_(s,r,a,c,y,_){return Jr(r),r.updateQueue=null,a=ay(r,c,a,y),oy(s),c=Zd(),s!==null&&!Ut?(eh(s,r,_),os(s,r,_)):(Qe&&c&&Dd(r),r.flags|=1,tn(s,r,a,_),r.child)}function r_(s,r,a,c,y){if(Jr(r),r.stateNode===null){var _=ko,A=a.contextType;typeof A=="object"&&A!==null&&(_=en(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=mh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},zd(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?en(A):ko,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(ph(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&mh.enqueueReplaceState(_,_.state,null),hl(r,c,_,y),dl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var R=r.memoizedProps,k=Zr(a,R);_.props=k;var K=_.context,Z=a.contextType;A=ko,typeof Z=="object"&&Z!==null&&(A=en(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||K!==A)&&Yy(r,_,c,A),Gs=!1;var J=r.memoizedState;_.state=J,hl(r,c,_,y),dl(),K=r.memoizedState,R||J!==K||Gs?(typeof ne=="function"&&(ph(r,a,ne,c),K=r.memoizedState),(k=Gs||zy(r,a,k,c,J,K,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),_.props=c,_.state=K,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Yd(s,r),A=r.memoizedProps,Z=Zr(a,A),_.props=Z,ne=r.pendingProps,J=_.context,K=a.contextType,k=ko,typeof K=="object"&&K!==null&&(k=en(K)),R=a.getDerivedStateFromProps,(K=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||J!==k)&&Yy(r,_,c,k),Gs=!1,J=r.memoizedState,_.state=J,hl(r,c,_,y),dl();var X=r.memoizedState;A!==ne||J!==X||Gs||s!==null&&s.dependencies!==null&&sc(s.dependencies)?(typeof R=="function"&&(ph(r,a,R,c),X=r.memoizedState),(Z=Gs||zy(r,a,Z,c,J,X,k)||s!==null&&s.dependencies!==null&&sc(s.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),_.props=c,_.state=X,_.context=k,c=Z):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Ac(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=$r(r,s.child,null,y),r.child=$r(r,null,a,y)):tn(s,r,a,y),r.memoizedState=_.state,s=r.child):s=os(s,r,y),s}function o_(s,r,a,c){return Yr(),r.flags|=256,tn(s,r,a,c),r.child}var vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(s){return{baseLanes:s,cachePool:Wg()}}function Th(s,r,a){return s=s!==null?s.childLanes&~a:0,r&&(s|=Ln),s}function a_(s,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Rt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Qe){if(y?Ks(r):Js(),(s=pt)?(s=mv(s,Xn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:qs!==null?{id:Oi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=Fg(s),a.return=r,r.child=a,Zt=r,pt=null)):s=null,s===null)throw Bs(r);return ip(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Js(),y=r.mode,R=Cc({mode:"hidden",children:R},y),c=zr(c,y,a,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Eh(a),c.childLanes=Th(s,A,a),r.memoizedState=vh,_l(null,c)):(Ks(r),Sh(r,R))}var k=s.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)r.flags&256?(Ks(r),r.flags&=-257,r=Ah(s,r,a)):r.memoizedState!==null?(Js(),r.child=s.child,r.flags|=128,r=null):(Js(),R=c.fallback,y=r.mode,c=Cc({mode:"visible",children:c.children},y),R=zr(R,y,a,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,$r(r,s.child,null,a),c=r.child,c.memoizedState=Eh(a),c.childLanes=Th(s,A,a),r.memoizedState=vh,r=_l(null,c));else if(Ks(r),ip(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(i(419)),c.stack="",c.digest=A,ol({value:c,source:null,stack:null}),r=Ah(s,r,a)}else if(Ut||qo(s,r,a,!1),A=(a&s.childLanes)!==0,Ut||A){if(A=ut,A!==null&&(c=qa(A,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,Gr(s,c),Cn(A,s,c),yh;np(R)||Dc(),r=Ah(s,r,a)}else np(R)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,pt=jn(R.nextSibling),Zt=r,Qe=!0,Fs=null,Xn=!1,s!==null&&Gg(r,s),r=Sh(r,c.children),r.flags|=4096);return r}return y?(Js(),R=c.fallback,y=r.mode,k=s.child,K=k.sibling,c=es(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,K!==null?R=es(K,R):(R=zr(R,y,a,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,_l(null,c),c=r.child,R=s.child.memoizedState,R===null?R=Eh(a):(y=R.cachePool,y!==null?(k=Vt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=Wg(),R={baseLanes:R.baseLanes|a,cachePool:y}),c.memoizedState=R,c.childLanes=Th(s,A,a),r.memoizedState=vh,_l(s.child,c)):(Ks(r),a=s.child,s=a.sibling,a=es(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=a,r.memoizedState=null,a)}function Sh(s,r){return r=Cc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Cc(s,r){return s=Dn(22,s,null,r),s.lanes=0,s}function Ah(s,r,a){return $r(r,s.child,null,a),s=Sh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function l_(s,r,a){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Od(s.return,r,a)}function Ch(s,r,a,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function u_(s,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Rt.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,ie(Rt,A),tn(s,r,c,a),c=Qe?rl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&l_(s,a,r);else if(s.tag===19)l_(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)s=a.alternate,s!==null&&dc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Ch(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&dc(s)===null){r.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}Ch(r,!0,a,null,_,c);break;case"together":Ch(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function os(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),Xs|=r.lanes,(a&r.childLanes)===0)if(s!==null){if(qo(s,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,a=es(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=es(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function Ih(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&sc(s)))}function qI(s,r,a){switch(r.tag){case 3:Ct(r,r.stateNode.containerInfo),Hs(r,Vt,s.memoizedState.cache),Yr();break;case 27:case 5:Ei(r);break;case 4:Ct(r,r.stateNode.containerInfo);break;case 10:Hs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Xd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ks(r),r.flags|=128,null):(a&r.child.childLanes)!==0?a_(s,r,a):(Ks(r),s=os(s,r,a),s!==null?s.sibling:null);Ks(r);break;case 19:var y=(s.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(qo(s,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return u_(s,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Rt,Rt.current),c)break;return null;case 22:return r.lanes=0,t_(s,r,a,r.pendingProps);case 24:Hs(r,Vt,s.memoizedState.cache)}return os(s,r,a)}function c_(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ut=!0;else{if(!Ih(s,a)&&(r.flags&128)===0)return Ut=!1,qI(s,r,a);Ut=(s.flags&131072)!==0}else Ut=!1,Qe&&(r.flags&1048576)!==0&&Hg(r,rl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Wr(r.elementType),r.type=s,typeof s=="function")bd(s)?(c=Zr(s,c),r.tag=1,r=r_(null,r,s,c,a)):(r.tag=0,r=_h(null,r,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===ue){r.tag=11,r=jy(null,r,s,c,a);break e}else if(y===M){r.tag=14,r=Zy(null,r,s,c,a);break e}}throw r=Te(s)||s,Error(i(306,r,""))}}return r;case 0:return _h(s,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=Zr(c,r.pendingProps),r_(s,r,c,y,a);case 3:e:{if(Ct(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Yd(s,r),hl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,Hs(r,Vt,c),c!==_.cache&&qd(r,[Vt],a,!0),dl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=o_(s,r,c,a);break e}else if(c!==y){y=Jn(Error(i(424)),r),ol(y),r=o_(s,r,c,a);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pt=jn(s.firstChild),Zt=r,Qe=!0,Fs=null,Xn=!0,a=ty(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yr(),c===y){r=os(s,r,a);break e}tn(s,r,c,a)}r=r.child}return r;case 26:return Ac(s,r),s===null?(a=Tv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qe||(a=r.type,s=r.pendingProps,c=Fc(Ie.current).createElement(a),c[Mt]=r,c[zt]=s,nn(c,a,s),Pt(c),r.stateNode=c):r.memoizedState=Tv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ei(r),s===null&&Qe&&(c=r.stateNode=_v(r.type,r.pendingProps,Ie.current),Zt=r,Xn=!0,y=pt,tr(r.type)?(sp=y,pt=jn(c.firstChild)):pt=y),tn(s,r,r.pendingProps.children,a),Ac(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Qe&&((y=c=pt)&&(c=mw(c,r.type,r.pendingProps,Xn),c!==null?(r.stateNode=c,Zt=r,pt=jn(c.firstChild),Xn=!1,y=!0):y=!1),y||Bs(r)),Ei(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,Zh(y,_)?c=null:A!==null&&Zh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=jd(s,r,bI,null,null,a),Dl._currentValue=y),Ac(s,r),tn(s,r,c,a),r.child;case 6:return s===null&&Qe&&((s=a=pt)&&(a=gw(a,r.pendingProps,Xn),a!==null?(r.stateNode=a,Zt=r,pt=null,s=!0):s=!1),s||Bs(r)),null;case 13:return a_(s,r,a);case 4:return Ct(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=$r(r,null,c,a):tn(s,r,c,a),r.child;case 11:return jy(s,r,r.type,r.pendingProps,a);case 7:return tn(s,r,r.pendingProps,a),r.child;case 8:return tn(s,r,r.pendingProps.children,a),r.child;case 12:return tn(s,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Hs(r,r.type,c.value),tn(s,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Jr(r),y=en(y),c=c(y),r.flags|=1,tn(s,r,c,a),r.child;case 14:return Zy(s,r,r.type,r.pendingProps,a);case 15:return e_(s,r,r.type,r.pendingProps,a);case 19:return u_(s,r,a);case 31:return OI(s,r,a);case 22:return t_(s,r,a,r.pendingProps);case 24:return Jr(r),c=en(Vt),s===null?(y=Hd(),y===null&&(y=ut,_=Fd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},zd(r),Hs(r,Vt,y)):((s.lanes&a)!==0&&(Yd(s,r),hl(r,null,null,a),dl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Hs(r,Vt,c)):(c=_.cache,Hs(r,Vt,c),c!==y.cache&&qd(r,[Vt],a,!0))),tn(s,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function as(s){s.flags|=4}function wh(s,r,a,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(L_())s.flags|=8192;else throw Xr=lc,Gd}else s.flags&=-16777217}function f_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!wv(r))if(L_())s.flags|=8192;else throw Xr=lc,Gd}function Ic(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Mu():536870912,s.lanes|=r,$o|=r)}function vl(s,r){if(!Qe)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function mt(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(r)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,r}function FI(s,r,a){var c=r.pendingProps;switch(Vd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return a=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),is(Vt),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Oo(r)?as(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ud())),mt(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(as(r),_!==null?(mt(r),f_(r,_)):(mt(r),wh(r,y,null,c,a))):_?_!==s.memoizedState?(as(r),mt(r),f_(r,_)):(mt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&as(r),mt(r),wh(r,y,s,c,a)),null;case 27:if(Ve(r),a=Ie.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&as(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return mt(r),null}s=le.current,Oo(r)?zg(r):(s=_v(y,c,a),r.stateNode=s,as(r))}return mt(r),null;case 5:if(Ve(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&as(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return mt(r),null}if(_=le.current,Oo(r))zg(r);else{var A=Fc(Ie.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[Mt]=r,_[zt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(nn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&as(r)}}return mt(r),wh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,a),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&as(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Ie.current,Oo(r)){if(s=r.stateNode,a=r.memoizedProps,c=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Mt]=r,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||av(s.nodeValue,a)),s||Bs(r,!0)}else s=Fc(s).createTextNode(c),s[Mt]=r,r.stateNode=s}return mt(r),null;case 31:if(a=r.memoizedState,s===null||s.memoizedState!==null){if(c=Oo(r),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Mt]=r}else Yr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),s=!1}else a=Ud(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return r.flags&256?(kn(r),r):(kn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return mt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Oo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Mt]=r}else Yr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),y=!1}else y=Ud(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(kn(r),r):(kn(r),null)}return kn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==s&&a&&(r.child.flags|=8192),Ic(r,r.updateQueue),mt(r),null);case 4:return dt(),s===null&&Qh(r.stateNode.containerInfo),mt(r),null;case 10:return is(r.type),mt(r),null;case 19:if(ee(Rt),c=r.memoizedState,c===null)return mt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)vl(c,!1);else{if(At!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=dc(s),_!==null){for(r.flags|=128,vl(c,!1),s=_.updateQueue,r.updateQueue=s,Ic(r,s),r.subtreeFlags=0,s=a,a=r.child;a!==null;)qg(a,s),a=a.sibling;return ie(Rt,Rt.current&1|2),Qe&&ts(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&pn()>bc&&(r.flags|=128,y=!0,vl(c,!1),r.lanes=4194304)}else{if(!y)if(s=dc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Ic(r,s),vl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Qe)return mt(r),null}else 2*pn()-c.renderingStartTime>bc&&a!==536870912&&(r.flags|=128,y=!0,vl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=pn(),s.sibling=null,a=Rt.current,ie(Rt,y?a&1|2:a&1),Qe&&ts(r,c.treeForkCount),s):(mt(r),null);case 22:case 23:return kn(r),Wd(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),a=r.updateQueue,a!==null&&Ic(r,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),s!==null&&ee(Qr),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),is(Vt),mt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function BI(s,r){switch(Vd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return is(Vt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ve(r),null;case 31:if(r.memoizedState!==null){if(kn(r),r.alternate===null)throw Error(i(340));Yr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(kn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Yr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ee(Rt),null;case 4:return dt(),null;case 10:return is(r.type),null;case 22:case 23:return kn(r),Wd(),s!==null&&ee(Qr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return is(Vt),null;case 25:return null;default:return null}}function d_(s,r){switch(Vd(r),r.tag){case 3:is(Vt),dt();break;case 26:case 27:case 5:Ve(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&kn(r);break;case 13:kn(r);break;case 19:ee(Rt);break;case 10:is(r.type);break;case 22:case 23:kn(r),Wd(),s!==null&&ee(Qr);break;case 24:is(Vt)}}function El(s,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(R){st(r,r.return,R)}}function Qs(s,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var k=a,K=R;try{K()}catch(Z){st(y,k,Z)}}}c=c.next}while(c!==_)}}catch(Z){st(r,r.return,Z)}}function h_(s){var r=s.updateQueue;if(r!==null){var a=s.stateNode;try{iy(r,a)}catch(c){st(s,s.return,c)}}}function p_(s,r,a){a.props=Zr(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){st(s,r,c)}}function Tl(s,r){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){st(s,r,y)}}function Fi(s,r){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){st(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){st(s,r,y)}else a.current=null}function m_(s){var r=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){st(s,s.return,y)}}function Rh(s,r,a){try{var c=s.stateNode;uw(c,s.type,a,r),c[zt]=r}catch(y){st(s,s.return,y)}}function g_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&tr(s.type)||s.tag===4}function Nh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||g_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&tr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xh(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(s),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=li));else if(c!==4&&(c===27&&tr(s.type)&&(a=s.stateNode,r=null),s=s.child,s!==null))for(xh(s,r,a),s=s.sibling;s!==null;)xh(s,r,a),s=s.sibling}function wc(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(c!==4&&(c===27&&tr(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(wc(s,r,a),s=s.sibling;s!==null;)wc(s,r,a),s=s.sibling}function y_(s){var r=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);nn(r,c,a),r[Mt]=s,r[zt]=a}catch(_){st(s,s.return,_)}}var ls=!1,Lt=!1,bh=!1,__=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function HI(s,r){if(s=s.containerInfo,$h=Jc,s=bg(s),Ad(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,k=-1,K=0,Z=0,ne=s,J=null;t:for(;;){for(var X;ne!==a||y!==0&&ne.nodeType!==3||(R=A+y),ne!==_||c!==0&&ne.nodeType!==3||(k=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(X=ne.firstChild)!==null;)J=ne,ne=X;for(;;){if(ne===s)break t;if(J===a&&++K===y&&(R=A),J===_&&++Z===c&&(k=A),(X=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=X}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(jh={focusedElem:s,selectionRange:a},Jc=!1,Kt=r;Kt!==null;)if(r=Kt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Kt=s;else for(;Kt!==null;){switch(r=Kt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var ge=Zr(a.type,y);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){st(a,a.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,a=s.nodeType,a===9)tp(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":tp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Kt=s;break}Kt=r.return}}function v_(s,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:cs(s,a),c&4&&El(5,a);break;case 1:if(cs(s,a),c&4)if(s=a.stateNode,r===null)try{s.componentDidMount()}catch(A){st(a,a.return,A)}else{var y=Zr(a.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){st(a,a.return,A)}}c&64&&h_(a),c&512&&Tl(a,a.return);break;case 3:if(cs(s,a),c&64&&(s=a.updateQueue,s!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{iy(s,r)}catch(A){st(a,a.return,A)}}break;case 27:r===null&&c&4&&y_(a);case 26:case 5:cs(s,a),r===null&&c&4&&m_(a),c&512&&Tl(a,a.return);break;case 12:cs(s,a);break;case 31:cs(s,a),c&4&&S_(s,a);break;case 13:cs(s,a),c&4&&A_(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=$I.bind(null,a),yw(s,a))));break;case 22:if(c=a.memoizedState!==null||ls,!c){r=r!==null&&r.memoizedState!==null||Lt,y=ls;var _=Lt;ls=c,(Lt=r)&&!_?fs(s,a,(a.subtreeFlags&8772)!==0):cs(s,a),ls=y,Lt=_}break;case 30:break;default:cs(s,a)}}function E_(s){var r=s.alternate;r!==null&&(s.alternate=null,E_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&To(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var vt=null,En=!1;function us(s,r,a){for(a=a.child;a!==null;)T_(s,r,a),a=a.sibling}function T_(s,r,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(si,a)}catch{}switch(a.tag){case 26:Lt||Fi(a,r),us(s,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Lt||Fi(a,r);var c=vt,y=En;tr(a.type)&&(vt=a.stateNode,En=!1),us(s,r,a),bl(a.stateNode),vt=c,En=y;break;case 5:Lt||Fi(a,r);case 6:if(c=vt,y=En,vt=null,us(s,r,a),vt=c,En=y,vt!==null)if(En)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(_){st(a,r,_)}else try{vt.removeChild(a.stateNode)}catch(_){st(a,r,_)}break;case 18:vt!==null&&(En?(s=vt,hv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),ra(s)):hv(vt,a.stateNode));break;case 4:c=vt,y=En,vt=a.stateNode.containerInfo,En=!0,us(s,r,a),vt=c,En=y;break;case 0:case 11:case 14:case 15:Qs(2,a,r),Lt||Qs(4,a,r),us(s,r,a);break;case 1:Lt||(Fi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&p_(a,r,c)),us(s,r,a);break;case 21:us(s,r,a);break;case 22:Lt=(c=Lt)||a.memoizedState!==null,us(s,r,a),Lt=c;break;default:us(s,r,a)}}function S_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ra(s)}catch(a){st(r,r.return,a)}}}function A_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ra(s)}catch(a){st(r,r.return,a)}}function GI(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new __),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new __),r;default:throw Error(i(435,s.tag))}}function Rc(s,r){var a=GI(s);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=jI.bind(null,s,c);c.then(y,y)}})}function Tn(s,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=s,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(tr(R.type)){vt=R.stateNode,En=!1;break e}break;case 5:vt=R.stateNode,En=!1;break e;case 3:case 4:vt=R.stateNode.containerInfo,En=!0;break e}R=R.return}if(vt===null)throw Error(i(160));T_(_,A,y),vt=null,En=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)C_(r,s),r=r.sibling}var pi=null;function C_(s,r){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Tn(r,s),Sn(s),c&4&&(Qs(3,s,s.return),El(3,s),Qs(5,s,s.return));break;case 1:Tn(r,s),Sn(s),c&512&&(Lt||a===null||Fi(a,a.return)),c&64&&ls&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=pi;if(Tn(r,s),Sn(s),c&512&&(Lt||a===null||Fi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[wi]||_[Mt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),nn(_,c,a),_[Mt]=s,Pt(_),c=_;break e;case"link":var A=Cv("link","href",y).get(c+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),nn(_,c,a),y.head.appendChild(_);break;case"meta":if(A=Cv("meta","content",y).get(c+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=y.createElement(c),nn(_,c,a),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[Mt]=s,Pt(_),c=_}s.stateNode=c}else Iv(y,s.type,s.stateNode);else s.stateNode=Av(y,c,s.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?Iv(y,s.type,s.stateNode):Av(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Rh(s,s.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,s),Sn(s),c&512&&(Lt||a===null||Fi(a,a.return)),a!==null&&c&4&&Rh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,s),Sn(s),c&512&&(Lt||a===null||Fi(a,a.return)),s.flags&32){y=s.stateNode;try{vn(y,"")}catch(ge){st(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Rh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(bh=!0);break;case 6:if(Tn(r,s),Sn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(ge){st(s,s.return,ge)}}break;case 3:if(Gc=null,y=pi,pi=Bc(r.containerInfo),Tn(r,s),pi=y,Sn(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ra(r.containerInfo)}catch(ge){st(s,s.return,ge)}bh&&(bh=!1,I_(s));break;case 4:c=pi,pi=Bc(s.stateNode.containerInfo),Tn(r,s),Sn(s),pi=c;break;case 12:Tn(r,s),Sn(s);break;case 31:Tn(r,s),Sn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 13:Tn(r,s),Sn(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xc=pn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 22:y=s.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,K=ls,Z=Lt;if(ls=K||y,Lt=Z||k,Tn(r,s),Lt=Z,ls=K,Sn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||ls||Lt||eo(s)),a=null,r=s;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var ne=k.memoizedProps.style,J=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){st(k,k.return,ge)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(ge){st(k,k.return,ge)}}}else if(r.tag===18){if(a===null){k=r;try{var X=k.stateNode;y?pv(X,!0):pv(k.stateNode,!1)}catch(ge){st(k,k.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Rc(s,a))));break;case 19:Tn(r,s),Sn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 30:break;case 21:break;default:Tn(r,s),Sn(s)}}function Sn(s){var r=s.flags;if(r&2){try{for(var a,c=s.return;c!==null;){if(g_(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,_=Nh(s);wc(s,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(vn(A,""),a.flags&=-33);var R=Nh(s);wc(s,R,A);break;case 3:case 4:var k=a.stateNode.containerInfo,K=Nh(s);xh(s,K,k);break;default:throw Error(i(161))}}catch(Z){st(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function I_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;I_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function cs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v_(s,r.alternate,r),r=r.sibling}function eo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Qs(4,r,r.return),eo(r);break;case 1:Fi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&p_(r,r.return,a),eo(r);break;case 27:bl(r.stateNode);case 26:case 5:Fi(r,r.return),eo(r);break;case 22:r.memoizedState===null&&eo(r);break;case 30:eo(r);break;default:eo(r)}s=s.sibling}}function fs(s,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:fs(y,_,a),El(4,_);break;case 1:if(fs(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){st(c,c.return,K)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)ny(k[y],R)}catch(K){st(c,c.return,K)}}a&&A&64&&h_(_),Tl(_,_.return);break;case 27:y_(_);case 26:case 5:fs(y,_,a),a&&c===null&&A&4&&m_(_),Tl(_,_.return);break;case 12:fs(y,_,a);break;case 31:fs(y,_,a),a&&A&4&&S_(y,_);break;case 13:fs(y,_,a),a&&A&4&&A_(y,_);break;case 22:_.memoizedState===null&&fs(y,_,a),Tl(_,_.return);break;case 30:break;default:fs(y,_,a)}r=r.sibling}}function Mh(s,r){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&al(a))}function Ph(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&al(s))}function mi(s,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)w_(s,r,a,c),r=r.sibling}function w_(s,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:mi(s,r,a,c),y&2048&&El(9,r);break;case 1:mi(s,r,a,c);break;case 3:mi(s,r,a,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&al(s)));break;case 12:if(y&2048){mi(s,r,a,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){st(r,r.return,k)}}else mi(s,r,a,c);break;case 31:mi(s,r,a,c);break;case 13:mi(s,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?mi(s,r,a,c):Sl(s,r):_._visibility&2?mi(s,r,a,c):(_._visibility|=2,Qo(s,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Mh(A,r);break;case 24:mi(s,r,a,c),y&2048&&Ph(r.alternate,r);break;default:mi(s,r,a,c)}}function Qo(s,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,R=a,k=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:Qo(_,A,R,k,y),El(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Qo(_,A,R,k,y):Sl(_,A):(Z._visibility|=2,Qo(_,A,R,k,y)),y&&K&2048&&Mh(A.alternate,A);break;case 24:Qo(_,A,R,k,y),y&&K&2048&&Ph(A.alternate,A);break;default:Qo(_,A,R,k,y)}r=r.sibling}}function Sl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=s,c=r,y=c.flags;switch(c.tag){case 22:Sl(a,c),y&2048&&Mh(c.alternate,c);break;case 24:Sl(a,c),y&2048&&Ph(c.alternate,c);break;default:Sl(a,c)}r=r.sibling}}var Al=8192;function Wo(s,r,a){if(s.subtreeFlags&Al)for(s=s.child;s!==null;)R_(s,r,a),s=s.sibling}function R_(s,r,a){switch(s.tag){case 26:Wo(s,r,a),s.flags&Al&&s.memoizedState!==null&&xw(a,pi,s.memoizedState,s.memoizedProps);break;case 5:Wo(s,r,a);break;case 3:case 4:var c=pi;pi=Bc(s.stateNode.containerInfo),Wo(s,r,a),pi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Al,Al=16777216,Wo(s,r,a),Al=c):Wo(s,r,a));break;default:Wo(s,r,a)}}function N_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Cl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Kt=c,b_(c,s)}N_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x_(s),s=s.sibling}function x_(s){switch(s.tag){case 0:case 11:case 15:Cl(s),s.flags&2048&&Qs(9,s,s.return);break;case 3:Cl(s);break;case 12:Cl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Nc(s)):Cl(s);break;default:Cl(s)}}function Nc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Kt=c,b_(c,s)}N_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Qs(8,r,r.return),Nc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(r));break;default:Nc(r)}s=s.sibling}}function b_(s,r){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Qs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:al(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Kt=c;else e:for(a=s;Kt!==null;){c=Kt;var y=c.sibling,_=c.return;if(E_(c),c===a){Kt=null;break e}if(y!==null){y.return=_,Kt=y;break e}Kt=_}}}var zI={getCacheForType:function(s){var r=en(Vt),a=r.data.get(s);return a===void 0&&(a=s(),r.data.set(s,a)),a},cacheSignal:function(){return en(Vt).controller.signal}},YI=typeof WeakMap=="function"?WeakMap:Map,et=0,ut=null,qe=null,Ge=0,it=0,Un=null,Ws=!1,Xo=!1,Dh=!1,ds=0,At=0,Xs=0,to=0,Vh=0,Ln=0,$o=0,Il=null,An=null,kh=!1,xc=0,M_=0,bc=1/0,Mc=null,$s=null,Bt=0,js=null,jo=null,hs=0,Uh=0,Lh=null,P_=null,wl=0,Oh=null;function On(){return(et&2)!==0&&Ge!==0?Ge&-Ge:G.T!==null?zh():Pu()}function D_(){if(Ln===0)if((Ge&536870912)===0||Qe){var s=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),Ln=s}else Ln=536870912;return s=Vn.current,s!==null&&(s.flags|=32),Ln}function Cn(s,r,a){(s===ut&&(it===2||it===9)||s.cancelPendingCommit!==null)&&(Zo(s,0),Zs(s,Ge,Ln,!1)),xr(s,a),((et&2)===0||s!==ut)&&(s===ut&&((et&2)===0&&(to|=a),At===4&&Zs(s,Ge,Ln,!1)),Bi(s))}function V_(s,r,a){if((et&6)!==0)throw Error(i(327));var c=!a&&(r&127)===0&&(r&s.expiredLanes)===0||ri(s,r),y=c?QI(s,r):Fh(s,r,!0),_=c;do{if(y===0){Xo&&!c&&Zs(s,r,0,!1);break}else{if(a=s.current.alternate,_&&!KI(a)){y=Fh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=s;y=Il;var k=R.current.memoizedState.isDehydrated;if(k&&(Zo(R,A).flags|=256),A=Fh(R,A,!1),A!==2){if(Dh&&!k){R.errorRecoveryDisabledLanes|=_,to|=_,y=4;break e}_=An,An=y,_!==null&&(An===null?An=_:An.push.apply(An,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Zo(s,0),Zs(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Zs(c,r,Ln,!Ws);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=xc+300-pn(),10<y)){if(Zs(c,r,Ln,!Ws),Ai(c,0,!0)!==0)break e;hs=r,c.timeoutHandle=fv(k_.bind(null,c,a,An,Mc,kh,r,Ln,to,$o,Ws,_,"Throttled",-0,0),y);break e}k_(c,a,An,Mc,kh,r,Ln,to,$o,Ws,_,null,-0,0)}}break}while(!0);Bi(s)}function k_(s,r,a,c,y,_,A,R,k,K,Z,ne,J,X){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},R_(r,_,ne);var ge=(_&62914560)===_?xc-pn():(_&4194048)===_?M_-pn():0;if(ge=bw(ne,ge),ge!==null){hs=_,s.cancelPendingCommit=ge(G_.bind(null,s,r,_,a,c,y,A,R,k,Z,ne,null,J,X)),Zs(s,_,A,!K);return}}G_(s,r,_,a,c,y,A,R,k)}function KI(s){for(var r=s;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!Pn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zs(s,r,a,c){r&=~Vh,r&=~to,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-It(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&br(s,a,r)}function Pc(){return(et&6)===0?(Rl(0),!1):!0}function qh(){if(qe!==null){if(it===0)var s=qe.return;else s=qe,ns=Kr=null,th(s),Go=null,ul=0,s=qe;for(;s!==null;)d_(s.alternate,s),s=s.return;qe=null}}function Zo(s,r){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,dw(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),hs=0,qh(),ut=s,qe=a=es(s.current,null),Ge=r,it=0,Un=null,Ws=!1,Xo=ri(s,r),Dh=!1,$o=Ln=Vh=to=Xs=At=0,An=Il=null,kh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-It(c),_=1<<y;r|=s[y],c&=~_}return ds=r,Zu(),a}function U_(s,r){Ue=null,G.H=yl,r===Ho||r===ac?(r=jg(),it=3):r===Gd?(r=jg(),it=4):it=r===yh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,qe===null&&(At=1,Tc(s,Jn(r,s.current)))}function L_(){var s=Vn.current;return s===null?!0:(Ge&4194048)===Ge?$n===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?s===$n:!1}function O_(){var s=G.H;return G.H=yl,s===null?yl:s}function q_(){var s=G.A;return G.A=zI,s}function Dc(){At=4,Ws||(Ge&4194048)!==Ge&&Vn.current!==null||(Xo=!0),(Xs&134217727)===0&&(to&134217727)===0||ut===null||Zs(ut,Ge,Ln,!1)}function Fh(s,r,a){var c=et;et|=2;var y=O_(),_=q_();(ut!==s||Ge!==r)&&(Mc=null,Zo(s,r)),r=!1;var A=At;e:do try{if(it!==0&&qe!==null){var R=qe,k=Un;switch(it){case 8:qh(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var K=it;if(it=0,Un=null,ea(s,R,k,K),a&&Xo){A=0;break e}break;default:K=it,it=0,Un=null,ea(s,R,k,K)}}JI(),A=At;break}catch(Z){U_(s,Z)}while(!0);return r&&s.shellSuspendCounter++,ns=Kr=null,et=c,G.H=y,G.A=_,qe===null&&(ut=null,Ge=0,Zu()),A}function JI(){for(;qe!==null;)F_(qe)}function QI(s,r){var a=et;et|=2;var c=O_(),y=q_();ut!==s||Ge!==r?(Mc=null,bc=pn()+500,Zo(s,r)):Xo=ri(s,r);e:do try{if(it!==0&&qe!==null){r=qe;var _=Un;t:switch(it){case 1:it=0,Un=null,ea(s,r,_,1);break;case 2:case 9:if(Xg(_)){it=0,Un=null,B_(r);break}r=function(){it!==2&&it!==9||ut!==s||(it=7),Bi(s)},_.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Xg(_)?(it=0,Un=null,B_(r)):(it=0,Un=null,ea(s,r,_,7));break;case 5:var A=null;switch(qe.tag){case 26:A=qe.memoizedState;case 5:case 27:var R=qe;if(A?wv(A):R.stateNode.complete){it=0,Un=null;var k=R.sibling;if(k!==null)qe=k;else{var K=R.return;K!==null?(qe=K,Vc(K)):qe=null}break t}}it=0,Un=null,ea(s,r,_,5);break;case 6:it=0,Un=null,ea(s,r,_,6);break;case 8:qh(),At=6;break e;default:throw Error(i(462))}}WI();break}catch(Z){U_(s,Z)}while(!0);return ns=Kr=null,G.H=c,G.A=y,et=a,qe!==null?0:(ut=null,Ge=0,Zu(),At)}function WI(){for(;qe!==null&&!gd();)F_(qe)}function F_(s){var r=c_(s.alternate,s,ds);s.memoizedProps=s.pendingProps,r===null?Vc(s):qe=r}function B_(s){var r=s,a=r.alternate;switch(r.tag){case 15:case 0:r=s_(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=s_(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:th(r);default:d_(a,r),r=qe=qg(r,ds),r=c_(a,r,ds)}s.memoizedProps=s.pendingProps,r===null?Vc(s):qe=r}function ea(s,r,a,c){ns=Kr=null,th(r),Go=null,ul=0;var y=r.return;try{if(LI(s,y,r,a,Ge)){At=1,Tc(s,Jn(a,s.current)),qe=null;return}}catch(_){if(y!==null)throw qe=y,_;At=1,Tc(s,Jn(a,s.current)),qe=null;return}r.flags&32768?(Qe||c===1?s=!0:Xo||(Ge&536870912)!==0?s=!1:(Ws=s=!0,(c===2||c===9||c===3||c===6)&&(c=Vn.current,c!==null&&c.tag===13&&(c.flags|=16384))),H_(r,s)):Vc(r)}function Vc(s){var r=s;do{if((r.flags&32768)!==0){H_(r,Ws);return}s=r.return;var a=FI(r.alternate,r,ds);if(a!==null){qe=a;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=s}while(r!==null);At===0&&(At=5)}function H_(s,r){do{var a=BI(s.alternate,s);if(a!==null){a.flags&=32767,qe=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(s=s.sibling,s!==null)){qe=s;return}qe=s=a}while(s!==null);At=6,qe=null}function G_(s,r,a,c,y,_,A,R,k){s.cancelPendingCommit=null;do kc();while(Bt!==0);if((et&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Nd,vd(s,a,_,A,R,k),s===ut&&(qe=ut=null,Ge=0),jo=r,js=s,hs=a,Uh=_,Lh=y,P_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,ZI(xs,function(){return Q_(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,y=ae.p,ae.p=2,A=et,et|=4;try{HI(s,r,a)}finally{et=A,ae.p=y,G.T=c}}Bt=1,z_(),Y_(),K_()}}function z_(){if(Bt===1){Bt=0;var s=js,r=jo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var c=ae.p;ae.p=2;var y=et;et|=4;try{C_(r,s);var _=jh,A=bg(s.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&xg(R.ownerDocument.documentElement,R)){if(k!==null&&Ad(R)){var K=k.start,Z=k.end;if(Z===void 0&&(Z=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(Z,R.value.length);else{var ne=R.ownerDocument||document,J=ne&&ne.defaultView||window;if(J.getSelection){var X=J.getSelection(),ge=R.textContent.length,Ae=Math.min(k.start,ge),lt=k.end===void 0?Ae:Math.min(k.end,ge);!X.extend&&Ae>lt&&(A=lt,lt=Ae,Ae=A);var H=Ng(R,Ae),q=Ng(R,lt);if(H&&q&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var Y=ne.createRange();Y.setStart(H.node,H.offset),X.removeAllRanges(),Ae>lt?(X.addRange(Y),X.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),X.addRange(Y))}}}}for(ne=[],X=R;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var te=ne[R];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Jc=!!$h,jh=$h=null}finally{et=y,ae.p=c,G.T=a}}s.current=r,Bt=2}}function Y_(){if(Bt===2){Bt=0;var s=js,r=jo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var c=ae.p;ae.p=2;var y=et;et|=4;try{v_(s,r.alternate,r)}finally{et=y,ae.p=c,G.T=a}}Bt=3}}function K_(){if(Bt===4||Bt===3){Bt=0,Iu();var s=js,r=jo,a=hs,c=P_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,jo=js=null,J_(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&($s=null),Xi(a),r=r.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(si,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=G.T,y=ae.p,ae.p=2,G.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{G.T=r,ae.p=y}}(hs&3)!==0&&kc(),Bi(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Oh?wl++:(wl=0,Oh=s):wl=0,Rl(0)}}function J_(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,al(r)))}function kc(){return z_(),Y_(),K_(),Q_()}function Q_(){if(Bt!==5)return!1;var s=js,r=Uh;Uh=0;var a=Xi(hs),c=G.T,y=ae.p;try{ae.p=32>a?32:a,G.T=null,a=Lh,Lh=null;var _=js,A=hs;if(Bt=0,jo=js=null,hs=0,(et&6)!==0)throw Error(i(331));var R=et;if(et|=4,x_(_.current),w_(_,_.current,A,a),et=R,Rl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(si,_)}catch{}return!0}finally{ae.p=y,G.T=c,J_(s,r)}}function W_(s,r,a){r=Jn(a,r),r=gh(s.stateNode,r,2),s=Ys(s,r,2),s!==null&&(xr(s,2),Bi(s))}function st(s,r,a){if(s.tag===3)W_(s,s,a);else for(;r!==null;){if(r.tag===3){W_(r,s,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($s===null||!$s.has(c))){s=Jn(a,s),a=Xy(2),c=Ys(r,a,2),c!==null&&($y(a,c,r,s),xr(c,2),Bi(c));break}}r=r.return}}function Bh(s,r,a){var c=s.pingCache;if(c===null){c=s.pingCache=new YI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Dh=!0,y.add(a),s=XI.bind(null,s,r,a),r.then(s,s))}function XI(s,r,a){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,ut===s&&(Ge&a)===a&&(At===4||At===3&&(Ge&62914560)===Ge&&300>pn()-xc?(et&2)===0&&Zo(s,0):Vh|=a,$o===Ge&&($o=0)),Bi(s)}function X_(s,r){r===0&&(r=Mu()),s=Gr(s,r),s!==null&&(xr(s,r),Bi(s))}function $I(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),X_(s,a)}function jI(s,r){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),X_(s,a)}function ZI(s,r){return Ft(s,r)}var Uc=null,ta=null,Hh=!1,Lc=!1,Gh=!1,er=0;function Bi(s){s!==ta&&s.next===null&&(ta===null?Uc=ta=s:ta=ta.next=s),Lc=!0,Hh||(Hh=!0,tw())}function Rl(s,r){if(!Gh&&Lc){Gh=!0;do for(var a=!1,c=Uc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-It(42|s)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,ev(c,_))}else _=Ge,_=Ai(c,c===ut?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||ri(c,_)||(a=!0,ev(c,_));c=c.next}while(a);Gh=!1}}function ew(){$_()}function $_(){Lc=Hh=!1;var s=0;er!==0&&fw()&&(s=er);for(var r=pn(),a=null,c=Uc;c!==null;){var y=c.next,_=j_(c,r);_===0?(c.next=null,a===null?Uc=y:a.next=y,y===null&&(ta=a)):(a=c,(s!==0||(_&3)!==0)&&(Lc=!0)),c=y}Bt!==0&&Bt!==5||Rl(s),er!==0&&(er=0)}function j_(s,r){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-It(_),R=1<<A,k=y[A];k===-1?((R&a)===0||(R&c)!==0)&&(y[A]=_d(R,r)):k<=r&&(s.expiredLanes|=R),_&=~R}if(r=ut,a=Ge,a=Ai(s,s===r?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===r&&(it===2||it===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ns(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||ri(s,a)){if(r=a&-a,r===s.callbackPriority)return r;switch(c!==null&&Ns(c),Xi(a)){case 2:case 8:a=La;break;case 32:a=xs;break;case 268435456:a=wu;break;default:a=xs}return c=Z_.bind(null,s),a=Ft(a,c),s.callbackPriority=r,s.callbackNode=a,r}return c!==null&&c!==null&&Ns(c),s.callbackPriority=2,s.callbackNode=null,2}function Z_(s,r){if(Bt!==0&&Bt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(kc()&&s.callbackNode!==a)return null;var c=Ge;return c=Ai(s,s===ut?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(V_(s,c,r),j_(s,pn()),s.callbackNode!=null&&s.callbackNode===a?Z_.bind(null,s):null)}function ev(s,r){if(kc())return null;V_(s,r,!0)}function tw(){hw(function(){(et&6)!==0?Ft(Ua,ew):$_()})}function zh(){if(er===0){var s=Fo;s===0&&(s=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),er=s}return er}function tv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Io(""+s)}function nv(s,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,s.id&&a.setAttribute("form",s.id),r.parentNode.insertBefore(a,r),s=new FormData(s),a.parentNode.removeChild(a),s}function nw(s,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=tv((y[zt]||null).action),A=c.submitter;A&&(r=(r=A[zt]||null)?tv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var R=new Vi("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var k=A?nv(y,A):new FormData(y);ch(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?nv(y,A):new FormData(y),ch(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Yh=0;Yh<Rd.length;Yh++){var Kh=Rd[Yh],iw=Kh.toLowerCase(),sw=Kh[0].toUpperCase()+Kh.slice(1);hi(iw,"on"+sw)}hi(Dg,"onAnimationEnd"),hi(Vg,"onAnimationIteration"),hi(kg,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(EI,"onTransitionRun"),hi(TI,"onTransitionStart"),hi(SI,"onTransitionCancel"),hi(Ug,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function iv(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,K=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=K;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,K=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=K;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}}}}function Fe(s,r){var a=r[Eo];a===void 0&&(a=r[Eo]=new Set);var c=s+"__bubble";a.has(c)||(sv(r,s,2,!1),a.add(c))}function Jh(s,r,a){var c=0;r&&(c|=4),sv(a,s,c,r)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Qh(s){if(!s[Oc]){s[Oc]=!0,Fa.forEach(function(a){a!=="selectionchange"&&(rw.has(a)||Jh(a,!1,s),Jh(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Oc]||(r[Oc]=!0,Jh("selectionchange",!1,r))}}function sv(s,r,a,c){switch(Dv(r)){case 2:var y=Dw;break;case 8:y=Vw;break;default:y=up}a=y.bind(null,r,a,s),y=void 0,!kr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,a,{capture:!0,passive:y}):s.addEventListener(r,a,!0):y!==void 0?s.addEventListener(r,a,{passive:y}):s.addEventListener(r,a,!1)}function Wh(s,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ri(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}ks(function(){var K=_,Z=Gn(a),ne=[];e:{var J=Lg.get(s);if(J!==void 0){var X=Vi,ge=s;switch(s){case"keypress":if(Lr(a)===0)break e;case"keydown":case"keyup":X=Wu;break;case"focusin":ge="focus",X=qr;break;case"focusout":ge="blur",X=qr;break;case"beforeblur":case"afterblur":X=qr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T;break;case Dg:case Vg:case kg:X=Hu;break;case Ug:X=N;break;case"scroll":case"scrollend":X=ja;break;case"wheel":X=W;break;case"copy":case"cut":case"paste":X=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Zi;break;case"toggle":case"beforetoggle":X=ke}var Ae=(r&4)!==0,lt=!Ae&&(s==="scroll"||s==="scrollend"),H=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var q=K,Y;q!==null;){var te=q;if(Y=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||Y===null||H===null||(te=ui(q,H),te!=null&&Ae.push(xl(q,te,Y))),lt)break;q=q.return}0<Ae.length&&(J=new X(J,ge,null,a,Z),ne.push({event:J,listeners:Ae}))}}if((r&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",J&&a!==Wa&&(ge=a.relatedTarget||a.fromElement)&&(Ri(ge)||ge[Ii]))break e;if((X||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ge=a.relatedTarget||a.toElement,X=K,ge=ge?Ri(ge):null,ge!==null&&(lt=l(ge),Ae=ge.tag,ge!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(X=null,ge=K),X!==ge)){if(Ae=Za,te="onMouseLeave",H="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Zi,te="onPointerLeave",H="onPointerEnter",q="pointer"),lt=X==null?J:bn(X),Y=ge==null?J:bn(ge),J=new Ae(te,q+"leave",X,a,Z),J.target=lt,J.relatedTarget=Y,te=null,Ri(Z)===K&&(Ae=new Ae(H,q+"enter",ge,a,Z),Ae.target=Y,Ae.relatedTarget=lt,te=Ae),lt=te,X&&ge)t:{for(Ae=ow,H=X,q=ge,Y=0,te=H;te;te=Ae(te))Y++;te=0;for(var Ee=q;Ee;Ee=Ae(Ee))te++;for(;0<Y-te;)H=Ae(H),Y--;for(;0<te-Y;)q=Ae(q),te--;for(;Y--;){if(H===q||q!==null&&H===q.alternate){Ae=H;break t}H=Ae(H),q=Ae(q)}Ae=null}else Ae=null;X!==null&&rv(ne,J,X,Ae,!1),ge!==null&&lt!==null&&rv(ne,lt,ge,Ae,!0)}}e:{if(J=K?bn(K):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var Xe=Sg;else if(Eg(J))if(Ag)Xe=yI;else{Xe=mI;var _e=pI}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&Co(K.elementType)&&(Xe=Sg):Xe=gI;if(Xe&&(Xe=Xe(s,K))){Tg(ne,Xe,a,Z);break e}_e&&_e(s,J,K),s==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&Ka(J,"number",J.value)}switch(_e=K?bn(K):window,s){case"focusin":(Eg(_e)||_e.contentEditable==="true")&&(Po=_e,Cd=K,sl=null);break;case"focusout":sl=Cd=Po=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Mg(ne,a,Z);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":Mg(ne,a,Z)}var Oe;if(Ze)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Mo?Fr(s,a)&&(ze="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Li&&a.locale!=="ko"&&(Mo||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Mo&&(Oe=$a()):(Di=Z,Xa="value"in Di?Di.value:Di.textContent,Mo=!0)),_e=qc(K,ze),0<_e.length&&(ze=new Ui(ze,s,null,a,Z),ne.push({event:ze,listeners:_e}),Oe?ze.data=Oe:(Oe=bo(a),Oe!==null&&(ze.data=Oe)))),(Oe=Yn?cI(s,a):fI(s,a))&&(ze=qc(K,"onBeforeInput"),0<ze.length&&(_e=new Ui("onBeforeInput","beforeinput",null,a,Z),ne.push({event:_e,listeners:ze}),_e.data=Oe)),nw(ne,s,K,a,Z)}iv(ne,r)})}function xl(s,r,a){return{instance:s,listener:r,currentTarget:a}}function qc(s,r){for(var a=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ui(s,a),y!=null&&c.unshift(xl(s,y,_)),y=ui(s,r),y!=null&&c.push(xl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function ow(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rv(s,r,a,c,y){for(var _=r._reactName,A=[];a!==null&&a!==c;){var R=a,k=R.alternate,K=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||K===null||(k=K,y?(K=ui(a,_),K!=null&&A.unshift(xl(a,K,k))):y||(K=ui(a,_),K!=null&&A.push(xl(a,K,k)))),a=a.return}A.length!==0&&s.push({event:r,listeners:A})}var aw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function ov(s){return(typeof s=="string"?s:""+s).replace(aw,`
`).replace(lw,"")}function av(s,r){return r=ov(r),ov(s)===r}function at(s,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||vn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&vn(s,""+c);break;case"className":Mn(s,"class",c);break;case"tabIndex":Mn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(s,a,c);break;case"style":Qa(s,c,_);break;case"data":if(r!=="object"){Mn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Io(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&at(s,r,"name",y.name,y,null),at(s,r,"formEncType",y.formEncType,y,null),at(s,r,"formMethod",y.formMethod,y,null),at(s,r,"formTarget",y.formTarget,y,null)):(at(s,r,"encType",y.encType,y,null),at(s,r,"method",y.method,y,null),at(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Io(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=li);break;case"onScroll":c!=null&&Fe("scroll",s);break;case"onScrollEnd":c!=null&&Fe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=Io(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Fe("beforetoggle",s),Fe("toggle",s),So(s,"popover",c);break;case"xlinkActuate":Dt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Dt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Dt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Dt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Dt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Dt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":So(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qu.get(a)||a,So(s,a,c))}}function Xh(s,r,a,c,y,_){switch(a){case"style":Qa(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?vn(s,c):(typeof c=="number"||typeof c=="bigint")&&vn(s,""+c);break;case"onScroll":c!=null&&Fe("scroll",s);break;case"onScrollEnd":c!=null&&Fe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ba.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=s[zt]||null,_=_!=null?_[a]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(r,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):So(s,a,c)}}}function nn(s,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",s),Fe("load",s);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,_,A,a,null)}}y&&at(s,r,"srcSet",a.srcSet,a,null),c&&at(s,r,"src",a.src,a,null);return;case"input":Fe("invalid",s);var R=_=A=y=null,k=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":k=Z;break;case"defaultChecked":K=Z;break;case"value":_=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:at(s,r,c,Z,a,null)}}Uu(s,_,R,k,K,A,y,!1);return;case"select":Fe("invalid",s),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:at(s,r,y,R,a,null)}r=_,a=A,s.multiple=!!c,r!=null?Ms(s,!!c,r,!1):a!=null&&Ms(s,!!c,a,!0);return;case"textarea":Fe("invalid",s),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:at(s,r,A,R,a,null)}Ps(s,c,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(s,r,k,c,a,null)}return;case"dialog":Fe("beforetoggle",s),Fe("toggle",s),Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":Fe("load",s);break;case"video":case"audio":for(c=0;c<Nl.length;c++)Fe(Nl[c],s);break;case"image":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"embed":case"source":case"link":Fe("error",s),Fe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,K,c,a,null)}return;default:if(Co(r)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&Xh(s,r,Z,c,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(c=a[R],c!=null&&at(s,r,R,c,a,null))}function uw(s,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,K=null,Z=null;for(X in a){var ne=a[X];if(a.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=ne;default:c.hasOwnProperty(X)||at(s,r,X,null,c,ne)}}for(var J in c){var X=c[J];if(ne=a[J],c.hasOwnProperty(J)&&(X!=null||ne!=null))switch(J){case"type":_=X;break;case"name":y=X;break;case"checked":K=X;break;case"defaultChecked":Z=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==ne&&at(s,r,J,X,c,ne)}}Ao(s,A,R,k,K,Z,_,y);return;case"select":X=A=R=J=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:c.hasOwnProperty(_)||at(s,r,_,null,c,k)}for(y in c)if(_=c[y],k=a[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":J=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&at(s,r,y,_,c,k)}r=R,a=A,c=X,J!=null?Ms(s,!!a,J,!1):!!c!=!!a&&(r!=null?Ms(s,!!a,r,!0):Ms(s,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:at(s,r,R,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":J=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&at(s,r,A,y,c,_)}Lu(s,J,X);return;case"option":for(var ge in a)if(J=a[ge],a.hasOwnProperty(ge)&&J!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:at(s,r,ge,null,c,J)}for(k in c)if(J=c[k],X=a[k],c.hasOwnProperty(k)&&J!==X&&(J!=null||X!=null))switch(k){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:at(s,r,k,J,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)J=a[Ae],a.hasOwnProperty(Ae)&&J!=null&&!c.hasOwnProperty(Ae)&&at(s,r,Ae,null,c,J);for(K in c)if(J=c[K],X=a[K],c.hasOwnProperty(K)&&J!==X&&(J!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:at(s,r,K,J,c,X)}return;default:if(Co(r)){for(var lt in a)J=a[lt],a.hasOwnProperty(lt)&&J!==void 0&&!c.hasOwnProperty(lt)&&Xh(s,r,lt,void 0,c,J);for(Z in c)J=c[Z],X=a[Z],!c.hasOwnProperty(Z)||J===X||J===void 0&&X===void 0||Xh(s,r,Z,J,c,X);return}}for(var H in a)J=a[H],a.hasOwnProperty(H)&&J!=null&&!c.hasOwnProperty(H)&&at(s,r,H,null,c,J);for(ne in c)J=c[ne],X=a[ne],!c.hasOwnProperty(ne)||J===X||J==null&&X==null||at(s,r,ne,J,c,X)}function lv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&lv(A)){for(A=0,R=y.responseEnd,c+=1;c<a.length;c++){var k=a[c],K=k.startTime;if(K>R)break;var Z=k.transferSize,ne=k.initiatorType;Z&&lv(ne)&&(k=k.responseEnd,A+=Z*(k<R?1:(R-K)/(k-K)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var $h=null,jh=null;function Fc(s){return s.nodeType===9?s:s.ownerDocument}function uv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Zh(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ep=null;function fw(){var s=window.event;return s&&s.type==="popstate"?s===ep?!1:(ep=s,!0):(ep=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,dw=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(s){return dv.resolve(null).then(s).catch(pw)}:fv;function pw(s){setTimeout(function(){throw s})}function tr(s){return s==="head"}function hv(s,r){var a=r,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),ra(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")bl(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,bl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[wi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&bl(s.ownerDocument.body);a=y}while(a);ra(r)}function pv(s,r){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function tp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tp(a),To(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function mw(s,r,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[wi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=jn(s.nextSibling),s===null)break}return null}function gw(s,r,a){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=jn(s.nextSibling),s===null))return null;return s}function mv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=jn(s.nextSibling),s===null))return null;return s}function np(s){return s.data==="$?"||s.data==="$~"}function ip(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function yw(s,r){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var sp=null;function gv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(r===0)return jn(s.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}s=s.nextSibling}return null}function yv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return s;r--}else a!=="/$"&&a!=="/&"||r++}s=s.previousSibling}return null}function _v(s,r,a){switch(r=Fc(a),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function bl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);To(s)}var Zn=new Map,vv=new Set;function Bc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ps=ae.d;ae.d={f:_w,r:vw,D:Ew,C:Tw,L:Sw,m:Aw,X:Iw,S:Cw,M:ww};function _w(){var s=ps.f(),r=Pc();return s||r}function vw(s){var r=Hn(s);r!==null&&r.tag===5&&r.type==="form"?Uy(r):ps.r(s)}var na=typeof document>"u"?null:document;function Ev(s,r,a){var c=na;if(c&&typeof r=="string"&&r){var y=_n(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),vv.has(y)||(vv.add(y),s={rel:s,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),nn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function Ew(s){ps.D(s),Ev("dns-prefetch",s,null)}function Tw(s,r){ps.C(s,r),Ev("preconnect",s,r)}function Sw(s,r,a){ps.L(s,r,a);var c=na;if(c&&s&&r){var y='link[rel="preload"][as="'+_n(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+_n(a.imageSizes)+'"]')):y+='[href="'+_n(s)+'"]';var _=y;switch(r){case"style":_=ia(s);break;case"script":_=sa(s)}Zn.has(_)||(s=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:s,as:r},a),Zn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ml(_))||r==="script"&&c.querySelector(Pl(_))||(r=c.createElement("link"),nn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function Aw(s,r){ps.m(s,r);var a=na;if(a&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=sa(s)}if(!Zn.has(_)&&(s=E({rel:"modulepreload",href:s},r),Zn.set(_,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(_)))return}c=a.createElement("link"),nn(c,"link",s),Pt(c),a.head.appendChild(c)}}}function Cw(s,r,a){ps.S(s,r,a);var c=na;if(c&&s){var y=Ni(c).hoistableStyles,_=ia(s);r=r||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Ml(_)))R.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},a),(a=Zn.get(_))&&rp(s,a);var k=A=c.createElement("link");Pt(k),nn(k,"link",s),k._p=new Promise(function(K,Z){k.onload=K,k.onerror=Z}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Hc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function Iw(s,r){ps.X(s,r);var a=na;if(a&&s){var c=Ni(a).hoistableScripts,y=sa(s),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(s=E({src:s,async:!0},r),(r=Zn.get(y))&&op(s,r),_=a.createElement("script"),Pt(_),nn(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function ww(s,r){ps.M(s,r);var a=na;if(a&&s){var c=Ni(a).hoistableScripts,y=sa(s),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(s=E({src:s,async:!0,type:"module"},r),(r=Zn.get(y))&&op(s,r),_=a.createElement("script"),Pt(_),nn(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Tv(s,r,a,c){var y=(y=Ie.current)?Bc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ia(a.href),a=Ni(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=ia(a.href);var _=Ni(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Ml(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Zn.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(s,a),_||Rw(y,s,a,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=sa(a),a=Ni(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ia(s){return'href="'+_n(s)+'"'}function Ml(s){return'link[rel="stylesheet"]['+s+"]"}function Sv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function Rw(s,r,a,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),nn(r,"link",a),Pt(r),s.head.appendChild(r))}function sa(s){return'[src="'+_n(s)+'"]'}function Pl(s){return"script[async]"+s}function Av(s,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+_n(a.href)+'"]');if(c)return r.instance=c,Pt(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Pt(c),nn(c,"style",y),Hc(c,a.precedence,s),r.instance=c;case"stylesheet":y=ia(a.href);var _=s.querySelector(Ml(y));if(_)return r.state.loading|=4,r.instance=_,Pt(_),_;c=Sv(a),(y=Zn.get(y))&&rp(c,y),_=(s.ownerDocument||s).createElement("link"),Pt(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),nn(_,"link",c),r.state.loading|=4,Hc(_,a.precedence,s),r.instance=_;case"script":return _=sa(a.src),(y=s.querySelector(Pl(_)))?(r.instance=y,Pt(y),y):(c=a,(y=Zn.get(_))&&(c=E({},a),op(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Pt(y),nn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Hc(c,a.precedence,s));return r.instance}function Hc(s,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(s,r.firstChild))}function rp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function op(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Gc=null;function Cv(s,r,a){if(Gc===null){var c=new Map,y=Gc=new Map;y.set(a,c)}else y=Gc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var _=a[y];if(!(_[wi]||_[Mt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function Iv(s,r,a){s=s.ownerDocument||s,s.head.insertBefore(a,r==="title"?s.querySelector("head > title"):null)}function Nw(s,r,a){if(a===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function wv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function xw(s,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ia(c.href),_=r.querySelector(Ml(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=zc.bind(s),r.then(s,s)),a.state.loading|=4,a.instance=_,Pt(_);return}_=r.ownerDocument||r,c=Sv(c),(y=Zn.get(y))&&rp(c,y),_=_.createElement("link"),Pt(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),nn(_,"link",c),a.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=zc.bind(s),r.addEventListener("load",a),r.addEventListener("error",a))}}var ap=0;function bw(s,r){return s.stylesheets&&s.count===0&&Kc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&Kc(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&ap===0&&(ap=62500*cw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kc(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>ap?50:800)+r);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yc=null;function Kc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yc=new Map,r.forEach(Mw,s),Yc=null,zc.call(s))}function Mw(s,r){if(!(r.state.loading&4)){var a=Yc.get(s);if(a)var c=a.get(null);else{a=new Map,Yc.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=zc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Dl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Pw(s,r,a,c,y,_,A,R,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Rv(s,r,a,c,y,_,A,R,k,K,Z,ne){return s=new Pw(s,r,a,A,k,K,Z,ne,R),r=1,_===!0&&(r|=24),_=Dn(3,null,null,r),s.current=_,_.stateNode=s,r=Fd(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},zd(_),s}function Nv(s){return s?(s=ko,s):ko}function xv(s,r,a,c,y,_){y=Nv(y),c.context===null?c.context=y:c.pendingContext=y,c=zs(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Ys(s,c,r),a!==null&&(Cn(a,s,r),fl(a,s,r))}function bv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function lp(s,r){bv(s,r),(s=s.alternate)&&bv(s,r)}function Mv(s){if(s.tag===13||s.tag===31){var r=Gr(s,67108864);r!==null&&Cn(r,s,67108864),lp(s,67108864)}}function Pv(s){if(s.tag===13||s.tag===31){var r=On();r=Mr(r);var a=Gr(s,r);a!==null&&Cn(a,s,r),lp(s,r)}}var Jc=!0;function Dw(s,r,a,c){var y=G.T;G.T=null;var _=ae.p;try{ae.p=2,up(s,r,a,c)}finally{ae.p=_,G.T=y}}function Vw(s,r,a,c){var y=G.T;G.T=null;var _=ae.p;try{ae.p=8,up(s,r,a,c)}finally{ae.p=_,G.T=y}}function up(s,r,a,c){if(Jc){var y=cp(c);if(y===null)Wh(s,r,c,Qc,a),Vv(s,c);else if(Uw(y,s,r,a,c))c.stopPropagation();else if(Vv(s,c),r&4&&-1<kw.indexOf(s)){for(;y!==null;){var _=Hn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Si(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-It(A);R.entanglements[1]|=k,A&=~k}Bi(_),(et&6)===0&&(bc=pn()+500,Rl(0))}}break;case 31:case 13:R=Gr(_,2),R!==null&&Cn(R,_,2),Pc(),lp(_,2)}if(_=cp(c),_===null&&Wh(s,r,c,Qc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else Wh(s,r,c,null,a)}}function cp(s){return s=Gn(s),fp(s)}var Qc=null;function fp(s){if(Qc=null,s=Ri(s),s!==null){var r=l(s);if(r===null)s=null;else{var a=r.tag;if(a===13){if(s=u(r),s!==null)return s;s=null}else if(a===31){if(s=d(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Qc=s,null}function Dv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rr()){case Ua:return 2;case La:return 8;case xs:case yd:return 32;case wu:return 268435456;default:return 32}default:return 32}}var dp=!1,nr=null,ir=null,sr=null,Vl=new Map,kl=new Map,rr=[],kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vv(s,r){switch(s){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(r.pointerId)}}function Ul(s,r,a,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Hn(r),r!==null&&Mv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function Uw(s,r,a,c,y){switch(r){case"focusin":return nr=Ul(nr,s,r,a,c,y),!0;case"dragenter":return ir=Ul(ir,s,r,a,c,y),!0;case"mouseover":return sr=Ul(sr,s,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return Vl.set(_,Ul(Vl.get(_)||null,s,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,kl.set(_,Ul(kl.get(_)||null,s,r,a,c,y)),!0}return!1}function kv(s){var r=Ri(s.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){s.blockedOn=r,oi(s.priority,function(){Pv(a)});return}}else if(r===31){if(r=d(a),r!==null){s.blockedOn=r,oi(s.priority,function(){Pv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=cp(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);Wa=c,a.target.dispatchEvent(c),Wa=null}else return r=Hn(a),r!==null&&Mv(r),s.blockedOn=a,!1;r.shift()}return!0}function Uv(s,r,a){Wc(s)&&a.delete(r)}function Lw(){dp=!1,nr!==null&&Wc(nr)&&(nr=null),ir!==null&&Wc(ir)&&(ir=null),sr!==null&&Wc(sr)&&(sr=null),Vl.forEach(Uv),kl.forEach(Uv)}function Xc(s,r){s.blockedOn===r&&(s.blockedOn=null,dp||(dp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Lw)))}var $c=null;function Lv(s){$c!==s&&($c=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){$c===s&&($c=null);for(var r=0;r<s.length;r+=3){var a=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(fp(c||a)===null)continue;break}var _=Hn(a);_!==null&&(s.splice(r,3),r-=3,ch(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ra(s){function r(k){return Xc(k,s)}nr!==null&&Xc(nr,s),ir!==null&&Xc(ir,s),sr!==null&&Xc(sr,s),Vl.forEach(r),kl.forEach(r);for(var a=0;a<rr.length;a++){var c=rr[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<rr.length&&(a=rr[0],a.blockedOn===null);)kv(a),a.blockedOn===null&&rr.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[zt]||null;if(typeof _=="function")A||Lv(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[zt]||null)R=A.formAction;else if(fp(y)!==null)continue}else R=A.action;typeof R=="function"?a[c+1]=R:(a.splice(c,3),c-=3),Lv(a)}}}function Ov(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function hp(s){this._internalRoot=s}jc.prototype.render=hp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=On();xv(a,c,s,r,null,null)},jc.prototype.unmount=hp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;xv(s.current,2,null,s,null,null),Pc(),r[Ii]=null}};function jc(s){this._internalRoot=s}jc.prototype.unstable_scheduleHydration=function(s){if(s){var r=Pu();s={blockedOn:null,target:s,priority:r};for(var a=0;a<rr.length&&r!==0&&r<rr[a].priority;a++);rr.splice(a,0,s),a===0&&kv(s)}};var qv=e.version;if(qv!=="19.2.0")throw Error(i(527,qv,"19.2.0"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var Ow={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{si=Zc.inject(Ow),$t=Zc}catch{}}return Ol.createRoot=function(s,r){if(!o(s))throw Error(i(299));var a=!1,c="",y=Ky,_=Jy,A=Qy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Rv(s,1,!1,null,null,a,c,null,y,_,A,Ov),s[Ii]=r.current,Qh(s),new hp(r)},Ol.hydrateRoot=function(s,r,a){if(!o(s))throw Error(i(299));var c=!1,y="",_=Ky,A=Jy,R=Qy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=Rv(s,1,!0,r,a??null,c,y,k,_,A,R,Ov),r.context=Nv(null),a=r.current,c=On(),c=Mr(c),y=zs(c),y.callback=null,Ys(a,y,c),a=c,r.current.lanes=a,xr(r,a),Bi(r),s[Ii]=r.current,Qh(s),new jc(r)},Ol.version="19.2.0",Ol}var Wv;function Qw(){if(Wv)return gp.exports;Wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=Jw(),gp.exports}var Ww=Qw();const Xw=vm(Ww),$w=({user:n,onLogout:e,plan:t,invoiceCount:i,onUpgrade:o,companies:l,warehouses:u,selectedCompanyId:d,selectedWarehouseId:h,onCompanyChange:m,onWarehouseChange:v,setCompanies:E,setWarehouses:S})=>{const[w,O]=he.useState([]),[F,B]=he.useState(!1),[Q,j]=he.useState(!1),[$,ue]=he.useState(!1),[de,re]=he.useState(""),[M,P]=he.useState(""),x=he.useRef(null);he.useEffect(()=>{const b=Te=>{x.current&&!x.current.contains(Te.target)&&ue(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),he.useEffect(()=>{var b;if(d){const Te=u.filter(Ce=>Ce.companyId===d);O(Te),Te.some(Ce=>Ce.id===h)||v(((b=Te[0])==null?void 0:b.id)||"")}else O([])},[d,u,h,v]);const D=()=>{if(de.trim()){const b={id:crypto.randomUUID(),name:de.trim()};E(Te=>[...Te,b]),re(""),B(!1),m(b.id)}},V=()=>{if(M.trim()&&d){const b={id:crypto.randomUUID(),name:M.trim(),companyId:d};S(Te=>[...Te,b]),P(""),j(!1),v(b.id)}},U=Math.min(i/t.invoiceLimit*100,100);return I.jsxs(I.Fragment,{children:[I.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:I.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-3 flex items-center justify-between flex-wrap",children:[I.jsx("div",{className:"flex items-center space-x-4",children:I.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Invoice AI Parser"})}),I.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsx("select",{value:d||"",onChange:b=>m(b.target.value),className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:l.map(b=>I.jsx("option",{value:b.id,children:b.name},b.id))}),I.jsx("button",{onClick:()=>B(!0),className:"px-2 py-1 text-sm text-indigo-600 hover:text-indigo-800",children:"+"})]}),I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsx("select",{value:h||"",onChange:b=>v(b.target.value),disabled:!d||w.length===0,className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm disabled:bg-slate-100",children:w.length>0?w.map(b=>I.jsx("option",{value:b.id,children:b.name},b.id)):I.jsx("option",{children:"No warehouses"})}),I.jsx("button",{onClick:()=>j(!0),disabled:!d,className:"px-2 py-1 text-sm text-indigo-600 hover:text-indigo-800 disabled:text-slate-400",children:"+"})]}),I.jsxs("div",{className:"relative",ref:x,children:[I.jsx("button",{onClick:()=>ue(!$),children:I.jsx("img",{src:n.picture,alt:n.name,className:"h-9 w-9 rounded-full"})}),$&&I.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:[I.jsxs("div",{className:"p-4",children:[I.jsx("p",{className:"text-sm font-semibold text-slate-800",children:n.name}),I.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email}),I.jsxs("div",{className:"mt-4",children:[I.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-600 mb-1",children:[I.jsxs("span",{children:[t.name," Plan"]}),I.jsxs("span",{children:[i," / ",t.invoiceLimit]})]}),I.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:I.jsx("div",{className:"bg-indigo-600 h-1.5 rounded-full",style:{width:`${U}%`}})})]})]}),I.jsxs("div",{className:"border-t border-slate-100",children:[I.jsx("button",{onClick:o,className:"block w-full text-left px-4 py-2 text-sm text-indigo-600 hover:bg-slate-50",children:"Upgrade Plan"}),I.jsx("button",{onClick:e,className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:"Logout"})]})]})]})]})]})}),F&&I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[I.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Add New Company"}),I.jsx("input",{type:"text",value:de,onChange:b=>re(b.target.value),placeholder:"Company Name",className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),I.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[I.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Cancel"}),I.jsx("button",{onClick:D,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Add"})]})]})}),Q&&I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:I.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[I.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Add New Warehouse"}),I.jsx("input",{type:"text",value:M,onChange:b=>P(b.target.value),placeholder:"Warehouse Name",className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),I.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[I.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Cancel"}),I.jsx("button",{onClick:V,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Add"})]})]})})]})},Up=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),ro=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),nS=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Tm=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),iS=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),jw=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Zw=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125V6.375m1.125 13.125A1.125 1.125 0 004.5 18.375h15A1.125 1.125 0 0020.625 19.5m-17.25 0h17.25m-17.25 0h17.25M4.5 6.375V18.375m15-12V6.375m0 0A1.125 1.125 0 0018.375 5.25h-12.75A1.125 1.125 0 004.5 6.375m15 0h.008v.015h-.008V6.375zm-15 0h.008v.015h-.008V6.375z"})}),eR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 6.375h17.25m-17.25 0V18h17.25V6.375m-17.25 0V3.75c0-.966.784-1.75 1.75-1.75h13.75c.966 0 1.75.784 1.75 1.75v2.625m-17.25 0h17.25m-17.25 0h17.25m-17.25 5.625h17.25M9 3.75v16.5M15 3.75v16.5"})}),tR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 0a.375.375 0 01-.375-.375V5.625c0-.207.168-.375.375-.375h7.5c.207 0 .375.168.375.375v11.25c0 .207-.168.375-.375.375h-7.5a.375.375 0 01-.375-.375z"})}),nR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),iR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5M12 9.75v1.5m0 4.5v1.5m-4.5-4.5H6m1.5 0H9m10.5-1.5h-1.5m-1.5 0h-1.5m-4.5 6H6m1.5 0H9m10.5-1.5h-1.5m-1.5 0h-1.5"})}),sR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),rR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),oR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),aR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.036.243c-2.132 0-4.14-.834-5.657-2.343-1.517-1.51-2.343-3.526-2.343-5.657s.826-4.147 2.343-5.657c1.517-1.51 3.526-2.343 5.657-2.343zm-7.5 0A48.416 48.416 0 0112 4.5c2.291 0 4.545.16 6.75.47m-13.5 0c-1.01.143-2.01.317-3 .52m3-.52l-2.62 10.726c-.122.499.106 1.028.589 1.202a5.989 5.989 0 002.036.243c2.132 0 4.14-.834 5.657-2.343 1.517-1.51 2.343-3.526 2.343-5.657s-.826-4.147-2.343-5.657c-1.517-1.51-3.526-2.343-5.657-2.343z"})}),lR=({className:n})=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.471-2.471a.563.563 0 01.8 0l2.47 2.471a.563.563 0 010 .8l-2.47 2.47a.563.563 0 01-.8 0l-2.471-2.471a.563.563 0 010-.8zm-4.96-4.96l2.471 2.471a.563.563 0 010 .8l-2.47 2.47a.563.563 0 01-.8 0l-2.471-2.47a.563.563 0 010-.8l2.47-2.471a.563.563 0 01.8 0z"})}),uR=({onNomenclatureUpload:n,existingNomenclature:e})=>{const[t,i]=he.useState(e||""),[o,l]=he.useState(null),[u,d]=he.useState(null),[h,m]=he.useState(""),[v,E]=he.useState("idle"),[S,w]=he.useState(!1),O=he.useRef(null),F=he.useRef(null),B=he.useCallback((re,M)=>{if(!re.trim()){l(null),d(null),m("");return}try{const P=XLSX.read(re,{type:"string"}),x=P.SheetNames[0];if(!x)throw new Error("No data found to preview.");const D=P.Sheets[x],V=XLSX.utils.sheet_to_json(D,{header:1});if(!V||V.length===0||V.length===1&&V[0].length===0){l(null),d(null),m("");return}const U=V[0]||[],b=V.slice(1)||[];b.length===0&&U.length>0?(l({headers:U,rows:b}),d("Nomenclature has headers but no data rows.")):b.length===0?(d("The file seems to be empty or in an incorrect format."),l(null)):(l({headers:U,rows:b}),d(null)),m(M)}catch{d("Could not parse nomenclature data. Please ensure it's a valid CSV format."),l(null)}},[]);he.useEffect(()=>{const re=e||"";i(re),B(re,re?"Saved Nomenclature":""),w(!!re)},[e,B]),he.useEffect(()=>{if(t!==e)return E("saving"),F.current&&clearTimeout(F.current),F.current=window.setTimeout(()=>{n(t),B(t,"Edited Nomenclature"),E("saved")},1e3),()=>{F.current&&clearTimeout(F.current)}},[t,n,B,e]),he.useEffect(()=>{if(v==="saved"){const re=setTimeout(()=>E("idle"),2e3);return()=>clearTimeout(re)}},[v]);const Q=re=>{i(re.target.value),w(!1)},j=re=>{var P,x;const M=(P=re.target.files)==null?void 0:P[0];if(M){l(null),d(null);const D=new FileReader,V=(x=M.name.split(".").pop())==null?void 0:x.toLowerCase();D.onload=U=>{var b,Te;try{let Ce;if(V==="csv")Ce=(b=U.target)==null?void 0:b.result;else if(V==="xlsx"||V==="xls"){const G=(Te=U.target)==null?void 0:Te.result,ae=XLSX.read(G,{type:"array"}),ce=ae.SheetNames[0],De=ae.Sheets[ce];Ce=XLSX.utils.sheet_to_csv(De)}else throw new Error("Unsupported file format. Please upload a CSV or Excel file.");F.current&&clearTimeout(F.current),i(Ce),n(Ce),B(Ce,M.name),E("saved"),w(!0)}catch(Ce){d(Ce.message),l(null),n("")}},D.onerror=()=>{d("Failed to read the file."),l(null),n("")},V==="csv"?D.readAsText(M):V==="xlsx"||V==="xls"?D.readAsArrayBuffer(M):(d("Unsupported file format. Please upload a CSV or Excel file."),n(""))}},$=he.useCallback(re=>{re.preventDefault(),re.stopPropagation()},[]),ue=he.useCallback(re=>{if(re.preventDefault(),re.stopPropagation(),re.dataTransfer.files&&re.dataTransfer.files[0]&&O.current){O.current.files=re.dataTransfer.files;const M=new Event("change",{bubbles:!0});O.current.dispatchEvent(M)}},[]),de=()=>{switch(v){case"saving":return I.jsx("span",{className:"text-xs text-slate-500 animate-pulse",children:"Saving..."});case"saved":return I.jsx("span",{className:"text-xs text-green-600 font-medium",children:" Saved"});default:return null}};return I.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[I.jsxs("div",{className:"flex items-center mb-4",children:[I.jsx("div",{className:"flex-shrink-0 bg-indigo-100 text-indigo-600 rounded-full h-10 w-10 flex items-center justify-center font-bold text-lg",children:"1"}),I.jsx("h2",{className:"ml-4 text-xl font-semibold text-slate-700",children:"Upload or Edit Nomenclature"})]}),I.jsx("p",{className:"text-slate-500 mb-4 text-sm",children:"Upload a CSV/Excel file, or paste/edit the contents directly below. Changes are auto-saved for the selected warehouse."}),I.jsxs("label",{htmlFor:"nomenclature-upload",className:"flex justify-center w-full h-32 px-4 transition bg-white border-2 border-slate-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-indigo-400 focus:outline-none",onDragOver:$,onDrop:ue,children:[I.jsxs("span",{className:"flex items-center space-x-2",children:[I.jsx(Up,{className:"w-6 h-6 text-slate-500"}),I.jsxs("span",{className:"font-medium text-slate-600",children:["Drop files to attach, or ",I.jsx("span",{className:"text-indigo-600 underline",children:"browse"})]})]}),I.jsx("input",{ref:O,id:"nomenclature-upload",type:"file",accept:".csv, .xlsx, .xls, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:j,className:"hidden"})]}),I.jsxs("div",{className:"mt-4",children:[I.jsxs("div",{className:"flex justify-between items-center mb-1",children:[I.jsxs("label",{htmlFor:"nomenclature-textarea",className:"text-sm font-medium text-slate-700 flex items-center",children:[I.jsx(nR,{className:"w-4 h-4 mr-2"}),"Edit Nomenclature Data"]}),de()]}),I.jsx("textarea",{id:"nomenclature-textarea",rows:8,className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono text-xs",placeholder:`Paste your CSV data here, e.g.,
name,sku,price
Product A,SKU001,10.99`,value:t,onChange:Q,"aria-label":"Nomenclature Data Editor"})]}),u&&I.jsxs("div",{className:"mt-4 flex items-center p-3 bg-red-50 text-red-700 rounded-lg",children:[I.jsx(nS,{className:"h-5 w-5 mr-2"}),I.jsx("span",{children:u})]}),S&&o&&!u&&I.jsxs("div",{className:"mt-4 flex items-center p-3 bg-green-50 text-green-700 rounded-lg",children:[I.jsx(ro,{className:"h-5 w-5 mr-2"}),I.jsxs("span",{children:["Successfully loaded ",o.rows.length," products from ",I.jsx("strong",{children:h}),". You can now proceed to step 2."]})]}),o&&I.jsxs("div",{className:"mt-4",children:[I.jsxs("h3",{className:"text-sm font-semibold text-slate-600 flex items-center",children:[I.jsx(Zw,{className:"w-4 h-4 mr-2"})," Nomenclature Preview"]}),I.jsx("div",{className:"max-h-40 overflow-y-auto mt-2 border rounded-lg",children:I.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[I.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50 sticky top-0",children:I.jsx("tr",{children:o.headers.map((re,M)=>I.jsx("th",{scope:"col",className:"px-4 py-2",children:re},M))})}),I.jsx("tbody",{children:o.rows.slice(0,5).map((re,M)=>I.jsx("tr",{className:"bg-white border-b",children:re.map((P,x)=>I.jsx("td",{className:"px-4 py-2 font-medium text-slate-900 truncate max-w-xs",children:String(P)},x))},M))})]})}),o.rows.length>5&&I.jsxs("p",{className:"text-xs text-right text-slate-400 mt-1",children:["Showing 5 of ",o.rows.length," items..."]})]})]})},cR=({data:n,onRowHover:e,onUpdateItem:t,productList:i})=>{const o=()=>{const h=["Invoice File","Matched Product Name","Original Name","SKU","Quantity","Total Quantity","Unit of Measure","Unit Price","Total Price"],m=n.map(w=>[`"${w.invoiceFileName.replace(/"/g,'""')}"`,`"${w.matchedProductName.replace(/"/g,'""')}"`,`"${w.originalName.replace(/"/g,'""')}"`,w.sku,w.quantity,w.totalQuantity,w.unitOfMeasure,w.unitPrice,w.totalPrice]),v=[h.join(","),...m.map(w=>w.join(","))].join(`
`),E=new Blob([v],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");if(S.download!==void 0){const w=URL.createObjectURL(E);S.setAttribute("href",w),S.setAttribute("download","invoice_data.csv"),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S)}},l=(h,m)=>{const v=i.find(E=>E.name===m);t(h,{matchedProductName:m,sku:v?v.sku:m==="UNKNOWN"?"UNKNOWN":"CUSTOM"})},u=(h,m,v)=>{t(h,{[m]:v})},d=(h,m,v)=>{const E=v.replace(",","."),S=parseFloat(E);if(isNaN(S)&&E.trim()!=="")return;const w=n.find(B=>B.id===h);if(!w)return;const O=isNaN(S)?0:S,F={[m]:O};if(m==="quantity"||m==="unitPrice"){const B=m==="quantity"?O:w.quantity,Q=m==="unitPrice"?O:w.unitPrice;F.totalPrice=parseFloat((B*Q).toFixed(2))}t(h,F)};return I.jsxs("div",{children:[I.jsx("div",{className:"flex justify-end mb-4",children:I.jsxs("button",{onClick:o,className:"flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:[I.jsx(iS,{className:"w-4 h-4 mr-2"}),"Download this table"]})}),I.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg border max-h-[60vh]",children:I.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[I.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0",children:I.jsxs("tr",{children:[I.jsx("th",{scope:"col",className:"py-3 px-4",children:"Matched Product"}),I.jsx("th",{scope:"col",className:"py-3 px-4",children:"Original Name"}),I.jsx("th",{scope:"col",className:"py-3 px-4",children:"SKU"}),I.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Qty"}),I.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Total Qty"}),I.jsx("th",{scope:"col",className:"py-3 px-4",children:"UoM"}),I.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Unit Price"}),I.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Total Price"})]})}),I.jsx("tbody",{children:n.map((h,m)=>I.jsxs("tr",{className:`border-b transition-colors duration-150 group ${h.matchedProductName==="UNKNOWN"?"bg-red-50 hover:bg-red-100":"bg-white hover:bg-gray-50"}`,onMouseEnter:()=>h.boundingBox&&e(h),onMouseLeave:()=>h.boundingBox&&e(null),children:[I.jsx("td",{className:"p-1 px-2",style:{minWidth:"200px"},children:I.jsxs("select",{value:h.matchedProductName,onChange:v=>l(h.id,v.target.value),className:`w-full bg-transparent border rounded-md px-2 py-1 text-gray-900 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 ${h.matchedProductName==="UNKNOWN"?"border-red-300":"border-slate-200 group-hover:border-slate-300"}`,children:[!i.some(v=>v.name===h.matchedProductName)&&h.matchedProductName!=="UNKNOWN"&&I.jsxs("option",{value:h.matchedProductName,children:[h.matchedProductName," (Custom)"]}),I.jsx("option",{value:"UNKNOWN",children:"UNKNOWN"}),i.map(v=>I.jsx("option",{value:v.name,children:v.name},v.sku))]})}),I.jsx("td",{className:"p-1 px-2",style:{minWidth:"200px"},children:I.jsx("input",{type:"text",value:h.originalName,onChange:v=>u(h.id,"originalName",v.target.value),className:"w-full bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 text-slate-500 italic focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),I.jsx("td",{className:"p-1 px-2 text-slate-600 font-mono",style:{minWidth:"100px"},children:h.sku}),I.jsx("td",{className:"p-1 px-2 text-right",style:{width:"110px"},children:I.jsx("input",{type:"text",value:h.quantity,onChange:v=>d(h.id,"quantity",v.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),I.jsx("td",{className:"p-1 px-2 text-right",style:{width:"110px"},children:I.jsx("input",{type:"text",value:h.totalQuantity,onChange:v=>d(h.id,"totalQuantity",v.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 font-medium text-gray-700"})}),I.jsx("td",{className:"p-1 px-2",style:{width:"90px"},children:I.jsx("input",{type:"text",value:h.unitOfMeasure,onChange:v=>u(h.id,"unitOfMeasure",v.target.value),className:"w-full bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),I.jsx("td",{className:"p-1 px-2 text-right",style:{width:"130px"},children:I.jsx("input",{type:"text",value:h.unitPrice,onChange:v=>d(h.id,"unitPrice",v.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),I.jsx("td",{className:"p-1 px-2 text-right",style:{width:"130px"},children:I.jsx("input",{type:"text",value:h.totalPrice,onChange:v=>d(h.id,"totalPrice",v.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 font-semibold text-gray-800"})})]},h.id))})]})})]})},fR=()=>I.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[I.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I.jsx("p",{className:"text-sm text-slate-500",children:"AI is analyzing your document..."})]}),dR=({imageUrl:n,highlightedItem:e})=>{const[t,i]=he.useState(null),o=he.useRef(null),l=he.useCallback(()=>{if(o.current&&o.current.complete&&o.current.naturalWidth>0){const d=o.current,h=d.offsetWidth,m=d.offsetHeight,v=d.naturalWidth,E=d.naturalHeight,S=h/m,w=v/E;let O,F,B,Q;S>w?(F=m,O=F*w,B=(h-O)/2,Q=0):(O=h,F=O/w,B=0,Q=(m-F)/2),i({containerWidth:h,containerHeight:m,renderedWidth:O,renderedHeight:F,offsetX:B,offsetY:Q})}else i(null)},[]);he.useEffect(()=>{var d;return window.addEventListener("resize",l),(d=o.current)!=null&&d.complete&&l(),()=>{window.removeEventListener("resize",l)}},[l]),he.useEffect(()=>{i(null)},[n]);const u=d=>{if(!t)return"";const{renderedWidth:h,renderedHeight:m,offsetX:v,offsetY:E}=t;return d.map(S=>`${S.x*h+v},${S.y*m+E}`).join(" ")};return I.jsxs("div",{className:"relative w-full",children:[I.jsx("img",{ref:o,src:n,alt:"Invoice",onLoad:l,className:"w-full h-auto object-contain"}),e&&e.boundingBox&&t&&I.jsx("svg",{className:"absolute top-0 left-0 pointer-events-none",width:t.containerWidth,height:t.containerHeight,viewBox:`0 0 ${t.containerWidth} ${t.containerHeight}`,children:I.jsx("polygon",{points:u(e.boundingBox),className:"fill-red-500/40 stroke-red-600 stroke-2"})})]})},hR=({isOpen:n,onClose:e,config:t,onSave:i,defaultConfig:o})=>{const[l,u]=he.useState([]),d=he.useRef(null),h=he.useRef(null);if(he.useEffect(()=>{u(JSON.parse(JSON.stringify(t.sort((B,Q)=>B.order-Q.order))))},[t,n]),!n)return null;const m=(B,Q)=>{d.current=Q,B.dataTransfer.effectAllowed="move"},v=(B,Q)=>{h.current=Q},E=()=>{if(d.current===null||h.current===null||d.current===h.current){d.current=null,h.current=null;return}const B=[...l],Q=B.splice(d.current,1)[0];B.splice(h.current,0,Q);const j=B.map(($,ue)=>({...$,order:ue}));u(j),d.current=null,h.current=null},S=(B,Q)=>{u(j=>j.map($=>$.key===B?{...$,enabled:Q}:$))},w=(B,Q)=>{u(j=>j.map($=>$.key===B?{...$,header:Q}:$))},O=()=>{i(l),e()},F=()=>{u(JSON.parse(JSON.stringify(o.sort((B,Q)=>B.order-Q.order))))};return I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",onClick:B=>B.stopPropagation(),children:[I.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Configure Export Format"}),I.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Drag and drop to reorder columns. Enable or disable columns and rename headers for your exported CSV and Excel files."}),I.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2",children:I.jsx("ul",{className:"space-y-2",children:l.map((B,Q)=>I.jsxs("li",{draggable:!0,onDragStart:j=>m(j,Q),onDragEnter:j=>v(j,Q),onDragEnd:E,onDragOver:j=>j.preventDefault(),className:"flex items-center p-3 bg-slate-50 rounded-lg border border-slate-200 cursor-move",children:[I.jsx(sR,{className:"w-5 h-5 text-slate-400 mr-3 flex-shrink-0"}),I.jsx("input",{type:"checkbox",checked:B.enabled,onChange:j=>S(B.key,j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-4"}),I.jsx("div",{className:"flex-grow",children:I.jsx("input",{type:"text",value:B.header,onChange:j=>w(B.key,j.target.value),className:"w-full bg-transparent px-2 py-1 border border-transparent hover:border-slate-300 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 rounded-md text-sm",disabled:!B.enabled})})]},B.key))})}),I.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 flex items-center justify-between",children:[I.jsx("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Reset to Default"}),I.jsxs("div",{className:"flex space-x-2",children:[I.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-md",children:"Cancel"}),I.jsx("button",{onClick:O,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Save Configuration"})]})]})]})})},pR=({nomenclatureLoaded:n,onFilesUpload:e,onProcessInvoices:t,onReset:i,uploadedFiles:o,invoiceData:l,isLoading:u,error:d,setError:h,onUpdateItem:m,productList:v,plan:E,invoiceCount:S,onUpgrade:w,exportConfig:O,onExportConfigChange:F,defaultExportConfig:B})=>{const Q=he.useRef(null),[j,$]=he.useState(null),[ue,de]=he.useState(null),[re,M]=he.useState(!1),P=he.useMemo(()=>l?l.reduce((G,ae)=>{const ce=ae.invoiceFileName;return G[ce]||(G[ce]=[]),G[ce].push(ae),G},{}):{},[l]),x=Object.keys(P),[D,V]=he.useState(null);he.useEffect(()=>{x.length>0&&!x.includes(D||"")?V(x[0]):x.length===0&&V(null)},[x,D]),he.useEffect(()=>{de(null)},[o]);const U=()=>{const G=o.length;if(S+G>E.invoiceLimit){de(`Processing ${G} invoices would exceed your ${E.name} plan limit of ${E.invoiceLimit} (current usage: ${S}).`);return}t()},b=he.useMemo(()=>{var G;return(G=o.find(ae=>ae.file.name===D))==null?void 0:G.preview},[D,o]),Te=()=>{if(!l)return;const G=O.filter(ie=>ie.enabled).sort((ie,le)=>ie.order-le.order),ae=G.map(ie=>ie.header),ce=l.map(ie=>G.map(le=>{const ye=ie[le.key]??"";return`"${String(ye).replace(/"/g,'""')}"`}).join(",")),De=[ae.join(","),...ce].join(`
`),xe=new Blob([De],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),ee=URL.createObjectURL(xe);L.setAttribute("href",ee),L.setAttribute("download","all_invoices_data.csv"),document.body.appendChild(L),L.click(),document.body.removeChild(L)},Ce=()=>{if(l)try{const G=new Map;l.forEach(ie=>{const le=ie.sku;if(le==="UNKNOWN")return;G.has(le)||G.set(le,{sku:ie.sku,matchedProductName:ie.matchedProductName,unitOfMeasure:ie.unitOfMeasure,unitPrice:ie.unitPrice,quantity:0,totalQuantity:0,totalPrice:0,invoiceFileNames:new Set,originalNames:new Set});const ye=G.get(le);ye.quantity+=ie.quantity,ye.totalQuantity+=ie.totalQuantity,ye.totalPrice+=ie.totalPrice,ye.invoiceFileNames.add(ie.invoiceFileName),ye.originalNames.add(ie.originalName)});const ae=Array.from(G.values()).map(ie=>({...ie,invoiceFileName:Array.from(ie.invoiceFileNames).join("; "),originalName:Array.from(ie.originalNames).join("; ")})),ce=O.filter(ie=>ie.enabled).sort((ie,le)=>ie.order-le.order),De=ce.map(ie=>ie.header),xe=ae.map(ie=>{const le={};return ce.forEach(ye=>{le[ye.header]=ie[ye.key]??""}),le}),L=XLSX.utils.json_to_sheet(xe,{header:De}),ee=XLSX.utils.book_new();XLSX.utils.book_append_sheet(ee,L,"Aggregated Inventory"),XLSX.writeFile(ee,`Aggregated_Inventory_${new Date().toISOString().split("T")[0]}.xlsx`)}catch(G){console.error("Failed to export to Excel:",G),h("Failed to generate the Excel file.")}};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-md border border-slate-200 transition-opacity duration-500 ${n?"opacity-100":"opacity-50 cursor-not-allowed"}`,children:[I.jsxs("div",{className:"flex items-center mb-4",children:[I.jsx("div",{className:`flex-shrink-0 rounded-full h-10 w-10 flex items-center justify-center font-bold text-lg ${n?"bg-indigo-100 text-indigo-600":"bg-slate-200 text-slate-500"}`,children:"2"}),I.jsx("h2",{className:"ml-4 text-xl font-semibold text-slate-700",children:"Process Invoice(s)"})]}),!n&&I.jsx("p",{className:"text-slate-500 text-sm",children:"Please upload your nomenclature in Step 1 to enable this section."}),n&&!l&&I.jsxs("div",{className:"space-y-6",children:[I.jsx("p",{className:"text-slate-500 text-sm",children:"Upload one or more clear photos or PDFs of the invoices you want to process."}),I.jsxs("div",{children:[I.jsx("input",{ref:Q,type:"file",accept:"image/png, image/jpeg, application/pdf",onChange:G=>G.target.files&&e(G.target.files),className:"hidden",multiple:!0}),I.jsxs("button",{onClick:()=>{var G;return(G=Q.current)==null?void 0:G.click()},disabled:u,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[I.jsx(Up,{className:"w-5 h-5 mr-2"}),o.length>0?"Upload Different Files":"Upload Invoice Files (Image/PDF)"]}),o.length>0&&I.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:o.map(({file:G,preview:ae},ce)=>I.jsx("div",{className:"relative border rounded-lg p-2 bg-slate-50 aspect-square flex items-center justify-center",children:G.type.startsWith("image/")?I.jsx("img",{src:ae,alt:G.name,className:"max-w-full max-h-full object-contain rounded-md"}):I.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-1",children:[I.jsx(tR,{className:"w-10 h-10 text-slate-400"}),I.jsx("p",{className:"mt-1 text-xs font-semibold text-slate-600 break-all",children:G.name})]})},ce))})]}),I.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 min-h-[50px]",children:[o.length>0&&!u&&I.jsxs("button",{onClick:U,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[I.jsx(jw,{className:"w-6 h-6 mr-3"}),"Process ",o.length," Invoice(s)"]}),u&&I.jsx(fR,{}),!u&&(d||ue)&&I.jsxs("div",{className:"w-full text-center p-4 bg-red-50 text-red-700 rounded-lg",children:[I.jsxs("div",{className:"flex items-center justify-center mb-2",children:[I.jsx(nS,{className:"h-6 w-6 mr-2"}),I.jsx("span",{className:"font-semibold",children:"Processing Failed"})]}),I.jsx("span",{className:"text-sm",children:d||ue}),ue&&I.jsx("button",{onClick:w,className:"mt-3 px-4 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md shadow-sm",children:"Upgrade Plan"})]})]})]}),l&&D&&I.jsxs("div",{children:[I.jsxs("div",{className:"p-4 bg-green-50 text-green-800 rounded-lg mb-6 flex flex-wrap justify-between items-center gap-4",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-lg font-semibold",children:"Processing Complete"}),I.jsxs("p",{className:"text-sm",children:["Found ",l.length," items across ",x.length," invoice(s)."]})]}),l.length>0&&I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsxs("button",{onClick:()=>M(!0),className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:[I.jsx(iR,{className:"w-4 h-4 mr-2"})," Configure Export"]}),I.jsxs("button",{onClick:Te,className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-500",children:[I.jsx(iS,{className:"w-4 h-4 mr-2"})," Download as CSV"]}),I.jsxs("button",{onClick:Ce,className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600",children:[I.jsx(eR,{className:"w-4 h-4 mr-2"})," Export Aggregated (Excel)"]})]})]}),I.jsx("div",{className:"border-b border-slate-200",children:I.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:x.map(G=>I.jsx("button",{onClick:()=>V(G),className:`${G===D?"border-indigo-500 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:G},G))})}),I.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Invoice Preview"}),b?I.jsx("div",{className:"border rounded-lg overflow-hidden",children:I.jsx(dR,{imageUrl:b,highlightedItem:j})}):I.jsx("div",{className:"aspect-video bg-slate-100 rounded-lg flex items-center justify-center",children:I.jsx("p",{className:"text-slate-500",children:"No image preview available."})})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("h3",{className:"font-semibold text-slate-800",children:"Extracted Data (Editable)"}),I.jsx(cR,{data:P[D]||[],onRowHover:$,onUpdateItem:m,productList:v})]})]}),I.jsx("div",{className:"mt-8 text-center",children:I.jsxs("button",{onClick:i,className:"flex items-center justify-center mx-auto px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[I.jsx(Up,{className:"w-5 h-5 mr-2"})," Process More Invoices"]})})]})]}),I.jsx(hR,{isOpen:re,onClose:()=>M(!1),config:O,onSave:F,defaultConfig:B})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mR,gR;function yR(){return{geminiUrl:mR,vertexUrl:gR}}function _R(n,e,t,i){var o,l;if(!(n!=null&&n.baseUrl)){const u=yR();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Is{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const h=n[d];if(Array.isArray(t))for(let m=0;m<h.length;m++){const v=h[m];g(v,e.slice(l+1),t[m])}else for(const m of h)g(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const h=n[d];g(h[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function vR(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),l=i.split("."),u=new Set;let d=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){d=h;break}if(d!==-1&&l.length>d)for(let h=d;h<l.length;h++){const m=l[h];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Lp(n,o,l,0,u)}}function Lp(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const h of d[u])Lp(h,e,t,i+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),h={};for(const m of d)h[m]=u[m];for(const[m,v]of Object.entries(h)){const E=[];for(const S of t.slice(i))S==="*"?E.push(m):E.push(S);g(u,E,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&Lp(u[l],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ER(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function TR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],AR(u)),e}function SR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],CR(u)),e}function AR(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>IR(u))),g(e,["generatedVideos"],l)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function CR(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>wR(u))),g(e,["generatedVideos"],l)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function IR(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],PR(t)),e}function wR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],DR(t)),e}function RR(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function NR(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function xR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],bR(u)),e}function bR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function sS(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],MR(u)),e}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function PR(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Sm(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function DR(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Sm(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xv||(Xv={}));var $v;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})($v||($v={}));var jv;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(jv||(jv={}));var Jt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Jt||(Jt={}));var Zv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Zv||(Zv={}));var eE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eE||(eE={}));var tE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(tE||(tE={}));var nE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nE||(nE={}));var iE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(iE||(iE={}));var sE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(sE||(sE={}));var rE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(rE||(rE={}));var oE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(oE||(oE={}));var aE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(aE||(aE={}));var lE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(lE||(lE={}));var uE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uE||(uE={}));var cE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(cE||(cE={}));var fE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(fE||(fE={}));var dE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dE||(dE={}));var If;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(If||(If={}));var hE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hE||(hE={}));var pE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pE||(pE={}));var mE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mE||(mE={}));var Op;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Op||(Op={}));var gE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(gE||(gE={}));var yE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(yE||(yE={}));var _E;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(_E||(_E={}));var vE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(vE||(vE={}));var EE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(EE||(EE={}));var TE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(TE||(TE={}));var SE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(SE||(SE={}));var AE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(AE||(AE={}));var CE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(CE||(CE={}));var IE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(IE||(IE={}));var wE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wE||(wE={}));var RE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(RE||(RE={}));var NE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(NE||(NE={}));var xE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(xE||(xE={}));var bE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(bE||(bE={}));var ME;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ME||(ME={}));var PE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(PE||(PE={}));var DE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(DE||(DE={}));var VE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(VE||(VE={}));var kE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(kE||(kE={}));var UE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(UE||(UE={}));var LE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(LE||(LE={}));var OE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(OE||(OE={}));var qE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qE||(qE={}));var FE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(FE||(FE={}));var BE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(BE||(BE={}));var HE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(HE||(HE={}));var GE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(GE||(GE={}));var zE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(zE||(zE={}));var ca;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ca||(ca={}));class qp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ql{get text(){var e,t,i,o,l,u,d,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[w,O]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(O!==null||O!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,l,u,d,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,l,u,d,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,l,u,d,h,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,l,u,d,h,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class YE{}class KE{}class VR{}class kR{}class UR{}class LR{}class JE{}class QE{}class WE{}class OR{}class wf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new wf;let o;const l=e;return t?o=SR(l):o=TR(l),Object.assign(i,o),i}}class XE{}class $E{}class jE{}class qR{}class FR{}class BR{}class Am{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Am,l=xR(e);return Object.assign(i,l),i}}class HR{}class GR{}class zR{}class ZE{}class YR{get text(){var e,t,i;let o="",l=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(d))h!=="text"&&h!=="thought"&&m!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,i;let o="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class KR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Cm,l=sS(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rS(n,e){const t=je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function oS(n){return Array.isArray(n)?n.map(e=>Rf(e)):[Rf(n)]}function Rf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function aS(n){const e=Rf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lS(n){const e=Rf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function uS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>eT(e)):[eT(n)]}function Fp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function tT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function nT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function fn(n){if(n==null)throw new Error("ContentUnion is required");return Fp(n)?n:{role:"user",parts:uS(n)}}function Im(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=fn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=fn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>fn(t)):[fn(e)]}function ni(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(tT(n)||nT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(n)]}const e=[],t=[],i=Fp(n[0]);for(const o of n){const l=Fp(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(tT(o)||nT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:uS(t)}),e}function JR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Jt).includes(t[0].toUpperCase())?t[0].toUpperCase():Jt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Jt).includes(i.toUpperCase())?i.toUpperCase():Jt.TYPE_UNSPECIFIED})}}function fa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&JR(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Jt).includes(d.toUpperCase())?d.toUpperCase():Jt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=fa(d);else if(i.includes(u)){const h=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}h.push(fa(m))}e[u]=h}else if(o.includes(u)){const h={};for(const[m,v]of Object.entries(d))h[m]=fa(v);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function wm(n){return fa(n)}function Rm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Nm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function wa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fa(e.response));return n}function Ra(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function QR(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ws(n,e){if(typeof e!="string")throw new Error("name must be a string");return QR(n,e,"cachedContents")}function cS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ar(n){return Sm(n)}function WR(n){return n!=null&&typeof n=="object"&&"name"in n}function XR(n){return n!=null&&typeof n=="object"&&"video"in n}function $R(n){return n!=null&&typeof n=="object"&&"uri"in n}function fS(n){var e;let t;if(WR(n)&&(t=n.name),!($R(n)&&(t=n.uri,t===void 0))&&!(XR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function dS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function hS(n){for(const e of["models","tunedModels","publisherModels"])if(jR(n,e))return n[e];return[]}function jR(n,e){return n!==null&&typeof n=="object"&&e in n}function ZR(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function eN(n,e={}){const t=[],i=new Set;for(const o of n){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=ZR(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function pS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function tN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Na(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function gS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nN(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>DN(u))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function iN(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function sN(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function df(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],gS(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const h=f(n,["metadata","model"]);h!=null&&g(e,["model"],h);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],nN(mS(m))),e}function Bp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],gS(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const h=f(n,["endTime"]);h!=null&&g(e,["endTime"],h);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],rN(E));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],iN(mS(S)));const w=f(n,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function rN(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function oN(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>PN(n,u))),g(t,["requests","requests"],l)}return t}function aN(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function lN(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function uN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function cN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function fN(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],dN(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function dN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function yS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>FN(l))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function hN(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function pN(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],sN(tN(o))),t}function iT(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],oN(n,pS(n,o)));const l=f(e,["config"]);return l!=null&&hN(l,t),t}function mN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],je(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],aN(pS(n,o)));const l=f(e,["config"]);return l!=null&&pN(l,t),t}function gN(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function yN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],CN(n,o));const l=f(e,["config"]);return l!=null&&gN(l,t),t}function _N(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function vN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function EN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function TN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function SN(n,e){const t={},i=f(e,["contents"]);if(i!=null){let l=Im(n,i);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],AN(o,t)),vR(t,{"requests[].*":"requests[].request.*"})),t}function AN(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function CN(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],SN(n,o)),t}function IN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function wN(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],yS(fn(o)));const l=f(e,["temperature"]);l!=null&&g(i,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&g(i,["frequencyPenalty"],O);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const Q=f(e,["responseSchema"]);Q!=null&&g(i,["responseSchema"],wm(Q));const j=f(e,["responseJsonSchema"]);if(j!=null&&g(i,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(b=>BN(b))),g(t,["safetySettings"],U)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let U=Ra(ue);Array.isArray(U)&&(U=U.map(b=>HN(wa(b)))),g(t,["tools"],U)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=f(e,["cachedContent"]);t!==void 0&&re!=null&&g(t,["cachedContent"],ws(n,re));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const P=f(e,["mediaResolution"]);P!=null&&g(i,["mediaResolution"],P);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Rm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function RN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>fN(m))),g(e,["candidates"],h)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function NN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function xN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Na(n,i)),t}function bN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function MN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function PN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let d=ni(o);Array.isArray(d)&&(d=d.map(h=>yS(h))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],wN(n,u,f(t,["request"],{}))),t}function DN(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],RN(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function VN(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function kN(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function UN(n){const e={},t=f(n,["config"]);return t!=null&&VN(t,e),e}function LN(n){const e={},t=f(n,["config"]);return t!=null&&kN(t,e),e}function ON(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>df(u))),g(e,["batchJobs"],l)}return e}function qN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Bp(u))),g(e,["batchJobs"],l)}return e}function FN(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],IN(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],lN(d));const h=f(n,["text"]);h!=null&&g(e,["text"],h);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function BN(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function HN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],bN(d));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],MN(h));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Es;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Es||(Es={}));class po{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GN extends Is{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new po(Es.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=iT(this.apiClient,e),i=t._url,o=pe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,h=d.requests,m=[];for(const v of h){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=mN(this.apiClient,e);return d=pe("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Bp(v))}else{const m=iT(this.apiClient,e);return d=pe("{model}:batchGenerateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>df(v))}}async createEmbeddingsInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yN(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>df(h))}}async get(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=xN(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Bp(v))}else{const m=NN(this.apiClient,e);return d=pe("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>df(v))}}async cancel(e){var t,i,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=cN(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=uN(this.apiClient,e);u=pe("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=LN(e);return d=pe("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=qN(v),S=new ZE;return Object.assign(S,E),S})}else{const m=UN(e);return d=pe("batches",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ON(v),S=new ZE;return Object.assign(S,E),S})}}async delete(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=vN(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>TN(v))}else{const m=_N(this.apiClient,e);return d=pe("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>EN(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zN(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function sT(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>fx(l))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function YN(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ni(u);Array.isArray(v)&&(v=v.map(E=>sT(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],sT(fn(d)));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>dx(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function KN(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=ni(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],fn(d));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(S=>hx(S))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function JN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],rS(n,i));const o=f(e,["config"]);return o!=null&&YN(o,t),t}function QN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],rS(n,i));const o=f(e,["config"]);return o!=null&&KN(o,t),t}function WN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ws(n,i)),t}function XN(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ws(n,i)),t}function $N(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function jN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function ZN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ex(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function tx(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ws(n,i)),t}function nx(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ws(n,i)),t}function ix(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function sx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function rx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function ox(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function ax(n){const e={},t=f(n,["config"]);return t!=null&&rx(t,e),e}function lx(n){const e={},t=f(n,["config"]);return t!=null&&ox(t,e),e}function ux(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function cx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function fx(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],ZN(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],zN(d));const h=f(n,["text"]);h!=null&&g(e,["text"],h);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function dx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],ix(d));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],sx(h));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function hx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>ex(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function px(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function mx(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function gx(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],ws(n,i));const o=f(e,["config"]);return o!=null&&px(o,t),t}function yx(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],ws(n,i));const o=f(e,["config"]);return o!=null&&mx(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _x extends Is{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new po(Es.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=QN(this.apiClient,e);return d=pe("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=JN(this.apiClient,e);return d=pe("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=nx(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=tx(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=XN(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=jN(v),S=new $E;return Object.assign(S,E),S})}else{const m=WN(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=$N(v),S=new $E;return Object.assign(S,E),S})}}async update(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=yx(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=gx(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=lx(e);return d=pe("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=cx(v),S=new jE;return Object.assign(S,E),S})}else{const m=ax(e);return d=pe("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ux(v),S=new jE;return Object.assign(S,E),S})}}}function rT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(n){return this instanceof gt?(this.v=n,this):new gt(n)}function da(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(O){return Promise.resolve(O).then(w,E)}}function d(w,O){i[w]&&(o[w]=function(F){return new Promise(function(B,Q){l.push([w,F,B,Q])>1||h(w,F)})},O&&(o[w]=O(o[w])))}function h(w,O){try{m(i[w](O))}catch(F){S(l[0][3],F)}}function m(w){w.value instanceof gt?Promise.resolve(w.value.v).then(v,E):S(l[0][2],w)}function v(w){h("next",w)}function E(w){h("throw",w)}function S(w,O){w(O),l.shift(),l.length&&h(l[0][0],l[0][1])}}function Ql(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof rT=="function"?rT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(d,h){u=n[l](u),o(d,h,u.done,u.value)})}}function o(l,u,d,h){Promise.resolve(h).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vx(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:_S(t)}function _S(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ex(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function oT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let l=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),l&&!_S(n[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class Tx{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Sx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Sx{constructor(e,t,i,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Ex(l)}async sendMessage(e){var t;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const h=await o,m=(u=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const w=m?[m]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?oT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return da(this,arguments,function*(){var u,d,h,m;const v=[];try{for(var E=!0,S=Ql(e),w;w=yield gt(S.next()),u=w.done,!u;E=!0){m=w.value,E=!1;const O=m;if(vx(O)){const F=(o=(i=O.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield gt(O)}}catch(O){d={error:O}}finally{try{!E&&!u&&(h=S.return)&&(yield gt(h.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...oT(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ax(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function Cx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Ix(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],fS(t)),e}function wx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Rx(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],fS(t)),e}function Nx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function xx(n){const e={},t=f(n,["config"]);return t!=null&&Nx(t,e),e}function bx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mx extends Is{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new po(Es.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xx(e);return l=pe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const m=bx(h),v=new HR;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ax(e);return l=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=Cx(h),v=new GR;return Object.assign(v,m),v})}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Rx(e);return l=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ix(e);return l=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const m=wx(h),v=new zR;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hf(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Px(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Jx(l))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function Dx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Vx(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function kx(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const h=f(n,["logprobs"]);h!=null&&g(e,["logprobs"],h);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const O=f(n,["responseModalities"]);O!=null&&g(e,["responseModalities"],O);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const Q=f(n,["seed"]);Q!=null&&g(e,["seed"],Q);const j=f(n,["speechConfig"]);j!=null&&g(e,["speechConfig"],vS(j));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ue=f(n,["temperature"]);ue!=null&&g(e,["temperature"],ue);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const re=f(n,["topK"]);re!=null&&g(e,["topK"],re);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ux(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Lx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Ox(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Nm(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&g(e,["setup","systemInstruction"],Px(fn(O)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let re=Ra(F);Array.isArray(re)&&(re=re.map(M=>Wx(wa(M)))),g(e,["setup","tools"],re)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],Qx(B));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&g(e,["setup","inputAudioTranscription"],Q);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","outputAudioTranscription"],j);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&g(e,["setup","contextWindowCompression"],ue);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function qx(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],kx(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],vS(Nm(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&g(e,["setup","systemInstruction"],fn(O));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let re=Ra(F);Array.isArray(re)&&(re=re.map(M=>Xx(wa(M)))),g(e,["setup","tools"],re)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],B);const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&g(e,["setup","inputAudioTranscription"],Q);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","outputAudioTranscription"],j);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&g(e,["setup","contextWindowCompression"],ue);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function Fx(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],Ox(o,t)),t}function Bx(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],qx(o,t)),t}function Hx(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function Gx(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function zx(n){const e={},t=f(n,["media"]);if(t!=null){let m=oS(t);Array.isArray(m)&&(m=m.map(v=>hf(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],hf(lS(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],hf(aS(l)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function Yx(n){const e={},t=f(n,["media"]);if(t!=null){let m=oS(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],lS(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],aS(l));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&g(e,["activityEnd"],h),e}function Kx(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],$x(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const h=f(n,["sessionResumptionUpdate"]);return h!=null&&g(e,["sessionResumptionUpdate"],h),e}function Jx(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],Dx(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],hf(d));const h=f(n,["text"]);h!=null&&g(e,["text"],h);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Qx(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Wx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],Ux(d));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],Lx(h));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function Xx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>Vx(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function $x(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const h=f(n,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(O=>O)),g(e,["promptTokensDetails"],w)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(O=>O)),g(e,["cacheTokensDetails"],w)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(O=>O)),g(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(O=>O)),g(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jx(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Zx(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],e1(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const h=f(n,["index"]);h!=null&&g(e,["index"],h);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function e1(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function t1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let l=ni(o);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function n1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function i1(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],s1(i)),e}function s1(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Xf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ub(l))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function r1(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function o1(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function a1(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],fn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>CS(d))),g(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],X1(l)),t}function l1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>Xf(d))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&o1(l),t}function u1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&a1(l,t),t}function c1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function f1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function d1(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],je(n,i)),t}function h1(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],je(n,i)),t}function p1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function m1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function g1(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&g(e,["parameters","outputOptions","mimeType"],O);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&g(e,["labels"],Q);const j=f(n,["editMode"]);e!==void 0&&j!=null&&g(e,["parameters","editMode"],j);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function y1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>mb(h))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&g1(u,t),t}function _1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$f(l))),g(e,["generatedImages"],o)}return e}function v1(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function E1(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function T1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let d=Im(n,o);Array.isArray(d)&&(d=d.map(h=>h)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&v1(l,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],je(n,u)),t}function S1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=Im(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&E1(l,t),t}function A1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function C1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>i1(u))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function I1(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function w1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function R1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function N1(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Xf(fn(o)));const l=f(e,["temperature"]);l!=null&&g(i,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&g(i,["frequencyPenalty"],O);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const Q=f(e,["responseSchema"]);Q!=null&&g(i,["responseSchema"],wm(Q));const j=f(e,["responseJsonSchema"]);if(j!=null&&g(i,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(b=>gb(b))),g(t,["safetySettings"],U)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let U=Ra(ue);Array.isArray(U)&&(U=U.map(b=>Sb(wa(b)))),g(t,["tools"],U)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=f(e,["cachedContent"]);t!==void 0&&re!=null&&g(t,["cachedContent"],ws(n,re));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const P=f(e,["mediaResolution"]);P!=null&&g(i,["mediaResolution"],P);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Rm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function x1(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],fn(o));const l=f(e,["temperature"]);l!=null&&g(i,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&g(i,["candidateCount"],h);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const O=f(e,["frequencyPenalty"]);O!=null&&g(i,["frequencyPenalty"],O);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const Q=f(e,["responseSchema"]);Q!=null&&g(i,["responseSchema"],wm(Q));const j=f(e,["responseJsonSchema"]);j!=null&&g(i,["responseJsonSchema"],j);const $=f(e,["routingConfig"]);$!=null&&g(i,["routingConfig"],$);const ue=f(e,["modelSelectionConfig"]);ue!=null&&g(i,["modelConfig"],ue);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let G=de;Array.isArray(G)&&(G=G.map(ae=>ae)),g(t,["safetySettings"],G)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let G=Ra(re);Array.isArray(G)&&(G=G.map(ae=>CS(wa(ae)))),g(t,["tools"],G)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const P=f(e,["labels"]);t!==void 0&&P!=null&&g(t,["labels"],P);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&g(t,["cachedContent"],ws(n,x));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const V=f(e,["mediaResolution"]);V!=null&&g(i,["mediaResolution"],V);const U=f(e,["speechConfig"]);U!=null&&g(i,["speechConfig"],AS(Rm(U)));const b=f(e,["audioTimestamp"]);b!=null&&g(i,["audioTimestamp"],b);const Te=f(e,["thinkingConfig"]);Te!=null&&g(i,["thinkingConfig"],Te);const Ce=f(e,["imageConfig"]);return Ce!=null&&g(i,["imageConfig"],Ce),i}function aT(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>Xf(d))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],N1(n,l,t)),t}function lT(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],x1(n,l,t)),t}function uT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>Zx(m))),g(e,["candidates"],h)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function cT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function b1(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=f(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&g(e,["parameters","includeSafetyAttributes"],h);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function M1(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const w=f(n,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&g(e,["parameters","outputOptions","mimeType"],O);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&g(e,["labels"],Q);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&g(e,["parameters","sampleImageSize"],j);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function P1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&b1(l,t),t}function D1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&M1(l,t),t}function V1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>K1(u))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],TS(o)),e}function k1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>$f(u))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],SS(o)),e}function U1(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","negativePrompt"],h);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],jf(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>kb(w))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function L1(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&g(e,["parameters","aspectRatio"],h);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&g(e,["parameters","generateAudio"],O);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&g(e,["instances[0]","lastFrame"],vi(F));const B=f(n,["referenceImages"]);if(e!==void 0&&B!=null){let $=B;Array.isArray($)&&($=$.map(ue=>Ub(ue))),g(e,["instances[0]","referenceImages"],$)}const Q=f(n,["mask"]);e!==void 0&&Q!=null&&g(e,["instances[0]","mask"],Vb(Q));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&g(e,["parameters","compressionQuality"],j),t}function O1(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],H1(u)),e}function q1(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],G1(u)),e}function F1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],jf(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],IS(u));const d=f(e,["source"]);d!=null&&z1(d,t);const h=f(e,["config"]);return h!=null&&U1(h,t),t}function B1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],vi(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],wS(u));const d=f(e,["source"]);d!=null&&Y1(d,t);const h=f(e,["config"]);return h!=null&&L1(h,t),t}function H1(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Q1(u))),g(e,["generatedVideos"],l)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function G1(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>W1(u))),g(e,["generatedVideos"],l)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function z1(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],jf(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],IS(l)),t}function Y1(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],wS(l)),t}function K1(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],tb(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],TS(o)),e}function $f(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],ES(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],SS(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function J1(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],ES(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function Q1(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],Pb(t)),e}function W1(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],Db(t)),e}function X1(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const h=f(n,["logprobs"]);h!=null&&g(e,["logprobs"],h);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const O=f(n,["responseModalities"]);O!=null&&g(e,["responseModalities"],O);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const Q=f(n,["seed"]);Q!=null&&g(e,["seed"],Q);const j=f(n,["speechConfig"]);j!=null&&g(e,["speechConfig"],AS(j));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ue=f(n,["temperature"]);ue!=null&&g(e,["temperature"],ue);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const re=f(n,["topK"]);re!=null&&g(e,["topK"],re);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $1(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],je(n,i)),t}function j1(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],je(n,i)),t}function Z1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function eb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function tb(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Ar(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ES(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function jf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Ar(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function nb(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],dS(n,d)),i}function ib(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],dS(n,d)),i}function sb(n,e){const t={},i=f(e,["config"]);return i!=null&&nb(n,i,t),t}function rb(n,e){const t={},i=f(e,["config"]);return i!=null&&ib(n,i,t),t}function ob(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let l=hS(o);Array.isArray(l)&&(l=l.map(u=>Hp(u))),g(e,["models"],l)}return e}function ab(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let l=hS(o);Array.isArray(l)&&(l=l.map(u=>Gp(u))),g(e,["models"],l)}return e}function lb(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Hp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],Ab(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const h=f(n,["outputTokenLimit"]);h!=null&&g(e,["outputTokenLimit"],h);const m=f(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&g(e,["temperature"],v);const E=f(n,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const S=f(n,["topP"]);S!=null&&g(e,["topP"],S);const w=f(n,["topK"]);w!=null&&g(e,["topK"],w);const O=f(n,["thinking"]);return O!=null&&g(e,["thinking"],O),e}function Gp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>I1(S))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const h=f(n,["_self"]);h!=null&&g(e,["tunedModelInfo"],Cb(h));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function ub(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],w1(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],jx(d));const h=f(n,["text"]);h!=null&&g(e,["text"],h);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function cb(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],vi(t)),e}function fb(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const w=f(n,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),t}function db(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["source"]);o!=null&&pb(o,t);const l=f(e,["config"]);return l!=null&&fb(l,t),t}function hb(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>$f(o))),g(e,["generatedImages"],i)}return e}function pb(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],vi(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>cb(d))),g(e,["instances[0]","productImages"],u)}return t}function mb(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],vi(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],lb(l));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],r1(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const h=f(n,["subjectImageConfig"]);return h!=null&&g(e,["subjectImageConfig"],h),e}function TS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function SS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function gb(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function yb(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],vi(t)),e}function _b(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const h=f(n,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),t}function vb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["source"]);o!=null&&Tb(o,t);const l=f(e,["config"]);return l!=null&&_b(l,t),t}function Eb(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>J1(o))),g(e,["generatedMasks"],i)}return e}function Tb(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vi(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],yb(l)),t}function AS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Sb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],Z1(d));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],eb(h));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function CS(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>R1(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Ab(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function Cb(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function Ib(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function wb(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function Rb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],je(n,i));const o=f(e,["config"]);return o!=null&&Ib(o,t),t}function Nb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["config"]);return o!=null&&wb(o,t),t}function xb(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const h=f(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","compressionQuality"],h);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const w=f(n,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),t}function bb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],je(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],vi(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&xb(u,t),t}function Mb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$f(l))),g(e,["generatedImages"],o)}return e}function Pb(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Ar(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function Db(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Vb(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],vi(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function kb(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],jf(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function Ub(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],vi(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function IS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function wS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Ar(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lb="Content-Type",Ob="X-Server-Timeout",qb="User-Agent",zp="x-goog-api-client",Fb="1.29.1",Bb=`google-genai-sdk/${Fb}`,Hb="v1beta1",Gb="v1beta",fT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class zb{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Hb,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Gb,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&Yb(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await dT(o),new qp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await dT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return da(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:h}=yield gt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(h,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,O=S.code,F=`got status: ${w}. ${JSON.stringify(E)}`;if(O>=400&&O<600)throw new Wf({message:F,status:O})}}catch(E){if(E.name==="ApiError")throw E}u+=m;let v=u.match(fT);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield gt(new qp(S)),u=u.slice(v[0].length),v=u.match(fT)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=Bb+" "+this.clientOptions.userAgentExtra;return e[qb]=t,e[zp]=t,e[Lb]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))i.append(o,l);e.timeout&&e.timeout>0&&i.append(Ob,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const h={file:o},m=this.getFileName(e),v=pe("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,h,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,h,v,E,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,l,u){var d;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function dT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Wf({message:o,status:t}):new Error(o)}}function Yb(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const d=Object.assign({},l);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const m=u[h],v=d[h];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[h]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[h]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kb="mcp_used/unknown";let Jb=!1;function RS(n){for(const e of n)if(Qb(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Jb}function NS(n){var e;const t=(e=n[zp])!==null&&e!==void 0?e:"";n[zp]=(t+` ${Kb}`).trimStart()}function Qb(n){return n!==null&&typeof n=="object"&&n instanceof xm}function Wb(n,e=100){return da(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield gt(n.listTools({cursor:i}));for(const u of l.tools)yield yield gt(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class xm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new xm(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,h=(t=void 0,Ql(Wb(v))),m;m=await h.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),eN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xb(n,e,t){const i=new KR;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class $b{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=eM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise($=>{m=$}),E=e.callbacks,S=function(){m({})},w=this.apiClient,O={onopen:S,onmessage:$=>{Xb(w,E.onmessage,$)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function($){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function($){}},F=this.webSocketFactory.create(h,Zb(u),O);F.connect(),await v;const j={setup:{model:je(this.apiClient,e.model)}};return F.send(JSON.stringify(j)),new jb(F,this.apiClient)}}class jb{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Gx(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Hx(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ca.PLAY)}pause(){this.sendPlaybackControl(ca.PAUSE)}stop(){this.sendPlaybackControl(ca.STOP)}resetContext(){this.sendPlaybackControl(ca.RESET_CONTEXT)}close(){this.conn.close()}}function Zb(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function eM(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nM(n,e,t){const i=new YR;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=Kx(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class iM{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new $b(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&RS(e.config.tools)&&NS(E);const S=aM(E);if(this.apiClient.isVertexAI())v=`${h}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let D="BidiGenerateContent",V="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",V="access_token"),v=`${h}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${V}=${x}`}let w=()=>{};const O=new Promise(x=>{w=x}),F=e.callbacks,B=function(){var x;(x=F==null?void 0:F.onopen)===null||x===void 0||x.call(F),w({})},Q=this.apiClient,j={onopen:B,onmessage:x=>{nM(Q,F.onmessage,x)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(x){}},$=this.webSocketFactory.create(v,oM(S),j);$.connect(),await O;let ue=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ue.startsWith("publishers/")){const x=this.apiClient.getProject(),D=this.apiClient.getLocation();ue=`projects/${x}/locations/${D}/`+ue}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[If.AUDIO]}:e.config.responseModalities=[If.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const x of re)if(this.isCallableTool(x)){const D=x;M.push(await D.tool())}else M.push(x);M.length>0&&(e.config.tools=M);const P={model:ue,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=Bx(this.apiClient,P):de=Fx(this.apiClient,P),delete de.config,$.send(JSON.stringify(de)),new rM($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sM={turnComplete:!0};class rM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ni(t.turns),e.isVertexAI()||(i=i.map(o=>Xf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(tM)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Yx(e)}:t={realtimeInput:zx(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function oM(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function aM(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hT=10;function pT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ha(u)){o=!0;break}if(!o)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ha(n){return"callTool"in n&&typeof n.callTool=="function"}function lM(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>ha(o)))!==null&&i!==void 0?i:!1}function mT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(ha(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function gT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends Is{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,l,u,d;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!lM(t)||pT(t.config))return await this.generateContentInternal(h);const m=mT(t);if(m.length>0){const F=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,E;const S=ni(h.contents),w=(l=(o=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:hT;let O=0;for(;O<w&&(v=await this.generateContentInternal(h),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,B=[];for(const Q of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ha(Q)){const $=await Q.callTool(v.functionCalls);B.push(...$)}O++,E={role:"user",parts:B},h.contents=ni(h.contents),h.contents.push(F),h.contents.push(E),gT(h.config)&&(S.push(F),S.push(E))}return gT(h.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),pT(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=mT(t);if(i.length>0){const o=i.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let l;const u=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:u.push(h);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new po(Es.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,l,u,d,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((h=(d=t.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async h=>ha(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&RS(e.config.tools)){const h=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},h);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),NS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ha(u)){const d=u,h=await d.tool();for(const m of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,i,o;const l=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:hT;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(m,v,E){var S,w;return da(this,arguments,function*(){for(var O,F,B,Q;d<l;){u&&(d++,u=!1);const de=yield gt(m.processParamsMaybeAddMcpUsage(E)),re=yield gt(m.generateContentStreamInternal(de)),M=[],P=[];try{for(var j=!0,$=(F=void 0,Ql(re)),ue;ue=yield gt($.next()),O=ue.done,!O;j=!0){Q=ue.value,j=!1;const x=Q;if(yield yield gt(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){P.push(x.candidates[0].content);for(const D of(w=x.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const V=yield gt(v.get(D.functionCall.name).callTool([D.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(x){F={error:x}}finally{try{!j&&!O&&(B=$.return)&&(yield gt(B.call($)))}finally{if(F)throw F.error}}if(M.length>0){u=!0;const x=new ql;x.candidates=[{content:{role:"user",parts:M}}],yield yield gt(x);const D=[];D.push(...P),D.push({role:"user",parts:M});const V=ni(E.contents).concat(D);E.contents=V}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=lT(this.apiClient,e);return d=pe("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=cT(v),S=new ql;return Object.assign(S,E),S})}else{const m=aT(this.apiClient,e);return d=pe("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=uT(v),S=new ql;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=lT(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return da(this,arguments,function*(){var S,w,O,F;try{for(var B=!0,Q=Ql(E),j;j=yield gt(Q.next()),S=j.done,!S;B=!0){F=j.value,B=!1;const $=F,ue=cT(yield gt($.json()));ue.sdkHttpResponse={headers:$.headers};const de=new ql;Object.assign(de,ue),yield yield gt(de)}}catch($){w={error:$}}finally{try{!B&&!S&&(O=Q.return)&&(yield gt(O.call(Q)))}finally{if(w)throw w.error}}})})}else{const m=aT(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return da(this,arguments,function*(){var S,w,O,F;try{for(var B=!0,Q=Ql(E),j;j=yield gt(Q.next()),S=j.done,!S;B=!0){F=j.value,B=!1;const $=F,ue=uT(yield gt($.json()));ue.sdkHttpResponse={headers:$.headers};const de=new ql;Object.assign(de,ue),yield yield gt(de)}}catch($){w={error:$}}finally{try{!B&&!S&&(O=Q.return)&&(yield gt(O.call(Q)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=S1(this.apiClient,e);return d=pe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=C1(v),S=new YE;return Object.assign(S,E),S})}else{const m=T1(this.apiClient,e);return d=pe("{model}:batchEmbedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=A1(v),S=new YE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=D1(this.apiClient,e);return d=pe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=k1(v),S=new KE;return Object.assign(S,E),S})}else{const m=P1(this.apiClient,e);return d=pe("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=V1(v),S=new KE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=y1(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const m=_1(h),v=new VR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=bb(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const m=Mb(h),v=new kR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=db(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=hb(h),v=new UR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=vb(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=Eb(h),v=new LR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=j1(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}else{const m=$1(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Hp(v))}}async listInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=rb(this.apiClient,e);return d=pe("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ab(v),S=new JE;return Object.assign(S,E),S})}else{const m=sb(this.apiClient,e);return d=pe("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ob(v),S=new JE;return Object.assign(S,E),S})}}async update(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=Nb(this.apiClient,e);return d=pe("{model}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}else{const m=Rb(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Hp(v))}}async delete(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=h1(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=m1(v),S=new QE;return Object.assign(S,E),S})}else{const m=d1(this.apiClient,e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=p1(v),S=new QE;return Object.assign(S,E),S})}}async countTokens(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=u1(this.apiClient,e);return d=pe("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=f1(v),S=new WE;return Object.assign(S,E),S})}else{const m=l1(this.apiClient,e);return d=pe("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=c1(v),S=new WE;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=t1(this.apiClient,e);return l=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const m=n1(h),v=new OR;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=B1(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=q1(v),S=new wf;return Object.assign(S,E),S})}else{const m=F1(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=O1(v),S=new wf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends Is{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=NR(e);return d=pe("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=RR(e);return d=pe("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=ER(e);return l=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fM(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function dM(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>EM(l))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function hM(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],vM(n,d));const h=f(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&g(t,["fieldMask"],h),i}function pM(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],hM(n,i,t)),t}function mM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function gM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function yM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function _M(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Nm(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&g(e,["setup","systemInstruction"],dM(fn(O)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let re=Ra(F);Array.isArray(re)&&(re=re.map(M=>SM(wa(M)))),g(e,["setup","tools"],re)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],TM(B));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&g(e,["setup","inputAudioTranscription"],Q);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","outputAudioTranscription"],j);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ue=f(n,["contextWindowCompression"]);e!==void 0&&ue!=null&&g(e,["setup","contextWindowCompression"],ue);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function vM(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],_M(o,t)),t}function EM(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],mM(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],fM(d));const h=f(n,["text"]);h!=null&&g(e,["text"],h);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function TM(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function SM(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],gM(d));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],yM(h));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function CM(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=AM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const h=[];l&&h.push(l),d.length>0&&h.push(...d),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class IM extends Is{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=pM(this.apiClient,e);l=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=CM(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function RM(n){const e={},t=f(n,["config"]);return t!=null&&wM(t,e),e}function NM(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function xM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&NM(i,e),e}function bM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function MM(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function PM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],VM(u)),e}function DM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&MM(o,e),e}function VM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function kM(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function UM(n){const e={},t=f(n,["config"]);return t!=null&&kM(t,e),e}function LM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function OM(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function qM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&OM(i,e),e}function FM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BM(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function HM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&BM(i,e),e}function GM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function zM(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function YM(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&zM(i,e),e}function KM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JM extends Is{constructor(e){super(),this.apiClient=e,this.list=async t=>new po(Es.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=GM(e);return l=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var t,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HM(e);o=pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YM(e);return l=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=KM(h),v=new qR;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QM extends Is{constructor(e,t=new JM(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new po(Es.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RM(e);return l=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bM(e);return l=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var t,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xM(e);o=pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UM(e);return l=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=LM(h),v=new FR;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qM(e);return l=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=FM(h),v=new BR;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DM(e);return l=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=PM(h),v=new Am;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function XM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function $M(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const h=f(n,["learningRate"]);if(e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function jM(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],yT(w))}else if(o==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],yT(w))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(m==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function ZM(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&cP(l);const u=f(n,["config"]);return u!=null&&$M(u,t),t}function eP(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&fP(l,t,e);const u=f(n,["config"]);return u!=null&&jM(u,t,e),t}function tP(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function nP(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function iP(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function sP(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function rP(n,e){const t={},i=f(n,["config"]);return i!=null&&iP(i,t),t}function oP(n,e){const t={},i=f(n,["config"]);return i!=null&&sP(i,t),t}function aP(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>xS(d))),g(t,["tuningJobs"],u)}return t}function lP(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Yp(d))),g(t,["tuningJobs"],u)}return t}function uP(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function cP(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["examples","examples"],o)}return t}function fP(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function xS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],cS(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const h=f(n,["tuningTask","completeTime"]);h!=null&&g(t,["endTime"],h);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],uP(S)),t}function Yp(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],cS(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const h=f(n,["endTime"]);h!=null&&g(t,["endTime"],h);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const E=f(n,["description"]);E!=null&&g(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&g(t,["tunedModel"],w);const O=f(n,["preTunedModel"]);O!=null&&g(t,["preTunedModel"],O);const F=f(n,["supervisedTuningSpec"]);F!=null&&g(t,["supervisedTuningSpec"],F);const B=f(n,["preferenceOptimizationSpec"]);B!=null&&g(t,["preferenceOptimizationSpec"],B);const Q=f(n,["tuningDataStats"]);Q!=null&&g(t,["tuningDataStats"],Q);const j=f(n,["encryptionSpec"]);j!=null&&g(t,["encryptionSpec"],j);const $=f(n,["partnerModelTuningSpec"]);$!=null&&g(t,["partnerModelTuningSpec"],$);const ue=f(n,["customBaseModel"]);ue!=null&&g(t,["customBaseModel"],ue);const de=f(n,["experiment"]);de!=null&&g(t,["experiment"],de);const re=f(n,["labels"]);re!=null&&g(t,["labels"],re);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const P=f(n,["pipelineJob"]);P!=null&&g(t,["pipelineJob"],P);const x=f(n,["serviceAccount"]);x!=null&&g(t,["serviceAccount"],x);const D=f(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const V=f(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function dP(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function yT(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hP extends Is{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new po(Es.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Op.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=nP(e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Yp(v))}else{const m=tP(e);return d=pe("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>xS(v))}}async listInternal(e){var t,i,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=oP(e);return d=pe("tuningJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=lP(v),S=new XE;return Object.assign(S,E),S})}else{const m=rP(e);return d=pe("tunedModels",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aP(v),S=new XE;return Object.assign(S,E),S})}}async cancel(e){var t,i,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=XM(e);u=pe("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=WM(e);u=pe("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=eP(e,e);return l=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>Yp(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZM(e);return l=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>dP(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mP=1024*1024*8,gP=3,yP=1e3,_P=2,Nf="x-goog-upload-status";async function vP(n,e,t){var i;const o=await bS(n,e,t),l=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Nf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function EP(n,e,t){var i;const o=await bS(n,e,t),l=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Nf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=sS(l),d=new Cm;return Object.assign(d,u),d}async function bS(n,e,t){var i,o;let l=0,u=0,d=new qp(new Response),h="upload";for(l=n.size;u<l;){const m=Math.min(mP,l-u),v=n.slice(u,u+m);u+m>=l&&(h+=", finalize");let E=0,S=yP;for(;E<gP&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Nf]));)E++,await SP(S),S=S*_P;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Nf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function TP(n){return{size:n.size,type:n.type}}function SP(n){return new Promise(e=>setTimeout(e,n))}class AP{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vP(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EP(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CP{create(e,t,i){return new IP(e,t,i)}}class IP{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _T="x-goog-api-key";class wP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(_T)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_T,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RP="gl-node/";class NP{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=_R(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new wP(this.apiKey);this.apiClient=new zb({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:RP+"web",uploader:new AP,downloader:new pP}),this.models=new uM(this.apiClient),this.live=new iM(this.apiClient,o,new CP),this.batches=new GN(this.apiClient),this.chats=new Tx(this.models,this.apiClient),this.caches=new _x(this.apiClient),this.files=new Mx(this.apiClient),this.operations=new cM(this.apiClient),this.authTokens=new IM(this.apiClient),this.tunings=new hP(this.apiClient),this.fileSearchStores=new QM(this.apiClient)}}const xP=new NP({apiKey:"AIzaSyA9jbTu-7qhbZbcDGF7vUte5ith4S_bS-Y"}),bP={type:Jt.ARRAY,items:{type:Jt.OBJECT,properties:{matchedProductName:{type:Jt.STRING,description:"The product name from the nomenclature that best matches the original name from the invoice. Set to 'UNKNOWN' if no suitable match is found."},originalName:{type:Jt.STRING,description:"The product name exactly as it appears on the invoice."},quantity:{type:Jt.NUMBER,description:"The quantity of the item listed."},unitPrice:{type:Jt.NUMBER,description:"The price per single unit of the item."},totalPrice:{type:Jt.NUMBER,description:"The total price for the line item (quantity * unit price)."},sku:{type:Jt.STRING,description:"The corresponding SKU from the nomenclature for the matched product. Set to 'UNKNOWN' if no match is found."},totalQuantity:{type:Jt.NUMBER,description:"The total number of individual units if specified (e.g., 10 packs of 12 units = 120). If not specified, this should be the same as 'quantity'."},unitOfMeasure:{type:Jt.STRING,description:"The unit of measurement for the item (e.g., 'kg', 'pcs', 'box')."}},required:["matchedProductName","originalName","quantity","unitPrice","totalPrice","sku","totalQuantity","unitOfMeasure"]}},MP=async(n,e,t)=>{try{const i=`
You are an expert invoice processing AI. Your task is to analyze an invoice image, extract all line items, and match them against a provided product nomenclature.

**Instructions:**
1.  Carefully read the line items from the provided invoice image.
2.  For each line item, use the provided nomenclature data (in CSV format) to find the best match for the product.
3.  If a product from the invoice cannot be confidently matched to an item in the nomenclature, you MUST set 'matchedProductName' and 'sku' to the string 'UNKNOWN'.
4.  Extract the following fields for each line item:
    *   **originalName**: The product name as it appears on the invoice.
    *   **matchedProductName**: The corresponding 'name' from the nomenclature.
    *   **sku**: The corresponding 'sku' from the nomenclature.
    *   **quantity**: The quantity of the item.
    *   **unitPrice**: The price per unit.
    *   **totalPrice**: The total price for the line item.
    *   **totalQuantity**: The absolute total quantity. For example, if the line is "10 boxes of 12 units", quantity is 10 and totalQuantity is 120. If not specified, make it equal to quantity.
    *   **unitOfMeasure**: The unit of measure (e.g., kg, pcs, box).
5.  Return the data as a JSON array of objects, strictly adhering to the provided schema. Do not return anything other than the JSON array.

**Nomenclature Data:**
---
${t}
---
`,l=(await xP.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:i},{inlineData:{mimeType:e,data:n}}]},config:{responseMimeType:"application/json",responseSchema:bP}})).text.trim();if(!l.startsWith("[")||!l.endsWith("]"))throw console.error("Gemini response is not a valid JSON array:",l),new Error("The AI returned data in an unexpected format. Please try again with a clearer image.");return JSON.parse(l)}catch(i){console.error("Error calling Gemini to process invoice:",i);const o=i.message||"An unknown error occurred.";throw o.includes("API key not valid")?new Error("The API key is invalid. Please check your configuration."):new Error(`Failed to process the invoice with AI. Details: ${o}`)}},vT=n=>new Promise((e,t)=>{const i=new FileReader;i.readAsDataURL(n),i.onload=()=>e(i.result),i.onerror=o=>t(o)}),PP=({onSetupComplete:n})=>{const[e,t]=he.useState(""),[i,o]=he.useState(""),[l,u]=he.useState(""),d=h=>{h.preventDefault(),e.trim()&&i.trim()?n(e.trim(),i.trim()):u("Both company and warehouse names are required.")};return I.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center p-4",children:I.jsxs("div",{className:"w-full max-w-md",children:[I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-slate-200",children:[I.jsx("div",{className:"flex justify-center mb-6",children:I.jsx("div",{className:"bg-indigo-600 p-4 rounded-full text-white",children:I.jsx(Tm,{className:"h-10 w-10"})})}),I.jsx("h1",{className:"text-2xl font-bold text-center text-slate-800",children:"Welcome!"}),I.jsx("p",{className:"text-center text-slate-500 mt-2 mb-6",children:"Let's get started by setting up your first company and warehouse."}),I.jsxs("form",{onSubmit:d,className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"company-name",className:"block text-sm font-medium text-slate-700",children:"Company Name"}),I.jsx("input",{id:"company-name",type:"text",value:e,onChange:h=>t(h.target.value),placeholder:"e.g., My Restaurant Group",className:"mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"warehouse-name",className:"block text-sm font-medium text-slate-700",children:"Warehouse / Location Name"}),I.jsx("input",{id:"warehouse-name",type:"text",value:i,onChange:h=>o(h.target.value),placeholder:"e.g., Central Kitchen",className:"mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),l&&I.jsx("p",{className:"text-sm text-red-600",children:l}),I.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Start Processing Invoices"})]})]}),I.jsx("footer",{className:"text-center p-4 text-xs text-slate-400 mt-4",children:I.jsx("p",{children:" 2024 Invoice AI Parser."})})]})})},DP=()=>{};var ET={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VP=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],h=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},PS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,h=o+2<n.length,m=h?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,w=m&63;h||(w=64,u||(S=64)),i.push(t[v],t[E],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new kP;const S=l<<2|d>>4;if(i.push(S),m!==64){const w=d<<4&240|m>>2;if(i.push(w),E!==64){const O=m<<6&192|E;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UP=function(n){const e=MS(n);return PS.encodeByteArray(e,!0)},xf=function(n){return UP(n).replace(/\./g,"")},DS=function(n){try{return PS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=()=>LP().__FIREBASE_DEFAULTS__,qP=()=>{if(typeof process>"u"||typeof ET>"u")return;const n=ET.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&DS(n[1]);return e&&JSON.parse(e)},Zf=()=>{try{return DP()||OP()||qP()||FP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VS=n=>{var e,t;return(t=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},BP=n=>{const e=VS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},kS=()=>{var n;return(n=Zf())==null?void 0:n.config},US=n=>{var e;return(e=Zf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[xf(JSON.stringify(t)),xf(JSON.stringify(u)),""].join(".")}const Wl={};function zP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?n.emulator.push(e):n.prod.push(e);return n}function YP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let TT=!1;function OS(n,e){if(typeof window>"u"||typeof document>"u"||!xa(window.location.host)||Wl[n]===e||Wl[n]||TT)return;Wl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=zP().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{TT=!0,u()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=YP(i),w=t("text"),O=document.getElementById(w)||document.createElement("span"),F=t("learnmore"),B=document.getElementById(F)||document.createElement("a"),Q=t("preprendIcon"),j=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;d($),v(B,F);const ue=m();h(j,Q),$.append(j,O,B,ue),document.body.appendChild($)}l?(O.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function JP(){var e;const n=(e=Zf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $P(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jP(){return!JP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZP(){try{return typeof indexedDB=="object"}catch{return!1}}function eD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="FirebaseError";class Rs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=tD,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?nD(l,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Rs(o,d,i)}}function nD(n,e){return n.replace(iD,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const iD=/\{\$([^}]+)}/g;function sD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],u=e[o];if(ST(l)&&ST(u)){if(!ao(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function ST(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Gl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function rD(n,e){const t=new oD(n,e);return t.subscribe.bind(t)}class oD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");aD(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ep),o.error===void 0&&(o.error=Ep),o.complete===void 0&&(o.complete=Ep);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(n){return n&&n._delegate?n._delegate:n}class lo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new HP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cD(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uD(n){return n===no?void 0:n}function cD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const dD={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},hD=Ye.INFO,pD={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},mD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=pD[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bm{constructor(e){this.name=e,this._logLevel=hD,this._logHandler=mD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const gD=(n,e)=>e.some(t=>n instanceof t);let AT,CT;function yD(){return AT||(AT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _D(){return CT||(CT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,Kp=new WeakMap,FS=new WeakMap,Tp=new WeakMap,Mm=new WeakMap;function vD(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(dr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&qS.set(t,n)}).catch(()=>{}),Mm.set(e,n),e}function ED(n){if(Kp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Kp.set(n,e)}let Jp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||FS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return dr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function TD(n){Jp=n(Jp)}function SD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Sp(this),e,...t);return FS.set(i,e.sort?e.sort():[e]),dr(i)}:_D().includes(n)?function(...e){return n.apply(Sp(this),e),dr(qS.get(this))}:function(...e){return dr(n.apply(Sp(this),e))}}function AD(n){return typeof n=="function"?SD(n):(n instanceof IDBTransaction&&ED(n),gD(n,yD())?new Proxy(n,Jp):n)}function dr(n){if(n instanceof IDBRequest)return vD(n);if(Tp.has(n))return Tp.get(n);const e=AD(n);return e!==n&&(Tp.set(n,e),Mm.set(e,n)),e}const Sp=n=>Mm.get(n);function CD(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=dr(u);return i&&u.addEventListener("upgradeneeded",h=>{i(dr(u.result),h.oldVersion,h.newVersion,dr(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{l&&h.addEventListener("close",()=>l()),o&&h.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const ID=["get","getKey","getAll","getAllKeys","count"],wD=["put","add","delete","clear"],Ap=new Map;function IT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ap.get(e))return Ap.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ID.includes(t)))return;const l=async function(u,...d){const h=this.transaction(u,o?"readwrite":"readonly");let m=h.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&h.done]))[0]};return Ap.set(e,l),l}TD(n=>({...n,get:(e,t,i)=>IT(e,t)||n.get(e,t,i),has:(e,t)=>!!IT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ND(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ND(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qp="@firebase/app",wT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new bm("@firebase/app"),xD="@firebase/app-compat",bD="@firebase/analytics-compat",MD="@firebase/analytics",PD="@firebase/app-check-compat",DD="@firebase/app-check",VD="@firebase/auth",kD="@firebase/auth-compat",UD="@firebase/database",LD="@firebase/data-connect",OD="@firebase/database-compat",qD="@firebase/functions",FD="@firebase/functions-compat",BD="@firebase/installations",HD="@firebase/installations-compat",GD="@firebase/messaging",zD="@firebase/messaging-compat",YD="@firebase/performance",KD="@firebase/performance-compat",JD="@firebase/remote-config",QD="@firebase/remote-config-compat",WD="@firebase/storage",XD="@firebase/storage-compat",$D="@firebase/firestore",jD="@firebase/ai",ZD="@firebase/firestore-compat",e2="firebase",t2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",n2={[Qp]:"fire-core",[xD]:"fire-core-compat",[MD]:"fire-analytics",[bD]:"fire-analytics-compat",[DD]:"fire-app-check",[PD]:"fire-app-check-compat",[VD]:"fire-auth",[kD]:"fire-auth-compat",[UD]:"fire-rtdb",[LD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[qD]:"fire-fn",[FD]:"fire-fn-compat",[BD]:"fire-iid",[HD]:"fire-iid-compat",[GD]:"fire-fcm",[zD]:"fire-fcm-compat",[YD]:"fire-perf",[KD]:"fire-perf-compat",[JD]:"fire-rc",[QD]:"fire-rc-compat",[WD]:"fire-gcs",[XD]:"fire-gcs-compat",[$D]:"fire-fst",[ZD]:"fire-fst-compat",[jD]:"fire-vertex","fire-js":"fire-js",[e2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Map,i2=new Map,Xp=new Map;function RT(n,e){try{n.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _a(n){const e=n.name;if(Xp.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,n);for(const t of bf.values())RT(t,n);for(const t of i2.values())RT(t,n);return!0}function Pm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new pu("app","Firebase",s2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=t2;function BS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Wp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw hr.create("bad-app-name",{appName:String(o)});if(t||(t=kS()),!t)throw hr.create("no-options");const l=bf.get(o);if(l){if(ao(t,l.options)&&ao(i,l.config))return l;throw hr.create("duplicate-app",{appName:o})}const u=new fD(o);for(const h of Xp.values())u.addComponent(h);const d=new r2(t,i,u);return bf.set(o,d),d}function HS(n=Wp){const e=bf.get(n);if(!e&&n===Wp&&kS())return BS();if(!e)throw hr.create("no-app",{appName:n});return e}function pr(n,e,t){let i=n2[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(u.join(" "));return}_a(new lo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="firebase-heartbeat-database",a2=1,iu="firebase-heartbeat-store";let Cp=null;function GS(){return Cp||(Cp=CD(o2,a2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw hr.create("idb-open",{originalErrorMessage:n.message})})),Cp}async function l2(n){try{const t=(await GS()).transaction(iu),i=await t.objectStore(iu).get(zS(n));return await t.done,i}catch(e){if(e instanceof Rs)Ts.warn(e.message);else{const t=hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(t.message)}}}async function NT(n,e){try{const i=(await GS()).transaction(iu,"readwrite");await i.objectStore(iu).put(e,zS(n)),await i.done}catch(t){if(t instanceof Rs)Ts.warn(t.message);else{const i=hr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(i.message)}}}function zS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=1024,c2=30;class f2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>c2){const u=p2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xT(),{heartbeatsToSend:i,unsentEntries:o}=d2(this._heartbeatsCache.heartbeats),l=xf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ts.warn(t),""}}}function xT(){return new Date().toISOString().substring(0,10)}function d2(n,e=u2){const t=[];let i=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),bT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),bT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class h2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZP()?eD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bT(n){return xf(JSON.stringify({version:2,heartbeats:n})).length}function p2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n){_a(new lo("platform-logger",e=>new RD(e),"PRIVATE")),_a(new lo("heartbeat",e=>new f2(e),"PRIVATE")),pr(Qp,wT,n),pr(Qp,wT,"esm2020"),pr("fire-js","")}m2("");function YS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g2=YS,KS=new pu("auth","Firebase",YS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new bm("@firebase/auth");function y2(n,...e){Mf.logLevel<=Ye.WARN&&Mf.warn(`Auth (${ba}): ${n}`,...e)}function pf(n,...e){Mf.logLevel<=Ye.ERROR&&Mf.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n,...e){throw Vm(n,...e)}function _i(n,...e){return Vm(n,...e)}function Dm(n,e,t){const i={...g2(),[e]:t};return new pu("auth","Firebase",i).create(e,{appName:n.name})}function _s(n){return Dm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _2(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ii(n,"argument-error"),Dm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return KS.create(n,...e)}function we(n,e,...t){if(!n)throw Vm(e,...t)}function gs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pf(e),new Error(e)}function Ss(n,e){n||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function v2(){return MT()==="http:"||MT()==="https:"}function MT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v2()||WP()||"connection"in navigator)?navigator.onLine:!0}function T2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ss(t>e,"Short delay should be less than long delay!"),this.isMobile=KP()||XP()}get(){return E2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){Ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C2=new gu(3e4,6e4);function Cr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ir(n,e,t,i,o={}){return QS(n,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=mu({key:n.config.apiKey,...u}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:h,...l};return QP()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&xa(n.emulatorConfig.host)&&(m.credentials="include"),JS.fetch()(await WS(n,n.config.apiHost,t,d),m)})}async function QS(n,e,t){n._canInitEmulator=!1;const i={...S2,...e};try{const o=new w2(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ef(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[h,m]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(n,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw ef(n,"email-already-in-use",u);if(h==="USER_DISABLED")throw ef(n,"user-disabled",u);const v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Dm(n,v,m);ii(n,v)}}catch(o){if(o instanceof Rs)throw o;ii(n,"network-request-failed",{message:String(o)})}}async function yu(n,e,t,i,o={}){const l=await Ir(n,e,t,i,o);return"mfaPendingCredential"in l&&ii(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function WS(n,e,t,i){const o=`${e}${t}?${i}`,l=n,u=l.config.emulator?km(n.config,o):`${n.config.apiScheme}://${o}`;return A2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function I2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class w2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),C2.get())})}}function ef(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=_i(n,e,i);return o.customData._tokenResponse=t,o}function PT(n){return n!==void 0&&n.enterprise!==void 0}class R2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function N2(n,e){return Ir(n,"GET","/v2/recaptchaConfig",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(n,e){return Ir(n,"POST","/v1/accounts:delete",e)}async function Pf(n,e){return Ir(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b2(n,e=!1){const t=Fn(n),i=await t.getIdToken(e),o=Um(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Xl(Ip(o.auth_time)),issuedAtTime:Xl(Ip(o.iat)),expirationTime:Xl(Ip(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ip(n){return Number(n)*1e3}function Um(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const o=DS(t);return o?JSON.parse(o):(pf("Failed to decode base64 JWT payload"),null)}catch(o){return pf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function DT(n){const e=Um(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rs&&M2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function M2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Df(n){var E;const e=n.auth,t=await n.getIdToken(),i=await su(n,Pf(e,{idToken:t}));we(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?XS(o.providerUserInfo):[],u=V2(n.providerData,l),d=n.isAnonymous,h=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),m=d?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function D2(n){const e=Fn(n);await Df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V2(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function XS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(n,e){const t=await QS(n,{},async()=>{const i=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await WS(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return n.emulatorConfig&&xa(n.emulatorConfig.host)&&(h.credentials="include"),JS.fetch()(u,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function U2(n,e){return Ir(n,"POST","/v2/accounts:revokeToken",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=DT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await k2(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,u=new pa;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new P2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return b2(this,e)}reload(){return D2(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Df(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await su(this,x2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:F}=t;we(E&&F,e,"internal-error");const B=pa.fromJSON(this.name,F);we(typeof E=="string",e,"internal-error"),ar(i,e.name),ar(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof w=="boolean",e,"internal-error"),ar(l,e.name),ar(u,e.name),ar(d,e.name),ar(h,e.name),ar(m,e.name),ar(v,e.name);const Q=new gi({uid:E,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:B,createdAt:m,lastLoginAt:v});return O&&Array.isArray(O)&&(Q.providerData=O.map(j=>({...j}))),h&&(Q._redirectEventId=h),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new pa;o.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Df(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?XS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new pa;d.updateFromIdToken(i);const h=new gi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new jp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;function ys(n){Ss(n instanceof Function,"Expected a class definition");let e=VT.get(n);return e?(Ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$S.type="NONE";const kT=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n,e,t){return`firebase:${n}:${e}:${t}`}class ma{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=mf(this.userKey,o.apiKey,l),this.fullPersistenceKey=mf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pf(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ma(ys(kT),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||ys(kT);const u=mf(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let E;if(typeof v=="string"){const S=await Pf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await gi._fromGetAccountInfoResponse(e,S,v)}else E=gi._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const h=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new ma(l,e,i):(l=h[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new ma(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iA(e))return"Blackberry";if(sA(e))return"Webos";if(ZS(e))return"Safari";if((e.includes("chrome/")||eA(e))&&!e.includes("edge/"))return"Chrome";if(nA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jS(n=dn()){return/firefox\//i.test(n)}function ZS(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eA(n=dn()){return/crios\//i.test(n)}function tA(n=dn()){return/iemobile/i.test(n)}function nA(n=dn()){return/android/i.test(n)}function iA(n=dn()){return/blackberry/i.test(n)}function sA(n=dn()){return/webos/i.test(n)}function Lm(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L2(n=dn()){var e;return Lm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function O2(){return $P()&&document.documentMode===10}function rA(n=dn()){return Lm(n)||nA(n)||sA(n)||iA(n)||/windows phone/i.test(n)||tA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n,e=[]){let t;switch(n){case"Browser":t=UT(dn());break;case"Worker":t=`${UT(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,d)=>{try{const h=e(l);u(h)}catch(h){d(h)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(n,e={}){return Ir(n,"GET","/v2/passwordPolicy",Cr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=6;class H2{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pf(this,{idToken:e}),i=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===d)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Df(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(_s(this));const t=e?Fn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F2(this),t=new H2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await U2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,o);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&y2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wr(n){return Fn(n)}class LT{constructor(e){this.auth=e,this.observer=null,this.addObserver=rD(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z2(n){ed=n}function aA(n){return ed.loadJS(n)}function Y2(){return ed.recaptchaEnterpriseScript}function K2(){return ed.gapiScript}function J2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Q2{constructor(){this.enterprise=new W2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class W2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const X2="recaptcha-enterprise",lA="NO_RECAPTCHA";class $2{constructor(e){this.type=X2,this.auth=wr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{N2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new R2(h);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(h=>{d(h)})})}function o(l,u,d){const h=window.grecaptcha;PT(h)?h.enterprise.ready(()=>{h.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(lA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q2().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(d=>{if(!t&&PT(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Y2();h.length!==0&&(h+=d),aA(h).then(()=>{o(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function OT(n,e,t,i=!1,o=!1){const l=new $2(n);let u;if(o)u=lA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Zp(n,e,t,i,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await OT(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await OT(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n,e){const t=Pm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ao(l,e??{}))return o;ii(o,"already-initialized")}return t.initialize({options:e})}function Z2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ys);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function eV(n,e,t){const i=wr(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=uA(e),{host:u,port:d}=tV(e),h=d===null?"":`:${d}`,m={url:`${l}//${u}${h}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(ao(m,i.config.emulator)&&ao(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,xa(u)?(LS(`${l}//${u}${h}`),OS("Auth",!0)):nV()}function uA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tV(n){const e=uA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:qT(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:qT(u)}}}function qT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function iV(n,e){return Ir(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Cr(n,e))}async function oV(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Om{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ru(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ru(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,t,"signInWithPassword",sV);case"emailLink":return rV(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,i,"signUpPassword",iV);case"emailLink":return oV(e,{idToken:t,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="http://localhost";class uo extends Om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const u=new uo(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ga(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ga(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ga(e,t)}buildRequest(){const e={requestUri:aV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uV(n){const e=Hl(Gl(n)).link,t=e?Hl(Gl(e)).deep_link_id:null,i=Hl(Gl(n)).deep_link_id;return(i?Hl(Gl(i)).link:null)||i||t||e||n}class qm{constructor(e){const t=Hl(Gl(e)),i=t.apiKey??null,o=t.oobCode??null,l=lV(t.mode??null);we(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=uV(e);try{return new qm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.providerId=Ma.PROVIDER_ID}static credential(e,t){return ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=qm.parseLink(t);return we(i,"argument-error"),ru._fromEmailAndCode(e,i.code,i.tenantId)}}Ma.PROVIDER_ID="password";Ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Fm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends _u{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ms.credential(t,i)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends _u{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends _u{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return cr.credential(t,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(n,e){return yu(n,"POST","/v1/accounts:signUp",Cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await gi._fromIdTokenResponse(e,i,o),u=FT(i);return new co({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=FT(i);return new co({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function FT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Rs{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Vf(e,t,i,o)}}function cA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(n,l,e,i):l})}async function fV(n,e,t=!1){const i=await su(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return co._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(n,e,t=!1){const{auth:i}=n;if(qn(i.app))return Promise.reject(_s(i));const o="reauthenticate";try{const l=await su(n,cA(i,o,e,n),t);we(l.idToken,i,"internal-error");const u=Um(l.idToken);we(u,i,"internal-error");const{sub:d}=u;return we(n.uid===d,i,"user-mismatch"),co._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ii(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,e,t=!1){if(qn(n.app))return Promise.reject(_s(n));const i="signIn",o=await cA(n,i,e),l=await co._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function hV(n,e){return fA(wr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n){const e=wr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pV(n,e,t){if(qn(n.app))return Promise.reject(_s(n));const i=wr(n),u=await Zp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cV).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&dA(n),h}),d=await co._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function mV(n,e,t){return qn(n.app)?Promise.reject(_s(n)):hV(Fn(n),Ma.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dA(n),i})}function gV(n,e,t,i){return Fn(n).onIdTokenChanged(e,t,i)}function yV(n,e,t){return Fn(n).beforeAuthStateChanged(e,t)}function _V(n,e,t,i){return Fn(n).onAuthStateChanged(e,t,i)}function vV(n){return Fn(n).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1e3,TV=10;class pA extends hA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);O2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TV):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},EV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pA.type="LOCAL";const SV=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends hA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mA.type="SESSION";const gA=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,l)),h=await AV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,h)=>{const m=Bm("",20);o.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),h(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function IV(n){Gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function wV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function NV(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebaseLocalStorageDb",xV=1,Uf="firebaseLocalStorage",vA="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nd(n,e){return n.transaction([Uf],e?"readwrite":"readonly").objectStore(Uf)}function bV(){const n=indexedDB.deleteDatabase(_A);return new vu(n).toPromise()}function em(){const n=indexedDB.open(_A,xV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uf,{keyPath:vA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uf)?e(i):(i.close(),await bV(),e(await em()))})})}async function BT(n,e,t){const i=nd(n,!0).put({[vA]:e,value:t});return new vu(i).toPromise()}async function MV(n,e){const t=nd(n,!1).get(e),i=await new vu(t).toPromise();return i===void 0?null:i.value}function HT(n,e){const t=nd(n,!0).delete(e);return new vu(t).toPromise()}const PV=800,DV=3;class EA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>DV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(NV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await wV(),!this.activeServiceWorker)return;this.sender=new CV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await BT(e,kf,"1"),await HT(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>BT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>MV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>HT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=nd(o,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EA.type="LOCAL";const VV=EA;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n,e){return e?ys(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends Om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kV(n){return fA(n.auth,new Hm(n),n.bypassAuthState)}function UV(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),dV(t,new Hm(n),n.bypassAuthState)}async function LV(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),fV(t,new Hm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kV;case"linkViaPopup":case"linkViaRedirect":return LV;case"reauthViaPopup":case"reauthViaRedirect":return UV;default:ii(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new gu(2e3,1e4);async function qV(n,e,t){if(qn(n.app))return Promise.reject(_i(n,"operation-not-supported-in-this-environment"));const i=wr(n);_2(n,e,Fm);const o=TA(i,t);return new io(i,"signInViaPopup",e,o).executeNotNull()}class io extends SA{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OV.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="pendingRedirect",gf=new Map;class BV extends SA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const i=await HV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HV(n,e){const t=YV(e),i=zV(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function GV(n,e){gf.set(n._key(),e)}function zV(n){return ys(n._redirectPersistence)}function YV(n){return mf(FV,n.config.apiKey,n.name)}async function KV(n,e,t=!1){if(qn(n.app))return Promise.reject(_s(n));const i=wr(n),o=TA(i,e),u=await new BV(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=600*1e3;class QV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!AA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(_i(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JV&&this.cachedEventUids.clear(),this.cachedEventUids.has(GT(e))}saveEventToCache(e){this.cachedEventUids.add(GT(e)),this.lastProcessedEventTime=Date.now()}}function GT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(n,e={}){return Ir(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jV=/^https?/;async function ZV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XV(n);for(const t of e)try{if(ek(t))return}catch{}ii(n,"unauthorized-domain")}function ek(n){const e=$p(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!jV.test(t))return!1;if($V.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new gu(3e4,6e4);function zT(){const n=Gi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nk(n){return new Promise((e,t)=>{var o,l,u;function i(){zT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zT(),t(_i(n,"network-request-failed"))},timeout:tk.get()})}if((l=(o=Gi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Gi().gapi)!=null&&u.load)i();else{const d=J2("iframefcb");return Gi()[d]=()=>{gapi.load?i():t(_i(n,"network-request-failed"))},aA(`${K2()}?onload=${d}`).catch(h=>t(h))}}).catch(e=>{throw yf=null,e})}let yf=null;function ik(n){return yf=yf||nk(n),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new gu(5e3,15e3),rk="__/auth/iframe",ok="emulator/auth/iframe",ak={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uk(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?km(e,ok):`https://${n.config.authDomain}/${rk}`,i={apiKey:e.apiKey,appName:n.name,v:ba},o=lk.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${mu(i).slice(1)}`}async function ck(n){const e=await ik(n),t=Gi().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:uk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ak,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=_i(n,"network-request-failed"),d=Gi().setTimeout(()=>{l(u)},sk.get());function h(){Gi().clearTimeout(d),o(i)}i.ping(h).then(h,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dk=500,hk=600,pk="_blank",mk="http://localhost";class YT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gk(n,e,t,i=dk,o=hk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h={...fk,width:i.toString(),height:o.toString(),top:l,left:u},m=dn().toLowerCase();t&&(d=eA(m)?pk:t),jS(m)&&(e=e||mk,h.scrollbars="yes");const v=Object.entries(h).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(L2(m)&&d!=="_self")return yk(e||"",d),new YT(null);const E=window.open(e||"",d,v);we(E,n,"popup-blocked");try{E.focus()}catch{}return new YT(E)}function yk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="__/auth/handler",vk="emulator/auth/handler",Ek=encodeURIComponent("fac");async function KT(n,e,t,i,o,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ba,eventId:o};if(e instanceof Fm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",sD(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof _u){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const h=await n._getAppCheckToken(),m=h?`#${Ek}=${encodeURIComponent(h)}`:"";return`${Tk(n)}?${mu(d).slice(1)}${m}`}function Tk({config:n}){return n.emulator?km(n,vk):`https://${n.authDomain}/${_k}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class Sk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=KV,this._overrideRedirectResult=GV}async _openPopup(e,t,i,o){var u;Ss((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await KT(e,t,i,$p(),o);return gk(e,l,Bm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await KT(e,t,i,$p(),o);return IV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ss(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ck(e),i=new QV(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wp,{type:wp},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[wp];l!==void 0&&t(!!l),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rA()||ZS()||Lm()}}const Ak=Sk;var JT="@firebase/auth",QT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wk(n){_a(new lo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(n)},m=new G2(i,o,l,h);return Z2(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_a(new lo("auth-internal",e=>{const t=wr(e.getProvider("auth").getImmediate());return(i=>new Ck(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(JT,QT,Ik(n)),pr(JT,QT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=300,Nk=US("authIdTokenMaxAge")||Rk;let WT=null;const xk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Nk)return;const o=t==null?void 0:t.token;WT!==o&&(WT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bk(n=HS()){const e=Pm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=j2(n,{popupRedirectResolver:Ak,persistence:[VV,SV,gA]}),i=US("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=xk(l.toString());yV(t,u,()=>u(t.currentUser)),gV(t,d=>u(d))}}const o=VS("auth");return o&&eV(t,`http://${o}`),t}function Mk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}z2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=_i("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Mk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wk("Browser");var Pk="firebase",Dk="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(Pk,Dk,"app");var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mr,CA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function x(){}x.prototype=P.prototype,M.F=P.prototype,M.prototype=new x,M.prototype.constructor=M,M.D=function(D,V,U){for(var b=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)b[Te-2]=arguments[Te];return P.prototype[V].apply(D,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,P,x){x||(x=0);const D=Array(16);if(typeof P=="string")for(var V=0;V<16;++V)D[V]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(V=0;V<16;++V)D[V]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;P=M.g[0],x=M.g[1],V=M.g[2];let U=M.g[3],b;b=P+(U^x&(V^U))+D[0]+3614090360&4294967295,P=x+(b<<7&4294967295|b>>>25),b=U+(V^P&(x^V))+D[1]+3905402710&4294967295,U=P+(b<<12&4294967295|b>>>20),b=V+(x^U&(P^x))+D[2]+606105819&4294967295,V=U+(b<<17&4294967295|b>>>15),b=x+(P^V&(U^P))+D[3]+3250441966&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(U^x&(V^U))+D[4]+4118548399&4294967295,P=x+(b<<7&4294967295|b>>>25),b=U+(V^P&(x^V))+D[5]+1200080426&4294967295,U=P+(b<<12&4294967295|b>>>20),b=V+(x^U&(P^x))+D[6]+2821735955&4294967295,V=U+(b<<17&4294967295|b>>>15),b=x+(P^V&(U^P))+D[7]+4249261313&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(U^x&(V^U))+D[8]+1770035416&4294967295,P=x+(b<<7&4294967295|b>>>25),b=U+(V^P&(x^V))+D[9]+2336552879&4294967295,U=P+(b<<12&4294967295|b>>>20),b=V+(x^U&(P^x))+D[10]+4294925233&4294967295,V=U+(b<<17&4294967295|b>>>15),b=x+(P^V&(U^P))+D[11]+2304563134&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(U^x&(V^U))+D[12]+1804603682&4294967295,P=x+(b<<7&4294967295|b>>>25),b=U+(V^P&(x^V))+D[13]+4254626195&4294967295,U=P+(b<<12&4294967295|b>>>20),b=V+(x^U&(P^x))+D[14]+2792965006&4294967295,V=U+(b<<17&4294967295|b>>>15),b=x+(P^V&(U^P))+D[15]+1236535329&4294967295,x=V+(b<<22&4294967295|b>>>10),b=P+(V^U&(x^V))+D[1]+4129170786&4294967295,P=x+(b<<5&4294967295|b>>>27),b=U+(x^V&(P^x))+D[6]+3225465664&4294967295,U=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(U^P))+D[11]+643717713&4294967295,V=U+(b<<14&4294967295|b>>>18),b=x+(U^P&(V^U))+D[0]+3921069994&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^U&(x^V))+D[5]+3593408605&4294967295,P=x+(b<<5&4294967295|b>>>27),b=U+(x^V&(P^x))+D[10]+38016083&4294967295,U=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(U^P))+D[15]+3634488961&4294967295,V=U+(b<<14&4294967295|b>>>18),b=x+(U^P&(V^U))+D[4]+3889429448&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^U&(x^V))+D[9]+568446438&4294967295,P=x+(b<<5&4294967295|b>>>27),b=U+(x^V&(P^x))+D[14]+3275163606&4294967295,U=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(U^P))+D[3]+4107603335&4294967295,V=U+(b<<14&4294967295|b>>>18),b=x+(U^P&(V^U))+D[8]+1163531501&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(V^U&(x^V))+D[13]+2850285829&4294967295,P=x+(b<<5&4294967295|b>>>27),b=U+(x^V&(P^x))+D[2]+4243563512&4294967295,U=P+(b<<9&4294967295|b>>>23),b=V+(P^x&(U^P))+D[7]+1735328473&4294967295,V=U+(b<<14&4294967295|b>>>18),b=x+(U^P&(V^U))+D[12]+2368359562&4294967295,x=V+(b<<20&4294967295|b>>>12),b=P+(x^V^U)+D[5]+4294588738&4294967295,P=x+(b<<4&4294967295|b>>>28),b=U+(P^x^V)+D[8]+2272392833&4294967295,U=P+(b<<11&4294967295|b>>>21),b=V+(U^P^x)+D[11]+1839030562&4294967295,V=U+(b<<16&4294967295|b>>>16),b=x+(V^U^P)+D[14]+4259657740&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^U)+D[1]+2763975236&4294967295,P=x+(b<<4&4294967295|b>>>28),b=U+(P^x^V)+D[4]+1272893353&4294967295,U=P+(b<<11&4294967295|b>>>21),b=V+(U^P^x)+D[7]+4139469664&4294967295,V=U+(b<<16&4294967295|b>>>16),b=x+(V^U^P)+D[10]+3200236656&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^U)+D[13]+681279174&4294967295,P=x+(b<<4&4294967295|b>>>28),b=U+(P^x^V)+D[0]+3936430074&4294967295,U=P+(b<<11&4294967295|b>>>21),b=V+(U^P^x)+D[3]+3572445317&4294967295,V=U+(b<<16&4294967295|b>>>16),b=x+(V^U^P)+D[6]+76029189&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(x^V^U)+D[9]+3654602809&4294967295,P=x+(b<<4&4294967295|b>>>28),b=U+(P^x^V)+D[12]+3873151461&4294967295,U=P+(b<<11&4294967295|b>>>21),b=V+(U^P^x)+D[15]+530742520&4294967295,V=U+(b<<16&4294967295|b>>>16),b=x+(V^U^P)+D[2]+3299628645&4294967295,x=V+(b<<23&4294967295|b>>>9),b=P+(V^(x|~U))+D[0]+4096336452&4294967295,P=x+(b<<6&4294967295|b>>>26),b=U+(x^(P|~V))+D[7]+1126891415&4294967295,U=P+(b<<10&4294967295|b>>>22),b=V+(P^(U|~x))+D[14]+2878612391&4294967295,V=U+(b<<15&4294967295|b>>>17),b=x+(U^(V|~P))+D[5]+4237533241&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~U))+D[12]+1700485571&4294967295,P=x+(b<<6&4294967295|b>>>26),b=U+(x^(P|~V))+D[3]+2399980690&4294967295,U=P+(b<<10&4294967295|b>>>22),b=V+(P^(U|~x))+D[10]+4293915773&4294967295,V=U+(b<<15&4294967295|b>>>17),b=x+(U^(V|~P))+D[1]+2240044497&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~U))+D[8]+1873313359&4294967295,P=x+(b<<6&4294967295|b>>>26),b=U+(x^(P|~V))+D[15]+4264355552&4294967295,U=P+(b<<10&4294967295|b>>>22),b=V+(P^(U|~x))+D[6]+2734768916&4294967295,V=U+(b<<15&4294967295|b>>>17),b=x+(U^(V|~P))+D[13]+1309151649&4294967295,x=V+(b<<21&4294967295|b>>>11),b=P+(V^(x|~U))+D[4]+4149444226&4294967295,P=x+(b<<6&4294967295|b>>>26),b=U+(x^(P|~V))+D[11]+3174756917&4294967295,U=P+(b<<10&4294967295|b>>>22),b=V+(P^(U|~x))+D[2]+718787259&4294967295,V=U+(b<<15&4294967295|b>>>17),b=x+(U^(V|~P))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+U&4294967295}i.prototype.v=function(M,P){P===void 0&&(P=M.length);const x=P-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<P;){if(V==0)for(;U<=x;)o(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<P;)if(D[V++]=M.charCodeAt(U++),V==this.blockSize){o(this,D),V=0;break}}else for(;U<P;)if(D[V++]=M[U++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=P},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;P=this.o*8;for(var x=M.length-8;x<M.length;++x)M[x]=P&255,P/=256;for(this.v(M),M=Array(16),P=0,x=0;x<4;++x)for(let D=0;D<32;D+=8)M[P++]=this.g[x]>>>D&255;return M};function l(M,P){var x=d;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=P(M)}function u(M,P){this.h=P;const x=[];let D=!0;for(let V=M.length-1;V>=0;V--){const U=M[V]|0;D&&U==P||(x[V]=U,D=!1)}this.g=x}var d={};function h(M){return-128<=M&&M<128?l(M,function(P){return new u([P|0],P<0?-1:0)}):new u([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return B(m(-M));const P=[];let x=1;for(let D=0;M>=x;D++)P[D]=M/x|0,x*=4294967296;return new u(P,0)}function v(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return B(v(M.substring(1),P));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=m(Math.pow(P,8));let D=E;for(let U=0;U<M.length;U+=8){var V=Math.min(8,M.length-U);const b=parseInt(M.substring(U,U+V),P);V<8?(V=m(Math.pow(P,V)),D=D.j(V).add(m(b))):(D=D.j(x),D=D.add(m(b)))}return D}var E=h(0),S=h(1),w=h(16777216);n=u.prototype,n.m=function(){if(F(this))return-B(this).m();let M=0,P=1;for(let x=0;x<this.g.length;x++){const D=this.i(x);M+=(D>=0?D:4294967296+D)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(F(this))return"-"+B(this).toString(M);const P=m(Math.pow(M,6));var x=this;let D="";for(;;){const V=ue(x,P).g;x=Q(x,V.j(P));let U=((x.g.length>0?x.g[0]:x.h)>>>0).toString(M);if(x=V,O(x))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(let P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function F(M){return M.h==-1}n.l=function(M){return M=Q(this,M),F(M)?-1:O(M)?0:1};function B(M){const P=M.g.length,x=[];for(let D=0;D<P;D++)x[D]=~M.g[D];return new u(x,~M.h).add(S)}n.abs=function(){return F(this)?B(this):this},n.add=function(M){const P=Math.max(this.g.length,M.g.length),x=[];let D=0;for(let V=0;V<=P;V++){let U=D+(this.i(V)&65535)+(M.i(V)&65535),b=(U>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=b>>>16,U&=65535,b&=65535,x[V]=b<<16|U}return new u(x,x[x.length-1]&-2147483648?-1:0)};function Q(M,P){return M.add(B(P))}n.j=function(M){if(O(this)||O(M))return E;if(F(this))return F(M)?B(this).j(B(M)):B(B(this).j(M));if(F(M))return B(this.j(B(M)));if(this.l(w)<0&&M.l(w)<0)return m(this.m()*M.m());const P=this.g.length+M.g.length,x=[];for(var D=0;D<2*P;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<M.g.length;V++){const U=this.i(D)>>>16,b=this.i(D)&65535,Te=M.i(V)>>>16,Ce=M.i(V)&65535;x[2*D+2*V]+=b*Ce,j(x,2*D+2*V),x[2*D+2*V+1]+=U*Ce,j(x,2*D+2*V+1),x[2*D+2*V+1]+=b*Te,j(x,2*D+2*V+1),x[2*D+2*V+2]+=U*Te,j(x,2*D+2*V+2)}for(M=0;M<P;M++)x[M]=x[2*M+1]<<16|x[2*M];for(M=P;M<2*P;M++)x[M]=0;return new u(x,0)};function j(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function $(M,P){this.g=M,this.h=P}function ue(M,P){if(O(P))throw Error("division by zero");if(O(M))return new $(E,E);if(F(M))return P=ue(B(M),P),new $(B(P.g),B(P.h));if(F(P))return P=ue(M,B(P)),new $(B(P.g),P.h);if(M.g.length>30){if(F(M)||F(P))throw Error("slowDivide_ only works with positive integers.");for(var x=S,D=P;D.l(M)<=0;)x=de(x),D=de(D);var V=re(x,1),U=re(D,1);for(D=re(D,2),x=re(x,2);!O(D);){var b=U.add(D);b.l(M)<=0&&(V=V.add(x),U=b),D=re(D,1),x=re(x,1)}return P=Q(M,V.j(P)),new $(V,P)}for(V=E;M.l(P)>=0;){for(x=Math.max(1,Math.floor(M.m()/P.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=m(x),b=U.j(P);F(b)||b.l(M)>0;)x-=D,U=m(x),b=U.j(P);O(U)&&(U=S),V=V.add(U),M=Q(M,b)}return new $(V,M)}n.B=function(M){return ue(this,M).h},n.and=function(M){const P=Math.max(this.g.length,M.g.length),x=[];for(let D=0;D<P;D++)x[D]=this.i(D)&M.i(D);return new u(x,this.h&M.h)},n.or=function(M){const P=Math.max(this.g.length,M.g.length),x=[];for(let D=0;D<P;D++)x[D]=this.i(D)|M.i(D);return new u(x,this.h|M.h)},n.xor=function(M){const P=Math.max(this.g.length,M.g.length),x=[];for(let D=0;D<P;D++)x[D]=this.i(D)^M.i(D);return new u(x,this.h^M.h)};function de(M){const P=M.g.length+1,x=[];for(let D=0;D<P;D++)x[D]=M.i(D)<<1|M.i(D-1)>>>31;return new u(x,M.h)}function re(M,P){const x=P>>5;P%=32;const D=M.g.length-x,V=[];for(let U=0;U<D;U++)V[U]=P>0?M.i(U+x)>>>P|M.i(U+x+1)<<32-P:M.i(U+x);return new u(V,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,CA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,mr=u}).apply(typeof XT<"u"?XT:typeof self<"u"?self:typeof window<"u"?window:{});var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,zl,wA,_f,tm,RA,NA,xA;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof tf=="object"&&tf];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(p,T){if(T)e:{var C=i;p=p.split(".");for(var N=0;N<p.length-1;N++){var z=p[N];if(!(z in C))break e;C=C[z]}p=p[p.length-1],N=C[p],T=T(N),T!=N&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(T){var C=[],N;for(N in T)Object.prototype.hasOwnProperty.call(T,N)&&C.push([N,T[N]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function h(p,T,C){return p.call.apply(p.bind,arguments)}function m(p,T,C){return m=h,m.apply(null,arguments)}function v(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var N=C.slice();return N.push.apply(N,arguments),p.apply(this,N)}}function E(p,T){function C(){}C.prototype=T.prototype,p.Z=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(N,z,W){for(var fe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)fe[ke-2]=arguments[ke];return T.prototype[z].apply(N,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function w(p){const T=p.length;if(T>0){const C=Array(T);for(let N=0;N<T;N++)C[N]=p[N];return C}return[]}function O(p,T){for(let N=1;N<arguments.length;N++){const z=arguments[N];var C=typeof z;if(C=C!="object"?C:z?Array.isArray(z)?"array":C:"null",C=="array"||C=="object"&&typeof z.length=="number"){C=p.length||0;const W=z.length||0;p.length=C+W;for(let fe=0;fe<W;fe++)p[C+fe]=z[fe]}else p.push(z)}}class F{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function B(p){u.setTimeout(()=>{throw p},0)}function Q(){var p=M;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class j{constructor(){this.h=this.g=null}add(T,C){const N=$.get();N.set(T,C),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new F(()=>new ue,p=>p.reset());class ue{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let de,re=!1,M=new j,P=()=>{const p=Promise.resolve(void 0);de=()=>{p.then(x)}};function x(){for(var p;p=Q();){try{p.h.call(p.g)}catch(C){B(C)}var T=$;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}re=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return p})();function b(p){return/^[\s\xa0]*$/.test(p)}function Te(p,T){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}E(Te,V),Te.prototype.init=function(p,T){const C=this.type=p.type,N=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),G=0;function ae(p,T,C,N,z){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!N,this.ha=z,this.key=++G,this.da=this.fa=!1}function ce(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function De(p,T,C){for(const N in p)T.call(C,p[N],N,p)}function xe(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function L(p){const T={};for(const C in p)T[C]=p[C];return T}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(p,T){let C,N;for(let z=1;z<arguments.length;z++){N=arguments[z];for(C in N)p[C]=N[C];for(let W=0;W<ee.length;W++)C=ee[W],Object.prototype.hasOwnProperty.call(N,C)&&(p[C]=N[C])}}function le(p){this.src=p,this.g={},this.h=0}le.prototype.add=function(p,T,C,N,z){const W=p.toString();p=this.g[W],p||(p=this.g[W]=[],this.h++);const fe=Ie(p,T,N,z);return fe>-1?(T=p[fe],C||(T.fa=!1)):(T=new ae(T,this.src,W,!!N,z),T.fa=C,p.push(T)),T};function ye(p,T){const C=T.type;if(C in p.g){var N=p.g[C],z=Array.prototype.indexOf.call(N,T,void 0),W;(W=z>=0)&&Array.prototype.splice.call(N,z,1),W&&(ce(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Ie(p,T,C,N){for(let z=0;z<p.length;++z){const W=p[z];if(!W.da&&W.listener==T&&W.capture==!!C&&W.ha==N)return z}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Ct={};function dt(p,T,C,N,z){if(Array.isArray(T)){for(let W=0;W<T.length;W++)dt(p,T[W],C,N,z);return null}return C=Xt(C),p&&p[Ce]?p.J(T,C,d(N)?!!N.capture:!1,z):Ei(p,T,C,!1,N,z)}function Ei(p,T,C,N,z,W){if(!T)throw Error("Invalid event type");const fe=d(z)?!!z.capture:!!z;let ke=hn(p);if(ke||(p[Be]=ke=new le(p)),C=ke.add(T,C,N,fe,W),C.proxy)return C;if(N=Ve(),C.proxy=N,N.src=p,N.listener=C,p.addEventListener)U||(z=fe),z===void 0&&(z=!1),p.addEventListener(T.toString(),N,z);else if(p.attachEvent)p.attachEvent(Ne(T.toString()),N);else if(p.addListener&&p.removeListener)p.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ve(){function p(C){return T.call(p.src,p.listener,C)}const T=Nn;return p}function He(p,T,C,N,z){if(Array.isArray(T))for(var W=0;W<T.length;W++)He(p,T[W],C,N,z);else N=d(N)?!!N.capture:!!N,C=Xt(C),p&&p[Ce]?(p=p.i,W=String(T).toString(),W in p.g&&(T=p.g[W],C=Ie(T,C,N,z),C>-1&&(ce(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete p.g[W],p.h--)))):p&&(p=hn(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Ie(T,C,N,z)),(C=p>-1?T[p]:null)&&Le(C))}function Le(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[Ce])ye(T.i,p);else{var C=p.type,N=p.proxy;T.removeEventListener?T.removeEventListener(C,N,p.capture):T.detachEvent?T.detachEvent(Ne(C),N):T.addListener&&T.removeListener&&T.removeListener(N),(C=hn(T))?(ye(C,p),C.h==0&&(C.src=null,T[Be]=null)):ce(p)}}}function Ne(p){return p in Ct?Ct[p]:Ct[p]="on"+p}function Nn(p,T){if(p.da)p=!0;else{T=new Te(T,this);const C=p.listener,N=p.ha||p.src;p.fa&&Le(p),p=C.call(N,T)}return p}function hn(p){return p=p[Be],p instanceof le?p:null}var xn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xt(p){return typeof p=="function"?p:(p[xn]||(p[xn]=function(T){return p.handleEvent(T)}),p[xn])}function ht(){D.call(this),this.i=new le(this),this.M=this,this.G=null}E(ht,D),ht.prototype[Ce]=!0,ht.prototype.removeEventListener=function(p,T,C,N){He(this,p,T,C,N)};function Ft(p,T){var C,N=p.G;if(N)for(C=[];N;N=N.G)C.push(N);if(p=p.M,N=T.type||T,typeof T=="string")T=new V(T,p);else if(T instanceof V)T.target=T.target||p;else{var z=T;T=new V(N,p),ie(T,z)}z=!0;let W,fe;if(C)for(fe=C.length-1;fe>=0;fe--)W=T.g=C[fe],z=Ns(W,N,!0,T)&&z;if(W=T.g=p,z=Ns(W,N,!0,T)&&z,z=Ns(W,N,!1,T)&&z,C)for(fe=0;fe<C.length;fe++)W=T.g=C[fe],z=Ns(W,N,!1,T)&&z}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const C=p.g[T];for(let N=0;N<C.length;N++)ce(C[N]);delete p.g[T],p.h--}}this.G=null},ht.prototype.J=function(p,T,C,N){return this.i.add(String(p),T,!1,C,N)},ht.prototype.K=function(p,T,C,N){return this.i.add(String(p),T,!0,C,N)};function Ns(p,T,C,N){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let z=!0;for(let W=0;W<T.length;++W){const fe=T[W];if(fe&&!fe.da&&fe.capture==C){const ke=fe.listener,wt=fe.ha||fe.src;fe.fa&&ye(p.i,fe),z=ke.call(wt,N)!==!1&&z}}return z&&!N.defaultPrevented}function gd(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(p,T||0)}function Iu(p){p.g=gd(()=>{p.g=null,p.i&&(p.i=!1,Iu(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class pn extends D{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Iu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(p){D.call(this),this.h=p,this.g={}}E(Rr,D);var Ua=[];function La(p){De(p.g,function(T,C){this.g.hasOwnProperty(C)&&Le(T)},p),p.g={}}Rr.prototype.N=function(){Rr.Z.N.call(this),La(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=u.JSON.stringify,yd=u.JSON.parse,wu=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ru(){}function Nu(){}var si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){V.call(this,"d")}E($t,V);function Bn(){V.call(this,"c")}E(Bn,V);var It={},xu=null;function vo(){return xu=xu||new ht}It.Ia="serverreachability";function bu(p){V.call(this,It.Ia,p)}E(bu,V);function Ti(p){const T=vo();Ft(T,new bu(T))}It.STAT_EVENT="statevent";function Nr(p,T){V.call(this,It.STAT_EVENT,p),this.stat=T}E(Nr,V);function bt(p){const T=vo();Ft(T,new Nr(T,p))}It.Ja="timingevent";function Si(p,T){V.call(this,It.Ja,p),this.size=T}E(Si,V);function Ai(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},T)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function _d(p,T,C,N,z,W){p.info(function(){if(p.g)if(W){var fe="",ke=W.split("&");for(let Ze=0;Ze<ke.length;Ze++){var wt=ke[Ze].split("=");if(wt.length>1){const _t=wt[0];wt=wt[1];const Yn=_t.split("_");fe=Yn.length>=2&&Yn[1]=="type"?fe+(_t+"="+wt+"&"):fe+(_t+"=redacted&")}}}else fe=null;else fe=W;return"XMLHTTP REQ ("+N+") [attempt "+z+"]: "+T+`
`+C+`
`+fe})}function Mu(p,T,C,N,z,W,fe){p.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+z+"]: "+T+`
`+C+`
`+W+" "+fe})}function Ci(p,T,C,N){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+vd(p,C)+(N?" "+N:"")})}function xr(p,T){p.info(function(){return"TIMEOUT: "+T})}ri.prototype.info=function(){};function vd(p,T){if(!p.g)return T;if(!T)return null;try{const W=JSON.parse(T);if(W){for(p=0;p<W.length;p++)if(Array.isArray(W[p])){var C=W[p];if(!(C.length<2)){var N=C[1];if(Array.isArray(N)&&!(N.length<1)){var z=N[0];if(z!="noop"&&z!="stop"&&z!="close")for(let fe=1;fe<N.length;fe++)N[fe]=""}}}}return xs(W)}catch{return T}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qa;function Mr(){}E(Mr,Ru),Mr.prototype.g=function(){return new XMLHttpRequest},qa=new Mr;function Xi(p){return encodeURIComponent(String(p))}function Pu(p){var T=1;p=p.split(":");const C=[];for(;T>0&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function oi(p,T,C,N){this.j=p,this.i=T,this.l=C,this.S=N||1,this.V=new Rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Mt={},zt={};function Ii(p,T,C){p.M=1,p.A=Pr(Dt(T)),p.u=C,p.R=!0,Eo(p,null)}function Eo(p,T){p.F=Date.now(),wi(p),p.B=Dt(p.A);var C=p.B,N=p.S;Array.isArray(N)||(N=[String(N)]),Co(C.i,"t",N),p.C=0,C=p.j.L,p.h=new ai,p.g=Ju(p.j,C?T:null,!p.u),p.P>0&&(p.O=new pn(m(p.Y,p,p.g),p.P)),T=p.V,C=p.g,N=p.ba;var z="readystatechange";Array.isArray(z)||(z&&(Ua[0]=z.toString()),z=Ua);for(let W=0;W<z.length;W++){const fe=dt(C,z[W],N||T.handleEvent,!1,T.h||T);if(!fe)break;T.g[fe.key]=fe}T=p.J?L(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),Ti(),_d(p.i,p.v,p.B,p.l,p.S,p.u)}oi.prototype.ba=function(p){p=p.target;const T=this.O;T&&ci(p)==3?T.j():this.Y(p)},oi.prototype.Y=function(p){try{if(p==this.g)e:{const ke=ci(this.g),wt=this.g.ya(),Ze=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||jt(this.g)))){this.K||ke!=4||wt==7||(wt==8||Ze<=0?Ti(3):Ti(2)),Ri(this);var T=this.g.ca();this.X=T;var C=Ed(this);if(this.o=T==200,Mu(this.i,this.v,this.B,this.l,this.S,ke,T),this.o){if(this.U&&!this.L){t:{if(this.g){var N,z=this.g;if((N=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(N)){var W=N;break t}}W=null}if(p=W)Ci(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,p);else{this.o=!1,this.m=3,bt(12),bn(this),Hn(this);break e}}if(this.R){p=!0;let _t;for(;!this.K&&this.C<C.length;)if(_t=Vu(this,C),_t==zt){ke==4&&(this.m=4,bt(14),p=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Mt){this.m=4,bt(15),Ci(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else Ci(this.i,this.l,_t,null),Ni(this,_t);if(Du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||C.length!=0||this.h.h||(this.m=1,bt(16),p=!1),this.o=this.o&&p,!p)Ci(this.i,this.l,C,"[Invalid Chunked Response]"),bn(this),Hn(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),el(fe),fe.P=!0,bt(11))}}else Ci(this.i,this.l,C,null),Ni(this,C);ke==4&&bn(this),this.o&&!this.K&&(ke==4?Gu(this.j,this):(this.o=!1,wi(this)))}else ji(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),bn(this),Hn(this)}}}catch{}finally{}};function Ed(p){if(!Du(p))return p.g.la();const T=jt(p.g);if(T==="")return"";let C="";const N=T.length,z=ci(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return bn(p),Hn(p),"";p.h.i=new u.TextDecoder}for(let W=0;W<N;W++)p.h.h=!0,C+=p.h.i.decode(T[W],{stream:!(z&&W==N-1)});return T.length=0,p.h.g+=C,p.C=0,p.h.g}function Du(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Vu(p,T){var C=p.C,N=T.indexOf(`
`,C);return N==-1?zt:(C=Number(T.substring(C,N)),isNaN(C)?Mt:(N+=1,N+C>T.length?zt:(T=T.slice(N,N+C),p.C=N+C,T)))}oi.prototype.cancel=function(){this.K=!0,bn(this)};function wi(p){p.T=Date.now()+p.H,To(p,p.H)}function To(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Ai(m(p.aa,p),T)}function Ri(p){p.D&&(u.clearTimeout(p.D),p.D=null)}oi.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(xr(this.i,this.B),this.M!=2&&(Ti(),bt(17)),bn(this),this.m=2,Hn(this)):To(this,this.T-p)};function Hn(p){p.j.I==0||p.K||Gu(p.j,p)}function bn(p){Ri(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,La(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function Ni(p,T){try{var C=p.j;if(C.I!=0&&(C.g==p||bi(C.h,p))){if(!p.L&&bi(C.h,p)&&C.I==3){try{var N=C.Ba.g.parse(T)}catch{N=null}if(Array.isArray(N)&&N.length==3){var z=N;if(z[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)xo(C),Ls(C);else break e;qr(C),bt(18)}}else C.xa=z[1],0<C.xa-C.K&&z[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ai(m(C.Va,C),6e3));xi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ui(C,11)}else if((p.L||C.g==p)&&xo(C),!b(T))for(z=C.Ba.g.parse(T),T=0;T<z.length;T++){let Ze=z[T];const _t=Ze[0];if(!(_t<=C.K))if(C.K=_t,Ze=Ze[1],C.I==2)if(Ze[0]=="c"){C.M=Ze[1],C.ba=Ze[2];const Yn=Ze[3];Yn!=null&&(C.ka=Yn,C.j.info("VER="+C.ka));const Li=Ze[4];Li!=null&&(C.za=Li,C.j.info("SVER="+C.za));const fi=Ze[5];fi!=null&&typeof fi=="number"&&fi>0&&(N=1.5*fi,C.O=N,C.j.info("backChannelRequestTimeoutMs_="+N)),N=C;const di=p.g;if(di){const Fr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var W=N.h;W.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ha(W,W.h),W.h=null))}if(N.G){const bo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(N.wa=bo,nt(N.J,N.G,bo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),N=C;var fe=p;if(N.na=Ku(N,N.L?N.ba:null,N.W),fe.L){Ga(N.h,fe);var ke=fe,wt=N.O;wt&&(ke.H=wt),ke.D&&(Ri(ke),wi(ke)),N.g=fe}else Bu(N);C.i.length>0&&ki(C)}else Ze[0]!="stop"&&Ze[0]!="close"||Ui(C,7);else C.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Ui(C,7):ja(C):Ze[0]!="noop"&&C.l&&C.l.qa(Ze),C.A=0)}}Ti(4)}catch{}}var Pt=class{constructor(p,T){this.g=p,this.map=T}};function Fa(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ba(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function xi(p){return p.h?1:p.g?p.g.size:0}function bi(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function Ha(p,T){p.g?p.g.add(T):p.h=T}function Ga(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}Fa.prototype.cancel=function(){if(this.i=za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function za(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.G);return T}return w(p.i)}var ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function So(p,T){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const N=p[C].indexOf("=");let z,W=null;N>=0?(z=p[C].substring(0,N),W=p[C].substring(N+1)):z=p[C],T(z,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Mn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof Mn?(this.l=p.l,Yt(this,p.j),this.o=p.o,this.g=p.g,bs(this,p.u),this.h=p.h,Ya(this,qu(p.i)),this.m=p.m):p&&(T=String(p).match(ku))?(this.l=!1,Yt(this,T[1]||"",!0),this.o=Mi(T[2]||""),this.g=Mi(T[3]||"",!0),bs(this,T[4]),this.h=Mi(T[5]||"",!0),Ya(this,T[6]||"",!0),this.m=Mi(T[7]||"")):(this.l=!1,this.i=new Ps(null,this.l))}Mn.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(Dr(T,Ao,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(Dr(T,Ao,!0),"@"),p.push(Xi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Dr(C,C.charAt(0)=="/"?Ka:Uu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Dr(C,Lu)),p.join("")},Mn.prototype.resolve=function(p){const T=Dt(this);let C=!!p.j;C?Yt(T,p.j):C=!!p.o,C?T.o=p.o:C=!!p.g,C?T.g=p.g:C=p.u!=null;var N=p.h;if(C)bs(T,p.u);else if(C=!!p.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var z=T.h.lastIndexOf("/");z!=-1&&(N=T.h.slice(0,z+1)+N)}if(z=N,z==".."||z==".")N="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){N=z.lastIndexOf("/",0)==0,z=z.split("/");const W=[];for(let fe=0;fe<z.length;){const ke=z[fe++];ke=="."?N&&fe==z.length&&W.push(""):ke==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),N&&fe==z.length&&W.push("")):(W.push(ke),N=!0)}N=W.join("/")}else N=z}return C?T.h=N:C=p.i.toString()!=="",C?Ya(T,qu(p.i)):C=!!p.m,C&&(T.m=p.m),T};function Dt(p){return new Mn(p)}function Yt(p,T,C){p.j=C?Mi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function bs(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Ya(p,T,C){T instanceof Ps?(p.i=T,Io(p.i,p.l)):(C||(T=Dr(T,Ms)),p.i=new Ps(T,p.l))}function nt(p,T,C){p.i.set(T,C)}function Pr(p){return nt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Mi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Dr(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,_n),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function _n(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ao=/[#\/\?@]/g,Uu=/[#\?:]/g,Ka=/[#\?]/g,Ms=/[#\?@]/g,Lu=/#/g;function Ps(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function vn(p){p.g||(p.g=new Map,p.h=0,p.i&&So(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Ps.prototype,n.add=function(p,T){vn(this),this.i=null,p=Ds(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function Ou(p,T){vn(p),T=Ds(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function Ja(p,T){return vn(p),T=Ds(p,T),p.g.has(T)}n.forEach=function(p,T){vn(this),this.g.forEach(function(C,N){C.forEach(function(z){p.call(T,z,N,this)},this)},this)};function Qa(p,T){vn(p);let C=[];if(typeof T=="string")Ja(p,T)&&(C=C.concat(p.g.get(Ds(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)C=C.concat(p[T]);return C}n.set=function(p,T){return vn(this),this.i=null,p=Ds(this,p),Ja(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},n.get=function(p,T){return p?(p=Qa(this,p),p.length>0?String(p[0]):T):T};function Co(p,T,C){Ou(p,T),C.length>0&&(p.i=null,p.g.set(Ds(p,T),w(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let N=0;N<T.length;N++){var C=T[N];const z=Xi(C);C=Qa(this,C);for(let W=0;W<C.length;W++){let fe=z;C[W]!==""&&(fe+="="+Xi(C[W])),p.push(fe)}}return this.i=p.join("&")};function qu(p){const T=new Ps;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function Ds(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function Io(p,T){T&&!p.j&&(vn(p),p.i=null,p.g.forEach(function(C,N){const z=N.toLowerCase();N!=z&&(Ou(this,N),Co(this,z,C))},p)),p.j=T}function li(p,T){const C=new ri;if(u.Image){const N=new Image;N.onload=v(Gn,C,"TestLoadImage: loaded",!0,T,N),N.onerror=v(Gn,C,"TestLoadImage: error",!1,T,N),N.onabort=v(Gn,C,"TestLoadImage: abort",!1,T,N),N.ontimeout=v(Gn,C,"TestLoadImage: timeout",!1,T,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=p}else T(!1)}function Wa(p,T){const C=new ri,N=new AbortController,z=setTimeout(()=>{N.abort(),Gn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:N.signal}).then(W=>{clearTimeout(z),W.ok?Gn(C,"TestPingServer: ok",!0,T):Gn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),Gn(C,"TestPingServer: error",!1,T)})}function Gn(p,T,C,N,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),N(C)}catch{}}function Vs(){this.g=new wu}function Pi(p){this.i=p.Sb||null,this.h=p.ab||!1}E(Pi,Ru),Pi.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(p,T){ht.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Vr,ht),n=Vr.prototype,n.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,ui(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wo(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function wo(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?ks(this):ui(this),this.readyState==3&&wo(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,ks(this))},n.Na=function(p){this.g&&(this.response=p,ks(this))},n.ga=function(){this.g&&ks(this)};function ks(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ui(p)}n.setRequestHeader=function(p,T){this.A.append(p,T)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function ui(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function zn(p){let T="";return De(p,function(C,N){T+=N,T+=":",T+=C,T+=`\r
`}),T}function kr(p,T,C){e:{for(N in C){var N=!1;break e}N=!0}N||(C=zn(C),typeof p=="string"?C!=null&&Xi(C):nt(p,T,C))}function rt(p){ht.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(rt,ht);var Di=/^https?$/i,Xa=["POST","PUT"];n=rt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,T,C,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qa.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(W){Ur(this,W);return}if(p=C||"",C=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var z in N)C.set(z,N[z]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const W of N.keys())C.set(W,N.get(W));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),z=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Xa,T,void 0)>=0)||N||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of C)this.g.setRequestHeader(W,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(W){Ur(this,W)}};function Ur(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,$a(p),$i(p)}function $a(p){p.A||(p.A=!0,Ft(p,"complete"),Ft(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ft(this,"complete"),Ft(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},n.Xa=function(){Lr(this)};function Lr(p){if(p.h&&typeof l<"u"){if(p.v&&ci(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ft(p,"readystatechange"),ci(p)==4){p.h=!1;try{const W=p.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var N;if(N=W===0){let fe=String(p.D).match(ku)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),N=!Di.test(fe?fe.toLowerCase():"")}C=N}if(C)Ft(p,"complete"),Ft(p,"success");else{p.o=6;try{var z=ci(p)>2?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.ca()+"]",$a(p)}}finally{$i(p)}}}}function $i(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,T||Ft(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ci(p){return p.g?p.g.readyState:0}n.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),yd(T)}};function jt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(p){const T={};p=(p.g&&ci(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<p.length;N++){if(b(p[N]))continue;var C=Pu(p[N]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=T[z]||[];T[z]=W,W.push(C)}xe(T,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function Us(p){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,p),this.Za=Vi("retryDelaySeedMs",1e4,p),this.Ta=Vi("forwardChannelMaxRetries",2,p),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Fa(p&&p.concurrentRequestLimit),this.Ba=new Vs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Us.prototype,n.ka=8,n.I=1,n.connect=function(p,T,C,N){bt(0),this.W=p,this.H=T||{},C&&N!==void 0&&(this.H.OSID=C,this.H.OAID=N),this.F=this.X,this.J=Ku(this,null,this.W),ki(this)};function ja(p){if(Ro(p),p.I==3){var T=p.V++,C=Dt(p.J);if(nt(C,"SID",p.M),nt(C,"RID",T),nt(C,"TYPE","terminate"),Or(p,C),T=new oi(p,p.j,T),T.M=2,T.A=Pr(Dt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=Ju(T.j,null),T.g.ea(T.A)),T.F=Date.now(),wi(T)}Yu(p)}function Ls(p){p.g&&(el(p),p.g.cancel(),p.g=null)}function Ro(p){Ls(p),p.v&&(u.clearTimeout(p.v),p.v=null),xo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function ki(p){if(!Ba(p.h)&&!p.m){p.m=!0;var T=p.Ea;de||P(),re||(de(),re=!0),M.add(T,p),p.D=0}}function No(p,T){return xi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Ai(m(p.Ea,p,T),zu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const z=new oi(this,this.j,p);let W=this.o;if(this.U&&(W?(W=L(W),ie(W,this.U)):W=this.U),this.u!==null||this.R||(z.J=W,W=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var N=this.i[C];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(T+=N,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Fu(this,z,T),C=Dt(this.J),nt(C,"RID",p),nt(C,"CVER",22),this.G&&nt(C,"X-HTTP-Session-Id",this.G),Or(this,C),W&&(this.R?T="headers="+Xi(zn(W))+"&"+T:this.u&&kr(C,this.u,W)),Ha(this.h,z),this.Ra&&nt(C,"TYPE","init"),this.S?(nt(C,"$req",T),nt(C,"SID","null"),z.U=!0,Ii(z,C,null)):Ii(z,C,T),this.I=2}}else this.I==3&&(p?Za(this,p):this.i.length==0||Ba(this.h)||Za(this))};function Za(p,T){var C;T?C=T.l:C=p.V++;const N=Dt(p.J);nt(N,"SID",p.M),nt(N,"RID",C),nt(N,"AID",p.K),Or(p,N),p.u&&p.o&&kr(N,p.u,p.o),C=new oi(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),T&&(p.i=T.G.concat(p.i)),T=Fu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ha(p.h,C),Ii(C,N,T)}function Or(p,T){p.H&&De(p.H,function(C,N){nt(T,N,C)}),p.l&&De({},function(C,N){nt(T,N,C)})}function Fu(p,T,C){C=Math.min(p.i.length,C);const N=p.l?m(p.l.Ka,p.l,p):null;e:{var z=p.i;let ke=-1;for(;;){const wt=["count="+C];ke==-1?C>0?(ke=z[0].g,wt.push("ofs="+ke)):ke=0:wt.push("ofs="+ke);let Ze=!0;for(let _t=0;_t<C;_t++){var W=z[_t].g;const Yn=z[_t].map;if(W-=ke,W<0)ke=Math.max(0,z[_t].g-100),Ze=!1;else try{W="req"+W+"_"||"";try{var fe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Li,fi]of fe){let di=fi;d(fi)&&(di=xs(fi)),wt.push(W+Li+"="+encodeURIComponent(di))}}catch(Li){throw wt.push(W+"type="+encodeURIComponent("_badmap")),Li}}catch{N&&N(Yn)}}if(Ze){fe=wt.join("&");break e}}fe=void 0}return p=p.i.splice(0,C),T.G=p,fe}function Bu(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;de||P(),re||(de(),re=!0),M.add(T,p),p.A=0}}function qr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Ai(m(p.Da,p),zu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Hu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Ai(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ls(this),Hu(this))};function el(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Hu(p){p.g=new oi(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=Dt(p.na);nt(T,"RID","rpc"),nt(T,"SID",p.M),nt(T,"AID",p.K),nt(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&nt(T,"TO",p.ia),nt(T,"TYPE","xmlhttp"),Or(p,T),p.u&&p.o&&kr(T,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=Pr(Dt(T)),C.u=null,C.R=!0,Eo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,Ls(this),qr(this),bt(19))};function xo(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Gu(p,T){var C=null;if(p.g==T){xo(p),el(p),p.g=null;var N=2}else if(bi(p.h,T))C=T.G,Ga(p.h,T),N=1;else return;if(p.I!=0){if(T.o)if(N==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var z=p.D;N=vo(),Ft(N,new Si(N,C)),ki(p)}else Bu(p);else if(z=T.m,z==3||z==0&&T.X>0||!(N==1&&No(p,T)||N==2&&qr(p)))switch(C&&C.length>0&&(T=p.h,T.i=T.i.concat(C)),z){case 1:Ui(p,5);break;case 4:Ui(p,10);break;case 3:Ui(p,6);break;default:Ui(p,2)}}}function zu(p,T){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*T}function Ui(p,T){if(p.j.info("Error code "+T),T==2){var C=m(p.bb,p),N=p.Ua;const z=!N;N=new Mn(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Yt(N,"https"),Pr(N),z?li(N.toString(),C):Wa(N.toString(),C)}else bt(2);p.I=0,p.l&&p.l.pa(T),Yu(p),Ro(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Yu(p){if(p.I=0,p.ja=[],p.l){const T=za(p.h);(T.length!=0||p.i.length!=0)&&(O(p.ja,T),O(p.ja,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.oa()}}function Ku(p,T,C){var N=C instanceof Mn?Dt(C):new Mn(C);if(N.g!="")T&&(N.g=T+"."+N.g),bs(N,N.u);else{var z=u.location;N=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;const W=new Mn(null);N&&Yt(W,N),T&&(W.g=T),z&&bs(W,z),C&&(W.h=C),N=W}return C=p.G,T=p.wa,C&&T&&nt(N,C,T),nt(N,"VER",p.ka),Or(p,N),N}function Ju(p,T,C){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new rt(new Pi({ab:C})):new rt(p.ma),T.Fa(p.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}n=Qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Os(){}Os.prototype.g=function(p,T){return new mn(p,T)};function mn(p,T){ht.call(this),this.g=new Us(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!b(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!b(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Zi(this)}E(mn,ht),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){ja(this.g)},mn.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=xs(p),p=C);T.i.push(new Pt(T.Ya++,p)),T.I==3&&ki(T)},mn.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,mn.Z.N.call(this)};function Wu(p){$t.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}E(Wu,$t);function Xu(){Bn.call(this),this.status=1}E(Xu,Bn);function Zi(p){this.g=p}E(Zi,Qu),Zi.prototype.ra=function(){Ft(this.g,"a")},Zi.prototype.qa=function(p){Ft(this.g,new Wu(p))},Zi.prototype.pa=function(p){Ft(this.g,new Xu)},Zi.prototype.oa=function(){Ft(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,xA=function(){return new Os},NA=function(){return vo()},RA=It,tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,_f=br,Oa.COMPLETE="complete",wA=Oa,Nu.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",ht.prototype.listen=ht.prototype.J,zl=Nu,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,IA=rt}).apply(typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{});const $T="@firebase/firestore",jT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new bm("@firebase/firestore");function oa(){return fo.logLevel}function me(n,...e){if(fo.logLevel<=Ye.DEBUG){const t=e.map(Gm);fo.debug(`Firestore (${Pa}): ${n}`,...t)}}function As(n,...e){if(fo.logLevel<=Ye.ERROR){const t=e.map(Gm);fo.error(`Firestore (${Pa}): ${n}`,...t)}}function va(n,...e){if(fo.logLevel<=Ye.WARN){const t=e.map(Gm);fo.warn(`Firestore (${Pa}): ${n}`,...t)}}function Gm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bA(n,i,t)}function bA(n,e,t){let i=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw As(i),new Error(i)}function tt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||bA(e,o,i)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class kk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Uk{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let i=this.i;const o=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let l=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new gr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await o(this.currentUser)}))},d=h=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new gr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string",31837,{l:i}),new MA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class Lk{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ok{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Lk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ZT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ZT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ZT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Fk(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ke(n,e){return n<e?-1:n>e?1:0}function nm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return Rp(o)===Rp(l)?Ke(o,l):Rp(o)?1:-1}return Ke(n.length,e.length)}const Bk=55296,Hk=57343;function Rp(n){const e=n.charCodeAt(0);return e>=Bk&&e<=Hk}function Ea(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__name__";class Hi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Hi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ke(e.length,t.length)}static compareSegments(e,t){const i=Hi.isNumericId(e),o=Hi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):nm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Et extends Hi{construct(e,t,i){return new Et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const Gk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Hi{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return Gk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e0}static keyField(){return new rn([e0])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ve(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ve(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[o+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(l(),o++)}if(l(),u)throw new ve(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Et.fromString(e))}static fromName(e){return new Se(Et.fromString(e).popFirst(5))}static empty(){return new Se(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n,e,t){if(!t)throw new ve(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Yk(n,e,t,i){if(e===!0&&i===!0)throw new ve(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t0(n){if(!Se.isDocumentKey(n))throw new ve(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ym(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function ou(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ym(n);throw new ve(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!PA(n))throw new ve(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ve(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=-62135596800,i0=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*i0);return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<n0)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:qt("string",yt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new yt(0,0))}static max(){return new be(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;function Kk(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new yr(o,Se.empty(),e)}function Jk(n){return new yr(n.readTime,n.key,au)}class yr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new yr(be.min(),Se.empty(),au)}static max(){return new yr(be.max(),Se.empty(),au)}}function Qk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Wk)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(h=>i(h)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const l=e.length,u=new Array(l);let d=0;for(let h=0;h<l;h++){const m=h;t(e[m]).next((v=>{u[m]=v,++d,d===l&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function $k(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=-1;function sd(n){return n==null}function Lf(n){return n===0&&1/n==-1/0}function jk(n){return typeof n=="number"&&Number.isInteger(n)&&!Lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="";function Zk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=s0(e)),e=eU(n.get(t),e);return s0(e)}function eU(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case DA:t+="";break;default:t+=l}}return t}function s0(n){return n+DA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nf(this.root,e,this.comparator,!0)}}class nf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new o0(this.data.getIterator())}getIteratorFrom(e){return new o0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class o0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new yi([])}unionWith(e){let t=new Gt(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new kA("Invalid base64 string: "+l):l}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const tU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=tU.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vr(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="server_timestamp",LA="__type__",OA="__previous_value__",qA="__local_write_time__";function Jm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[LA])==null?void 0:i.stringValue)===UA}function rd(n){const e=n.mapValue.fields[OA];return Jm(e)?rd(e):e}function lu(n){const e=_r(n.mapValue.fields[qA].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,t,i,o,l,u,d,h,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=v}}const Of="(default)";class uu{constructor(e,t){this.projectId=e,this.database=t||Of}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Of}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="__type__",iU="__max__",sf={mapValue:{}},BA="__vector__",qf="value";function Er(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jm(n)?4:rU(n)?9007199254740991:sU(n)?10:11:Re(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const t=Er(n);if(t!==Er(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=_r(o.timestampValue),d=_r(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return vr(o.bytesValue).isEqual(vr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return xt(o.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return xt(o.integerValue)===xt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=xt(o.doubleValue),d=xt(l.doubleValue);return u===d?Lf(u)===Lf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ea(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(r0(u)!==r0(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!Qi(u[h],d[h])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function cu(n,e){return(n.values||[]).find((t=>Qi(t,e)))!==void 0}function Ta(n,e){if(n===e)return 0;const t=Er(n),i=Er(e);if(t!==i)return Ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=xt(l.integerValue||l.doubleValue),h=xt(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return a0(n.timestampValue,e.timestampValue);case 4:return a0(lu(n),lu(e));case 5:return nm(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=vr(l),h=vr(u);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),h=u.split("/");for(let m=0;m<d.length&&m<h.length;m++){const v=Ke(d[m],h[m]);if(v!==0)return v}return Ke(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Ke(xt(l.latitude),xt(u.latitude));return d!==0?d:Ke(xt(l.longitude),xt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return l0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,O,F;const d=l.fields||{},h=u.fields||{},m=(S=d[qf])==null?void 0:S.arrayValue,v=(w=h[qf])==null?void 0:w.arrayValue,E=Ke(((O=m==null?void 0:m.values)==null?void 0:O.length)||0,((F=v==null?void 0:v.values)==null?void 0:F.length)||0);return E!==0?E:l0(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===sf.mapValue&&u===sf.mapValue)return 0;if(l===sf.mapValue)return 1;if(u===sf.mapValue)return-1;const d=l.fields||{},h=Object.keys(d),m=u.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let E=0;E<h.length&&E<v.length;++E){const S=nm(h[E],v[E]);if(S!==0)return S;const w=Ta(d[h[E]],m[v[E]]);if(w!==0)return w}return Ke(h.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function a0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=_r(n),i=_r(e),o=Ke(t.seconds,i.seconds);return o!==0?o:Ke(t.nanos,i.nanos)}function l0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ta(t[o],i[o]);if(l)return l}return Ke(t.length,i.length)}function Sa(n){return im(n)}function im(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=_r(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return vr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=im(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of i)l?l=!1:o+=",",o+=`${u}:${im(t.fields[u])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function vf(n){switch(Er(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rd(n);return e?16+vf(e):16;case 5:return 2*n.stringValue.length;case 6:return vr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+vf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return mo(i.fields,((l,u)=>{o+=l.length+vf(u)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function sm(n){return!!n&&"integerValue"in n}function Qm(n){return!!n&&"arrayValue"in n}function u0(n){return!!n&&"nullValue"in n}function c0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ef(n){return!!n&&"mapValue"in n}function sU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[FA])==null?void 0:i.stringValue)===BA}function $l(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return mo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=$l(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(n.arrayValue.values[t]);return e}return{...n}}function rU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=rn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=$l(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ef(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){mo(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new ei($l(this.value))}}function HA(n){const e=[];return mo(n.fields,((t,i)=>{const o=new rn([t]);if(Ef(i)){const l=HA(i.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,i,o,l,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,be.min(),be.min(),be.min(),ei.empty(),0)}static newFoundDocument(e,t,i,o){return new cn(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new cn(e,2,t,be.min(),be.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,be.min(),be.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.position=e,this.inclusive=t}}function f0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Ta(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function d0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function oU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{}class Ht extends GA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lU(e,t,i):t==="array-contains"?new fU(e,i):t==="in"?new dU(e,i):t==="not-in"?new hU(e,i):t==="array-contains-any"?new pU(e,i):new Ht(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new uU(e,i):new cU(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ta(t,this.value)):t!==null&&Er(this.value)===Er(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends GA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wi(e,t)}matches(e){return zA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zA(n){return n.op==="and"}function YA(n){return aU(n)&&zA(n)}function aU(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function rm(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(YA(n))return n.filters.map((e=>rm(e))).join(",");{const e=n.filters.map((t=>rm(t))).join(",");return`${n.op}(${e})`}}function KA(n,e){return n instanceof Ht?(function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&Qi(i.value,o.value)})(n,e):n instanceof Wi?(function(i,o){return o instanceof Wi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,u,d)=>l&&KA(u,o.filters[d])),!0):!1})(n,e):void Re(19439)}function JA(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof Wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(JA).join(" ,")+"}"})(n):"Filter"}class lU extends Ht{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class uU extends Ht{constructor(e,t){super(e,"in",t),this.keys=QA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cU extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=QA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function QA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class fU extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qm(t)&&cu(t.arrayValue,this.value)}}class dU extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cu(this.value.arrayValue,t)}}class hU extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cu(this.value.arrayValue,t)}}class pU extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>cu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,t=null,i=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function h0(n,e=null,t=[],i=[],o=null,l=null,u=null){return new mU(n,e,t,i,o,l,u)}function Wm(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>rm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sa(i))).join(",")),e.Te=t}return e.Te}function Xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d0(n.startAt,e.startAt)&&d0(n.endAt,e.endAt)}function om(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t=null,i=[],o=[],l=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gU(n,e,t,i,o,l,u,d){return new od(n,e,t,i,o,l,u,d)}function $m(n){return new od(n)}function p0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yU(n){return n.collectionGroup!==null}function jl(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Gt(rn.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Bf(l,i))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new Bf(rn.keyField(),i))}return e.Ie}function zi(n){const e=Pe(n);return e.Ee||(e.Ee=_U(e,jl(n))),e.Ee}function _U(n,e){if(n.limitType==="F")return h0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Bf(o.field,l)}));const t=n.endAt?new Ff(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ff(n.startAt.position,n.startAt.inclusive):null;return h0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function am(n,e,t){return new od(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ad(n,e){return Xm(zi(n),zi(e))&&n.limitType===e.limitType}function WA(n){return`${Wm(zi(n))}|lt:${n.limitType}`}function aa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>JA(o))).join(", ")}]`),sd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Sa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Sa(o))).join(",")),`Target(${i})`})(zi(n))}; limitType=${n.limitType})`}function ld(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of jl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,h){const m=f0(u,d,h);return u.inclusive?m<=0:m<0})(i.startAt,jl(i),o)||i.endAt&&!(function(u,d,h){const m=f0(u,d,h);return u.inclusive?m>=0:m>0})(i.endAt,jl(i),o))})(n,e)}function vU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XA(n){return(e,t)=>{let i=!1;for(const o of jl(n)){const l=EU(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function EU(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(l,u,d){const h=u.data.field(l),m=d.data.field(l);return h!==null&&m!==null?Ta(h,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return VA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new Tt(Se.comparator);function Cs(){return TU}const $A=new Tt(Se.comparator);function Yl(...n){let e=$A;for(const t of n)e=e.insert(t.key,t);return e}function jA(n){let e=$A;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function so(){return Zl()}function ZA(){return Zl()}function Zl(){return new go((n=>n.toString()),((n,e)=>n.isEqual(e)))}const SU=new Tt(Se.comparator),AU=new Gt(Se.comparator);function Je(...n){let e=AU;for(const t of n)e=e.add(t);return e}const CU=new Gt(Ke);function IU(){return CU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}function eC(n){return{integerValue:""+n}}function wU(n,e){return jk(e)?eC(e):jm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function RU(n,e,t){return n instanceof Hf?(function(o,l){const u={fields:{[LA]:{stringValue:UA},[qA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Jm(l)&&(l=rd(l)),l&&(u.fields[OA]=l),{mapValue:u}})(t,e):n instanceof fu?nC(n,e):n instanceof du?iC(n,e):(function(o,l){const u=tC(o,l),d=m0(u)+m0(o.Ae);return sm(u)&&sm(o.Ae)?eC(d):jm(o.serializer,d)})(n,e)}function NU(n,e,t){return n instanceof fu?nC(n,e):n instanceof du?iC(n,e):t}function tC(n,e){return n instanceof Gf?(function(i){return sm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Hf extends ud{}class fu extends ud{constructor(e){super(),this.elements=e}}function nC(n,e){const t=sC(e);for(const i of n.elements)t.some((o=>Qi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class du extends ud{constructor(e){super(),this.elements=e}}function iC(n,e){let t=sC(e);for(const i of n.elements)t=t.filter((o=>!Qi(o,i)));return{arrayValue:{values:t}}}class Gf extends ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function m0(n){return xt(n.integerValue||n.doubleValue)}function sC(n){return Qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xU(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof fu&&o instanceof fu||i instanceof du&&o instanceof du?Ea(i.elements,o.elements,Qi):i instanceof Gf&&o instanceof Gf?Qi(i.Ae,o.Ae):i instanceof Hf&&o instanceof Hf})(n.transform,e.transform)}class bU{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cd{}function rC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new aC(n.key,vs.none()):new Tu(n.key,n.data,vs.none());{const t=n.data,i=ei.empty();let o=new Gt(rn.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),o=o.add(l)}return new yo(n.key,i,new yi(o.toArray()),vs.none())}}function MU(n,e,t){n instanceof Tu?(function(o,l,u){const d=o.value.clone(),h=y0(o.fieldTransforms,l,u.transformResults);d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof yo?(function(o,l,u){if(!Tf(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=y0(o.fieldTransforms,l,u.transformResults),h=l.data;h.setAll(oC(o)),h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function eu(n,e,t,i){return n instanceof Tu?(function(l,u,d,h){if(!Tf(l.precondition,u))return d;const m=l.value.clone(),v=_0(l.fieldTransforms,h,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof yo?(function(l,u,d,h){if(!Tf(l.precondition,u))return d;const m=_0(l.fieldTransforms,h,u),v=u.data;return v.setAll(oC(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,u,d){return Tf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function PU(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=tC(i.transform,o||null);l!=null&&(t===null&&(t=ei.empty()),t.set(i.field,l))}return t||null}function g0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ea(i,o,((l,u)=>xU(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tu extends cd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class yo extends cd{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function y0(n,e,t){const i=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);i.set(l.field,NU(u,d,t[o]))}return i}function _0(n,e,t){const i=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);i.set(o.field,RU(l,u,e))}return i}class aC extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DU extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&MU(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=eu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=eu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ZA();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const h=rC(u,d);h!==null&&i.set(o.key,h),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,((t,i)=>g0(t,i)))&&Ea(this.baseMutations,e.baseMutations,((t,i)=>g0(t,i)))}}class Zm{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){tt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return SU})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,i[u].version);return new Zm(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,We;function LU(n){switch(n){case oe.OK:return Re(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function lC(n){if(n===void 0)return As("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Ot.OK:return oe.OK;case Ot.CANCELLED:return oe.CANCELLED;case Ot.UNKNOWN:return oe.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return oe.INTERNAL;case Ot.UNAVAILABLE:return oe.UNAVAILABLE;case Ot.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ot.NOT_FOUND:return oe.NOT_FOUND;case Ot.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ot.ABORTED:return oe.ABORTED;case Ot.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ot.DATA_LOSS:return oe.DATA_LOSS;default:return Re(39323,{code:n})}}(We=Ot||(Ot={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new mr([4294967295,4294967295],0);function v0(n){const e=OU().encode(n),t=new CA;return t.update(e),new Uint8Array(t.digest())}function E0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new mr([t,i],0),new mr([o,l],0)]}class eg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Kl(`Invalid padding: ${t}`);if(i<0)throw new Kl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(mr.fromNumber(i)));return o.compare(qU)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=v0(e),[i,o]=E0(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new eg(l,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=v0(e),[i,o]=E0(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new fd(be.min(),o,new Tt(Ke),Cs(),Je())}}class Su{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Su(i,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class uC{constructor(e,t){this.targetId=e,this.Ce=t}}class cC{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class T0{constructor(){this.ve=0,this.Fe=S0(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),i=Je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:l})}})),new Su(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=S0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cs(),this.Je=rf(),this.He=rf(),this.Ye=new Tt(Ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(om(l))if(i===0){const u=new Se(l.path);this.et(t,u,cn.newNoDocument(u,be.min()))}else tt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),h=d?this.ct(d,e,u):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=vr(i).toUint8Array()}catch(h){if(h instanceof kA)return va("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new eg(u,o,l)}catch(h){return va(h instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&om(d.target)){const h=new Se(d.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,cn.newNoDocument(h,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Je();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new fd(e,t,this.Ye,this.je,i);return this.je=Cs(),this.Je=rf(),this.He=rf(),this.Ye=new Tt(Ke),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new T0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rf(){return new Tt(Se.comparator)}function S0(){return new Tt(Se.comparator)}const BU={asc:"ASCENDING",desc:"DESCENDING"},HU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GU={and:"AND",or:"OR"};class zU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lm(n,e){return n.useProto3Json||sd(e)?e:{value:e}}function zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function YU(n,e){return zf(n,e.toTimestamp())}function Yi(n){return tt(!!n,49232),be.fromTimestamp((function(t){const i=_r(t);return new yt(i.seconds,i.nanos)})(n))}function tg(n,e){return um(n,e).canonicalString()}function um(n,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dC(n){const e=Et.fromString(n);return tt(yC(e),10190,{key:e.toString()}),e}function cm(n,e){return tg(n.databaseId,e.path)}function Np(n,e){const t=dC(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(pC(t))}function hC(n,e){return tg(n.databaseId,e)}function KU(n){const e=dC(n);return e.length===4?Et.emptyPath():pC(e)}function fm(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pC(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function A0(n,e,t){return{name:cm(n,e),fields:t.value.mapValue.fields}}function JU(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(tt(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(tt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?oe.UNKNOWN:lC(m.code);return new ve(v,m.message||"")})(u);t=new cC(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Np(n,i.document.name),l=Yi(i.document.updateTime),u=i.document.createTime?Yi(i.document.createTime):be.min(),d=new ei({mapValue:{fields:i.document.fields}}),h=cn.newFoundDocument(o,l,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Sf(m,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Np(n,i.document),l=i.readTime?Yi(i.readTime):be.min(),u=cn.newNoDocument(o,l),d=i.removedTargetIds||[];t=new Sf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Np(n,i.document),l=i.removedTargetIds||[];t=new Sf([],l,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,u=new UU(o,l),d=i.targetId;t=new uC(d,u)}}return t}function QU(n,e){let t;if(e instanceof Tu)t={update:A0(n,e.key,e.value)};else if(e instanceof aC)t={delete:cm(n,e.key)};else if(e instanceof yo)t={update:A0(n,e.key,e.data),updateMask:iL(e.fieldMask)};else{if(!(e instanceof DU))return Re(16599,{Vt:e.type});t={verify:cm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const d=u.transform;if(d instanceof Hf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:YU(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function WU(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Yi(o.updateTime):Yi(l);return u.isEqual(be.min())&&(u=Yi(l)),new bU(u,o.transformResults||[])})(t,e)))):[]}function XU(n,e){return{documents:[hC(n,e.path)]}}function $U(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=hC(n,o);const l=(function(m){if(m.length!==0)return gC(Wi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:la(S.field),direction:eL(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=lm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function jU(n){let e=KU(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){tt(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=mC(E);return S instanceof Wi&&YA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(O){return new Bf(ua(O.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,sd(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(E){const S=!!E.before,w=E.values||[];return new Ff(w,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,w=E.values||[];return new Ff(w,S)})(t.endAt)),gU(e,o,u,l,d,"F",h,m)}function ZU(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ua(t.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ua(t.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ua(t.unaryFilter.field);return Ht.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ua(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(ua(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wi.create(t.compositeFilter.filters.map((i=>mC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function eL(n){return BU[n]}function tL(n){return HU[n]}function nL(n){return GU[n]}function la(n){return{fieldPath:n.canonicalString()}}function ua(n){return rn.fromServerFormat(n.fieldPath)}function gC(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(c0(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NAN"}};if(u0(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c0(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NOT_NAN"}};if(u0(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:la(t.field),op:tL(t.op),value:t.value}}})(n):n instanceof Wi?(function(t){const i=t.getFilters().map((o=>gC(o)));return i.length===1?i[0]:{compositeFilter:{op:nL(t.op),filters:i}}})(n):Re(54877,{filter:n})}function iL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t,i,o,l=be.min(),u=be.min(),d=on.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.yt=e}}function rL(n){const e=jU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.Cn=new aL}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(yr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class aL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(Et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_C=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(_C,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Aa(0)}static cr(){return new Aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LruGarbageCollector",lL=1048576;function w0([n,e],[t,i]){const o=Ke(n,t);return o===0?Ke(e,i):o}class uL{constructor(e){this.Ir=e,this.buffer=new Gt(w0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();w0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(I0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?me(I0,"Ignoring IndexedDB error during garbage collection: ",t):await Da(t)}await this.Vr(3e5)}))}}class fL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(id.ce);const i=new uL(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(C0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,u,d,h,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(m=Date.now(),oa()<=Ye.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(h-d)+`ms
	Removed ${E} documents in `+(m-h)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function dL(n,e){return new fL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.changes=new go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&eu(i.mutation,o,yi.empty(),yt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Je()){const o=so();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let u=Yl();return l.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=so();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let l=Cs();const u=Zl(),d=(function(){return Zl()})();return t.forEach(((h,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof yo)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),eu(v.mutation,m,v.mutation.getFieldMask(),yt.now())):u.set(m.key,yi.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>d.set(m,new pL(v,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Zl();let o=new Tt(((u,d)=>u-d)),l=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((h=>{const m=t.get(h);if(m===null)return;let v=i.get(h)||yi.empty();v=d.applyToLocalView(m,v),i.set(h,v);const E=(o.get(d.batchId)||Je()).add(h);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),m=h.key,v=h.value,E=ZA();v.forEach((S=>{if(!l.has(S)){const w=rC(t.get(S),i.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):se.resolve(so());let d=au,h=l;return u.next((m=>se.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{h=h.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,h,m,Je()))).next((v=>({batchId:d,changes:jA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=Yl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let u=Yl();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(h=>{const m=(function(E,S){return new od(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((u=>{l.forEach(((h,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))}));let d=Yl();return u.forEach(((h,m)=>{const v=l.get(h);v!==void 0&&eu(v.mutation,m,yi.empty(),yt.now()),ld(t,m)&&(d=d.insert(h,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Yi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:rL(o.bundledQuery),readTime:Yi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.overlays=new Tt(Se.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=so();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=so(),l=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&h.largestBatchId>i&&o.set(h.getKey(),h)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Tt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=l.get(m.largestBatchId);v===null&&(v=so(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=so(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new kU(t,i));let l=this.qr.get(t);l===void 0&&(l=Je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.Qr=new Gt(Qt.$r),this.Ur=new Gt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Se(new Et([])),i=new Qt(t,e),o=new Qt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new Et([])),i=new Qt(t,e),o=new Qt(t,e+1);let l=Je();return this.Ur.forEachInRange([i,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Qt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new VU(l,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Km:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Qt(t,0),o=new Qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(Ke);return t.forEach((o=>{const l=new Qt(o,0),u=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const u=new Qt(new Se(l),0);let d=new Gt(Ke);return this.Zr.forEachWhile((h=>{const m=h.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(h.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const l=new Qt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Qt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let i=Cs();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():cn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Cs();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:m,value:{document:v}}=h.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||Qk(Jk(v),i)<=0||(o.has(v.key)||ld(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Re(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new TL(this)}getSize(e){return se.resolve(this.size)}}class TL extends hL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.persistence=e,this.si=new go((t=>Wm(t)),Xm),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new ng,this.targetCount=0,this.ai=Aa.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.ui={},this.overlays={},this.ci=new id(0),this.li=!1,this.li=!0,this.hi=new _L,this.referenceDelegate=e(this),this.Pi=new SL(this),this.indexManager=new oL,this.remoteDocumentCache=(function(o){return new EL(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new sL(t),this.Ii=new gL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new vL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new AL(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class AL extends Xk{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new ng,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Se.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.pi=new go((i=>Zk(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=dL(this,t)}static mi(e,t){return new Yf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,l.removeEntry(u,be.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vf(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Je(),o=Je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jP()?8:$k(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new CL;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(oa()<=Ye.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",aa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(oa()<=Ye.DEBUG&&me("QueryEngine","Query:",aa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(oa()<=Ye.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",aa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):se.resolve())}ys(e,t){if(p0(t))return se.resolve(null);let i=zi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=am(t,null,"F"),i=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Je(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const m=this.Ds(t,d);return this.Cs(t,m,u,h.readTime)?this.ys(e,am(t,null,"F")):this.vs(e,m,t,h)}))))})))))}ws(e,t,i,o){return p0(t)||o.isEqual(be.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,o)?se.resolve(null):(oa()<=Ye.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),aa(t)),this.vs(e,u,t,Kk(o,au)).next((d=>d)))}))}Ds(e,t){let i=new Gt(XA(e));return t.forEach(((o,l)=>{ld(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return oa()<=Ye.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",aa(t)),this.ps.getDocumentsMatchingQuery(e,t,yr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",wL=3e8;class RL{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Tt(Ke),this.xs=new go((l=>Wm(l)),Xm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function NL(n,e,t,i){return new RL(n,e,t,i)}async function EC(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],d=[];let h=Je();for(const m of o){u.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(i,h).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function xL(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,m,v){const E=m.batch,S=E.keys();let w=se.resolve();return S.forEach((O=>{w=w.next((()=>v.getEntry(h,O))).next((F=>{const B=m.docVersions.get(O);tt(B!==null,48541),F.version.compareTo(B)<0&&(E.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),v.addEntry(F)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(h,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=Je();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(h=h.add(d.batch.mutations[m].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function TC(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function bL(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(on.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(E,w),(function(F,B,Q){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=wL?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,w,v)&&d.push(t.Pi.updateTargetData(l,w))}));let h=Cs(),m=Je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(ML(l,u,e.documentUpdates).next((v=>{h=v.ks,m=v.qs}))),!i.isEqual(be.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,m))).next((()=>h))})).then((l=>(t.Ms=o,l)))}function ML(n,e,t){let i=Je(),o=Je();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Cs();return t.forEach(((d,h)=>{const m=l.get(d);h.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),h.isNoDocument()&&h.version.isEqual(be.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):me(rg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",h.version)})),{ks:u,qs:o}}))}function PL(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Km),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function DL(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new fr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function dm(n,e,t){const i=Pe(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Va(u))throw u;me(rg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function R0(n,e,t){const i=Pe(n);let o=be.min(),l=Je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,m,v){const E=Pe(h),S=E.xs.get(v);return S!==void 0?se.resolve(E.Ms.get(S)):E.Pi.getTargetData(m,v)})(i,u,zi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{l=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?l:Je()))).next((d=>(VL(i,vU(e),d),{documents:d,Qs:l})))))}function VL(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class N0{constructor(){this.activeTargetIds=IU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kL{constructor(){this.Mo=new N0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new N0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="ConnectivityMonitor";class b0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(x0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(x0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function hm(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="RestConnection",LL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Of?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const u=hm(),d=this.zo(e,t.toUriEncodedString());me(xp,`Sending RPC '${e}' ${u}:`,d,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,o,l);const{host:m}=new URL(d),v=xa(m);return this.Jo(e,d,h,i,v).then((E=>(me(xp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw va(xp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,l,u){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=LL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class FL extends OL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const u=hm();return new Promise(((d,h)=>{const m=new IA;m.setWithCredentials(!0),m.listenOnce(wA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case _f.NO_ERROR:const E=m.getResponseJson();me(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case _f.TIMEOUT:me(ln,`RPC '${e}' ${u} timed out`),h(new ve(oe.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const S=m.getStatus();if(me(ln,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const F=(function(Q){const j=Q.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(j)>=0?j:oe.UNKNOWN})(O.status);h(new ve(F,O.message))}else h(new ve(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ve(oe.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(ln,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);me(ln,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=hm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xA(),d=NA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const v=l.join("");me(ln,`Creating RPC '${e}' stream ${o}: ${v}`,h);const E=u.createWebChannel(v,h);this.I_(E);let S=!1,w=!1;const O=new qL({Yo:B=>{w?me(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(me(ln,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),me(ln,`RPC '${e}' stream ${o} sending:`,B),E.send(B))},Zo:()=>E.close()}),F=(B,Q,j)=>{B.listen(Q,($=>{try{j($)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return F(E,zl.EventType.OPEN,(()=>{w||(me(ln,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),F(E,zl.EventType.CLOSE,(()=>{w||(w=!0,me(ln,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(E))})),F(E,zl.EventType.ERROR,(B=>{w||(w=!0,va(ln,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),O.a_(new ve(oe.UNAVAILABLE,"The operation could not be completed")))})),F(E,zl.EventType.MESSAGE,(B=>{var Q;if(!w){const j=B.data[0];tt(!!j,16349);const $=j,ue=($==null?void 0:$.error)||((Q=$[0])==null?void 0:Q.error);if(ue){me(ln,`RPC '${e}' stream ${o} received error:`,ue);const de=ue.status;let re=(function(x){const D=Ot[x];if(D!==void 0)return lC(D)})(de),M=ue.message;re===void 0&&(re=oe.INTERNAL,M="Unknown error status: "+de+" with message "+ue.message),w=!0,O.a_(new ve(re,M)),E.close()}else me(ln,`RPC '${e}' stream ${o} received:`,j),O.u_(j)}})),F(d,RA.STAT_EVENT,(B=>{B.stat===tm.PROXY?me(ln,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===tm.NOPROXY&&me(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){return new zU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class AC{constructor(e,t,i,o,l,u,d,h){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ve(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BL extends AC{constructor(e,t,i,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JU(this.serializer,e),i=(function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Yi(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=fm(this.serializer),t.addTarget=(function(l,u){let d;const h=u.target;if(d=om(h)?{documents:XU(l,h)}:{query:$U(l,h).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=fC(l,u.resumeToken);const m=lm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=zf(l,u.snapshotVersion.toTimestamp());const m=lm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=ZU(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=fm(this.serializer),t.removeTarget=e,this.q_(t)}}class HL extends AC{constructor(e,t,i,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WU(e.writeResults,e.commitTime),i=Yi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=fm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>QU(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{}class zL extends GL{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,um(t,i),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(oe.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,um(t,i),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class KL{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{_o(this)&&(me(ho,"Restarting streams for network reachability change."),await(async function(h){const m=Pe(h);m.Ea.add(4),await Au(m),m.Ra.set("Unknown"),m.Ea.delete(4),await hd(m)})(this))}))})),this.Ra=new YL(i,o)}}async function hd(n){if(_o(n))for(const e of n.da)await e(!0)}async function Au(n){for(const e of n.da)await e(!1)}function CC(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ug(t)?lg(t):ka(t).O_()&&ag(t,e))}function og(n,e){const t=Pe(n),i=ka(t);t.Ia.delete(e),i.O_()&&IC(t,e),t.Ia.size===0&&(i.O_()?i.L_():_o(t)&&t.Ra.set("Unknown"))}function ag(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ka(n).Y_(e)}function IC(n,e){n.Va.Ue(e),ka(n).Z_(e)}function lg(n){n.Va=new FU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ka(n).start(),n.Ra.ua()}function ug(n){return _o(n)&&!ka(n).x_()&&n.Ia.size>0}function _o(n){return Pe(n).Ea.size===0}function wC(n){n.Va=void 0}async function JL(n){n.Ra.set("Online")}async function QL(n){n.Ia.forEach(((e,t)=>{ag(n,e)}))}async function WL(n,e){wC(n),ug(n)?(n.Ra.ha(e),lg(n)):n.Ra.set("Unknown")}async function XL(n,e,t){if(n.Ra.set("Online"),e instanceof cC&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){me(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kf(n,i)}else if(e instanceof Sf?n.Va.Ze(e):e instanceof uC?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await TC(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,m)=>{const v=l.Ia.get(h);if(!v)return;l.Ia.set(h,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),IC(l,h);const E=new fr(v.target,h,m,v.sequenceNumber);ag(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){me(ho,"Failed to raise snapshot:",i),await Kf(n,i)}}async function Kf(n,e,t){if(!Va(e))throw e;n.Ea.add(1),await Au(n),n.Ra.set("Offline"),t||(t=()=>TC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(ho,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hd(n)}))}function RC(n,e){return e().catch((t=>Kf(n,t,e)))}async function pd(n){const e=Pe(n),t=Tr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Km;for(;$L(e);)try{const o=await PL(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,jL(e,o)}catch(o){await Kf(e,o)}NC(e)&&xC(e)}function $L(n){return _o(n)&&n.Ta.length<10}function jL(n,e){n.Ta.push(e);const t=Tr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function NC(n){return _o(n)&&!Tr(n).x_()&&n.Ta.length>0}function xC(n){Tr(n).start()}async function ZL(n){Tr(n).ra()}async function e5(n){const e=Tr(n);for(const t of n.Ta)e.ea(t.mutations)}async function t5(n,e,t){const i=n.Ta.shift(),o=Zm.from(i,e,t);await RC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await pd(n)}async function n5(n,e){e&&Tr(n).X_&&await(async function(i,o){if((function(u){return LU(u)&&u!==oe.ABORTED})(o.code)){const l=i.Ta.shift();Tr(i).B_(),await RC(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await pd(i)}})(n,e),NC(n)&&xC(n)}async function P0(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),me(ho,"RemoteStore received new credentials");const i=_o(t);t.Ea.add(3),await Au(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hd(t)}async function i5(n,e){const t=Pe(n);e?(t.Ea.delete(2),await hd(t)):e||(t.Ea.add(2),await Au(t),t.Ra.set("Unknown"))}function ka(n){return n.ma||(n.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new BL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:JL.bind(null,n),t_:QL.bind(null,n),r_:WL.bind(null,n),H_:XL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ug(n)?lg(n):n.Ra.set("Unknown")):(await n.ma.stop(),wC(n))}))),n.ma}function Tr(n){return n.fa||(n.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new HL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZL.bind(null,n),r_:n5.bind(null,n),ta:e5.bind(null,n),na:t5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await pd(n)):(await n.fa.stop(),n.Ta.length>0&&(me(ho,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const u=Date.now()+i,d=new cg(e,t,u,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(n,e){if(As("AsyncQueue",`${e}: ${n}`),Va(n))return new ve(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{static emptySet(e){return new ya(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Yl(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ya;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ga=new Tt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ca{constructor(e,t,i,o,l,u,d,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ca(e,t,ya.emptySet(t),u,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class r5{constructor(){this.queries=V0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=V0(),l.forEach(((u,d)=>{for(const h of d.Sa)h.onError(i)}))})(this,new ve(oe.ABORTED,"Firestore shutting down"))}}function V0(){return new go((n=>WA(n)),ad)}async function o5(n,e){const t=Pe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new s5,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=fg(u,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&dg(t)}async function a5(n,e){const t=Pe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function l5(n,e){const t=Pe(n);let i=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&dg(t)}function u5(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function dg(n){n.Ca.forEach((e=>{e.next()}))}var pm,k0;(k0=pm||(pm={})).Ma="default",k0.Cache="cache";class c5{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.key=e}}class MC{constructor(e){this.key=e}}class f5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=XA(e),this.tu=new ya(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new D0,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const h=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),w=ld(this.query,E)?E:null,O=!!S&&this.mutatedKeys.has(S.key),F=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let B=!1;S&&w?S.data.isEqual(w.data)?O!==F&&(i.track({type:3,doc:w}),B=!0):this.su(S,w)||(i.track({type:2,doc:w}),B=!0,(h&&this.eu(w,h)>0||m&&this.eu(w,m)<0)&&(d=!0)):!S&&w?(i.track({type:0,doc:w}),B=!0):S&&!w&&(i.track({type:1,doc:S}),B=!0,(h||m)&&(d=!0)),B&&(w?(u=u.add(w),l=F?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,O){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:B})}};return F(w)-F(O)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],h=this.Xa.size===0&&this.current&&!o?1:0,m=h!==this.Za;return this.Za=h,u.length!==0||m?{snapshot:new Ca(this.query,e.tu,l,u,e.mutatedKeys,h===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new D0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new MC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new bC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class d5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class h5{constructor(e){this.key=e,this.hu=!1}}class p5{constructor(e,t,i,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new go((d=>WA(d)),ad),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Se.comparator),this.Au=new Map,this.Ru=new ng,this.Vu={},this.mu=new Map,this.fu=Aa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m5(n,e,t=!0){const i=LC(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await PC(i,e,t,!0),o}async function g5(n,e){const t=LC(n);await PC(t,e,!0,!1)}async function PC(n,e,t,i){const o=await DL(n.localStore,zi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await y5(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&CC(n.remoteStore,o),d}async function y5(n,e,t,i,o){n.pu=(E,S,w)=>(async function(F,B,Q,j){let $=B.view.ru(Q);$.Cs&&($=await R0(F.localStore,B.query,!1).then((({documents:M})=>B.view.ru(M,$))));const ue=j&&j.targetChanges.get(B.targetId),de=j&&j.targetMismatches.get(B.targetId)!=null,re=B.view.applyChanges($,F.isPrimaryClient,ue,de);return L0(F,B.targetId,re.au),re.snapshot})(n,E,S,w);const l=await R0(n.localStore,e,!0),u=new f5(e,l.Qs),d=u.ru(l.documents),h=Su.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,h);L0(n,t,m.au);const v=new d5(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function _5(n,e,t){const i=Pe(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((u=>!ad(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await dm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&og(i.remoteStore,o.targetId),mm(i,o.targetId)})).catch(Da)):(mm(i,o.targetId),await dm(i.localStore,o.targetId,!0))}async function v5(n,e){const t=Pe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),og(t.remoteStore,i.targetId))}async function E5(n,e,t){const i=R5(n);try{const o=await(function(u,d){const h=Pe(u),m=yt.now(),v=d.reduce(((w,O)=>w.add(O.key)),Je());let E,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=Cs(),F=Je();return h.Ns.getEntries(w,v).next((B=>{O=B,O.forEach(((Q,j)=>{j.isValidDocument()||(F=F.add(Q))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,O))).next((B=>{E=B;const Q=[];for(const j of d){const $=PU(j,E.get(j.key).overlayedDocument);$!=null&&Q.push(new yo(j.key,$,HA($.value.mapValue),vs.exists(!0)))}return h.mutationQueue.addMutationBatch(w,m,Q,d)})).next((B=>{S=B;const Q=B.applyToLocalDocumentSet(E,F);return h.documentOverlayCache.saveOverlays(w,B.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:jA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,h){let m=u.Vu[u.currentUser.toKey()];m||(m=new Tt(Ke)),m=m.insert(d,h),u.Vu[u.currentUser.toKey()]=m})(i,o.batchId,t),await Cu(i,o.changes),await pd(i.remoteStore)}catch(o){const l=fg(o,"Failed to persist write");t.reject(l)}}async function DC(n,e){const t=Pe(n);try{const i=await bL(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?tt(u.hu,14607):o.removedDocuments.size>0&&(tt(u.hu,42227),u.hu=!1))})),await Cu(t,i,e)}catch(i){await Da(i)}}function U0(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const h=Pe(u);h.onlineState=d;let m=!1;h.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(d)&&(m=!0)})),m&&dg(h)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function T5(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let u=new Tt(Se.comparator);u=u.insert(l,cn.newNoDocument(l,be.min()));const d=Je().add(l),h=new fd(be.min(),new Map,new Tt(Ke),u,d);await DC(i,h),i.du=i.du.remove(l),i.Au.delete(e),pg(i)}else await dm(i.localStore,e,!1).then((()=>mm(i,e,t))).catch(Da)}async function S5(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await xL(t.localStore,e);kC(t,i,null),VC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(t,o)}catch(o){await Da(o)}}async function A5(n,e,t){const i=Pe(n);try{const o=await(function(u,d){const h=Pe(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return h.mutationQueue.lookupMutationBatch(m,d).next((E=>(tt(E!==null,37113),v=E.keys(),h.mutationQueue.removeMutationBatch(m,E)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>h.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);kC(i,e,t),VC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cu(i,o)}catch(o){await Da(o)}}function VC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function kC(n,e,t){const i=Pe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function mm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||UC(n,i)}))}function UC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(og(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),pg(n))}function L0(n,e,t){for(const i of t)i instanceof bC?(n.Ru.addReference(i.key,e),C5(n,i)):i instanceof MC?(me(hg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||UC(n,i.key)):Re(19791,{wu:i})}function C5(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(me(hg,"New document in limbo: "+t),n.Eu.add(i),pg(n))}function pg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(Et.fromString(e)),i=n.fu.next();n.Au.set(i,new h5(t)),n.du=n.du.insert(t,i),CC(n.remoteStore,new fr(zi($m(t.path)),i,"TargetPurposeLimboResolution",id.ce))}}async function Cu(n,e,t){const i=Pe(n),o=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,h)=>{u.push(i.pu(h,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(m){o.push(m);const E=sg.As(h.targetId,m);l.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(h,m){const v=Pe(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(S=>se.forEach(S.Es,(w=>v.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>v.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Va(E))throw E;me(rg,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const w=v.Ms.get(S),O=w.snapshotVersion,F=w.withLastLimboFreeSnapshotVersion(O);v.Ms=v.Ms.insert(S,F)}}})(i.localStore,l))}async function I5(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){me(hg,"User change. New user:",e.toKey());const i=await EC(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((h=>{h.reject(new ve(oe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(t,i.Ls)}}function w5(n,e){const t=Pe(n),i=t.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let o=Je();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function LC(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T5.bind(null,e),e.Pu.H_=l5.bind(null,e.eventManager),e.Pu.yu=u5.bind(null,e.eventManager),e}function R5(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A5.bind(null,e),e}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NL(this.persistence,new IL,e.initialUser,this.serializer)}Cu(e){return new vC(ig.mi,this.serializer)}Du(e){return new kL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class N5 extends Jf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof Yf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cL(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new vC((i=>Yf.mi(i,t)),this.serializer)}}class gm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>U0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I5.bind(null,this.syncEngine),await i5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new r5})()}createDatastore(e){const t=dd(e.databaseInfo.databaseId),i=(function(l){return new FL(l)})(e.databaseInfo);return(function(l,u,d,h){return new zL(l,u,d,h)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,u,d){return new KL(i,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>U0(this.syncEngine,t,0)),(function(){return b0.v()?new b0:new UL})())}createSyncEngine(e,t){return(function(o,l,u,d,h,m,v){const E=new p5(o,l,u,d,h,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);me(ho,"RemoteStore shutting down."),l.Ea.add(5),await Au(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="FirestoreClient";class b5{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{me(Sr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(Sr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Mp(n,e){n.asyncQueue.verifyOperationInProgress(),me(Sr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await EC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function O0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await M5(n);me(Sr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>P0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>P0(e.remoteStore,o))),n._onlineComponents=e}async function M5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Sr,"Using user provided OfflineComponentProvider");try{await Mp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;va("Error using user provided cache. Falling back to memory cache: "+t),await Mp(n,new Jf)}}else me(Sr,"Using default OfflineComponentProvider"),await Mp(n,new N5(void 0));return n._offlineComponents}async function OC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Sr,"Using user provided OnlineComponentProvider"),await O0(n,n._uninitializedComponentsProvider._online)):(me(Sr,"Using default OnlineComponentProvider"),await O0(n,new gm))),n._onlineComponents}function P5(n){return OC(n).then((e=>e.syncEngine))}async function D5(n){const e=await OC(n),t=e.eventManager;return t.onListen=m5.bind(null,e.syncEngine),t.onUnlisten=_5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=g5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v5.bind(null,e.syncEngine),t}function V5(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,h,m){const v=new x5({next:S=>{v.Nu(),u.enqueueAndForget((()=>a5(l,E)));const w=S.docs.has(d);!w&&S.fromCache?m.reject(new ve(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&h&&h.source==="server"?m.reject(new ve(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new c5($m(d.path),v,{includeMetadataChanges:!0,qa:!0});return o5(l,E)})(await D5(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firestore.googleapis.com",F0=!0;class B0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FC,this.ssl=F0}else this.host=e.host,this.ssl=e.ssl??F0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_C;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lL)throw new ve(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mg{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Vk;switch(i.type){case"firstParty":return new Ok(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=q0.get(t);i&&(me("ComponentProvider","Removing Datastore"),q0.delete(t),i.terminate())})(this),Promise.resolve()}}function k5(n,e,t,i={}){var m;n=ou(n,mg);const o=xa(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(LS(`https://${d}`),OS("Firestore",!0)),l.host!==FC&&l.host!==d&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...l,host:d,ssl:o,emulatorOptions:i};if(!ao(h,u)&&(n._setSettings(h),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=un.MOCK_USER;else{v=GP(i.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ve(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(S)}n._authCredentials=new kk(new MA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gg(this.firestore,e,this._query)}}class Wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Eu(t,Wt._jsonSchema))return new Wt(e,i||null,new Se(Et.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:qt("string",Wt._jsonSchemaVersion),referencePath:qt("string")};class hu extends gg{constructor(e,t,i){super(e,t,$m(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new Se(e))}withConverter(e){return new hu(this.firestore,e,this._path)}}function af(n,e,...t){if(n=Fn(n),arguments.length===1&&(e=zm.newId()),zk("doc","path",e),n instanceof mg){const i=Et.fromString(e,...t);return t0(i),new Wt(n,null,new Se(i))}{if(!(n instanceof Wt||n instanceof hu))throw new ve(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Et.fromString(e,...t));return t0(i),new Wt(n.firestore,n instanceof hu?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="AsyncQueue";class G0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SC(this,"async_queue_retry"),this._c=()=>{const i=bp();i&&me(H0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=bp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Va(e))throw e;me(H0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",z0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=cg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function z0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yg extends mg{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new G0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function U5(n,e){const t=typeof n=="object"?n:HS(),i=typeof n=="string"?n:Of,o=Pm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=BP("firestore");l&&k5(o,...l)}return o}function BC(n){if(n._terminated)throw new ve(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||L5(n),n._firestoreClient}function L5(n){var i,o,l;const e=n._freezeSettings(),t=(function(d,h,m,v){return new nU(d,h,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,qC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new b5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(on.fromBase64String(e))}catch(t){throw new ve(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ti(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:qt("string",ti._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:qt("string",Ki._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ji(e.vectorValues);throw new ve(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:qt("string",Ji._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=/^__.*__$/;class q5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}function GC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class vg{constructor(e,t,i,o,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GC(this.Ac)&&O5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dd(e)}Cc(e,t,i,o=!1){return new vg({Ac:e,methodName:t,Dc:i,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function B5(n){const e=n._freezeSettings(),t=dd(n._databaseId);return new F5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function H5(n,e,t,i,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);JC("Data must be an object, but it was:",u,i);const d=YC(i,u);let h,m;if(l.merge)h=new yi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=G5(e,E,t);if(!u.contains(S))throw new ve(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Y5(v,S)||v.push(S)}h=new yi(v),m=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,m=u.fieldTransforms;return new q5(new ei(d),h,m)}function zC(n,e){if(KC(n=Fn(n)))return JC("Unsupported field value:",e,n),YC(n,e);if(n instanceof HC)return(function(i,o){if(!GC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let u=0;for(const d of i){let h=zC(d,o.wc(u));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wU(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=yt.fromDate(i);return{timestampValue:zf(o.serializer,l)}}if(i instanceof yt){const l=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zf(o.serializer,l)}}if(i instanceof Ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ti)return{bytesValue:fC(o.serializer,i._byteString)};if(i instanceof Wt){const l=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ji)return(function(u,d){return{mapValue:{fields:{[FA]:{stringValue:BA},[qf]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return jm(d.serializer,m)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Ym(i)}`)})(n,e)}function YC(n,e){const t={};return VA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(n,((i,o)=>{const l=zC(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function KC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Ki||n instanceof ti||n instanceof Wt||n instanceof HC||n instanceof Ji)}function JC(n,e,t){if(!KC(t)||!PA(t)){const i=Ym(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function G5(n,e,t){if((e=Fn(e))instanceof _g)return e._internalPath;if(typeof e=="string")return QC(n,e);throw Qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const z5=new RegExp("[~\\*/\\[\\]]");function QC(n,e,t){if(e.search(z5)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _g(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qf(n,e,t,i,o){const l=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(l||u)&&(h+=" (found",l&&(h+=` in field ${i}`),u&&(h+=` in document ${o}`),h+=")"),new ve(oe.INVALID_ARGUMENT,d+n+h)}function Y5(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class K5 extends WC{data(){return super.data()}}function XC(n,e){return typeof e=="string"?QC(n,e):e instanceof _g?e._internalPath:e._delegate._internalPath}class J5{convertValue(e,t="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return mo(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[qf].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>xt(u.doubleValue)));return new Ji(t)}convertGeoPoint(e){return new Ki(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=rd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const t=_r(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Et.fromString(e);tt(yC(i),9688,{name:e});const o=new uu(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return o.isEqual(t)||As(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends WC{constructor(e,t,i,o,l,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(XC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:qt("string",oo._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class Af extends oo{data(e={}){return super.data(e)}}class tu{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Af(this._firestore,this._userDataWriter,i.key,i,new Jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const h=new Af(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Jl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const h=new Af(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Jl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:W5(d.type),doc:h,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n){n=ou(n,Wt);const e=ou(n.firestore,yg);return V5(BC(e),n._key).then((t=>j5(e,n,t)))}tu._jsonSchemaVersion="firestore/querySnapshot/1.0",tu._jsonSchema={type:qt("string",tu._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class X5 extends J5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function K0(n,e,t){n=ou(n,Wt);const i=ou(n.firestore,yg),o=Q5(n.converter,e,t);return $5(i,[H5(B5(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,vs.none())])}function $5(n,e){return(function(i,o){const l=new gr;return i.asyncQueue.enqueueAndForget((async()=>E5(await P5(i),o,l))),l.promise})(BC(n),e)}function j5(n,e,t){const i=t.docs.get(e._key),o=new X5(n);return new oo(n,o,e._key,i,new Jl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Pa=o})(ba),_a(new lo("firestore",((i,{instanceIdentifier:o,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new yg(new Uk(i.getProvider("auth-internal")),new qk(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(m.options.projectId,v)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),pr($T,jT,e),pr($T,jT,"esm2020")})();const Z5={apiKey:"AIzaSyBqHAr-VX41AaHj5YIL9E3qjy98H3fbZvg",authDomain:"invoice-ai-7f9f5.firebaseapp.com",projectId:"invoice-ai-7f9f5",storageBucket:"invoice-ai-7f9f5.firebasestorage.app",messagingSenderId:"840098157464",appId:"1:840098157464:web:b89b53953d7cc8475b11ed",measurementId:"G-JJC59GREEH"},$C=BS(Z5),nu=bk($C),lf=U5($C),e4=({onLogin:n})=>{const[e,t]=he.useState(!1),[i,o]=he.useState(""),[l,u]=he.useState(""),[d,h]=he.useState(""),m=async E=>{if(E.preventDefault(),h(""),!i||!l){h("Please enter both email and password.");return}if(!/\S+@\S+\.\S+/.test(i)){h("Please enter a valid email address.");return}try{let S;if(e){if(l.length<6){h("Password must be at least 6 characters long.");return}S=await pV(nu,i,l)}else S=await mV(nu,i,l);const w=S.user,O={id:w.uid,name:w.displayName||i.split("@")[0],email:w.email,picture:w.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.split("@")[0])}&background=random&color=fff`};n(O)}catch(S){S.code==="auth/email-already-in-use"?h("An account with this email already exists. Please sign in."):S.code==="auth/user-not-found"?h("No account found with this email. Please sign up."):S.code==="auth/wrong-password"?h("Incorrect password."):h("Authentication failed. Please try again."),console.error("Firebase authentication error:",S)}},v=async()=>{h("");try{const E=new ms,w=(await qV(nu,E)).user,O={id:w.uid,name:w.displayName,email:w.email,picture:w.photoURL};n(O)}catch(E){h("Google Sign-In failed. Please try again."),console.error("Google Sign-In error:",E)}};return I.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center p-4",children:I.jsxs("div",{className:"w-full max-w-sm",children:[I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-slate-200",children:[I.jsx("div",{className:"flex justify-center mb-6",children:I.jsx("div",{className:"bg-indigo-600 p-4 rounded-full text-white",children:I.jsx(Tm,{className:"h-10 w-10"})})}),I.jsx("h1",{className:"text-2xl font-bold text-center text-slate-800",children:"Invoice AI Parser"}),I.jsx("p",{className:"text-center text-slate-500 mt-2 mb-6",children:e?"Create an account to get started.":"Sign in to your account."}),I.jsxs("form",{onSubmit:m,className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),I.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:E=>o(E.target.value),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Email address"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),I.jsx("input",{id:"password",name:"password",type:"password",autoComplete:e?"new-password":"current-password",required:!0,value:l,onChange:E=>u(E.target.value),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password"})]}),d&&I.jsx("p",{className:"text-xs text-red-600 text-center",children:d}),I.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:e?"Sign Up":"Sign In"})]}),I.jsx("div",{className:"text-center my-4",children:I.jsx("button",{onClick:()=>{t(!e),h("")},className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:e?"Already have an account? Sign In":"Don't have an account? Sign Up"})}),I.jsx("div",{className:"my-6",children:I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-slate-300"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Or"})})]})}),I.jsx("div",{className:"flex justify-center",children:I.jsxs("button",{onClick:v,className:"flex items-center justify-center w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50",children:[I.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:I.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 111.3 512 0 398.5 0 256S111.3 0 244 0c69.1 0 125.3 27.2 170.4 69.1L377.5 128C345.1 98.1 300.5 80 244 80c-87.6 0-158.3 70.7-158.3 158.3s70.7 158.3 158.3 158.3c96.1 0 133.3-67.9 138-102.3H244v-73.4h239.3c5.1 27.3 8.7 56.4 8.7 87.5z"})}),"Sign in with Google"]})})]}),I.jsx("footer",{className:"text-center p-4 text-xs text-slate-400 mt-4",children:I.jsx("p",{children:" 2024 Invoice AI Parser."})})]})})};var jC="clover",t4=function(e){return e===3?"v3":e},ZC="https://js.stripe.com",n4="".concat(ZC,"/").concat(jC,"/stripe.js"),i4=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s4=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var r4=function(e){return i4.test(e)||s4.test(e)},o4=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ZC,'"]')),t=0;t<e.length;t++){var i=e[t];if(r4(i.src))return i}return null},J0=function(e){var t="",i=document.createElement("script");i.src="".concat(n4).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},a4=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.4.0",startTime:t})},Fl=null,uf=null,cf=null,l4=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},u4=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},c4=function(e){return Fl!==null?Fl:(Fl=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=o4();if(!(o&&e)){if(!o)o=J0(e);else if(o&&cf!==null&&uf!==null){var l;o.removeEventListener("load",cf),o.removeEventListener("error",uf),(l=o.parentNode)===null||l===void 0||l.removeChild(o),o=J0(e)}}cf=u4(t,i),uf=l4(i),o.addEventListener("load",cf),o.addEventListener("error",uf)}catch(u){i(u);return}}),Fl.catch(function(t){return Fl=null,Promise.reject(t)}))},f4=function(e,t,i){if(e===null)return null;var o=t[0],l=o.match(/^pk_test/),u=t4(e.version),d=jC;l&&u!==d&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("8.4.0"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var h=e.apply(void 0,t);return a4(h,i),h},Bl,eI=!1,tI=function(){return Bl||(Bl=c4(null).catch(function(e){return Bl=null,Promise.reject(e)}),Bl)};Promise.resolve().then(function(){return tI()}).catch(function(n){eI||console.warn(n)});var d4=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];eI=!0;var o=Date.now();return tI().then(function(l){return f4(l,t,o)})},Pp={exports:{}},Dp,Q0;function h4(){if(Q0)return Dp;Q0=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dp=n,Dp}var Vp,W0;function p4(){if(W0)return Vp;W0=1;var n=h4();function e(){}function t(){}return t.resetWarningCache=e,Vp=function(){function i(u,d,h,m,v,E){if(E!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Vp}var X0;function m4(){return X0||(X0=1,Pp.exports=p4()()),Pp.exports}var g4=m4();const ct=vm(g4);function $0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function j0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$0(Object(t),!0).forEach(function(i){nI(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$0(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Cf(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cf=function(e){return typeof e}:Cf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(n)}function nI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function y4(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function _4(n,e){if(n==null)return{};var t=y4(n,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function iI(n,e){return v4(n)||E4(n,e)||T4(n,e)||S4()}function v4(n){if(Array.isArray(n))return n}function E4(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var i=[],o=!0,l=!1,u,d;try{for(t=t.call(n);!(o=(u=t.next()).done)&&(i.push(u.value),!(e&&i.length===e));o=!0);}catch(h){l=!0,d=h}finally{try{!o&&t.return!=null&&t.return()}finally{if(l)throw d}}return i}}function T4(n,e){if(n){if(typeof n=="string")return Z0(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z0(n,e)}}function Z0(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function S4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yn=function(e,t,i){var o=!!i,l=ft.useRef(i);ft.useEffect(function(){l.current=i},[i]),ft.useEffect(function(){if(!o||!e)return function(){};var u=function(){l.current&&l.current.apply(l,arguments)};return e.on(t,u),function(){e.off(t,u)}},[o,t,e,l])},ym=function(e){var t=ft.useRef(e);return ft.useEffect(function(){t.current=e},[e]),t.current},Ia=function(e){return e!==null&&Cf(e)==="object"},A4=function(e){return Ia(e)&&typeof e.then=="function"},C4=function(e){return Ia(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},eS="[object Object]",I4=function n(e,t){if(!Ia(e)||!Ia(t))return e===t;var i=Array.isArray(e),o=Array.isArray(t);if(i!==o)return!1;var l=Object.prototype.toString.call(e)===eS,u=Object.prototype.toString.call(t)===eS;if(l!==u)return!1;if(!l&&!i)return e===t;var d=Object.keys(e),h=Object.keys(t);if(d.length!==h.length)return!1;for(var m={},v=0;v<d.length;v+=1)m[d[v]]=!0;for(var E=0;E<h.length;E+=1)m[h[E]]=!0;var S=Object.keys(m);if(S.length!==d.length)return!1;var w=e,O=t,F=function(Q){return n(w[Q],O[Q])};return S.every(F)},sI=function(e,t,i){return Ia(e)?Object.keys(e).reduce(function(o,l){var u=!Ia(t)||!I4(e[l],t[l]);return i.includes(l)?(u&&console.warn("Unsupported prop change: options.".concat(l," is not a mutable property.")),o):u?j0(j0({},o||{}),{},nI({},l,e[l])):o},null):null},rI="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",tS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rI;if(e===null||C4(e))return e;throw new Error(t)},w4=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rI;if(A4(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return tS(o,t)})};var i=tS(e,t);return i===null?{tag:"empty"}:{tag:"sync",stripe:i}},R4=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},md=ft.createContext(null);md.displayName="ElementsContext";var oI=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},aI=function(e){var t=e.stripe,i=e.options,o=e.children,l=ft.useMemo(function(){return w4(t)},[t]),u=ft.useState(function(){return{stripe:l.tag==="sync"?l.stripe:null,elements:l.tag==="sync"?l.stripe.elements(i):null}}),d=iI(u,2),h=d[0],m=d[1];ft.useEffect(function(){var S=!0,w=function(F){m(function(B){return B.stripe?B:{stripe:F,elements:F.elements(i)}})};return l.tag==="async"&&!h.stripe?l.stripePromise.then(function(O){O&&S&&w(O)}):l.tag==="sync"&&!h.stripe&&w(l.stripe),function(){S=!1}},[l,h,i]);var v=ym(t);ft.useEffect(function(){v!==null&&v!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,t]);var E=ym(i);return ft.useEffect(function(){if(h.elements){var S=sI(i,E,["clientSecret","fonts"]);S&&h.elements.update(S)}},[i,E,h.elements]),ft.useEffect(function(){R4(h.stripe)},[h.stripe]),ft.createElement(md.Provider,{value:h},o)};aI.propTypes={stripe:ct.any,options:ct.object};var N4=function(e){var t=ft.useContext(md);return oI(t,e)},x4=function(){var e=N4("calls useElements()"),t=e.elements;return t};ct.func.isRequired;var lI=ft.createContext(null);lI.displayName="CheckoutContext";ct.any,ct.shape({clientSecret:ct.oneOfType([ct.string,ct.instanceOf(Promise)]).isRequired,elementsOptions:ct.object}).isRequired;var _m=function(e){var t=ft.useContext(lI),i=ft.useContext(md);if(t){if(i)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}else return oI(i,e)},b4=["mode"],M4=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wn=function(e,t){var i="".concat(M4(e),"Element"),o=function(h){var m=h.id,v=h.className,E=h.options,S=E===void 0?{}:E,w=h.onBlur,O=h.onFocus,F=h.onReady,B=h.onChange,Q=h.onEscape,j=h.onClick,$=h.onLoadError,ue=h.onLoaderStart,de=h.onNetworksChange,re=h.onConfirm,M=h.onCancel,P=h.onShippingAddressChange,x=h.onShippingRateChange,D=h.onSavedPaymentMethodRemove,V=h.onSavedPaymentMethodUpdate,U=_m("mounts <".concat(i,">")),b="elements"in U?U.elements:null,Te="checkoutState"in U?U.checkoutState:null,Ce=(Te==null?void 0:Te.type)==="success"||(Te==null?void 0:Te.type)==="loading"?Te.sdk:null,G=ft.useState(null),ae=iI(G,2),ce=ae[0],De=ae[1],xe=ft.useRef(null),L=ft.useRef(null);yn(ce,"blur",w),yn(ce,"focus",O),yn(ce,"escape",Q),yn(ce,"click",j),yn(ce,"loaderror",$),yn(ce,"loaderstart",ue),yn(ce,"networkschange",de),yn(ce,"confirm",re),yn(ce,"cancel",M),yn(ce,"shippingaddresschange",P),yn(ce,"shippingratechange",x),yn(ce,"savedpaymentmethodremove",D),yn(ce,"savedpaymentmethodupdate",V),yn(ce,"change",B);var ee;F&&(e==="expressCheckout"?ee=F:ee=function(){F(ce)}),yn(ce,"ready",ee),ft.useLayoutEffect(function(){if(xe.current===null&&L.current!==null&&(b||Ce)){var le=null;if(Ce)switch(e){case"payment":le=Ce.createPaymentElement(S);break;case"address":if("mode"in S){var ye=S.mode,Ie=_4(S,b4);if(ye==="shipping")le=Ce.createShippingAddressElement(Ie);else if(ye==="billing")le=Ce.createBillingAddressElement(Ie);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":le=Ce.createExpressCheckoutElement(S);break;case"currencySelector":le=Ce.createCurrencySelectorElement();break;case"taxId":le=Ce.createTaxIdElement(S);break;default:throw new Error("Invalid Element type ".concat(i,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else b&&(le=b.create(e,S));xe.current=le,De(le),le&&le.mount(L.current)}},[b,Ce,S]);var ie=ym(S);return ft.useEffect(function(){if(xe.current){var le=sI(S,ie,["paymentRequest"]);le&&"update"in xe.current&&xe.current.update(le)}},[S,ie]),ft.useLayoutEffect(function(){return function(){if(xe.current&&typeof xe.current.destroy=="function")try{xe.current.destroy(),xe.current=null}catch{}}},[]),ft.createElement("div",{id:m,className:v,ref:L})},l=function(h){_m("mounts <".concat(i,">"));var m=h.id,v=h.className;return ft.createElement("div",{id:m,className:v})},u=t?l:o;return u.propTypes={id:ct.string,className:ct.string,onChange:ct.func,onBlur:ct.func,onFocus:ct.func,onReady:ct.func,onEscape:ct.func,onClick:ct.func,onLoadError:ct.func,onLoaderStart:ct.func,onNetworksChange:ct.func,onConfirm:ct.func,onCancel:ct.func,onShippingAddressChange:ct.func,onShippingRateChange:ct.func,onSavedPaymentMethodRemove:ct.func,onSavedPaymentMethodUpdate:ct.func,options:ct.object},u.displayName=i,u.__elementType=e,u},Rn=typeof window>"u",P4=ft.createContext(null);P4.displayName="EmbeddedCheckoutProviderContext";var D4=function(){var e=_m("calls useStripe()"),t=e.stripe;return t};wn("auBankAccount",Rn);wn("card",Rn);wn("cardNumber",Rn);wn("cardExpiry",Rn);wn("cardCvc",Rn);wn("iban",Rn);var V4=wn("payment",Rn);wn("expressCheckout",Rn);wn("paymentRequestButton",Rn);wn("linkAuthentication",Rn);wn("address",Rn);wn("shippingAddress",Rn);wn("paymentMethodMessaging",Rn);wn("taxId",Rn);const k4="pk_test_51PbsA5RqcWwIeHkP3F5y6hN1DEk3qSt0cs5a7yLdeWDoaFzAnz5pA9VbJ2zTGNkpqd7T2n6SzoM957QZXaFxDR3z00qAbUfAb4",U4=d4(k4),L4=({plan:n,onSuccessfulPayment:e,onCancel:t})=>{const i=D4(),o=x4(),[l,u]=he.useState(null),[d,h]=he.useState(!1),m=async v=>{if(v.preventDefault(),!i||!o)return;h(!0),u(null);const{error:E}=await i.confirmPayment({elements:o,confirmParams:{return_url:`${window.location.origin}`}});E.type==="card_error"||E.type==="validation_error"?u(E.message||"An unexpected error occured."):u("An unexpected error occurred. Please try again."),h(!1)};return I.jsxs("form",{onSubmit:m,className:"space-y-4",children:[I.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Pay with Card for ",n.name," Plan"]}),I.jsx(V4,{}),l&&I.jsx("div",{className:"text-red-600 text-sm",children:l}),I.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[I.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium rounded-md text-slate-600 bg-slate-100 hover:bg-slate-200",children:"Cancel"}),I.jsx("button",{type:"submit",disabled:!i||d,className:"px-4 py-2 text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300",children:d?"Processing...":`Pay ${n.price}`})]})]})},O4=({isOpen:n,onClose:e,onSelectPlan:t,currentPlanId:i,plans:o,userEmail:l})=>{const[u,d]=he.useState(null),[h,m]=he.useState(null);he.useEffect(()=>{d(null),m(null)},[n]);const v=async w=>{if(w.price===0)t(w.id),e();else{d(w),console.log("Simulating backend call to create PaymentIntent...");try{const F=await(await fetch("https://stripe-server-mock.glitch.me/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:w.price*100,currency:"eur",customer_email:l})})).json();F.clientSecret?m(F.clientSecret):console.error("Failed to get client secret")}catch(O){console.error("Error fetching client secret:",O)}}},E=()=>{u&&t(u.id),e()};if(!n)return null;const S=Object.values(o);return I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:I.jsx("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",onClick:w=>w.stopPropagation(),children:u&&h?I.jsx(aI,{stripe:U4,options:{clientSecret:h},children:I.jsx(L4,{plan:u,onSuccessfulPayment:()=>E(),onCancel:()=>{d(null),m(null)}})}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Choose Your Plan"}),I.jsx("p",{className:"text-slate-500 mt-2",children:"Start for free, then upgrade as you grow."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:S.map(w=>I.jsxs("div",{className:`p-6 rounded-lg border-2 flex flex-col ${i===w.id?"border-indigo-500":"border-slate-200"}`,children:[I.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:w.name}),I.jsx("p",{className:"text-slate-500 mt-1 flex-grow",children:w.description}),I.jsxs("div",{className:"my-6",children:[I.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:["",w.price]}),w.price>0&&I.jsx("span",{className:"text-slate-500",children:" / month"})]}),I.jsxs("ul",{className:"space-y-3 text-sm text-slate-600 mb-8",children:[I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsxs("span",{children:["Process up to ",I.jsx("strong",{children:w.invoiceLimit.toLocaleString()})," invoices"]})]}),I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsx("span",{children:"AI-powered data extraction"})]}),I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsx("span",{children:"Excel & CSV export"})]})]}),I.jsx("button",{onClick:()=>v(w),disabled:i===w.id,className:"w-full mt-auto px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:cursor-not-allowed disabled:opacity-70 bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 disabled:bg-slate-400",children:i===w.id?"Current Plan":"Choose Plan"})]},w.id))}),I.jsx("div",{className:"text-center mt-6",children:I.jsx("button",{onClick:e,className:"text-sm text-slate-500 hover:text-slate-700",children:"Close"})})]})})})},q4=({onGetStarted:n,plans:e})=>{const t=Object.values(e);return I.jsxs("div",{className:"bg-slate-50 text-slate-800 font-sans",children:[I.jsx("header",{className:"bg-white/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-50 border-b border-slate-200",children:I.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[I.jsxs("div",{className:"flex items-center space-x-2",children:[I.jsx(Tm,{className:"w-7 h-7 text-indigo-600"}),I.jsx("h1",{className:"text-xl font-bold",children:"Invoice AI Parser"})]}),I.jsx("button",{onClick:n,className:"hidden sm:inline-block px-5 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all",children:"Sign In"})]})}),I.jsxs("main",{children:[I.jsxs("section",{className:"relative pt-32 pb-20 md:pt-48 md:pb-32 text-center bg-white overflow-hidden",children:[I.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white to-gray-100 z-0"}),I.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-indigo-100 rounded-full opacity-50 -translate-x-1/4 -translate-y-1/4"}),I.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-purple-100 rounded-full opacity-50 translate-x-1/4 translate-y-1/4"}),I.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[I.jsxs("h2",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 leading-tight",children:["Stop Typing. ",I.jsx("span",{className:"text-indigo-600",children:"Start Automating."})]}),I.jsx("p",{className:"mt-6 max-w-2xl mx-auto text-lg text-slate-600",children:"Transform invoice photos into structured, export-ready data in seconds with AI. Reclaim your time and eliminate costly data entry errors."}),I.jsx("div",{className:"mt-10 flex flex-col sm:flex-row justify-center items-center gap-4",children:I.jsxs("button",{onClick:n,className:"w-full sm:w-auto flex items-center justify-center px-8 py-3 text-lg font-semibold text-white bg-indigo-600 rounded-lg shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform hover:scale-105 transition-all",children:["Get Started for Free",I.jsx(rR,{className:"w-5 h-5 ml-2"})]})}),I.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Free trial includes 50 invoices. No credit card required."})]})]}),I.jsx("section",{className:"py-20 bg-slate-50",children:I.jsxs("div",{className:"container mx-auto px-6",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("h3",{className:"text-3xl font-bold text-slate-800",children:"Simple as 1-2-3"}),I.jsx("p",{className:"mt-2 text-slate-500 max-w-xl mx-auto",children:"Get from paper invoice to spreadsheet in under a minute."})]}),I.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[I.jsx("div",{className:"mx-auto mb-4 w-16 h-16 flex items-center justify-center bg-indigo-100 text-indigo-600 rounded-full font-bold text-2xl",children:"1"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Upload Nomenclature"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Your product list is the AI's brain. Upload your CSV or Excel file just once to get started."})]}),I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[I.jsx("div",{className:"mx-auto mb-4 w-16 h-16 flex items-center justify-center bg-indigo-100 text-indigo-600 rounded-full font-bold text-2xl",children:"2"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Snap & Upload Invoice"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Take a clear picture or upload a PDF of any invoice. Handle one or multiple files at once."})]}),I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[I.jsx("div",{className:"mx-auto mb-4 w-16 h-16 flex items-center justify-center bg-indigo-100 text-indigo-600 rounded-full font-bold text-2xl",children:"3"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Export & Integrate"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Review the AI-extracted data, make edits if needed, and export to CSV or aggregated Excel."})]})]})]})}),I.jsx("section",{className:"py-20 bg-white",children:I.jsxs("div",{className:"container mx-auto px-6",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("h3",{className:"text-3xl font-bold text-slate-800",children:"End Manual Entry Headaches"}),I.jsx("p",{className:"mt-2 text-slate-500 max-w-xl mx-auto",children:"Our tool is designed for business owners who value their time and accuracy."})]}),I.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[I.jsxs("div",{className:"p-6",children:[I.jsx(oR,{className:"h-10 w-10 text-indigo-600 mb-4"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Save Countless Hours"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Our AI reads and categorizes line items faster than any human, freeing you and your staff for more important tasks."})]}),I.jsxs("div",{className:"p-6",children:[I.jsx(aR,{className:"h-10 w-10 text-indigo-600 mb-4"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Eliminate Costly Errors"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Drastically reduce mistakes from manual typing and misinterpretation. Ensure your inventory and accounting are always accurate."})]}),I.jsxs("div",{className:"p-6",children:[I.jsx(lR,{className:"h-10 w-10 text-indigo-600 mb-4"}),I.jsx("h4",{className:"text-lg font-semibold",children:"Customize Your Data"}),I.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Don't get stuck with rigid formats. Reorder, rename, and toggle columns to get the exact export you need for your systems."})]})]})]})}),I.jsx("section",{className:"py-20 bg-slate-50",children:I.jsxs("div",{className:"container mx-auto px-6",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("h3",{className:"text-3xl font-bold text-slate-800",children:"Transparent Pricing"}),I.jsx("p",{className:"mt-2 text-slate-500",children:"Choose the plan that's right for your business."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:t.map(i=>I.jsxs("div",{className:"p-6 rounded-lg border-2 flex flex-col bg-white border-slate-200",children:[I.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:i.name}),I.jsx("p",{className:"text-slate-500 mt-1 flex-grow",children:i.description}),I.jsxs("div",{className:"my-6",children:[I.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:["",i.price]}),i.price>0&&I.jsx("span",{className:"text-slate-500",children:" / month"})]}),I.jsxs("ul",{className:"space-y-3 text-sm text-slate-600 mb-8",children:[I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsxs("span",{children:["Process up to ",I.jsx("strong",{children:i.invoiceLimit.toLocaleString()})," invoices"]})]}),I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsx("span",{children:"AI-powered data extraction"})]}),I.jsxs("li",{className:"flex items-start",children:[I.jsx(ro,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),I.jsx("span",{children:"Excel & CSV export"})]})]}),I.jsx("button",{onClick:n,className:"w-full mt-auto px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",children:"Choose Plan"})]},i.id))})]})}),I.jsx("section",{className:"py-20 bg-white",children:I.jsxs("div",{className:"container mx-auto px-6 text-center",children:[I.jsx("h3",{className:"text-3xl font-bold text-slate-800",children:"Ready to streamline your inventory?"}),I.jsx("p",{className:"mt-4 max-w-xl mx-auto text-slate-600",children:"Sign up now and process your first 50 invoices for free. See for yourself how much time you can save."}),I.jsx("div",{className:"mt-8",children:I.jsx("button",{onClick:n,className:"inline-flex items-center justify-center px-8 py-3 text-lg font-semibold text-white bg-indigo-600 rounded-lg shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform hover:scale-105 transition-all",children:"Start Your Free Trial"})})]})})]}),I.jsx("footer",{className:"bg-slate-100 border-t border-slate-200",children:I.jsx("div",{className:"container mx-auto px-6 py-6 text-center text-sm text-slate-500",children:I.jsx("p",{children:" 2024 Invoice AI Parser. All rights reserved."})})})]})},kp={free:{id:"free",name:"Free Trial",price:0,currency:"EUR",invoiceLimit:50,description:"Perfect for trying out the service."},pro:{id:"pro",name:"Pro",price:19.99,currency:"EUR",invoiceLimit:1e3,description:"Ideal for small to medium businesses."},premium:{id:"premium",name:"Premium",price:79.99,currency:"EUR",invoiceLimit:1e4,description:"For power users and large operations."}},ff=[{key:"invoiceFileName",header:"Invoice File",enabled:!0,order:0},{key:"matchedProductName",header:"Matched Product Name",enabled:!0,order:1},{key:"originalName",header:"Original Name",enabled:!0,order:2},{key:"sku",header:"SKU",enabled:!0,order:3},{key:"quantity",header:"Quantity",enabled:!0,order:4},{key:"totalQuantity",header:"Total Quantity",enabled:!0,order:5},{key:"unitOfMeasure",header:"Unit of Measure",enabled:!0,order:6},{key:"unitPrice",header:"Unit Price",enabled:!0,order:7},{key:"totalPrice",header:"Total Price",enabled:!0,order:8}],F4=()=>{const[n,e]=he.useState(null),[t,i]=he.useState(!1),[o,l]=he.useState("free"),[u,d]=he.useState(0),[h,m]=he.useState(!1),[v,E]=he.useState(""),[S,w]=he.useState(null),[O,F]=he.useState(!1),[B,Q]=he.useState(null),[j,$]=he.useState([]),[ue,de]=he.useState([]),[re,M]=he.useState([]),[P,x]=he.useState(null),[D,V]=he.useState(null),[U,b]=he.useState(ff),[Te,Ce]=he.useState(!1);he.useEffect(()=>{const Ve=_V(nu,async He=>{if(He){const Le={id:He.uid,name:He.displayName||He.email.split("@")[0],email:He.email,picture:He.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(He.email.split("@")[0])}&background=random&color=fff`};e(Le),await G(Le.id)}else e(null),xe();Ce(!0)});return()=>Ve()},[]);const G=async Ve=>{const He=af(lf,"users",Ve);try{const Le=await Y0(He);if(Le.exists()){const Ne=Le.data();l(Ne.planId||"free"),d(Ne.invoiceCount||0);const Nn=Ne.companies||[];de(Nn);const hn=Ne.warehouses||[];if(M(hn),Nn.length>0){const xn=Ne.selectedCompanyId||Nn[0].id;x(xn);const Xt=hn.filter(ht=>ht.companyId===xn);if(Xt.length>0){const ht=Ne.selectedWarehouseId||Xt[0].id;V(ht)}}}}catch(Le){console.error("Failed to load user data from Firestore",Le),Q("Could not load your profile. Please try refreshing the page.")}},ae=he.useCallback(async()=>{if(!n)return;const Ve=af(lf,"users",n.id),He={planId:o,invoiceCount:u,companies:ue,warehouses:re,selectedCompanyId:P,selectedWarehouseId:D};try{await K0(Ve,He,{merge:!0})}catch(Le){console.error("Failed to save data to Firestore",Le)}},[n,o,u,ue,re,P,D]);he.useEffect(()=>{n&&ae()},[ae]),he.useEffect(()=>{(async()=>{if(n&&D){const He=af(lf,"users",n.id,"warehouses",D);try{await K0(He,{nomenclature:v,exportConfig:U},{merge:!0})}catch(Le){console.error("Failed to save warehouse-specific data",Le)}}})()},[n,D,v,U]),he.useEffect(()=>{(async()=>{if(n&&D){const He=af(lf,"users",n.id,"warehouses",D);try{const Le=await Y0(He);if(Le.exists()){const Ne=Le.data();E(Ne.nomenclature||""),b(Ne.exportConfig||ff)}else E(""),b(ff)}catch(Le){console.error("Failed to load warehouse-specific data",Le)}}})(),Ie()},[n,D]);const ce=Ve=>{e(Ve)},De=async()=>{try{await vV(nu)}catch(Ve){console.error("Logout failed:",Ve)}},xe=()=>{i(!1),de([]),M([]),x(null),V(null),E(""),Ie(),l("free"),d(0),Ce(!1)},L=Ve=>{l(Ve),Ve!=="free"&&d(0),m(!1)},ee=Ve=>{E(Ve),Ie()},ie=Ve=>{b(Ve)},le=async Ve=>{if(!(!Ve||Ve.length===0)){w(null),Q(null),F(!0);try{const He=await Promise.all(Array.from(Ve).map(async Le=>({file:Le,preview:await vT(Le)})));$(He)}catch(He){Q("Failed to read one or more files."),console.error(He)}finally{F(!1)}}},ye=async()=>{if(j.length===0||v.length===0){Q("Please upload nomenclature and at least one invoice file first.");return}F(!0),Q(null),w(null);try{const Ve=await Promise.allSettled(j.map(async({file:Ne})=>{const hn=(await vT(Ne)).split(",")[1],xn=Ne.type;return(await MP(hn,xn,v)).map(ht=>({...ht,id:crypto.randomUUID(),invoiceFileName:Ne.name}))})),He=Ve.filter(Ne=>Ne.status==="fulfilled").flatMap(Ne=>Ne.value),Le=Ve.filter(Ne=>Ne.status==="rejected");if(Le.length>0&&(console.error("Some invoices failed to process:",Le),Q(`Failed to process ${Le.length} out of ${j.length} invoices. Check the console.`)),He.length===0&&Le.length>0){const Ne=Le[0].reason;throw new Error((Ne==null?void 0:Ne.message)||"All invoices failed to process.")}w(He),d(Ne=>Ne+He.length>0?j.length:0)}catch(Ve){console.error(Ve),Q(Ve.message||"An unexpected error occurred during processing.")}finally{F(!1)}},Ie=()=>{$([]),w(null),Q(null)},Be=(Ve,He)=>{const Le={id:crypto.randomUUID(),name:Ve},Ne={id:crypto.randomUUID(),name:He,companyId:Le.id};de([Le]),M([Ne]),x(Le.id),V(Ne.id)},Ct=(Ve,He)=>{w(Le=>Le?Le.map(Ne=>Ne.id===Ve?{...Ne,...He}:Ne):null)},dt=he.useMemo(()=>{if(!v)return[];try{const Ve=XLSX.read(v,{type:"string"}),He=Ve.SheetNames[0],Le=Ve.Sheets[He],Ne=XLSX.utils.sheet_to_json(Le,{header:1});if(Ne.length<2)return[];const Nn=Ne[0].map(Xt=>String(Xt).toLowerCase().trim()),hn=Nn.indexOf("name"),xn=Nn.indexOf("sku");return hn===-1||xn===-1?[]:Ne.slice(1).map(Xt=>({name:String(Xt[hn]||""),sku:String(Xt[xn]||"")})).filter(Xt=>Xt.name&&Xt.sku)}catch{return[]}},[v]);if(!Te)return I.jsx("div",{className:"min-h-screen flex items-center justify-center",children:I.jsx("p",{children:"Loading..."})});if(!n)return t?I.jsx(e4,{onLogin:ce}):I.jsx(q4,{onGetStarted:()=>i(!0),plans:kp});if(ue.length===0)return I.jsx(PP,{onSetupComplete:Be});const Ei=kp[o];return I.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 font-sans",children:[I.jsx($w,{user:n,onLogout:De,plan:Ei,invoiceCount:u,onUpgrade:()=>m(!0),companies:ue,warehouses:re,selectedCompanyId:P,selectedWarehouseId:D,onCompanyChange:x,onWarehouseChange:V,setCompanies:de,setWarehouses:M}),I.jsx("main",{className:"container mx-auto p-4 md:p-8",children:I.jsx("div",{className:"max-w-4xl mx-auto space-y-12",children:D?I.jsxs(I.Fragment,{children:[I.jsx(uR,{onNomenclatureUpload:ee,existingNomenclature:v},`${n.id}-${D}`),I.jsx(pR,{nomenclatureLoaded:v.length>0,onFilesUpload:le,onProcessInvoices:ye,onReset:Ie,uploadedFiles:j,invoiceData:S,isLoading:O,error:B,setError:Q,onUpdateItem:Ct,productList:dt,plan:Ei,invoiceCount:u,onUpgrade:()=>m(!0),exportConfig:U,onExportConfigChange:ie,defaultExportConfig:ff})]}):I.jsxs("div",{className:"text-center bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[I.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"No Warehouse Selected"}),I.jsx("p",{className:"text-slate-500 mt-2",children:"Please select a company and a warehouse to begin."})]})})}),I.jsx(O4,{isOpen:h,onClose:()=>m(!1),onSelectPlan:L,currentPlanId:o,plans:kp,userEmail:(n==null?void 0:n.email)??""}),I.jsx("footer",{className:"text-center p-4 text-xs text-slate-400 mt-8",children:I.jsx("p",{children:" 2024 Invoice AI Parser. Streamlining your inventory management."})})]})},uI=document.getElementById("root");if(!uI)throw new Error("Could not find root element to mount to");const B4=Xw.createRoot(uI);B4.render(I.jsx(ft.StrictMode,{children:I.jsx(F4,{})}));
