(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var eq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xp={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function PR(){if(qE)return Zl;qE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var f in r)f!=="key"&&(a[f]=r[f])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return Zl.Fragment=e,Zl.jsx=t,Zl.jsxs=t,Zl}var BE;function MR(){return BE||(BE=1,Xp.exports=PR()),Xp.exports}var C=MR(),Zp={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function DR(){if(HE)return Pe;HE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,L={};function H(q,ee,re){this.props=q,this.context=ee,this.refs=L,this.updater=re||N}H.prototype.isReactComponent={},H.prototype.setState=function(q,ee){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ee,"setState")},H.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function J(){}J.prototype=H.prototype;function B(q,ee,re){this.props=q,this.context=ee,this.refs=L,this.updater=re||N}var te=B.prototype=new J;te.constructor=B,U(te,H.prototype),te.isPureReactComponent=!0;var ue=Array.isArray;function ie(){}var P={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(q,ee,re){var fe=re.ref;return{$$typeof:n,type:q,key:ee,ref:fe!==void 0?fe:null,props:re}}function k(q,ee){return R(q.type,ee,q.props)}function V(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var ee={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(re){return ee[re]})}var D=/\/+/g;function Ee(q,ee){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):ee.toString(36)}function be(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ie,ie):(q.status="pending",q.then(function(ee){q.status==="pending"&&(q.status="fulfilled",q.value=ee)},function(ee){q.status==="pending"&&(q.status="rejected",q.reason=ee)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function $(q,ee,re,fe,ye){var De=typeof q;(De==="undefined"||De==="boolean")&&(q=null);var ze=!1;if(q===null)ze=!0;else switch(De){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(q.$$typeof){case n:case e:ze=!0;break;case y:return ze=q._init,$(ze(q._payload),ee,re,fe,ye)}}if(ze)return ye=ye(q),ze=fe===""?"."+Ee(q,0):fe,ue(ye)?(re="",ze!=null&&(re=ze.replace(D,"$&/")+"/"),$(ye,ee,re,"",function(qe){return qe})):ye!=null&&(V(ye)&&(ye=k(ye,re+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+ze)),ee.push(ye)),1;ze=0;var Et=fe===""?".":fe+":";if(ue(q))for(var _e=0;_e<q.length;_e++)fe=q[_e],De=Et+Ee(fe,_e),ze+=$(fe,ee,re,De,ye);else if(_e=I(q),typeof _e=="function")for(q=_e.call(q),_e=0;!(fe=q.next()).done;)fe=fe.value,De=Et+Ee(fe,_e++),ze+=$(fe,ee,re,De,ye);else if(De==="object"){if(typeof q.then=="function")return $(be(q),ee,re,fe,ye);throw ee=String(q),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function le(q,ee,re){if(q==null)return q;var fe=[],ye=0;return $(q,fe,"","",function(De){return ee.call(re,De,ye++)}),fe}function he(q){if(q._status===-1){var ee=q._result;ee=ee(),ee.then(function(re){(q._status===0||q._status===-1)&&(q._status=1,q._result=re)},function(re){(q._status===0||q._status===-1)&&(q._status=2,q._result=re)}),q._status===-1&&(q._status=0,q._result=ee)}if(q._status===1)return q._result.default;throw q._result}var xe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Fe={map:le,forEach:function(q,ee,re){le(q,function(){ee.apply(this,arguments)},re)},count:function(q){var ee=0;return le(q,function(){ee++}),ee},toArray:function(q){return le(q,function(ee){return ee})||[]},only:function(q){if(!V(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Pe.Activity=E,Pe.Children=Fe,Pe.Component=H,Pe.Fragment=t,Pe.Profiler=r,Pe.PureComponent=B,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return P.H.useMemoCache(q)}},Pe.cache=function(q){return function(){return q.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(q,ee,re){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var fe=U({},q.props),ye=q.key;if(ee!=null)for(De in ee.key!==void 0&&(ye=""+ee.key),ee)!M.call(ee,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ee.ref===void 0||(fe[De]=ee[De]);var De=arguments.length-2;if(De===1)fe.children=re;else if(1<De){for(var ze=Array(De),Et=0;Et<De;Et++)ze[Et]=arguments[Et+2];fe.children=ze}return R(q.type,ye,fe)},Pe.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Pe.createElement=function(q,ee,re){var fe,ye={},De=null;if(ee!=null)for(fe in ee.key!==void 0&&(De=""+ee.key),ee)M.call(ee,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ye[fe]=ee[fe]);var ze=arguments.length-2;if(ze===1)ye.children=re;else if(1<ze){for(var Et=Array(ze),_e=0;_e<ze;_e++)Et[_e]=arguments[_e+2];ye.children=Et}if(q&&q.defaultProps)for(fe in ze=q.defaultProps,ze)ye[fe]===void 0&&(ye[fe]=ze[fe]);return R(q,De,ye)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(q){return{$$typeof:f,render:q}},Pe.isValidElement=V,Pe.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:he}},Pe.memo=function(q,ee){return{$$typeof:h,type:q,compare:ee===void 0?null:ee}},Pe.startTransition=function(q){var ee=P.T,re={};P.T=re;try{var fe=q(),ye=P.S;ye!==null&&ye(re,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ie,xe)}catch(De){xe(De)}finally{ee!==null&&re.types!==null&&(ee.types=re.types),P.T=ee}},Pe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Pe.use=function(q){return P.H.use(q)},Pe.useActionState=function(q,ee,re){return P.H.useActionState(q,ee,re)},Pe.useCallback=function(q,ee){return P.H.useCallback(q,ee)},Pe.useContext=function(q){return P.H.useContext(q)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(q,ee){return P.H.useDeferredValue(q,ee)},Pe.useEffect=function(q,ee){return P.H.useEffect(q,ee)},Pe.useEffectEvent=function(q){return P.H.useEffectEvent(q)},Pe.useId=function(){return P.H.useId()},Pe.useImperativeHandle=function(q,ee,re){return P.H.useImperativeHandle(q,ee,re)},Pe.useInsertionEffect=function(q,ee){return P.H.useInsertionEffect(q,ee)},Pe.useLayoutEffect=function(q,ee){return P.H.useLayoutEffect(q,ee)},Pe.useMemo=function(q,ee){return P.H.useMemo(q,ee)},Pe.useOptimistic=function(q,ee){return P.H.useOptimistic(q,ee)},Pe.useReducer=function(q,ee,re){return P.H.useReducer(q,ee,re)},Pe.useRef=function(q){return P.H.useRef(q)},Pe.useState=function(q){return P.H.useState(q)},Pe.useSyncExternalStore=function(q,ee,re){return P.H.useSyncExternalStore(q,ee,re)},Pe.useTransition=function(){return P.H.useTransition()},Pe.version="19.2.0",Pe}var zE;function Rd(){return zE||(zE=1,Zp.exports=DR()),Zp.exports}var G=Rd();const kR=xA(G);var em={exports:{}},eu={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function LR(){return GE||(GE=1,(function(n){function e($,le){var he=$.length;$.push(le);e:for(;0<he;){var xe=he-1>>>1,Fe=$[xe];if(0<r(Fe,le))$[xe]=le,$[he]=Fe,he=xe;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],he=$.pop();if(he!==le){$[0]=he;e:for(var xe=0,Fe=$.length,q=Fe>>>1;xe<q;){var ee=2*(xe+1)-1,re=$[ee],fe=ee+1,ye=$[fe];if(0>r(re,he))fe<Fe&&0>r(ye,re)?($[xe]=ye,$[fe]=he,xe=fe):($[xe]=re,$[ee]=he,xe=ee);else if(fe<Fe&&0>r(ye,he))$[xe]=ye,$[fe]=he,xe=fe;else break e}}return le}function r($,le){var he=$.sortIndex-le.sortIndex;return he!==0?he:$.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var d=[],h=[],y=1,E=null,T=3,I=!1,N=!1,U=!1,L=!1,H=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function te($){for(var le=t(h);le!==null;){if(le.callback===null)i(h);else if(le.startTime<=$)i(h),le.sortIndex=le.expirationTime,e(d,le);else break;le=t(h)}}function ue($){if(U=!1,te($),!N)if(t(d)!==null)N=!0,ie||(ie=!0,O());else{var le=t(h);le!==null&&be(ue,le.startTime-$)}}var ie=!1,P=-1,M=5,R=-1;function k(){return L?!0:!(n.unstable_now()-R<M)}function V(){if(L=!1,ie){var $=n.unstable_now();R=$;var le=!0;try{e:{N=!1,U&&(U=!1,J(P),P=-1),I=!0;var he=T;try{t:{for(te($),E=t(d);E!==null&&!(E.expirationTime>$&&k());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,T=E.priorityLevel;var Fe=xe(E.expirationTime<=$);if($=n.unstable_now(),typeof Fe=="function"){E.callback=Fe,te($),le=!0;break t}E===t(d)&&i(d),te($)}else i(d);E=t(d)}if(E!==null)le=!0;else{var q=t(h);q!==null&&be(ue,q.startTime-$),le=!1}}break e}finally{E=null,T=he,I=!1}le=void 0}}finally{le?O():ie=!1}}}var O;if(typeof B=="function")O=function(){B(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ee=D.port2;D.port1.onmessage=V,O=function(){Ee.postMessage(null)}}else O=function(){H(V,0)};function be($,le){P=H(function(){$(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function($){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var he=T;T=le;try{return $()}finally{T=he}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var he=T;T=$;try{return le()}finally{T=he}},n.unstable_scheduleCallback=function($,le,he){var xe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?xe+he:xe):he=xe,$){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=he+Fe,$={id:y++,callback:le,priorityLevel:$,startTime:he,expirationTime:Fe,sortIndex:-1},he>xe?($.sortIndex=he,e(h,$),t(d)===null&&$===t(h)&&(U?(J(P),P=-1):U=!0,be(ue,he-xe))):($.sortIndex=Fe,e(d,$),N||I||(N=!0,ie||(ie=!0,O()))),$},n.unstable_shouldYield=k,n.unstable_wrapCallback=function($){var le=T;return function(){var he=T;T=le;try{return $.apply(this,arguments)}finally{T=he}}}})(nm)),nm}var $E;function VR(){return $E||($E=1,tm.exports=LR()),tm.exports}var im={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function UR(){if(KE)return an;KE=1;var n=Rd();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:d,containerInfo:h,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,y)},an.flushSync=function(d){var h=u.T,y=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=h,i.p=y,i.d.f()}},an.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},an.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},an.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,E=f(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):y==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},an.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=f(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},an.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=f(y,h.crossOrigin);i.d.L(d,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},an.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=f(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},an.requestFormReset=function(d){i.d.r(d)},an.unstable_batchedUpdates=function(d,h){return d(h)},an.useFormState=function(d,h,y){return u.H.useFormState(d,h,y)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.0",an}var JE;function OR(){if(JE)return im.exports;JE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),im.exports=UR(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function FR(){if(YE)return eu;YE=1;var n=VR(),e=Rd(),t=OR();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,c=o;;){var _=l.return;if(_===null)break;var v=_.alternate;if(v===null){if(c=_.return,c!==null){l=c;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===l)return d(_),s;if(v===c)return d(_),o;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=_,c=v;else{for(var A=!1,x=_.child;x;){if(x===l){A=!0,l=_,c=v;break}if(x===c){A=!0,c=_,l=v;break}x=x.sibling}if(!A){for(x=v.child;x;){if(x===l){A=!0,l=v,c=_;break}if(x===c){A=!0,c=v,l=_;break}x=x.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function y(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=y(s),o!==null)return o;s=s.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),B=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case H:return"Profiler";case L:return"StrictMode";case ue:return"Suspense";case ie:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case B:return s.displayName||"Context";case J:return(s._context.displayName||"Context")+".Consumer";case te:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return o=s.displayName||null,o!==null?o:Ee(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Ee(s(o))}catch{}}return null}var be=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},xe=[],Fe=-1;function q(s){return{current:s}}function ee(s){0>Fe||(s.current=xe[Fe],xe[Fe]=null,Fe--)}function re(s,o){Fe++,xe[Fe]=s.current,s.current=o}var fe=q(null),ye=q(null),De=q(null),ze=q(null);function Et(s,o){switch(re(De,o),re(ye,s),re(fe,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?uE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=uE(o),s=cE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(fe),re(fe,s)}function _e(){ee(fe),ee(ye),ee(De)}function qe(s){s.memoizedState!==null&&re(ze,s);var o=fe.current,l=cE(o,s.type);o!==l&&(re(ye,s),re(fe,l))}function ke(s){ye.current===s&&(ee(fe),ee(ye)),ze.current===s&&(ee(ze),Ql._currentValue=he)}var Le,yn;function Gt(s){if(Le===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Le=o&&o[1]||"",yn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+s+yn}var In=!1;function Ft(s,o){if(!s||In)return"";In=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var j=Z}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(Z){j=Z}s.call(oe.prototype)}}else{try{throw Error()}catch(Z){j=Z}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&j&&typeof Z.stack=="string")return[Z.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],x=v[1];if(A&&x){var F=A.split(`
`),W=x.split(`
`);for(_=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;_<W.length&&!W[_].includes("DetermineComponentFrameRoot");)_++;if(c===F.length||_===W.length)for(c=F.length-1,_=W.length-1;1<=c&&0<=_&&F[c]!==W[_];)_--;for(;1<=c&&0<=_;c--,_--)if(F[c]!==W[_]){if(c!==1||_!==1)do if(c--,_--,0>_||F[c]!==W[_]){var ne=`
`+F[c].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=c&&0<=_);break}}}finally{In=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Gt(l):""}function ni(s,o){switch(s.tag){case 26:case 27:case 5:return Gt(s.type);case 16:return Gt("Lazy");case 13:return s.child!==o&&o!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return Ft(s.type,!1);case 11:return Ft(s.type.render,!1);case 1:return Ft(s.type,!0);case 31:return Gt("Activity");default:return""}}function ja(s){try{var o="",l=null;do o+=ni(s,l),l=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,Ds=n.unstable_cancelCallback,eh=n.unstable_shouldYield,ju=n.unstable_requestPaint,hn=n.unstable_now,Dr=n.unstable_getCurrentPriorityLevel,Xa=n.unstable_ImmediatePriority,Za=n.unstable_UserBlockingPriority,ks=n.unstable_NormalPriority,th=n.unstable_LowPriority,Xu=n.unstable_IdlePriority,Zu=n.log,ec=n.unstable_setDisableYieldValue,ii=null,jt=null;function On(s){if(typeof Zu=="function"&&ec(s),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(ii,s)}catch{}}var At=Math.clz32?Math.clz32:nc,tc=Math.log,xo=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(tc(s)/xo|0)|0}var Ei=256,kr=262144,Nt=4194304;function Ti(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Si(s,o,l){var c=s.pendingLanes;if(c===0)return 0;var _=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var x=c&134217727;return x!==0?(c=x&~v,c!==0?_=Ti(c):(A&=x,A!==0?_=Ti(A):l||(l=x&~s,l!==0&&(_=Ti(l))))):(x=c&~v,x!==0?_=Ti(x):A!==0?_=Ti(A):l||(l=c&~s,l!==0&&(_=Ti(l)))),_===0?0:o!==0&&o!==_&&(o&v)===0&&(v=_&-_,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:_}function si(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function nh(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(){var s=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),s}function Ai(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function Lr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ih(s,o,l,c,_,v){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var x=s.entanglements,F=s.expirationTimes,W=s.hiddenUpdates;for(l=A&~l;0<l;){var ne=31-At(l),oe=1<<ne;x[ne]=0,F[ne]=-1;var j=W[ne];if(j!==null)for(W[ne]=null,ne=0;ne<j.length;ne++){var Z=j[ne];Z!==null&&(Z.lane&=-536870913)}l&=~oe}c!==0&&Vr(s,c,0),v!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function Vr(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-At(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function el(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var c=31-At(l),_=1<<c;_&o|s[c]&o&&(s[c]|=o),l&=~_}}function tl(s,o){var l=o&-o;return l=(l&42)!==0?1:Ur(l),(l&(s.suspendedLanes|o))!==0?0:l}function Ur(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function sc(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:DE(s.type))}function ri(s,o){var l=le.p;try{return le.p=s,o()}finally{le.p=l}}var oi=Math.random().toString(36).slice(2),bt="__reactFiber$"+oi,$t="__reactProps$"+oi,Ci="__reactContainer$"+oi,Ro="__reactEvents$"+oi,sh="__reactListeners$"+oi,rc="__reactHandles$"+oi,oc="__reactResources$"+oi,wi="__reactMarker$"+oi;function No(s){delete s[bt],delete s[$t],delete s[Ro],delete s[sh],delete s[rc]}function Ii(s){var o=s[bt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Ci]||l[bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=yE(s);s!==null;){if(l=s[bt])return l;s=yE(s)}return o}s=l,l=s.parentNode}return null}function Fn(s){if(s=s[bt]||s[Ci]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function xn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function xi(s){var o=s[oc];return o||(o=s[oc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pt(s){s[wi]=!0}var nl=new Set,il={};function Ri(s,o){Ni(s,o),Ni(s+"Capture",o)}function Ni(s,o){for(il[s]=o,s=0;s<o.length;s++)nl.add(o[s])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ol={};function ac(s){return Rt.call(ol,s)?!0:Rt.call(rl,s)?!1:sl.test(s)?ol[s]=!0:(rl[s]=!0,!1)}function bo(s,o,l){if(ac(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Rn(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Mt(s,o,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+c)}}function Kt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ls(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function al(s,o,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return _.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function it(s){if(!s._valueTracker){var o=Ls(s)?"checked":"value";s._valueTracker=al(s,o,""+s[o])}}function Or(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return s&&(c=Ls(s)?s.checked?"true":"false":s.value),s=c,s!==l?(o.setValue(s),!0):!1}function bi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fr=/[\n"\\]/g;function _n(s){return s.replace(Fr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Po(s,o,l,c,_,v,A,x){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Kt(o)):s.value!==""+Kt(o)&&(s.value=""+Kt(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?ll(s,A,Kt(o)):l!=null?ll(s,A,Kt(l)):c!=null&&s.removeAttribute("value"),_==null&&v!=null&&(s.defaultChecked=!!v),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+Kt(x):s.removeAttribute("name")}function lc(s,o,l,c,_,v,A,x){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){it(s);return}l=l!=null?""+Kt(l):"",o=o!=null?""+Kt(o):l,x||o===s.value||(s.value=o),s.defaultValue=o}c=c??_,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=x?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),it(s)}function ll(s,o,l){o==="number"&&bi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vs(s,o,l,c){if(s=s.options,o){o={};for(var _=0;_<l.length;_++)o["$"+l[_]]=!0;for(l=0;l<s.length;l++)_=o.hasOwnProperty("$"+s[l].value),s[l].selected!==_&&(s[l].selected=_),_&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Kt(l),o=null,_=0;_<s.length;_++){if(s[_].value===l){s[_].selected=!0,c&&(s[_].defaultSelected=!0);return}o!==null||s[_].disabled||(o=s[_])}o!==null&&(o.selected=!0)}}function uc(s,o,l){if(o!=null&&(o=""+Kt(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+Kt(l):""}function Us(s,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(be(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Kt(o),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),it(s)}function vn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(s,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,l):typeof l!="number"||l===0||cc.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function cl(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var _ in o)c=o[_],o.hasOwnProperty(_)&&l[_]!==c&&ul(s,_,c)}else for(var v in o)o.hasOwnProperty(v)&&ul(s,v,o[v])}function Mo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(s){return Os.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ai(){}var fl=null;function qn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fs=null,Pi=null;function qr(s){var o=Fn(s);if(o&&(s=o.stateNode)){var l=s[$t]||null;e:switch(s=o.stateNode,o.type){case"input":if(Po(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==s&&c.form===s.form){var _=c[$t]||null;if(!_)throw Error(i(90));Po(c,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===s.form&&Or(c)}break e;case"textarea":uc(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Vs(s,!!l.multiple,o,!1)}}}var ko=!1;function qs(s,o,l){if(ko)return s(o,l);ko=!0;try{var c=s(o);return c}finally{if(ko=!1,(Fs!==null||Pi!==null)&&(rf(),Fs&&(o=Fs,s=Pi,Pi=Fs=null,qr(o),s)))for(o=0;o<s.length;o++)qr(s[o])}}function li(s,o){var l=s.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Bn)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){Br=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{Br=!1}var Mi=null,dl=null,Hr=null;function hl(){if(Hr)return Hr;var s,o=dl,l=o.length,c,_="value"in Mi?Mi.value:Mi.textContent,v=_.length;for(s=0;s<l&&o[s]===_[s];s++);var A=l-s;for(c=1;c<=A&&o[l-c]===_[v-c];c++);return Hr=_.slice(s,1<c?1-c:void 0)}function zr(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Zi(){return!0}function ui(){return!1}function Xt(s){function o(l,c,_,v,A){this._reactName=l,this._targetInst=_,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(l=s[x],this[x]=l?l(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zi:ui,this.isPropagationStopped=ui,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),o}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Xt(es),Bs=E({},es,{view:0,detail:0}),pl=Xt(Bs),Hs,Lo,ki,Vo=E({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Hs=s.screenX-ki.screenX,Lo=s.screenY-ki.screenY):Lo=Hs=0,ki=s),Hs)},movementY:function(s){return"movementY"in s?s.movementY:Lo}}),ml=Xt(Vo),Gr=E({},Vo,{dataTransfer:0}),dc=Xt(Gr),hc=E({},Bs,{relatedTarget:0}),$r=Xt(hc),gl=E({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),pc=Xt(gl),Uo=E({},es,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),mc=Xt(Uo),gc=E({},es,{data:0}),Li=Xt(gc),yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=vc[s])?!!o[s]:!1}function zs(){return Ec}var pn=E({},Bs,{key:function(s){if(s.key){var o=yc[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=zr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_c[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(s){return s.type==="keypress"?zr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?zr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Tc=Xt(pn),Sc=E({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ts=Xt(Sc),m=E({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),S=Xt(m),w=E({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Xt(w),Y=E({},Vo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Xt(Y),de=E({},es,{newState:0,oldState:0}),Ve=Xt(de),Ct=[9,13,27,32],et=Bn&&"CompositionEvent"in window,mt=null;Bn&&"documentMode"in document&&(mt=document.documentMode);var Hn=Bn&&"TextEvent"in window&&!mt,Vi=Bn&&(!et||mt&&8<mt&&11>=mt),ci=" ",fi=!1;function Kr(s,o){switch(s){case"keyup":return Ct.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fo=!1;function tx(s,o){switch(s){case"compositionend":return Oo(o);case"keypress":return o.which!==32?null:(fi=!0,ci);case"textInput":return s=o.data,s===ci&&fi?null:s;default:return null}}function nx(s,o){if(Fo)return s==="compositionend"||!et&&Kr(s,o)?(s=hl(),Hr=dl=Mi=null,Fo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vi&&o.locale!=="ko"?null:o.data;default:return null}}var ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ix[s.type]:o==="textarea"}function Ty(s,o,l,c){Fs?Pi?Pi.push(c):Pi=[c]:Fs=c,o=df(o,"onChange"),0<o.length&&(l=new Di("onChange","change",null,l,c),s.push({event:l,listeners:o}))}var yl=null,_l=null;function sx(s){iE(s,0)}function Ac(s){var o=xn(s);if(Or(o))return s}function Sy(s,o){if(s==="change")return o}var Ay=!1;if(Bn){var rh;if(Bn){var oh="oninput"in document;if(!oh){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),oh=typeof Cy.oninput=="function"}rh=oh}else rh=!1;Ay=rh&&(!document.documentMode||9<document.documentMode)}function wy(){yl&&(yl.detachEvent("onpropertychange",Iy),_l=yl=null)}function Iy(s){if(s.propertyName==="value"&&Ac(_l)){var o=[];Ty(o,_l,s,qn(s)),qs(sx,o)}}function rx(s,o,l){s==="focusin"?(wy(),yl=o,_l=l,yl.attachEvent("onpropertychange",Iy)):s==="focusout"&&wy()}function ox(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ac(_l)}function ax(s,o){if(s==="click")return Ac(o)}function lx(s,o){if(s==="input"||s==="change")return Ac(o)}function ux(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Nn=typeof Object.is=="function"?Object.is:ux;function vl(s,o){if(Nn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var _=l[c];if(!Rt.call(o,_)||!Nn(s[_],o[_]))return!1}return!0}function xy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ry(s,o){var l=xy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=o&&c>=o)return{node:l,offset:o-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xy(l)}}function Ny(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Ny(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function by(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=bi(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=bi(s.document)}return o}function ah(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var cx=Bn&&"documentMode"in document&&11>=document.documentMode,qo=null,lh=null,El=null,uh=!1;function Py(s,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;uh||qo==null||qo!==bi(c)||(c=qo,"selectionStart"in c&&ah(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),El&&vl(El,c)||(El=c,c=df(lh,"onSelect"),0<c.length&&(o=new Di("onSelect","select",null,o,l),s.push({event:o,listeners:c}),o.target=qo)))}function Jr(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Bo={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},ch={},My={};Bn&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Yr(s){if(ch[s])return ch[s];if(!Bo[s])return s;var o=Bo[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in My)return ch[s]=o[l];return s}var Dy=Yr("animationend"),ky=Yr("animationiteration"),Ly=Yr("animationstart"),fx=Yr("transitionrun"),dx=Yr("transitionstart"),hx=Yr("transitioncancel"),Vy=Yr("transitionend"),Uy=new Map,fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fh.push("scrollEnd");function di(s,o){Uy.set(s,o),Ri(o,[s])}var Cc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},zn=[],Ho=0,dh=0;function wc(){for(var s=Ho,o=dh=Ho=0;o<s;){var l=zn[o];zn[o++]=null;var c=zn[o];zn[o++]=null;var _=zn[o];zn[o++]=null;var v=zn[o];if(zn[o++]=null,c!==null&&_!==null){var A=c.pending;A===null?_.next=_:(_.next=A.next,A.next=_),c.pending=_}v!==0&&Oy(l,_,v)}}function Ic(s,o,l,c){zn[Ho++]=s,zn[Ho++]=o,zn[Ho++]=l,zn[Ho++]=c,dh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function hh(s,o,l,c){return Ic(s,o,l,c),xc(s)}function Qr(s,o){return Ic(s,null,null,o),xc(s)}function Oy(s,o,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var _=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(_=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,_&&o!==null&&(_=31-At(l),s=v.hiddenUpdates,c=s[_],c===null?s[_]=[o]:c.push(o),o.lane=l|536870912),v):null}function xc(s){if(50<Hl)throw Hl=0,Sp=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var zo={};function px(s,o,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(s,o,l,c){return new px(s,o,l,c)}function ph(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ns(s,o){var l=s.alternate;return l===null?(l=bn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Fy(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Rc(s,o,l,c,_,v){var A=0;if(c=s,typeof s=="function")ph(s)&&(A=1);else if(typeof s=="string")A=vR(s,l,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=bn(31,l,o,_),s.elementType=R,s.lanes=v,s;case U:return Wr(l.children,_,v,o);case L:A=8,_|=24;break;case H:return s=bn(12,l,o,_|2),s.elementType=H,s.lanes=v,s;case ue:return s=bn(13,l,o,_),s.elementType=ue,s.lanes=v,s;case ie:return s=bn(19,l,o,_),s.elementType=ie,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:A=10;break e;case J:A=9;break e;case te:A=11;break e;case P:A=14;break e;case M:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=bn(A,l,o,_),o.elementType=s,o.type=c,o.lanes=v,o}function Wr(s,o,l,c){return s=bn(7,s,c,o),s.lanes=l,s}function mh(s,o,l){return s=bn(6,s,null,o),s.lanes=l,s}function qy(s){var o=bn(18,null,null,0);return o.stateNode=s,o}function gh(s,o,l){return o=bn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var By=new WeakMap;function Gn(s,o){if(typeof s=="object"&&s!==null){var l=By.get(s);return l!==void 0?l:(o={value:s,source:o,stack:ja(o)},By.set(s,o),o)}return{value:s,source:o,stack:ja(o)}}var Go=[],$o=0,Nc=null,Tl=0,$n=[],Kn=0,Gs=null,Ui=1,Oi="";function is(s,o){Go[$o++]=Tl,Go[$o++]=Nc,Nc=s,Tl=o}function Hy(s,o,l){$n[Kn++]=Ui,$n[Kn++]=Oi,$n[Kn++]=Gs,Gs=s;var c=Ui;s=Oi;var _=32-At(c)-1;c&=~(1<<_),l+=1;var v=32-At(o)+_;if(30<v){var A=_-_%5;v=(c&(1<<A)-1).toString(32),c>>=A,_-=A,Ui=1<<32-At(o)+_|l<<_|c,Oi=v+s}else Ui=1<<v|l<<_|c,Oi=s}function yh(s){s.return!==null&&(is(s,1),Hy(s,1,0))}function _h(s){for(;s===Nc;)Nc=Go[--$o],Go[$o]=null,Tl=Go[--$o],Go[$o]=null;for(;s===Gs;)Gs=$n[--Kn],$n[Kn]=null,Oi=$n[--Kn],$n[Kn]=null,Ui=$n[--Kn],$n[Kn]=null}function zy(s,o){$n[Kn++]=Ui,$n[Kn++]=Oi,$n[Kn++]=Gs,Ui=o.id,Oi=o.overflow,Gs=s}var Zt=null,ft=null,Qe=!1,$s=null,Jn=!1,vh=Error(i(519));function Ks(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Gn(o,s)),vh}function Gy(s){var o=s.stateNode,l=s.type,c=s.memoizedProps;switch(o[bt]=s,o[$t]=c,l){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(l=0;l<Gl.length;l++)He(Gl[l],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),lc(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),Us(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||aE(o.textContent,l)?(c.popover!=null&&(He("beforetoggle",o),He("toggle",o)),c.onScroll!=null&&He("scroll",o),c.onScrollEnd!=null&&He("scrollend",o),c.onClick!=null&&(o.onclick=ai),o=!0):o=!1,o||Ks(s,!0)}function $y(s){for(Zt=s.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Zt=Zt.return}}function Ko(s){if(s!==Zt)return!1;if(!Qe)return $y(s),Qe=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Up(s.type,s.memoizedProps)),l=!l),l&&ft&&Ks(s),$y(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=gE(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=gE(s)}else o===27?(o=ft,or(s.type)?(s=Hp,Hp=null,ft=s):ft=o):ft=Zt?Qn(s.stateNode.nextSibling):null;return!0}function jr(){ft=Zt=null,Qe=!1}function Eh(){var s=$s;return s!==null&&(An===null?An=s:An.push.apply(An,s),$s=null),s}function Sl(s){$s===null?$s=[s]:$s.push(s)}var Th=q(null),Xr=null,ss=null;function Js(s,o,l){re(Th,o._currentValue),o._currentValue=l}function rs(s){s._currentValue=Th.current,ee(Th)}function Sh(s,o,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===l)break;s=s.return}}function Ah(s,o,l,c){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var v=_.dependencies;if(v!==null){var A=_.child;v=v.firstContext;e:for(;v!==null;){var x=v;v=_;for(var F=0;F<o.length;F++)if(x.context===o[F]){v.lanes|=l,x=v.alternate,x!==null&&(x.lanes|=l),Sh(v.return,l,s),c||(A=null);break e}v=x.next}}else if(_.tag===18){if(A=_.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),Sh(A,l,s),A=null}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===s){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}}function Jo(s,o,l,c){s=null;for(var _=o,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var A=_.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var x=_.type;Nn(_.pendingProps.value,A.value)||(s!==null?s.push(x):s=[x])}}else if(_===ze.current){if(A=_.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Ql):s=[Ql])}_=_.return}s!==null&&Ah(o,s,l,c),o.flags|=262144}function bc(s){for(s=s.firstContext;s!==null;){if(!Nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){Xr=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function en(s){return Ky(Xr,s)}function Pc(s,o){return Xr===null&&Zr(s),Ky(s,o)}function Ky(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},ss===null){if(s===null)throw Error(i(308));ss=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ss=ss.next=o;return l}var mx=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},gx=n.unstable_scheduleCallback,yx=n.unstable_NormalPriority,Dt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ch(){return{controller:new mx,data:new Map,refCount:0}}function Al(s){s.refCount--,s.refCount===0&&gx(yx,function(){s.controller.abort()})}var Cl=null,wh=0,Yo=0,Qo=null;function _x(s,o){if(Cl===null){var l=Cl=[];wh=0,Yo=Rp(),Qo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return wh++,o.then(Jy,Jy),o}function Jy(){if(--wh===0&&Cl!==null){Qo!==null&&(Qo.status="fulfilled");var s=Cl;Cl=null,Yo=0,Qo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function vx(s,o){var l=[],c={status:"pending",value:null,reason:null,then:function(_){l.push(_)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var _=0;_<l.length;_++)(0,l[_])(o)},function(_){for(c.status="rejected",c.reason=_,_=0;_<l.length;_++)(0,l[_])(void 0)}),c}var Yy=$.S;$.S=function(s,o){Pv=hn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&_x(s,o),Yy!==null&&Yy(s,o)};var eo=q(null);function Ih(){var s=eo.current;return s!==null?s:ct.pooledCache}function Mc(s,o){o===null?re(eo,eo.current):re(eo,o.pool)}function Qy(){var s=Ih();return s===null?null:{parent:Dt._currentValue,pool:s}}var Wo=Error(i(460)),xh=Error(i(474)),Dc=Error(i(542)),kc={then:function(){}};function Wy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function jy(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(ai,ai),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Zy(s),s;default:if(typeof o.status=="string")o.then(ai,ai);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var _=o;_.status="fulfilled",_.value=c}},function(c){if(o.status==="pending"){var _=o;_.status="rejected",_.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Zy(s),s}throw no=o,Wo}}function to(s){try{var o=s._init;return o(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(no=l,Wo):l}}var no=null;function Xy(){if(no===null)throw Error(i(459));var s=no;return no=null,s}function Zy(s){if(s===Wo||s===Dc)throw Error(i(483))}var jo=null,wl=0;function Lc(s){var o=wl;return wl+=1,jo===null&&(jo=[]),jy(jo,s,o)}function Il(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Vc(s,o){throw o.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function e_(s){function o(K,z){if(s){var Q=K.deletions;Q===null?(K.deletions=[z],K.flags|=16):Q.push(z)}}function l(K,z){if(!s)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function c(K){for(var z=new Map;K!==null;)K.key!==null?z.set(K.key,K):z.set(K.index,K),K=K.sibling;return z}function _(K,z){return K=ns(K,z),K.index=0,K.sibling=null,K}function v(K,z,Q){return K.index=Q,s?(Q=K.alternate,Q!==null?(Q=Q.index,Q<z?(K.flags|=67108866,z):Q):(K.flags|=67108866,z)):(K.flags|=1048576,z)}function A(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function x(K,z,Q,se){return z===null||z.tag!==6?(z=mh(Q,K.mode,se),z.return=K,z):(z=_(z,Q),z.return=K,z)}function F(K,z,Q,se){var Se=Q.type;return Se===U?ne(K,z,Q.props.children,se,Q.key):z!==null&&(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&to(Se)===z.type)?(z=_(z,Q.props),Il(z,Q),z.return=K,z):(z=Rc(Q.type,Q.key,Q.props,null,K.mode,se),Il(z,Q),z.return=K,z)}function W(K,z,Q,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=gh(Q,K.mode,se),z.return=K,z):(z=_(z,Q.children||[]),z.return=K,z)}function ne(K,z,Q,se,Se){return z===null||z.tag!==7?(z=Wr(Q,K.mode,se,Se),z.return=K,z):(z=_(z,Q),z.return=K,z)}function oe(K,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=mh(""+z,K.mode,Q),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return Q=Rc(z.type,z.key,z.props,null,K.mode,Q),Il(Q,z),Q.return=K,Q;case N:return z=gh(z,K.mode,Q),z.return=K,z;case M:return z=to(z),oe(K,z,Q)}if(be(z)||O(z))return z=Wr(z,K.mode,Q,null),z.return=K,z;if(typeof z.then=="function")return oe(K,Lc(z),Q);if(z.$$typeof===B)return oe(K,Pc(K,z),Q);Vc(K,z)}return null}function j(K,z,Q,se){var Se=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Se!==null?null:x(K,z,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case I:return Q.key===Se?F(K,z,Q,se):null;case N:return Q.key===Se?W(K,z,Q,se):null;case M:return Q=to(Q),j(K,z,Q,se)}if(be(Q)||O(Q))return Se!==null?null:ne(K,z,Q,se,null);if(typeof Q.then=="function")return j(K,z,Lc(Q),se);if(Q.$$typeof===B)return j(K,z,Pc(K,Q),se);Vc(K,Q)}return null}function Z(K,z,Q,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return K=K.get(Q)||null,x(z,K,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case I:return K=K.get(se.key===null?Q:se.key)||null,F(z,K,se,Se);case N:return K=K.get(se.key===null?Q:se.key)||null,W(z,K,se,Se);case M:return se=to(se),Z(K,z,Q,se,Se)}if(be(se)||O(se))return K=K.get(Q)||null,ne(z,K,se,Se,null);if(typeof se.then=="function")return Z(K,z,Q,Lc(se),Se);if(se.$$typeof===B)return Z(K,z,Q,Pc(z,se),Se);Vc(z,se)}return null}function ge(K,z,Q,se){for(var Se=null,je=null,ve=z,Oe=z=0,$e=null;ve!==null&&Oe<Q.length;Oe++){ve.index>Oe?($e=ve,ve=null):$e=ve.sibling;var Xe=j(K,ve,Q[Oe],se);if(Xe===null){ve===null&&(ve=$e);break}s&&ve&&Xe.alternate===null&&o(K,ve),z=v(Xe,z,Oe),je===null?Se=Xe:je.sibling=Xe,je=Xe,ve=$e}if(Oe===Q.length)return l(K,ve),Qe&&is(K,Oe),Se;if(ve===null){for(;Oe<Q.length;Oe++)ve=oe(K,Q[Oe],se),ve!==null&&(z=v(ve,z,Oe),je===null?Se=ve:je.sibling=ve,je=ve);return Qe&&is(K,Oe),Se}for(ve=c(ve);Oe<Q.length;Oe++)$e=Z(ve,K,Oe,Q[Oe],se),$e!==null&&(s&&$e.alternate!==null&&ve.delete($e.key===null?Oe:$e.key),z=v($e,z,Oe),je===null?Se=$e:je.sibling=$e,je=$e);return s&&ve.forEach(function(fr){return o(K,fr)}),Qe&&is(K,Oe),Se}function Ce(K,z,Q,se){if(Q==null)throw Error(i(151));for(var Se=null,je=null,ve=z,Oe=z=0,$e=null,Xe=Q.next();ve!==null&&!Xe.done;Oe++,Xe=Q.next()){ve.index>Oe?($e=ve,ve=null):$e=ve.sibling;var fr=j(K,ve,Xe.value,se);if(fr===null){ve===null&&(ve=$e);break}s&&ve&&fr.alternate===null&&o(K,ve),z=v(fr,z,Oe),je===null?Se=fr:je.sibling=fr,je=fr,ve=$e}if(Xe.done)return l(K,ve),Qe&&is(K,Oe),Se;if(ve===null){for(;!Xe.done;Oe++,Xe=Q.next())Xe=oe(K,Xe.value,se),Xe!==null&&(z=v(Xe,z,Oe),je===null?Se=Xe:je.sibling=Xe,je=Xe);return Qe&&is(K,Oe),Se}for(ve=c(ve);!Xe.done;Oe++,Xe=Q.next())Xe=Z(ve,K,Oe,Xe.value,se),Xe!==null&&(s&&Xe.alternate!==null&&ve.delete(Xe.key===null?Oe:Xe.key),z=v(Xe,z,Oe),je===null?Se=Xe:je.sibling=Xe,je=Xe);return s&&ve.forEach(function(bR){return o(K,bR)}),Qe&&is(K,Oe),Se}function ut(K,z,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===U&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case I:e:{for(var Se=Q.key;z!==null;){if(z.key===Se){if(Se=Q.type,Se===U){if(z.tag===7){l(K,z.sibling),se=_(z,Q.props.children),se.return=K,K=se;break e}}else if(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&to(Se)===z.type){l(K,z.sibling),se=_(z,Q.props),Il(se,Q),se.return=K,K=se;break e}l(K,z);break}else o(K,z);z=z.sibling}Q.type===U?(se=Wr(Q.props.children,K.mode,se,Q.key),se.return=K,K=se):(se=Rc(Q.type,Q.key,Q.props,null,K.mode,se),Il(se,Q),se.return=K,K=se)}return A(K);case N:e:{for(Se=Q.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){l(K,z.sibling),se=_(z,Q.children||[]),se.return=K,K=se;break e}else{l(K,z);break}else o(K,z);z=z.sibling}se=gh(Q,K.mode,se),se.return=K,K=se}return A(K);case M:return Q=to(Q),ut(K,z,Q,se)}if(be(Q))return ge(K,z,Q,se);if(O(Q)){if(Se=O(Q),typeof Se!="function")throw Error(i(150));return Q=Se.call(Q),Ce(K,z,Q,se)}if(typeof Q.then=="function")return ut(K,z,Lc(Q),se);if(Q.$$typeof===B)return ut(K,z,Pc(K,Q),se);Vc(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(l(K,z.sibling),se=_(z,Q),se.return=K,K=se):(l(K,z),se=mh(Q,K.mode,se),se.return=K,K=se),A(K)):l(K,z)}return function(K,z,Q,se){try{wl=0;var Se=ut(K,z,Q,se);return jo=null,Se}catch(ve){if(ve===Wo||ve===Dc)throw ve;var je=bn(29,ve,null,K.mode);return je.lanes=se,je.return=K,je}finally{}}}var io=e_(!0),t_=e_(!1),Ys=!1;function Rh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(s,o,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var _=c.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),c.pending=o,o=xc(s),Oy(s,null,l),o}return Ic(s,c,o,l),xc(s)}function xl(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,el(s,l)}}function bh(s,o){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var _=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?_=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?_=v=o:v=v.next=o}else _=v=o;l={baseState:c.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var Ph=!1;function Rl(){if(Ph){var s=Qo;if(s!==null)throw s}}function Nl(s,o,l,c){Ph=!1;var _=s.updateQueue;Ys=!1;var v=_.firstBaseUpdate,A=_.lastBaseUpdate,x=_.shared.pending;if(x!==null){_.shared.pending=null;var F=x,W=F.next;F.next=null,A===null?v=W:A.next=W,A=F;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,x=ne.lastBaseUpdate,x!==A&&(x===null?ne.firstBaseUpdate=W:x.next=W,ne.lastBaseUpdate=F))}if(v!==null){var oe=_.baseState;A=0,ne=W=F=null,x=v;do{var j=x.lane&-536870913,Z=j!==x.lane;if(Z?(Ge&j)===j:(c&j)===j){j!==0&&j===Yo&&(Ph=!0),ne!==null&&(ne=ne.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ge=s,Ce=x;j=o;var ut=l;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){oe=ge.call(ut,oe,j);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,j=typeof ge=="function"?ge.call(ut,oe,j):ge,j==null)break e;oe=E({},oe,j);break e;case 2:Ys=!0}}j=x.callback,j!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=_.callbacks,Z===null?_.callbacks=[j]:Z.push(j))}else Z={lane:j,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ne===null?(W=ne=Z,F=oe):ne=ne.next=Z,A|=j;if(x=x.next,x===null){if(x=_.shared.pending,x===null)break;Z=x,x=Z.next,Z.next=null,_.lastBaseUpdate=Z,_.shared.pending=null}}while(!0);ne===null&&(F=oe),_.baseState=F,_.firstBaseUpdate=W,_.lastBaseUpdate=ne,v===null&&(_.shared.lanes=0),tr|=A,s.lanes=A,s.memoizedState=oe}}function n_(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function i_(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)n_(l[s],o)}var Xo=q(null),Uc=q(0);function s_(s,o){s=ps,re(Uc,s),re(Xo,o),ps=s|o.baseLanes}function Mh(){re(Uc,ps),re(Xo,Xo.current)}function Dh(){ps=Uc.current,ee(Xo),ee(Uc)}var Pn=q(null),Yn=null;function js(s){var o=s.alternate;re(wt,wt.current&1),re(Pn,s),Yn===null&&(o===null||Xo.current!==null||o.memoizedState!==null)&&(Yn=s)}function kh(s){re(wt,wt.current),re(Pn,s),Yn===null&&(Yn=s)}function r_(s){s.tag===22?(re(wt,wt.current),re(Pn,s),Yn===null&&(Yn=s)):Xs()}function Xs(){re(wt,wt.current),re(Pn,Pn.current)}function Mn(s){ee(Pn),Yn===s&&(Yn=null),ee(wt)}var wt=q(0);function Oc(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||qp(l)||Bp(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var os=0,Ue=null,at=null,kt=null,Fc=!1,Zo=!1,so=!1,qc=0,bl=0,ea=null,Ex=0;function Tt(){throw Error(i(321))}function Lh(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!Nn(s[l],o[l]))return!1;return!0}function Vh(s,o,l,c,_,v){return os=v,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=s===null||s.memoizedState===null?H_:jh,so=!1,v=l(c,_),so=!1,Zo&&(v=a_(o,l,c,_)),o_(s),v}function o_(s){$.H=Dl;var o=at!==null&&at.next!==null;if(os=0,kt=at=Ue=null,Fc=!1,bl=0,ea=null,o)throw Error(i(300));s===null||Lt||(s=s.dependencies,s!==null&&bc(s)&&(Lt=!0))}function a_(s,o,l,c){Ue=s;var _=0;do{if(Zo&&(ea=null),bl=0,Zo=!1,25<=_)throw Error(i(301));if(_+=1,kt=at=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}$.H=z_,v=o(l,c)}while(Zo);return v}function Tx(){var s=$.H,o=s.useState()[0];return o=typeof o.then=="function"?Pl(o):o,s=s.useState()[0],(at!==null?at.memoizedState:null)!==s&&(Ue.flags|=1024),o}function Uh(){var s=qc!==0;return qc=0,s}function Oh(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function Fh(s){if(Fc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Fc=!1}os=0,kt=at=Ue=null,Zo=!1,bl=qc=0,ea=null}function mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ue.memoizedState=kt=s:kt=kt.next=s,kt}function It(){if(at===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=at.next;var o=kt===null?Ue.memoizedState:kt.next;if(o!==null)kt=o,at=s;else{if(s===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));at=s,s={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},kt===null?Ue.memoizedState=kt=s:kt=kt.next=s}return kt}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(s){var o=bl;return bl+=1,ea===null&&(ea=[]),s=jy(ea,s,o),o=Ue,(kt===null?o.memoizedState:kt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?H_:jh),s}function Hc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pl(s);if(s.$$typeof===B)return en(s)}throw Error(i(438,String(s)))}function qh(s){var o=null,l=Ue.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(_){return _.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Bc(),Ue.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),c=0;c<s;c++)l[c]=k;return o.index++,l}function as(s,o){return typeof o=="function"?o(s):o}function zc(s){var o=It();return Bh(o,at,s)}function Bh(s,o,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var _=s.baseQueue,v=c.pending;if(v!==null){if(_!==null){var A=_.next;_.next=v.next,v.next=A}o.baseQueue=_=v,c.pending=null}if(v=s.baseState,_===null)s.memoizedState=v;else{o=_.next;var x=A=null,F=null,W=o,ne=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Ge&oe)===oe:(os&oe)===oe){var j=W.revertLane;if(j===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===Yo&&(ne=!0);else if((os&j)===j){W=W.next,j===Yo&&(ne=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(x=F=oe,A=v):F=F.next=oe,Ue.lanes|=j,tr|=j;oe=W.action,so&&l(v,oe),v=W.hasEagerState?W.eagerState:l(v,oe)}else j={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(x=F=j,A=v):F=F.next=j,Ue.lanes|=oe,tr|=oe;W=W.next}while(W!==null&&W!==o);if(F===null?A=v:F.next=x,!Nn(v,s.memoizedState)&&(Lt=!0,ne&&(l=Qo,l!==null)))throw l;s.memoizedState=v,s.baseState=A,s.baseQueue=F,c.lastRenderedState=v}return _===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Hh(s){var o=It(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,_=l.pending,v=o.memoizedState;if(_!==null){l.pending=null;var A=_=_.next;do v=s(v,A.action),A=A.next;while(A!==_);Nn(v,o.memoizedState)||(Lt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,c]}function l_(s,o,l){var c=Ue,_=It(),v=Qe;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!Nn((at||_).memoizedState,l);if(A&&(_.memoizedState=l,Lt=!0),_=_.queue,$h(f_.bind(null,c,_,s),[s]),_.getSnapshot!==o||A||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,ta(9,{destroy:void 0},c_.bind(null,c,_,l,o),null),ct===null)throw Error(i(349));v||(os&127)!==0||u_(c,o,l)}return l}function u_(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Ue.updateQueue,o===null?(o=Bc(),Ue.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function c_(s,o,l,c){o.value=l,o.getSnapshot=c,d_(o)&&h_(s)}function f_(s,o,l){return l(function(){d_(o)&&h_(s)})}function d_(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!Nn(s,l)}catch{return!0}}function h_(s){var o=Qr(s,2);o!==null&&Cn(o,s,2)}function zh(s){var o=mn();if(typeof s=="function"){var l=s;if(s=l(),so){On(!0);try{l()}finally{On(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},o}function p_(s,o,l,c){return s.baseState=l,Bh(s,at,typeof c=="function"?c:as)}function Sx(s,o,l,c,_){if(Kc(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};$.T!==null?l(!0):v.isTransition=!1,c(v),l=o.pending,l===null?(v.next=o.pending=v,m_(o,v)):(v.next=l.next,o.pending=l.next=v)}}function m_(s,o){var l=o.action,c=o.payload,_=s.state;if(o.isTransition){var v=$.T,A={};$.T=A;try{var x=l(_,c),F=$.S;F!==null&&F(A,x),g_(s,o,x)}catch(W){Gh(s,o,W)}finally{v!==null&&A.types!==null&&(v.types=A.types),$.T=v}}else try{v=l(_,c),g_(s,o,v)}catch(W){Gh(s,o,W)}}function g_(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){y_(s,o,c)},function(c){return Gh(s,o,c)}):y_(s,o,l)}function y_(s,o,l){o.status="fulfilled",o.value=l,__(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,m_(s,l)))}function Gh(s,o,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,__(o),o=o.next;while(o!==c)}s.action=null}function __(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function v_(s,o){return o}function E_(s,o){if(Qe){var l=ct.formState;if(l!==null){e:{var c=Ue;if(Qe){if(ft){t:{for(var _=ft,v=Jn;_.nodeType!==8;){if(!v){_=null;break t}if(_=Qn(_.nextSibling),_===null){_=null;break t}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){ft=Qn(_.nextSibling),c=_.data==="F!";break e}}Ks(c)}c=!1}c&&(o=l[0])}}return l=mn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v_,lastRenderedState:o},l.queue=c,l=F_.bind(null,Ue,c),c.dispatch=l,c=zh(!1),v=Wh.bind(null,Ue,!1,c.queue),c=mn(),_={state:o,dispatch:null,action:s,pending:null},c.queue=_,l=Sx.bind(null,Ue,_,v,l),_.dispatch=l,c.memoizedState=s,[o,l,!1]}function T_(s){var o=It();return S_(o,at,s)}function S_(s,o,l){if(o=Bh(s,o,v_)[0],s=zc(as)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Pl(o)}catch(A){throw A===Wo?Dc:A}else c=o;o=It();var _=o.queue,v=_.dispatch;return l!==o.memoizedState&&(Ue.flags|=2048,ta(9,{destroy:void 0},Ax.bind(null,_,l),null)),[c,v,s]}function Ax(s,o){s.action=o}function A_(s){var o=It(),l=at;if(l!==null)return S_(o,l,s);It(),o=o.memoizedState,l=It();var c=l.queue.dispatch;return l.memoizedState=s,[o,c,!1]}function ta(s,o,l,c){return s={tag:s,create:l,deps:c,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=Bc(),Ue.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,o.lastEffect=s),s}function C_(){return It().memoizedState}function Gc(s,o,l,c){var _=mn();Ue.flags|=s,_.memoizedState=ta(1|o,{destroy:void 0},l,c===void 0?null:c)}function $c(s,o,l,c){var _=It();c=c===void 0?null:c;var v=_.memoizedState.inst;at!==null&&c!==null&&Lh(c,at.memoizedState.deps)?_.memoizedState=ta(o,v,l,c):(Ue.flags|=s,_.memoizedState=ta(1|o,v,l,c))}function w_(s,o){Gc(8390656,8,s,o)}function $h(s,o){$c(2048,8,s,o)}function Cx(s){Ue.flags|=4;var o=Ue.updateQueue;if(o===null)o=Bc(),Ue.updateQueue=o,o.events=[s];else{var l=o.events;l===null?o.events=[s]:l.push(s)}}function I_(s){var o=It().memoizedState;return Cx({ref:o,nextImpl:s}),function(){if((tt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function x_(s,o){return $c(4,2,s,o)}function R_(s,o){return $c(4,4,s,o)}function N_(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function b_(s,o,l){l=l!=null?l.concat([s]):null,$c(4,4,N_.bind(null,o,s),l)}function Kh(){}function P_(s,o){var l=It();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Lh(o,c[1])?c[0]:(l.memoizedState=[s,o],s)}function M_(s,o){var l=It();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Lh(o,c[1]))return c[0];if(c=s(),so){On(!0);try{s()}finally{On(!1)}}return l.memoizedState=[c,o],c}function Jh(s,o,l){return l===void 0||(os&1073741824)!==0&&(Ge&261930)===0?s.memoizedState=o:(s.memoizedState=l,s=Dv(),Ue.lanes|=s,tr|=s,l)}function D_(s,o,l,c){return Nn(l,o)?l:Xo.current!==null?(s=Jh(s,l,c),Nn(s,o)||(Lt=!0),s):(os&42)===0||(os&1073741824)!==0&&(Ge&261930)===0?(Lt=!0,s.memoizedState=l):(s=Dv(),Ue.lanes|=s,tr|=s,o)}function k_(s,o,l,c,_){var v=le.p;le.p=v!==0&&8>v?v:8;var A=$.T,x={};$.T=x,Wh(s,!1,o,l);try{var F=_(),W=$.S;if(W!==null&&W(x,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=vx(F,c);Ml(s,o,ne,Ln(s))}else Ml(s,o,c,Ln(s))}catch(oe){Ml(s,o,{then:function(){},status:"rejected",reason:oe},Ln())}finally{le.p=v,A!==null&&x.types!==null&&(A.types=x.types),$.T=A}}function wx(){}function Yh(s,o,l,c){if(s.tag!==5)throw Error(i(476));var _=L_(s).queue;k_(s,_,o,he,l===null?wx:function(){return V_(s),l(c)})}function L_(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:he},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function V_(s){var o=L_(s);o.next===null&&(o=s.alternate.memoizedState),Ml(s,o.next.queue,{},Ln())}function Qh(){return en(Ql)}function U_(){return It().memoizedState}function O_(){return It().memoizedState}function Ix(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Ln();s=Qs(l);var c=Ws(o,s,l);c!==null&&(Cn(c,o,l),xl(c,o,l)),o={cache:Ch()},s.payload=o;return}o=o.return}}function xx(s,o,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Kc(s)?q_(o,l):(l=hh(s,o,l,c),l!==null&&(Cn(l,s,c),B_(l,o,c)))}function F_(s,o,l){var c=Ln();Ml(s,o,l,c)}function Ml(s,o,l,c){var _={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kc(s))q_(o,_);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,x=v(A,l);if(_.hasEagerState=!0,_.eagerState=x,Nn(x,A))return Ic(s,o,_,0),ct===null&&wc(),!1}catch{}finally{}if(l=hh(s,o,_,c),l!==null)return Cn(l,s,c),B_(l,o,c),!0}return!1}function Wh(s,o,l,c){if(c={lane:2,revertLane:Rp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Kc(s)){if(o)throw Error(i(479))}else o=hh(s,l,c,2),o!==null&&Cn(o,s,2)}function Kc(s){var o=s.alternate;return s===Ue||o!==null&&o===Ue}function q_(s,o){Zo=Fc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function B_(s,o,l){if((l&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,el(s,l)}}var Dl={readContext:en,use:Hc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Dl.useEffectEvent=Tt;var H_={readContext:en,use:Hc,useCallback:function(s,o){return mn().memoizedState=[s,o===void 0?null:o],s},useContext:en,useEffect:w_,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,Gc(4194308,4,N_.bind(null,o,s),l)},useLayoutEffect:function(s,o){return Gc(4194308,4,s,o)},useInsertionEffect:function(s,o){Gc(4,2,s,o)},useMemo:function(s,o){var l=mn();o=o===void 0?null:o;var c=s();if(so){On(!0);try{s()}finally{On(!1)}}return l.memoizedState=[c,o],c},useReducer:function(s,o,l){var c=mn();if(l!==void 0){var _=l(o);if(so){On(!0);try{l(o)}finally{On(!1)}}}else _=o;return c.memoizedState=c.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},c.queue=s,s=s.dispatch=xx.bind(null,Ue,s),[c.memoizedState,s]},useRef:function(s){var o=mn();return s={current:s},o.memoizedState=s},useState:function(s){s=zh(s);var o=s.queue,l=F_.bind(null,Ue,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:Kh,useDeferredValue:function(s,o){var l=mn();return Jh(l,s,o)},useTransition:function(){var s=zh(!1);return s=k_.bind(null,Ue,s.queue,!0,!1),mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var c=Ue,_=mn();if(Qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),ct===null)throw Error(i(349));(Ge&127)!==0||u_(c,o,l)}_.memoizedState=l;var v={value:l,getSnapshot:o};return _.queue=v,w_(f_.bind(null,c,v,s),[s]),c.flags|=2048,ta(9,{destroy:void 0},c_.bind(null,c,v,l,o),null),l},useId:function(){var s=mn(),o=ct.identifierPrefix;if(Qe){var l=Oi,c=Ui;l=(c&~(1<<32-At(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=qc++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=Ex++,o="_"+o+"r_"+l.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Qh,useFormState:E_,useActionState:E_,useOptimistic:function(s){var o=mn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Wh.bind(null,Ue,!0,l),l.dispatch=o,[s,o]},useMemoCache:qh,useCacheRefresh:function(){return mn().memoizedState=Ix.bind(null,Ue)},useEffectEvent:function(s){var o=mn(),l={impl:s};return o.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},jh={readContext:en,use:Hc,useCallback:P_,useContext:en,useEffect:$h,useImperativeHandle:b_,useInsertionEffect:x_,useLayoutEffect:R_,useMemo:M_,useReducer:zc,useRef:C_,useState:function(){return zc(as)},useDebugValue:Kh,useDeferredValue:function(s,o){var l=It();return D_(l,at.memoizedState,s,o)},useTransition:function(){var s=zc(as)[0],o=It().memoizedState;return[typeof s=="boolean"?s:Pl(s),o]},useSyncExternalStore:l_,useId:U_,useHostTransitionStatus:Qh,useFormState:T_,useActionState:T_,useOptimistic:function(s,o){var l=It();return p_(l,at,s,o)},useMemoCache:qh,useCacheRefresh:O_};jh.useEffectEvent=I_;var z_={readContext:en,use:Hc,useCallback:P_,useContext:en,useEffect:$h,useImperativeHandle:b_,useInsertionEffect:x_,useLayoutEffect:R_,useMemo:M_,useReducer:Hh,useRef:C_,useState:function(){return Hh(as)},useDebugValue:Kh,useDeferredValue:function(s,o){var l=It();return at===null?Jh(l,s,o):D_(l,at.memoizedState,s,o)},useTransition:function(){var s=Hh(as)[0],o=It().memoizedState;return[typeof s=="boolean"?s:Pl(s),o]},useSyncExternalStore:l_,useId:U_,useHostTransitionStatus:Qh,useFormState:A_,useActionState:A_,useOptimistic:function(s,o){var l=It();return at!==null?p_(l,at,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:qh,useCacheRefresh:O_};z_.useEffectEvent=I_;function Xh(s,o,l,c){o=s.memoizedState,l=l(c,o),l=l==null?o:E({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Zh={enqueueSetState:function(s,o,l){s=s._reactInternals;var c=Ln(),_=Qs(c);_.payload=o,l!=null&&(_.callback=l),o=Ws(s,_,c),o!==null&&(Cn(o,s,c),xl(o,s,c))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var c=Ln(),_=Qs(c);_.tag=1,_.payload=o,l!=null&&(_.callback=l),o=Ws(s,_,c),o!==null&&(Cn(o,s,c),xl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Ln(),c=Qs(l);c.tag=2,o!=null&&(c.callback=o),o=Ws(s,c,l),o!==null&&(Cn(o,s,l),xl(o,s,l))}};function G_(s,o,l,c,_,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!vl(l,c)||!vl(_,v):!0}function $_(s,o,l,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==s&&Zh.enqueueReplaceState(o,o.state,null)}function ro(s,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(s=s.defaultProps){l===o&&(l=E({},l));for(var _ in s)l[_]===void 0&&(l[_]=s[_])}return l}function K_(s){Cc(s)}function J_(s){console.error(s)}function Y_(s){Cc(s)}function Jc(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function Q_(s,o,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function ep(s,o,l){return l=Qs(l),l.tag=3,l.payload={element:null},l.callback=function(){Jc(s,o)},l}function W_(s){return s=Qs(s),s.tag=3,s}function j_(s,o,l,c){var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var v=c.value;s.payload=function(){return _(v)},s.callback=function(){Q_(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Q_(o,l,c),typeof _!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Rx(s,o,l,c,_){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&Jo(o,l,_,!0),l=Pn.current,l!==null){switch(l.tag){case 31:case 13:return Yn===null?of():l.alternate===null&&St===0&&(St=3),l.flags&=-257,l.flags|=65536,l.lanes=_,c===kc?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),wp(s,c,_)),!1;case 22:return l.flags|=65536,c===kc?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),wp(s,c,_)),!1}throw Error(i(435,l.tag))}return wp(s,c,_),of(),!1}if(Qe)return o=Pn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=_,c!==vh&&(s=Error(i(422),{cause:c}),Sl(Gn(s,l)))):(c!==vh&&(o=Error(i(423),{cause:c}),Sl(Gn(o,l))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,c=Gn(c,l),_=ep(s.stateNode,c,_),bh(s,_),St!==4&&(St=2)),!1;var v=Error(i(520),{cause:c});if(v=Gn(v,l),Bl===null?Bl=[v]:Bl.push(v),St!==4&&(St=2),o===null)return!0;c=Gn(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=_&-_,l.lanes|=s,s=ep(l.stateNode,c,s),bh(l,s),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(nr===null||!nr.has(v))))return l.flags|=65536,_&=-_,l.lanes|=_,_=W_(_),j_(_,s,l,c),bh(l,_),!1}l=l.return}while(l!==null);return!1}var tp=Error(i(461)),Lt=!1;function tn(s,o,l,c){o.child=s===null?t_(o,null,l,c):io(o,s.child,l,c)}function X_(s,o,l,c,_){l=l.render;var v=o.ref;if("ref"in c){var A={};for(var x in c)x!=="ref"&&(A[x]=c[x])}else A=c;return Zr(o),c=Vh(s,o,l,A,v,_),x=Uh(),s!==null&&!Lt?(Oh(s,o,_),ls(s,o,_)):(Qe&&x&&yh(o),o.flags|=1,tn(s,o,c,_),o.child)}function Z_(s,o,l,c,_){if(s===null){var v=l.type;return typeof v=="function"&&!ph(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,ev(s,o,v,c,_)):(s=Rc(l.type,null,c,o,o.mode,_),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!up(s,_)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:vl,l(A,c)&&s.ref===o.ref)return ls(s,o,_)}return o.flags|=1,s=ns(v,c),s.ref=o.ref,s.return=o,o.child=s}function ev(s,o,l,c,_){if(s!==null){var v=s.memoizedProps;if(vl(v,c)&&s.ref===o.ref)if(Lt=!1,o.pendingProps=c=v,up(s,_))(s.flags&131072)!==0&&(Lt=!0);else return o.lanes=s.lanes,ls(s,o,_)}return np(s,o,l,c,_)}function tv(s,o,l,c){var _=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=o.child=s.child,_=0;c!==null;)_=_|c.lanes|c.childLanes,c=c.sibling;c=_&~v}else c=0,o.child=null;return nv(s,o,v,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mc(o,v!==null?v.cachePool:null),v!==null?s_(o,v):Mh(),r_(o);else return c=o.lanes=536870912,nv(s,o,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Mc(o,v.cachePool),s_(o,v),Xs(),o.memoizedState=null):(s!==null&&Mc(o,null),Mh(),Xs());return tn(s,o,_,l),o.child}function kl(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function nv(s,o,l,c,_){var v=Ih();return v=v===null?null:{parent:Dt._currentValue,pool:v},o.memoizedState={baseLanes:l,cachePool:v},s!==null&&Mc(o,null),Mh(),r_(o),s!==null&&Jo(s,o,c,!0),o.childLanes=_,null}function Yc(s,o){return o=Wc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function iv(s,o,l){return io(o,s.child,null,l),s=Yc(o,o.pendingProps),s.flags|=2,Mn(o),o.memoizedState=null,s}function Nx(s,o,l){var c=o.pendingProps,_=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Qe){if(c.mode==="hidden")return s=Yc(o,c),o.lanes=536870912,kl(null,s);if(kh(o),(s=ft)?(s=mE(s,Jn),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:Ui,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=qy(s),l.return=o,o.child=l,Zt=o,ft=null)):s=null,s===null)throw Ks(o);return o.lanes=536870912,null}return Yc(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(kh(o),_)if(o.flags&256)o.flags&=-257,o=iv(s,o,l);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Lt||Jo(s,o,l,!1),_=(l&s.childLanes)!==0,Lt||_){if(c=ct,c!==null&&(A=tl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,Qr(s,A),Cn(c,s,A),tp;of(),o=iv(s,o,l)}else s=v.treeContext,ft=Qn(A.nextSibling),Zt=o,Qe=!0,$s=null,Jn=!1,s!==null&&zy(o,s),o=Yc(o,c),o.flags|=4096;return o}return s=ns(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Qc(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function np(s,o,l,c,_){return Zr(o),l=Vh(s,o,l,c,void 0,_),c=Uh(),s!==null&&!Lt?(Oh(s,o,_),ls(s,o,_)):(Qe&&c&&yh(o),o.flags|=1,tn(s,o,l,_),o.child)}function sv(s,o,l,c,_,v){return Zr(o),o.updateQueue=null,l=a_(o,c,l,_),o_(s),c=Uh(),s!==null&&!Lt?(Oh(s,o,v),ls(s,o,v)):(Qe&&c&&yh(o),o.flags|=1,tn(s,o,l,v),o.child)}function rv(s,o,l,c,_){if(Zr(o),o.stateNode===null){var v=zo,A=l.contextType;typeof A=="object"&&A!==null&&(v=en(A)),v=new l(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Zh,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Rh(o),A=l.contextType,v.context=typeof A=="object"&&A!==null?en(A):zo,v.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Xh(o,l,A,c),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Zh.enqueueReplaceState(v,v.state,null),Nl(o,c,v,_),Rl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var x=o.memoizedProps,F=ro(l,x);v.props=F;var W=v.context,ne=l.contextType;A=zo,typeof ne=="object"&&ne!==null&&(A=en(ne));var oe=l.getDerivedStateFromProps;ne=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",x=o.pendingProps!==x,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x||W!==A)&&$_(o,v,c,A),Ys=!1;var j=o.memoizedState;v.state=j,Nl(o,c,v,_),Rl(),W=o.memoizedState,x||j!==W||Ys?(typeof oe=="function"&&(Xh(o,l,oe,c),W=o.memoizedState),(F=Ys||G_(o,l,F,c,j,W,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=W),v.props=c,v.state=W,v.context=A,c=F):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,Nh(s,o),A=o.memoizedProps,ne=ro(l,A),v.props=ne,oe=o.pendingProps,j=v.context,W=l.contextType,F=zo,typeof W=="object"&&W!==null&&(F=en(W)),x=l.getDerivedStateFromProps,(W=typeof x=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==oe||j!==F)&&$_(o,v,c,F),Ys=!1,j=o.memoizedState,v.state=j,Nl(o,c,v,_),Rl();var Z=o.memoizedState;A!==oe||j!==Z||Ys||s!==null&&s.dependencies!==null&&bc(s.dependencies)?(typeof x=="function"&&(Xh(o,l,x,c),Z=o.memoizedState),(ne=Ys||G_(o,l,ne,c,j,Z,F)||s!==null&&s.dependencies!==null&&bc(s.dependencies))?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,F)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Z),v.props=c,v.state=Z,v.context=F,c=ne):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,Qc(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=io(o,s.child,null,_),o.child=io(o,null,l,_)):tn(s,o,l,_),o.memoizedState=v.state,s=o.child):s=ls(s,o,_),s}function ov(s,o,l,c){return jr(),o.flags|=256,tn(s,o,l,c),o.child}var ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sp(s){return{baseLanes:s,cachePool:Qy()}}function rp(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=kn),s}function av(s,o,l){var c=o.pendingProps,_=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(wt.current&2)!==0),A&&(_=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(Qe){if(_?js(o):Xs(),(s=ft)?(s=mE(s,Jn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:Ui,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=qy(s),l.return=o,o.child=l,Zt=o,ft=null)):s=null,s===null)throw Ks(o);return Bp(s)?o.lanes=32:o.lanes=536870912,null}var x=c.children;return c=c.fallback,_?(Xs(),_=o.mode,x=Wc({mode:"hidden",children:x},_),c=Wr(c,_,l,null),x.return=o,c.return=o,x.sibling=c,o.child=x,c=o.child,c.memoizedState=sp(l),c.childLanes=rp(s,A,l),o.memoizedState=ip,kl(null,c)):(js(o),op(o,x))}var F=s.memoizedState;if(F!==null&&(x=F.dehydrated,x!==null)){if(v)o.flags&256?(js(o),o.flags&=-257,o=ap(s,o,l)):o.memoizedState!==null?(Xs(),o.child=s.child,o.flags|=128,o=null):(Xs(),x=c.fallback,_=o.mode,c=Wc({mode:"visible",children:c.children},_),x=Wr(x,_,l,null),x.flags|=2,c.return=o,x.return=o,c.sibling=x,o.child=c,io(o,s.child,null,l),c=o.child,c.memoizedState=sp(l),c.childLanes=rp(s,A,l),o.memoizedState=ip,o=kl(null,c));else if(js(o),Bp(x)){if(A=x.nextSibling&&x.nextSibling.dataset,A)var W=A.dgst;A=W,c=Error(i(419)),c.stack="",c.digest=A,Sl({value:c,source:null,stack:null}),o=ap(s,o,l)}else if(Lt||Jo(s,o,l,!1),A=(l&s.childLanes)!==0,Lt||A){if(A=ct,A!==null&&(c=tl(A,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,Qr(s,c),Cn(A,s,c),tp;qp(x)||of(),o=ap(s,o,l)}else qp(x)?(o.flags|=192,o.child=s.child,o=null):(s=F.treeContext,ft=Qn(x.nextSibling),Zt=o,Qe=!0,$s=null,Jn=!1,s!==null&&zy(o,s),o=op(o,c.children),o.flags|=4096);return o}return _?(Xs(),x=c.fallback,_=o.mode,F=s.child,W=F.sibling,c=ns(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,W!==null?x=ns(W,x):(x=Wr(x,_,l,null),x.flags|=2),x.return=o,c.return=o,c.sibling=x,o.child=c,kl(null,c),c=o.child,x=s.child.memoizedState,x===null?x=sp(l):(_=x.cachePool,_!==null?(F=Dt._currentValue,_=_.parent!==F?{parent:F,pool:F}:_):_=Qy(),x={baseLanes:x.baseLanes|l,cachePool:_}),c.memoizedState=x,c.childLanes=rp(s,A,l),o.memoizedState=ip,kl(s.child,c)):(js(o),l=s.child,s=l.sibling,l=ns(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=l,o.memoizedState=null,l)}function op(s,o){return o=Wc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Wc(s,o){return s=bn(22,s,null,o),s.lanes=0,s}function ap(s,o,l){return io(o,s.child,null,l),s=op(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function lv(s,o,l){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Sh(s.return,o,l)}function lp(s,o,l,c,_,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:_,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=_,A.treeForkCount=v)}function uv(s,o,l){var c=o.pendingProps,_=c.revealOrder,v=c.tail;c=c.children;var A=wt.current,x=(A&2)!==0;if(x?(A=A&1|2,o.flags|=128):A&=1,re(wt,A),tn(s,o,c,l),c=Qe?Tl:0,!x&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lv(s,l,o);else if(s.tag===19)lv(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(l=o.child,_=null;l!==null;)s=l.alternate,s!==null&&Oc(s)===null&&(_=l),l=l.sibling;l=_,l===null?(_=o.child,o.child=null):(_=l.sibling,l.sibling=null),lp(o,!1,_,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,_=o.child,o.child=null;_!==null;){if(s=_.alternate,s!==null&&Oc(s)===null){o.child=_;break}s=_.sibling,_.sibling=l,l=_,_=s}lp(o,!0,l,null,v,c);break;case"together":lp(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function ls(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),tr|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(Jo(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=ns(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=ns(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function up(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&bc(s)))}function bx(s,o,l){switch(o.tag){case 3:Et(o,o.stateNode.containerInfo),Js(o,Dt,s.memoizedState.cache),jr();break;case 27:case 5:qe(o);break;case 4:Et(o,o.stateNode.containerInfo);break;case 10:Js(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,kh(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(js(o),o.flags|=128,null):(l&o.child.childLanes)!==0?av(s,o,l):(js(o),s=ls(s,o,l),s!==null?s.sibling:null);js(o);break;case 19:var _=(s.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(Jo(s,o,l,!1),c=(l&o.childLanes)!==0),_){if(c)return uv(s,o,l);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),re(wt,wt.current),c)break;return null;case 22:return o.lanes=0,tv(s,o,l,o.pendingProps);case 24:Js(o,Dt,s.memoizedState.cache)}return ls(s,o,l)}function cv(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)Lt=!0;else{if(!up(s,l)&&(o.flags&128)===0)return Lt=!1,bx(s,o,l);Lt=(s.flags&131072)!==0}else Lt=!1,Qe&&(o.flags&1048576)!==0&&Hy(o,Tl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=to(o.elementType),o.type=s,typeof s=="function")ph(s)?(c=ro(s,c),o.tag=1,o=rv(null,o,s,c,l)):(o.tag=0,o=np(null,o,s,c,l));else{if(s!=null){var _=s.$$typeof;if(_===te){o.tag=11,o=X_(null,o,s,c,l);break e}else if(_===P){o.tag=14,o=Z_(null,o,s,c,l);break e}}throw o=Ee(s)||s,Error(i(306,o,""))}}return o;case 0:return np(s,o,o.type,o.pendingProps,l);case 1:return c=o.type,_=ro(c,o.pendingProps),rv(s,o,c,_,l);case 3:e:{if(Et(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;_=v.element,Nh(s,o),Nl(o,c,null,l);var A=o.memoizedState;if(c=A.cache,Js(o,Dt,c),c!==v.cache&&Ah(o,[Dt],l,!0),Rl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=ov(s,o,c,l);break e}else if(c!==_){_=Gn(Error(i(424)),o),Sl(_),o=ov(s,o,c,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ft=Qn(s.firstChild),Zt=o,Qe=!0,$s=null,Jn=!0,l=t_(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(jr(),c===_){o=ls(s,o,l);break e}tn(s,o,c,l)}o=o.child}return o;case 26:return Qc(s,o),s===null?(l=TE(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,s=o.pendingProps,c=hf(De.current).createElement(l),c[bt]=o,c[$t]=s,nn(c,l,s),Pt(c),o.stateNode=c):o.memoizedState=TE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return qe(o),s===null&&Qe&&(c=o.stateNode=_E(o.type,o.pendingProps,De.current),Zt=o,Jn=!0,_=ft,or(o.type)?(Hp=_,ft=Qn(c.firstChild)):ft=_),tn(s,o,o.pendingProps.children,l),Qc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Qe&&((_=c=ft)&&(c=oR(c,o.type,o.pendingProps,Jn),c!==null?(o.stateNode=c,Zt=o,ft=Qn(c.firstChild),Jn=!1,_=!0):_=!1),_||Ks(o)),qe(o),_=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,Up(_,v)?c=null:A!==null&&Up(_,A)&&(o.flags|=32),o.memoizedState!==null&&(_=Vh(s,o,Tx,null,null,l),Ql._currentValue=_),Qc(s,o),tn(s,o,c,l),o.child;case 6:return s===null&&Qe&&((s=l=ft)&&(l=aR(l,o.pendingProps,Jn),l!==null?(o.stateNode=l,Zt=o,ft=null,s=!0):s=!1),s||Ks(o)),null;case 13:return av(s,o,l);case 4:return Et(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=io(o,null,c,l):tn(s,o,c,l),o.child;case 11:return X_(s,o,o.type,o.pendingProps,l);case 7:return tn(s,o,o.pendingProps,l),o.child;case 8:return tn(s,o,o.pendingProps.children,l),o.child;case 12:return tn(s,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,Js(o,o.type,c.value),tn(s,o,c.children,l),o.child;case 9:return _=o.type._context,c=o.pendingProps.children,Zr(o),_=en(_),c=c(_),o.flags|=1,tn(s,o,c,l),o.child;case 14:return Z_(s,o,o.type,o.pendingProps,l);case 15:return ev(s,o,o.type,o.pendingProps,l);case 19:return uv(s,o,l);case 31:return Nx(s,o,l);case 22:return tv(s,o,l,o.pendingProps);case 24:return Zr(o),c=en(Dt),s===null?(_=Ih(),_===null&&(_=ct,v=Ch(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=l),_=v),o.memoizedState={parent:c,cache:_},Rh(o),Js(o,Dt,_)):((s.lanes&l)!==0&&(Nh(s,o),Nl(o,null,null,l),Rl()),_=s.memoizedState,v=o.memoizedState,_.parent!==c?(_={parent:c,cache:c},o.memoizedState=_,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=_),Js(o,Dt,c)):(c=v.cache,Js(o,Dt,c),c!==_.cache&&Ah(o,[Dt],l,!0))),tn(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function us(s){s.flags|=4}function cp(s,o,l,c,_){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Uv())s.flags|=8192;else throw no=kc,xh}else s.flags&=-16777217}function fv(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!IE(o))if(Uv())s.flags|=8192;else throw no=kc,xh}function jc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?ic():536870912,s.lanes|=o,ra|=o)}function Ll(s,o){if(!Qe)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function dt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(o)for(var _=s.child;_!==null;)l|=_.lanes|_.childLanes,c|=_.subtreeFlags&65011712,c|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)l|=_.lanes|_.childLanes,c|=_.subtreeFlags,c|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=c,s.childLanes=l,o}function Px(s,o,l){var c=o.pendingProps;switch(_h(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(o),null;case 1:return dt(o),null;case 3:return l=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),rs(Dt),_e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ko(o)?us(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Eh())),dt(o),null;case 26:var _=o.type,v=o.memoizedState;return s===null?(us(o),v!==null?(dt(o),fv(o,v)):(dt(o),cp(o,_,null,c,l))):v?v!==s.memoizedState?(us(o),dt(o),fv(o,v)):(dt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&us(o),dt(o),cp(o,_,s,c,l)),null;case 27:if(ke(o),l=De.current,_=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&us(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return dt(o),null}s=fe.current,Ko(o)?Gy(o):(s=_E(_,c,l),o.stateNode=s,us(o))}return dt(o),null;case 5:if(ke(o),_=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&us(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return dt(o),null}if(v=fe.current,Ko(o))Gy(o);else{var A=hf(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(_,{is:c.is}):A.createElement(_)}}v[bt]=o,v[$t]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(nn(v,_,c),_){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&us(o)}}return dt(o),cp(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,l),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&us(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=De.current,Ko(o)){if(s=o.stateNode,l=o.memoizedProps,c=null,_=Zt,_!==null)switch(_.tag){case 27:case 5:c=_.memoizedProps}s[bt]=o,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||aE(s.nodeValue,l)),s||Ks(o,!0)}else s=hf(s).createTextNode(c),s[bt]=o,o.stateNode=s}return dt(o),null;case 31:if(l=o.memoizedState,s===null||s.memoizedState!==null){if(c=Ko(o),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[bt]=o}else jr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;dt(o),s=!1}else l=Eh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return o.flags&256?(Mn(o),o):(Mn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return dt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Ko(o),c!==null&&c.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[bt]=o}else jr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;dt(o),_=!1}else _=Eh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return o.flags&256?(Mn(o),o):(Mn(o),null)}return Mn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=o.child,_=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(_=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==_&&(c.flags|=2048)),l!==s&&l&&(o.child.flags|=8192),jc(o,o.updateQueue),dt(o),null);case 4:return _e(),s===null&&Mp(o.stateNode.containerInfo),dt(o),null;case 10:return rs(o.type),dt(o),null;case 19:if(ee(wt),c=o.memoizedState,c===null)return dt(o),null;if(_=(o.flags&128)!==0,v=c.rendering,v===null)if(_)Ll(c,!1);else{if(St!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=Oc(s),v!==null){for(o.flags|=128,Ll(c,!1),s=v.updateQueue,o.updateQueue=s,jc(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)Fy(l,s),l=l.sibling;return re(wt,wt.current&1|2),Qe&&is(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&hn()>nf&&(o.flags|=128,_=!0,Ll(c,!1),o.lanes=4194304)}else{if(!_)if(s=Oc(v),s!==null){if(o.flags|=128,_=!0,s=s.updateQueue,o.updateQueue=s,jc(o,s),Ll(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Qe)return dt(o),null}else 2*hn()-c.renderingStartTime>nf&&l!==536870912&&(o.flags|=128,_=!0,Ll(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=hn(),s.sibling=null,l=wt.current,re(wt,_?l&1|2:l&1),Qe&&is(o,c.treeForkCount),s):(dt(o),null);case 22:case 23:return Mn(o),Dh(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(dt(o),o.subtreeFlags&6&&(o.flags|=8192)):dt(o),l=o.updateQueue,l!==null&&jc(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),s!==null&&ee(eo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),rs(Dt),dt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Mx(s,o){switch(_h(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return rs(Dt),_e(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ke(o),null;case 31:if(o.memoizedState!==null){if(Mn(o),o.alternate===null)throw Error(i(340));jr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Mn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));jr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ee(wt),null;case 4:return _e(),null;case 10:return rs(o.type),null;case 22:case 23:return Mn(o),Dh(),s!==null&&ee(eo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return rs(Dt),null;case 25:return null;default:return null}}function dv(s,o){switch(_h(o),o.tag){case 3:rs(Dt),_e();break;case 26:case 27:case 5:ke(o);break;case 4:_e();break;case 31:o.memoizedState!==null&&Mn(o);break;case 13:Mn(o);break;case 19:ee(wt);break;case 10:rs(o.type);break;case 22:case 23:Mn(o),Dh(),s!==null&&ee(eo);break;case 24:rs(Dt)}}function Vl(s,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var _=c.next;l=_;do{if((l.tag&s)===s){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==_)}}catch(x){rt(o,o.return,x)}}function Zs(s,o,l){try{var c=o.updateQueue,_=c!==null?c.lastEffect:null;if(_!==null){var v=_.next;c=v;do{if((c.tag&s)===s){var A=c.inst,x=A.destroy;if(x!==void 0){A.destroy=void 0,_=o;var F=l,W=x;try{W()}catch(ne){rt(_,F,ne)}}}c=c.next}while(c!==v)}}catch(ne){rt(o,o.return,ne)}}function hv(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{i_(o,l)}catch(c){rt(s,s.return,c)}}}function pv(s,o,l){l.props=ro(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){rt(s,o,c)}}function Ul(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(_){rt(s,o,_)}}function Fi(s,o){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(_){rt(s,o,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(_){rt(s,o,_)}else l.current=null}function mv(s){var o=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(_){rt(s,s.return,_)}}function fp(s,o,l){try{var c=s.stateNode;eR(c,s.type,l,o),c[$t]=o}catch(_){rt(s,s.return,_)}}function gv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&or(s.type)||s.tag===4}function dp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||gv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&or(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function hp(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=ai));else if(c!==4&&(c===27&&or(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(hp(s,o,l),s=s.sibling;s!==null;)hp(s,o,l),s=s.sibling}function Xc(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(c!==4&&(c===27&&or(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Xc(s,o,l),s=s.sibling;s!==null;)Xc(s,o,l),s=s.sibling}function yv(s){var o=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,_=o.attributes;_.length;)o.removeAttributeNode(_[0]);nn(o,c,l),o[bt]=s,o[$t]=l}catch(v){rt(s,s.return,v)}}var cs=!1,Vt=!1,pp=!1,_v=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function Dx(s,o){if(s=s.containerInfo,Lp=Ef,s=by(s),ah(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var _=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,x=-1,F=-1,W=0,ne=0,oe=s,j=null;t:for(;;){for(var Z;oe!==l||_!==0&&oe.nodeType!==3||(x=A+_),oe!==v||c!==0&&oe.nodeType!==3||(F=A+c),oe.nodeType===3&&(A+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)j=oe,oe=Z;for(;;){if(oe===s)break t;if(j===l&&++W===_&&(x=A),j===v&&++ne===c&&(F=A),(Z=oe.nextSibling)!==null)break;oe=j,j=oe.parentNode}oe=Z}l=x===-1||F===-1?null:{start:x,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Vp={focusedElem:s,selectionRange:l},Ef=!1,Jt=o;Jt!==null;)if(o=Jt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Jt=s;else for(;Jt!==null;){switch(o=Jt,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)_=s[l],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=o,_=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=ro(l.type,_);s=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){rt(l,l.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)Fp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Fp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Jt=s;break}Jt=o.return}}function vv(s,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ds(s,l),c&4&&Vl(5,l);break;case 1:if(ds(s,l),c&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(A){rt(l,l.return,A)}else{var _=ro(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(_,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){rt(l,l.return,A)}}c&64&&hv(l),c&512&&Ul(l,l.return);break;case 3:if(ds(s,l),c&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{i_(s,o)}catch(A){rt(l,l.return,A)}}break;case 27:o===null&&c&4&&yv(l);case 26:case 5:ds(s,l),o===null&&c&4&&mv(l),c&512&&Ul(l,l.return);break;case 12:ds(s,l);break;case 31:ds(s,l),c&4&&Sv(s,l);break;case 13:ds(s,l),c&4&&Av(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Hx.bind(null,l),lR(s,l))));break;case 22:if(c=l.memoizedState!==null||cs,!c){o=o!==null&&o.memoizedState!==null||Vt,_=cs;var v=Vt;cs=c,(Vt=o)&&!v?hs(s,l,(l.subtreeFlags&8772)!==0):ds(s,l),cs=_,Vt=v}break;case 30:break;default:ds(s,l)}}function Ev(s){var o=s.alternate;o!==null&&(s.alternate=null,Ev(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&No(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gt=null,En=!1;function fs(s,o,l){for(l=l.child;l!==null;)Tv(s,o,l),l=l.sibling}function Tv(s,o,l){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ii,l)}catch{}switch(l.tag){case 26:Vt||Fi(l,o),fs(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Vt||Fi(l,o);var c=gt,_=En;or(l.type)&&(gt=l.stateNode,En=!1),fs(s,o,l),Kl(l.stateNode),gt=c,En=_;break;case 5:Vt||Fi(l,o);case 6:if(c=gt,_=En,gt=null,fs(s,o,l),gt=c,En=_,gt!==null)if(En)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(l.stateNode)}catch(v){rt(l,o,v)}else try{gt.removeChild(l.stateNode)}catch(v){rt(l,o,v)}break;case 18:gt!==null&&(En?(s=gt,hE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ha(s)):hE(gt,l.stateNode));break;case 4:c=gt,_=En,gt=l.stateNode.containerInfo,En=!0,fs(s,o,l),gt=c,En=_;break;case 0:case 11:case 14:case 15:Zs(2,l,o),Vt||Zs(4,l,o),fs(s,o,l);break;case 1:Vt||(Fi(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&pv(l,o,c)),fs(s,o,l);break;case 21:fs(s,o,l);break;case 22:Vt=(c=Vt)||l.memoizedState!==null,fs(s,o,l),Vt=c;break;default:fs(s,o,l)}}function Sv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ha(s)}catch(l){rt(o,o.return,l)}}}function Av(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ha(s)}catch(l){rt(o,o.return,l)}}function kx(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new _v),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new _v),o;default:throw Error(i(435,s.tag))}}function Zc(s,o){var l=kx(s);o.forEach(function(c){if(!l.has(c)){l.add(c);var _=zx.bind(null,s,c);c.then(_,_)}})}function Tn(s,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var _=l[c],v=s,A=o,x=A;e:for(;x!==null;){switch(x.tag){case 27:if(or(x.type)){gt=x.stateNode,En=!1;break e}break;case 5:gt=x.stateNode,En=!1;break e;case 3:case 4:gt=x.stateNode.containerInfo,En=!0;break e}x=x.return}if(gt===null)throw Error(i(160));Tv(v,A,_),gt=null,En=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Cv(o,s),o=o.sibling}var hi=null;function Cv(s,o){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Tn(o,s),Sn(s),c&4&&(Zs(3,s,s.return),Vl(3,s),Zs(5,s,s.return));break;case 1:Tn(o,s),Sn(s),c&512&&(Vt||l===null||Fi(l,l.return)),c&64&&cs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var _=hi;if(Tn(o,s),Sn(s),c&512&&(Vt||l===null||Fi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,_=_.ownerDocument||_;t:switch(c){case"title":v=_.getElementsByTagName("title")[0],(!v||v[wi]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(c),_.head.insertBefore(v,_.querySelector("head > title"))),nn(v,c,l),v[bt]=s,Pt(v),c=v;break e;case"link":var A=CE("link","href",_).get(c+(l.href||""));if(A){for(var x=0;x<A.length;x++)if(v=A[x],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(x,1);break t}}v=_.createElement(c),nn(v,c,l),_.head.appendChild(v);break;case"meta":if(A=CE("meta","content",_).get(c+(l.content||""))){for(x=0;x<A.length;x++)if(v=A[x],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(x,1);break t}}v=_.createElement(c),nn(v,c,l),_.head.appendChild(v);break;default:throw Error(i(468,c))}v[bt]=s,Pt(v),c=v}s.stateNode=c}else wE(_,s.type,s.stateNode);else s.stateNode=AE(_,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?wE(_,s.type,s.stateNode):AE(_,c,s.memoizedProps)):c===null&&s.stateNode!==null&&fp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Tn(o,s),Sn(s),c&512&&(Vt||l===null||Fi(l,l.return)),l!==null&&c&4&&fp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Tn(o,s),Sn(s),c&512&&(Vt||l===null||Fi(l,l.return)),s.flags&32){_=s.stateNode;try{vn(_,"")}catch(ge){rt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(_=s.memoizedProps,fp(s,_,l!==null?l.memoizedProps:_)),c&1024&&(pp=!0);break;case 6:if(Tn(o,s),Sn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){rt(s,s.return,ge)}}break;case 3:if(gf=null,_=hi,hi=pf(o.containerInfo),Tn(o,s),hi=_,Sn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ha(o.containerInfo)}catch(ge){rt(s,s.return,ge)}pp&&(pp=!1,wv(s));break;case 4:c=hi,hi=pf(s.stateNode.containerInfo),Tn(o,s),Sn(s),hi=c;break;case 12:Tn(o,s),Sn(s);break;case 31:Tn(o,s),Sn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Zc(s,c)));break;case 13:Tn(o,s),Sn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(tf=hn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Zc(s,c)));break;case 22:_=s.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,W=cs,ne=Vt;if(cs=W||_,Vt=ne||F,Tn(o,s),Vt=ne,cs=W,Sn(s),c&8192)e:for(o=s.stateNode,o._visibility=_?o._visibility&-2:o._visibility|1,_&&(l===null||F||cs||Vt||oo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){F=l=o;try{if(v=F.stateNode,_)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{x=F.stateNode;var oe=F.memoizedProps.style,j=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;x.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ge){rt(F,F.return,ge)}}}else if(o.tag===6){if(l===null){F=o;try{F.stateNode.nodeValue=_?"":F.memoizedProps}catch(ge){rt(F,F.return,ge)}}}else if(o.tag===18){if(l===null){F=o;try{var Z=F.stateNode;_?pE(Z,!0):pE(F.stateNode,!1)}catch(ge){rt(F,F.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Zc(s,l))));break;case 19:Tn(o,s),Sn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Zc(s,c)));break;case 30:break;case 21:break;default:Tn(o,s),Sn(s)}}function Sn(s){var o=s.flags;if(o&2){try{for(var l,c=s.return;c!==null;){if(gv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var _=l.stateNode,v=dp(s);Xc(s,v,_);break;case 5:var A=l.stateNode;l.flags&32&&(vn(A,""),l.flags&=-33);var x=dp(s);Xc(s,x,A);break;case 3:case 4:var F=l.stateNode.containerInfo,W=dp(s);hp(s,W,F);break;default:throw Error(i(161))}}catch(ne){rt(s,s.return,ne)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function wv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;wv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ds(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)vv(s,o.alternate,o),o=o.sibling}function oo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Zs(4,o,o.return),oo(o);break;case 1:Fi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&pv(o,o.return,l),oo(o);break;case 27:Kl(o.stateNode);case 26:case 5:Fi(o,o.return),oo(o);break;case 22:o.memoizedState===null&&oo(o);break;case 30:oo(o);break;default:oo(o)}s=s.sibling}}function hs(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,_=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:hs(_,v,l),Vl(4,v);break;case 1:if(hs(_,v,l),c=v,_=c.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(W){rt(c,c.return,W)}if(c=v,_=c.updateQueue,_!==null){var x=c.stateNode;try{var F=_.shared.hiddenCallbacks;if(F!==null)for(_.shared.hiddenCallbacks=null,_=0;_<F.length;_++)n_(F[_],x)}catch(W){rt(c,c.return,W)}}l&&A&64&&hv(v),Ul(v,v.return);break;case 27:yv(v);case 26:case 5:hs(_,v,l),l&&c===null&&A&4&&mv(v),Ul(v,v.return);break;case 12:hs(_,v,l);break;case 31:hs(_,v,l),l&&A&4&&Sv(_,v);break;case 13:hs(_,v,l),l&&A&4&&Av(_,v);break;case 22:v.memoizedState===null&&hs(_,v,l),Ul(v,v.return);break;case 30:break;default:hs(_,v,l)}o=o.sibling}}function mp(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Al(l))}function gp(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Al(s))}function pi(s,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Iv(s,o,l,c),o=o.sibling}function Iv(s,o,l,c){var _=o.flags;switch(o.tag){case 0:case 11:case 15:pi(s,o,l,c),_&2048&&Vl(9,o);break;case 1:pi(s,o,l,c);break;case 3:pi(s,o,l,c),_&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Al(s)));break;case 12:if(_&2048){pi(s,o,l,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,x=v.onPostCommit;typeof x=="function"&&x(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){rt(o,o.return,F)}}else pi(s,o,l,c);break;case 31:pi(s,o,l,c);break;case 13:pi(s,o,l,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?pi(s,o,l,c):Ol(s,o):v._visibility&2?pi(s,o,l,c):(v._visibility|=2,na(s,o,l,c,(o.subtreeFlags&10256)!==0||!1)),_&2048&&mp(A,o);break;case 24:pi(s,o,l,c),_&2048&&gp(o.alternate,o);break;default:pi(s,o,l,c)}}function na(s,o,l,c,_){for(_=_&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,x=l,F=c,W=A.flags;switch(A.tag){case 0:case 11:case 15:na(v,A,x,F,_),Vl(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?na(v,A,x,F,_):Ol(v,A):(ne._visibility|=2,na(v,A,x,F,_)),_&&W&2048&&mp(A.alternate,A);break;case 24:na(v,A,x,F,_),_&&W&2048&&gp(A.alternate,A);break;default:na(v,A,x,F,_)}o=o.sibling}}function Ol(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,c=o,_=c.flags;switch(c.tag){case 22:Ol(l,c),_&2048&&mp(c.alternate,c);break;case 24:Ol(l,c),_&2048&&gp(c.alternate,c);break;default:Ol(l,c)}o=o.sibling}}var Fl=8192;function ia(s,o,l){if(s.subtreeFlags&Fl)for(s=s.child;s!==null;)xv(s,o,l),s=s.sibling}function xv(s,o,l){switch(s.tag){case 26:ia(s,o,l),s.flags&Fl&&s.memoizedState!==null&&ER(l,hi,s.memoizedState,s.memoizedProps);break;case 5:ia(s,o,l);break;case 3:case 4:var c=hi;hi=pf(s.stateNode.containerInfo),ia(s,o,l),hi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Fl,Fl=16777216,ia(s,o,l),Fl=c):ia(s,o,l));break;default:ia(s,o,l)}}function Rv(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function ql(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Jt=c,bv(c,s)}Rv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Nv(s),s=s.sibling}function Nv(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,ef(s)):ql(s);break;default:ql(s)}}function ef(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Jt=c,bv(c,s)}Rv(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Zs(8,o,o.return),ef(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,ef(o));break;default:ef(o)}s=s.sibling}}function bv(s,o){for(;Jt!==null;){var l=Jt;switch(l.tag){case 0:case 11:case 15:Zs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Al(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Jt=c;else e:for(l=s;Jt!==null;){c=Jt;var _=c.sibling,v=c.return;if(Ev(c),c===l){Jt=null;break e}if(_!==null){_.return=v,Jt=_;break e}Jt=v}}}var Lx={getCacheForType:function(s){var o=en(Dt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l},cacheSignal:function(){return en(Dt).controller.signal}},Vx=typeof WeakMap=="function"?WeakMap:Map,tt=0,ct=null,Be=null,Ge=0,st=0,Dn=null,er=!1,sa=!1,yp=!1,ps=0,St=0,tr=0,ao=0,_p=0,kn=0,ra=0,Bl=null,An=null,vp=!1,tf=0,Pv=0,nf=1/0,sf=null,nr=null,Bt=0,ir=null,oa=null,ms=0,Ep=0,Tp=null,Mv=null,Hl=0,Sp=null;function Ln(){return(tt&2)!==0&&Ge!==0?Ge&-Ge:$.T!==null?Rp():sc()}function Dv(){if(kn===0)if((Ge&536870912)===0||Qe){var s=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),kn=s}else kn=536870912;return s=Pn.current,s!==null&&(s.flags|=32),kn}function Cn(s,o,l){(s===ct&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(aa(s,0),sr(s,Ge,kn,!1)),Lr(s,l),((tt&2)===0||s!==ct)&&(s===ct&&((tt&2)===0&&(ao|=l),St===4&&sr(s,Ge,kn,!1)),qi(s))}function kv(s,o,l){if((tt&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&s.expiredLanes)===0||si(s,o),_=c?Fx(s,o):Cp(s,o,!0),v=c;do{if(_===0){sa&&!c&&sr(s,o,0,!1);break}else{if(l=s.current.alternate,v&&!Ux(l)){_=Cp(s,o,!1),v=!1;continue}if(_===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var x=s;_=Bl;var F=x.current.memoizedState.isDehydrated;if(F&&(aa(x,A).flags|=256),A=Cp(x,A,!1),A!==2){if(yp&&!F){x.errorRecoveryDisabledLanes|=v,ao|=v,_=4;break e}v=An,An=_,v!==null&&(An===null?An=v:An.push.apply(An,v))}_=A}if(v=!1,_!==2)continue}}if(_===1){aa(s,0),sr(s,o,0,!0);break}e:{switch(c=s,v=_,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:sr(c,o,kn,!er);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(_=tf+300-hn(),10<_)){if(sr(c,o,kn,!er),Si(c,0,!0)!==0)break e;ms=o,c.timeoutHandle=fE(Lv.bind(null,c,l,An,sf,vp,o,kn,ao,ra,er,v,"Throttled",-0,0),_);break e}Lv(c,l,An,sf,vp,o,kn,ao,ra,er,v,null,-0,0)}}break}while(!0);qi(s)}function Lv(s,o,l,c,_,v,A,x,F,W,ne,oe,j,Z){if(s.timeoutHandle=-1,oe=o.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},xv(o,v,oe);var ge=(v&62914560)===v?tf-hn():(v&4194048)===v?Pv-hn():0;if(ge=TR(oe,ge),ge!==null){ms=v,s.cancelPendingCommit=ge(zv.bind(null,s,o,v,l,c,_,A,x,F,ne,oe,null,j,Z)),sr(s,v,A,!W);return}}zv(s,o,v,l,c,_,A,x,F)}function Ux(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var _=l[c],v=_.getSnapshot;_=_.value;try{if(!Nn(v(),_))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function sr(s,o,l,c){o&=~_p,o&=~ao,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var _=o;0<_;){var v=31-At(_),A=1<<v;c[v]=-1,_&=~A}l!==0&&Vr(s,l,o)}function rf(){return(tt&6)===0?(zl(0),!1):!0}function Ap(){if(Be!==null){if(st===0)var s=Be.return;else s=Be,ss=Xr=null,Fh(s),jo=null,wl=0,s=Be;for(;s!==null;)dv(s.alternate,s),s=s.return;Be=null}}function aa(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,iR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ms=0,Ap(),ct=s,Be=l=ns(s.current,null),Ge=o,st=0,Dn=null,er=!1,sa=si(s,o),yp=!1,ra=kn=_p=ao=tr=St=0,An=Bl=null,vp=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var _=31-At(c),v=1<<_;o|=s[_],c&=~v}return ps=o,wc(),l}function Vv(s,o){Ue=null,$.H=Dl,o===Wo||o===Dc?(o=Xy(),st=3):o===xh?(o=Xy(),st=4):st=o===tp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Dn=o,Be===null&&(St=1,Jc(s,Gn(o,s.current)))}function Uv(){var s=Pn.current;return s===null?!0:(Ge&4194048)===Ge?Yn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?s===Yn:!1}function Ov(){var s=$.H;return $.H=Dl,s===null?Dl:s}function Fv(){var s=$.A;return $.A=Lx,s}function of(){St=4,er||(Ge&4194048)!==Ge&&Pn.current!==null||(sa=!0),(tr&134217727)===0&&(ao&134217727)===0||ct===null||sr(ct,Ge,kn,!1)}function Cp(s,o,l){var c=tt;tt|=2;var _=Ov(),v=Fv();(ct!==s||Ge!==o)&&(sf=null,aa(s,o)),o=!1;var A=St;e:do try{if(st!==0&&Be!==null){var x=Be,F=Dn;switch(st){case 8:Ap(),A=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(o=!0);var W=st;if(st=0,Dn=null,la(s,x,F,W),l&&sa){A=0;break e}break;default:W=st,st=0,Dn=null,la(s,x,F,W)}}Ox(),A=St;break}catch(ne){Vv(s,ne)}while(!0);return o&&s.shellSuspendCounter++,ss=Xr=null,tt=c,$.H=_,$.A=v,Be===null&&(ct=null,Ge=0,wc()),A}function Ox(){for(;Be!==null;)qv(Be)}function Fx(s,o){var l=tt;tt|=2;var c=Ov(),_=Fv();ct!==s||Ge!==o?(sf=null,nf=hn()+500,aa(s,o)):sa=si(s,o);e:do try{if(st!==0&&Be!==null){o=Be;var v=Dn;t:switch(st){case 1:st=0,Dn=null,la(s,o,v,1);break;case 2:case 9:if(Wy(v)){st=0,Dn=null,Bv(o);break}o=function(){st!==2&&st!==9||ct!==s||(st=7),qi(s)},v.then(o,o);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Wy(v)?(st=0,Dn=null,Bv(o)):(st=0,Dn=null,la(s,o,v,7));break;case 5:var A=null;switch(Be.tag){case 26:A=Be.memoizedState;case 5:case 27:var x=Be;if(A?IE(A):x.stateNode.complete){st=0,Dn=null;var F=x.sibling;if(F!==null)Be=F;else{var W=x.return;W!==null?(Be=W,af(W)):Be=null}break t}}st=0,Dn=null,la(s,o,v,5);break;case 6:st=0,Dn=null,la(s,o,v,6);break;case 8:Ap(),St=6;break e;default:throw Error(i(462))}}qx();break}catch(ne){Vv(s,ne)}while(!0);return ss=Xr=null,$.H=c,$.A=_,tt=l,Be!==null?0:(ct=null,Ge=0,wc(),St)}function qx(){for(;Be!==null&&!eh();)qv(Be)}function qv(s){var o=cv(s.alternate,s,ps);s.memoizedProps=s.pendingProps,o===null?af(s):Be=o}function Bv(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=sv(l,o,o.pendingProps,o.type,void 0,Ge);break;case 11:o=sv(l,o,o.pendingProps,o.type.render,o.ref,Ge);break;case 5:Fh(o);default:dv(l,o),o=Be=Fy(o,ps),o=cv(l,o,ps)}s.memoizedProps=s.pendingProps,o===null?af(s):Be=o}function la(s,o,l,c){ss=Xr=null,Fh(o),jo=null,wl=0;var _=o.return;try{if(Rx(s,_,o,l,Ge)){St=1,Jc(s,Gn(l,s.current)),Be=null;return}}catch(v){if(_!==null)throw Be=_,v;St=1,Jc(s,Gn(l,s.current)),Be=null;return}o.flags&32768?(Qe||c===1?s=!0:sa||(Ge&536870912)!==0?s=!1:(er=s=!0,(c===2||c===9||c===3||c===6)&&(c=Pn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Hv(o,s)):af(o)}function af(s){var o=s;do{if((o.flags&32768)!==0){Hv(o,er);return}s=o.return;var l=Px(o.alternate,o,ps);if(l!==null){Be=l;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=s}while(o!==null);St===0&&(St=5)}function Hv(s,o){do{var l=Mx(s.alternate,s);if(l!==null){l.flags&=32767,Be=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Be=s;return}Be=s=l}while(s!==null);St=6,Be=null}function zv(s,o,l,c,_,v,A,x,F){s.cancelPendingCommit=null;do lf();while(Bt!==0);if((tt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=dh,ih(s,l,v,A,x,F),s===ct&&(Be=ct=null,Ge=0),oa=o,ir=s,ms=l,Ep=v,Tp=_,Mv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Gx(ks,function(){return Yv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,_=le.p,le.p=2,A=tt,tt|=4;try{Dx(s,o,l)}finally{tt=A,le.p=_,$.T=c}}Bt=1,Gv(),$v(),Kv()}}function Gv(){if(Bt===1){Bt=0;var s=ir,o=oa,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=le.p;le.p=2;var _=tt;tt|=4;try{Cv(o,s);var v=Vp,A=by(s.containerInfo),x=v.focusedElem,F=v.selectionRange;if(A!==x&&x&&x.ownerDocument&&Ny(x.ownerDocument.documentElement,x)){if(F!==null&&ah(x)){var W=F.start,ne=F.end;if(ne===void 0&&(ne=W),"selectionStart"in x)x.selectionStart=W,x.selectionEnd=Math.min(ne,x.value.length);else{var oe=x.ownerDocument||document,j=oe&&oe.defaultView||window;if(j.getSelection){var Z=j.getSelection(),ge=x.textContent.length,Ce=Math.min(F.start,ge),ut=F.end===void 0?Ce:Math.min(F.end,ge);!Z.extend&&Ce>ut&&(A=ut,ut=Ce,Ce=A);var K=Ry(x,Ce),z=Ry(x,ut);if(K&&z&&(Z.rangeCount!==1||Z.anchorNode!==K.node||Z.anchorOffset!==K.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var Q=oe.createRange();Q.setStart(K.node,K.offset),Z.removeAllRanges(),Ce>ut?(Z.addRange(Q),Z.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),Z.addRange(Q))}}}}for(oe=[],Z=x;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<oe.length;x++){var se=oe[x];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ef=!!Lp,Vp=Lp=null}finally{tt=_,le.p=c,$.T=l}}s.current=o,Bt=2}}function $v(){if(Bt===2){Bt=0;var s=ir,o=oa,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=le.p;le.p=2;var _=tt;tt|=4;try{vv(s,o.alternate,o)}finally{tt=_,le.p=c,$.T=l}}Bt=3}}function Kv(){if(Bt===4||Bt===3){Bt=0,ju();var s=ir,o=oa,l=ms,c=Mv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Bt=5:(Bt=0,oa=ir=null,Jv(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(nr=null),Xi(l),o=o.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ii,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=$.T,_=le.p,le.p=2,$.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var x=c[A];v(x.value,{componentStack:x.stack})}}finally{$.T=o,le.p=_}}(ms&3)!==0&&lf(),qi(s),_=s.pendingLanes,(l&261930)!==0&&(_&42)!==0?s===Sp?Hl++:(Hl=0,Sp=s):Hl=0,zl(0)}}function Jv(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Al(o)))}function lf(){return Gv(),$v(),Kv(),Yv()}function Yv(){if(Bt!==5)return!1;var s=ir,o=Ep;Ep=0;var l=Xi(ms),c=$.T,_=le.p;try{le.p=32>l?32:l,$.T=null,l=Tp,Tp=null;var v=ir,A=ms;if(Bt=0,oa=ir=null,ms=0,(tt&6)!==0)throw Error(i(331));var x=tt;if(tt|=4,Nv(v.current),Iv(v,v.current,A,l),tt=x,zl(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ii,v)}catch{}return!0}finally{le.p=_,$.T=c,Jv(s,o)}}function Qv(s,o,l){o=Gn(l,o),o=ep(s.stateNode,o,2),s=Ws(s,o,2),s!==null&&(Lr(s,2),qi(s))}function rt(s,o,l){if(s.tag===3)Qv(s,s,l);else for(;o!==null;){if(o.tag===3){Qv(o,s,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(nr===null||!nr.has(c))){s=Gn(l,s),l=W_(2),c=Ws(o,l,2),c!==null&&(j_(l,c,o,s),Lr(c,2),qi(c));break}}o=o.return}}function wp(s,o,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Vx;var _=new Set;c.set(o,_)}else _=c.get(o),_===void 0&&(_=new Set,c.set(o,_));_.has(l)||(yp=!0,_.add(l),s=Bx.bind(null,s,o,l),o.then(s,s))}function Bx(s,o,l){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ct===s&&(Ge&l)===l&&(St===4||St===3&&(Ge&62914560)===Ge&&300>hn()-tf?(tt&2)===0&&aa(s,0):_p|=l,ra===Ge&&(ra=0)),qi(s)}function Wv(s,o){o===0&&(o=ic()),s=Qr(s,o),s!==null&&(Lr(s,o),qi(s))}function Hx(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),Wv(s,l)}function zx(s,o){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,_=s.memoizedState;_!==null&&(l=_.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),Wv(s,l)}function Gx(s,o){return qt(s,o)}var uf=null,ua=null,Ip=!1,cf=!1,xp=!1,rr=0;function qi(s){s!==ua&&s.next===null&&(ua===null?uf=ua=s:ua=ua.next=s),cf=!0,Ip||(Ip=!0,Kx())}function zl(s,o){if(!xp&&cf){xp=!0;do for(var l=!1,c=uf;c!==null;){if(s!==0){var _=c.pendingLanes;if(_===0)var v=0;else{var A=c.suspendedLanes,x=c.pingedLanes;v=(1<<31-At(42|s)+1)-1,v&=_&~(A&~x),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,eE(c,v))}else v=Ge,v=Si(c,c===ct?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||si(c,v)||(l=!0,eE(c,v));c=c.next}while(l);xp=!1}}function $x(){jv()}function jv(){cf=Ip=!1;var s=0;rr!==0&&nR()&&(s=rr);for(var o=hn(),l=null,c=uf;c!==null;){var _=c.next,v=Xv(c,o);v===0?(c.next=null,l===null?uf=_:l.next=_,_===null&&(ua=l)):(l=c,(s!==0||(v&3)!==0)&&(cf=!0)),c=_}Bt!==0&&Bt!==5||zl(s),rr!==0&&(rr=0)}function Xv(s,o){for(var l=s.suspendedLanes,c=s.pingedLanes,_=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-At(v),x=1<<A,F=_[A];F===-1?((x&l)===0||(x&c)!==0)&&(_[A]=nh(x,o)):F<=o&&(s.expiredLanes|=x),v&=~x}if(o=ct,l=Ge,l=Si(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===o&&(st===2||st===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ds(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||si(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(c!==null&&Ds(c),Xi(l)){case 2:case 8:l=Za;break;case 32:l=ks;break;case 268435456:l=Xu;break;default:l=ks}return c=Zv.bind(null,s),l=qt(l,c),s.callbackPriority=o,s.callbackNode=l,o}return c!==null&&c!==null&&Ds(c),s.callbackPriority=2,s.callbackNode=null,2}function Zv(s,o){if(Bt!==0&&Bt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(lf()&&s.callbackNode!==l)return null;var c=Ge;return c=Si(s,s===ct?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(kv(s,c,o),Xv(s,hn()),s.callbackNode!=null&&s.callbackNode===l?Zv.bind(null,s):null)}function eE(s,o){if(lf())return null;kv(s,o,!0)}function Kx(){sR(function(){(tt&6)!==0?qt(Xa,$x):jv()})}function Rp(){if(rr===0){var s=Yo;s===0&&(s=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),rr=s}return rr}function tE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Do(""+s)}function nE(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function Jx(s,o,l,c,_){if(o==="submit"&&l&&l.stateNode===_){var v=tE((_[$t]||null).action),A=c.submitter;A&&(o=(o=A[$t]||null)?tE(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var x=new Di("action","action",null,c,_);s.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(rr!==0){var F=A?nE(_,A):new FormData(_);Yh(l,{pending:!0,data:F,method:_.method,action:v},null,F)}}else typeof v=="function"&&(x.preventDefault(),F=A?nE(_,A):new FormData(_),Yh(l,{pending:!0,data:F,method:_.method,action:v},v,F))},currentTarget:_}]})}}for(var Np=0;Np<fh.length;Np++){var bp=fh[Np],Yx=bp.toLowerCase(),Qx=bp[0].toUpperCase()+bp.slice(1);di(Yx,"on"+Qx)}di(Dy,"onAnimationEnd"),di(ky,"onAnimationIteration"),di(Ly,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(fx,"onTransitionRun"),di(dx,"onTransitionStart"),di(hx,"onTransitionCancel"),di(Vy,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function iE(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],_=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var x=c[A],F=x.instance,W=x.currentTarget;if(x=x.listener,F!==v&&_.isPropagationStopped())break e;v=x,_.currentTarget=W;try{v(_)}catch(ne){Cc(ne)}_.currentTarget=null,v=F}else for(A=0;A<c.length;A++){if(x=c[A],F=x.instance,W=x.currentTarget,x=x.listener,F!==v&&_.isPropagationStopped())break e;v=x,_.currentTarget=W;try{v(_)}catch(ne){Cc(ne)}_.currentTarget=null,v=F}}}}function He(s,o){var l=o[Ro];l===void 0&&(l=o[Ro]=new Set);var c=s+"__bubble";l.has(c)||(sE(o,s,2,!1),l.add(c))}function Pp(s,o,l){var c=0;o&&(c|=4),sE(l,s,c,o)}var ff="_reactListening"+Math.random().toString(36).slice(2);function Mp(s){if(!s[ff]){s[ff]=!0,nl.forEach(function(l){l!=="selectionchange"&&(Wx.has(l)||Pp(l,!1,s),Pp(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[ff]||(o[ff]=!0,Pp("selectionchange",!1,o))}}function sE(s,o,l,c){switch(DE(o)){case 2:var _=CR;break;case 8:_=wR;break;default:_=Jp}l=_.bind(null,o,l,s),_=void 0,!Br||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),c?_!==void 0?s.addEventListener(o,l,{capture:!0,passive:_}):s.addEventListener(o,l,!0):_!==void 0?s.addEventListener(o,l,{passive:_}):s.addEventListener(o,l,!1)}function Dp(s,o,l,c,_){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var x=c.stateNode.containerInfo;if(x===_)break;if(A===4)for(A=c.return;A!==null;){var F=A.tag;if((F===3||F===4)&&A.stateNode.containerInfo===_)return;A=A.return}for(;x!==null;){if(A=Ii(x),A===null)return;if(F=A.tag,F===5||F===6||F===26||F===27){c=v=A;continue e}x=x.parentNode}}c=c.return}qs(function(){var W=v,ne=qn(l),oe=[];e:{var j=Uy.get(s);if(j!==void 0){var Z=Di,ge=s;switch(s){case"keypress":if(zr(l)===0)break e;case"keydown":case"keyup":Z=Tc;break;case"focusin":ge="focus",Z=$r;break;case"focusout":ge="blur",Z=$r;break;case"beforeblur":case"afterblur":Z=$r;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=S;break;case Dy:case ky:case Ly:Z=pc;break;case Vy:Z=b;break;case"scroll":case"scrollend":Z=pl;break;case"wheel":Z=X;break;case"copy":case"cut":case"paste":Z=mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ts;break;case"toggle":case"beforetoggle":Z=Ve}var Ce=(o&4)!==0,ut=!Ce&&(s==="scroll"||s==="scrollend"),K=Ce?j!==null?j+"Capture":null:j;Ce=[];for(var z=W,Q;z!==null;){var se=z;if(Q=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Q===null||K===null||(se=li(z,K),se!=null&&Ce.push($l(z,se,Q))),ut)break;z=z.return}0<Ce.length&&(j=new Z(j,ge,null,l,ne),oe.push({event:j,listeners:Ce}))}}if((o&7)===0){e:{if(j=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",j&&l!==fl&&(ge=l.relatedTarget||l.fromElement)&&(Ii(ge)||ge[Ci]))break e;if((Z||j)&&(j=ne.window===ne?ne:(j=ne.ownerDocument)?j.defaultView||j.parentWindow:window,Z?(ge=l.relatedTarget||l.toElement,Z=W,ge=ge?Ii(ge):null,ge!==null&&(ut=a(ge),Ce=ge.tag,ge!==ut||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(Z=null,ge=W),Z!==ge)){if(Ce=ml,se="onMouseLeave",K="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=ts,se="onPointerLeave",K="onPointerEnter",z="pointer"),ut=Z==null?j:xn(Z),Q=ge==null?j:xn(ge),j=new Ce(se,z+"leave",Z,l,ne),j.target=ut,j.relatedTarget=Q,se=null,Ii(ne)===W&&(Ce=new Ce(K,z+"enter",ge,l,ne),Ce.target=Q,Ce.relatedTarget=ut,se=Ce),ut=se,Z&&ge)t:{for(Ce=jx,K=Z,z=ge,Q=0,se=K;se;se=Ce(se))Q++;se=0;for(var Se=z;Se;Se=Ce(Se))se++;for(;0<Q-se;)K=Ce(K),Q--;for(;0<se-Q;)z=Ce(z),se--;for(;Q--;){if(K===z||z!==null&&K===z.alternate){Ce=K;break t}K=Ce(K),z=Ce(z)}Ce=null}else Ce=null;Z!==null&&rE(oe,j,Z,Ce,!1),ge!==null&&ut!==null&&rE(oe,ut,ge,Ce,!0)}}e:{if(j=W?xn(W):window,Z=j.nodeName&&j.nodeName.toLowerCase(),Z==="select"||Z==="input"&&j.type==="file")var je=Sy;else if(Ey(j))if(Ay)je=lx;else{je=ox;var ve=rx}else Z=j.nodeName,!Z||Z.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?W&&Mo(W.elementType)&&(je=Sy):je=ax;if(je&&(je=je(s,W))){Ty(oe,je,l,ne);break e}ve&&ve(s,j,W),s==="focusout"&&W&&j.type==="number"&&W.memoizedProps.value!=null&&ll(j,"number",j.value)}switch(ve=W?xn(W):window,s){case"focusin":(Ey(ve)||ve.contentEditable==="true")&&(qo=ve,lh=W,El=null);break;case"focusout":El=lh=qo=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,Py(oe,l,ne);break;case"selectionchange":if(cx)break;case"keydown":case"keyup":Py(oe,l,ne)}var Oe;if(et)e:{switch(s){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Fo?Kr(s,l)&&($e="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&($e="onCompositionStart");$e&&(Vi&&l.locale!=="ko"&&(Fo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Fo&&(Oe=hl()):(Mi=ne,dl="value"in Mi?Mi.value:Mi.textContent,Fo=!0)),ve=df(W,$e),0<ve.length&&($e=new Li($e,s,null,l,ne),oe.push({event:$e,listeners:ve}),Oe?$e.data=Oe:(Oe=Oo(l),Oe!==null&&($e.data=Oe)))),(Oe=Hn?tx(s,l):nx(s,l))&&($e=df(W,"onBeforeInput"),0<$e.length&&(ve=new Li("onBeforeInput","beforeinput",null,l,ne),oe.push({event:ve,listeners:$e}),ve.data=Oe)),Jx(oe,s,W,l,ne)}iE(oe,o)})}function $l(s,o,l){return{instance:s,listener:o,currentTarget:l}}function df(s,o){for(var l=o+"Capture",c=[];s!==null;){var _=s,v=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=li(s,l),_!=null&&c.unshift($l(s,_,v)),_=li(s,o),_!=null&&c.push($l(s,_,v))),s.tag===3)return c;s=s.return}return[]}function jx(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rE(s,o,l,c,_){for(var v=o._reactName,A=[];l!==null&&l!==c;){var x=l,F=x.alternate,W=x.stateNode;if(x=x.tag,F!==null&&F===c)break;x!==5&&x!==26&&x!==27||W===null||(F=W,_?(W=li(l,v),W!=null&&A.unshift($l(l,W,F))):_||(W=li(l,v),W!=null&&A.push($l(l,W,F)))),l=l.return}A.length!==0&&s.push({event:o,listeners:A})}var Xx=/\r\n?/g,Zx=/\u0000|\uFFFD/g;function oE(s){return(typeof s=="string"?s:""+s).replace(Xx,`
`).replace(Zx,"")}function aE(s,o){return o=oE(o),oE(s)===o}function lt(s,o,l,c,_,v){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||vn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&vn(s,""+c);break;case"className":Rn(s,"class",c);break;case"tabIndex":Rn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(s,l,c);break;case"style":cl(s,c,v);break;case"data":if(o!=="object"){Rn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Do(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&lt(s,o,"name",_.name,_,null),lt(s,o,"formEncType",_.formEncType,_,null),lt(s,o,"formMethod",_.formMethod,_,null),lt(s,o,"formTarget",_.formTarget,_,null)):(lt(s,o,"encType",_.encType,_,null),lt(s,o,"method",_.method,_,null),lt(s,o,"target",_.target,_,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Do(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ai);break;case"onScroll":c!=null&&He("scroll",s);break;case"onScrollEnd":c!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Do(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":He("beforetoggle",s),He("toggle",s),bo(s,"popover",c);break;case"xlinkActuate":Mt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Mt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Mt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Mt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Mt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Mt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Mt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":bo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fc.get(l)||l,bo(s,l,c))}}function kp(s,o,l,c,_,v){switch(l){case"style":cl(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?vn(s,c):(typeof c=="number"||typeof c=="bigint")&&vn(s,""+c);break;case"onScroll":c!=null&&He("scroll",s);break;case"onScrollEnd":c!=null&&He("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(_=l.endsWith("Capture"),o=l.slice(2,_?l.length-7:void 0),v=s[$t]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(o,v,_),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,c,_);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):bo(s,l,c)}}}function nn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var c=!1,_=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:lt(s,o,v,A,l,null)}}_&&lt(s,o,"srcSet",l.srcSet,l,null),c&&lt(s,o,"src",l.src,l,null);return;case"input":He("invalid",s);var x=v=A=_=null,F=null,W=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":_=ne;break;case"type":A=ne;break;case"checked":F=ne;break;case"defaultChecked":W=ne;break;case"value":v=ne;break;case"defaultValue":x=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:lt(s,o,c,ne,l,null)}}lc(s,v,x,F,W,A,_,!1);return;case"select":He("invalid",s),c=A=v=null;for(_ in l)if(l.hasOwnProperty(_)&&(x=l[_],x!=null))switch(_){case"value":v=x;break;case"defaultValue":A=x;break;case"multiple":c=x;default:lt(s,o,_,x,l,null)}o=v,l=A,s.multiple=!!c,o!=null?Vs(s,!!c,o,!1):l!=null&&Vs(s,!!c,l,!0);return;case"textarea":He("invalid",s),v=_=c=null;for(A in l)if(l.hasOwnProperty(A)&&(x=l[A],x!=null))switch(A){case"value":c=x;break;case"defaultValue":_=x;break;case"children":v=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:lt(s,o,A,x,l,null)}Us(s,c,_,v);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,o,F,c,l,null)}return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(c=0;c<Gl.length;c++)He(Gl[c],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(c=l[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:lt(s,o,W,c,l,null)}return;default:if(Mo(o)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&kp(s,o,ne,c,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(c=l[x],c!=null&&lt(s,o,x,c,l,null))}function eR(s,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,A=null,x=null,F=null,W=null,ne=null;for(Z in l){var oe=l[Z];if(l.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":F=oe;default:c.hasOwnProperty(Z)||lt(s,o,Z,null,c,oe)}}for(var j in c){var Z=c[j];if(oe=l[j],c.hasOwnProperty(j)&&(Z!=null||oe!=null))switch(j){case"type":v=Z;break;case"name":_=Z;break;case"checked":W=Z;break;case"defaultChecked":ne=Z;break;case"value":A=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==oe&&lt(s,o,j,Z,c,oe)}}Po(s,A,x,F,W,ne,v,_);return;case"select":Z=A=x=j=null;for(v in l)if(F=l[v],l.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":Z=F;default:c.hasOwnProperty(v)||lt(s,o,v,null,c,F)}for(_ in c)if(v=c[_],F=l[_],c.hasOwnProperty(_)&&(v!=null||F!=null))switch(_){case"value":j=v;break;case"defaultValue":x=v;break;case"multiple":A=v;default:v!==F&&lt(s,o,_,v,c,F)}o=x,l=A,c=Z,j!=null?Vs(s,!!l,j,!1):!!c!=!!l&&(o!=null?Vs(s,!!l,o,!0):Vs(s,!!l,l?[]:"",!1));return;case"textarea":Z=j=null;for(x in l)if(_=l[x],l.hasOwnProperty(x)&&_!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:lt(s,o,x,null,c,_)}for(A in c)if(_=c[A],v=l[A],c.hasOwnProperty(A)&&(_!=null||v!=null))switch(A){case"value":j=_;break;case"defaultValue":Z=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==v&&lt(s,o,A,_,c,v)}uc(s,j,Z);return;case"option":for(var ge in l)if(j=l[ge],l.hasOwnProperty(ge)&&j!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:lt(s,o,ge,null,c,j)}for(F in c)if(j=c[F],Z=l[F],c.hasOwnProperty(F)&&j!==Z&&(j!=null||Z!=null))switch(F){case"selected":s.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:lt(s,o,F,j,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)j=l[Ce],l.hasOwnProperty(Ce)&&j!=null&&!c.hasOwnProperty(Ce)&&lt(s,o,Ce,null,c,j);for(W in c)if(j=c[W],Z=l[W],c.hasOwnProperty(W)&&j!==Z&&(j!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,o));break;default:lt(s,o,W,j,c,Z)}return;default:if(Mo(o)){for(var ut in l)j=l[ut],l.hasOwnProperty(ut)&&j!==void 0&&!c.hasOwnProperty(ut)&&kp(s,o,ut,void 0,c,j);for(ne in c)j=c[ne],Z=l[ne],!c.hasOwnProperty(ne)||j===Z||j===void 0&&Z===void 0||kp(s,o,ne,j,c,Z);return}}for(var K in l)j=l[K],l.hasOwnProperty(K)&&j!=null&&!c.hasOwnProperty(K)&&lt(s,o,K,null,c,j);for(oe in c)j=c[oe],Z=l[oe],!c.hasOwnProperty(oe)||j===Z||j==null&&Z==null||lt(s,o,oe,j,c,Z)}function lE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var _=l[c],v=_.transferSize,A=_.initiatorType,x=_.duration;if(v&&x&&lE(A)){for(A=0,x=_.responseEnd,c+=1;c<l.length;c++){var F=l[c],W=F.startTime;if(W>x)break;var ne=F.transferSize,oe=F.initiatorType;ne&&lE(oe)&&(F=F.responseEnd,A+=ne*(F<x?1:(x-W)/(F-W)))}if(--c,o+=8*(v+A)/(_.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Lp=null,Vp=null;function hf(s){return s.nodeType===9?s:s.ownerDocument}function uE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Up(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Op=null;function nR(){var s=window.event;return s&&s.type==="popstate"?s===Op?!1:(Op=s,!0):(Op=null,!1)}var fE=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,dE=typeof Promise=="function"?Promise:void 0,sR=typeof queueMicrotask=="function"?queueMicrotask:typeof dE<"u"?function(s){return dE.resolve(null).then(s).catch(rR)}:fE;function rR(s){setTimeout(function(){throw s})}function or(s){return s==="head"}function hE(s,o){var l=o,c=0;do{var _=l.nextSibling;if(s.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(_),ha(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Kl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Kl(l);for(var v=l.firstChild;v;){var A=v.nextSibling,x=v.nodeName;v[wi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&Kl(s.ownerDocument.body);l=_}while(l);ha(o)}function pE(s,o){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Fp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Fp(l),No(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function oR(s,o,l,c){for(;s.nodeType===1;){var _=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[wi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Qn(s.nextSibling),s===null)break}return null}function aR(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Qn(s.nextSibling),s===null))return null;return s}function mE(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Qn(s.nextSibling),s===null))return null;return s}function qp(s){return s.data==="$?"||s.data==="$~"}function Bp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function lR(s,o){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Qn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Hp=null;function gE(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(o===0)return Qn(s.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}s=s.nextSibling}return null}function yE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return s;o--}else l!=="/$"&&l!=="/&"||o++}s=s.previousSibling}return null}function _E(s,o,l){switch(o=hf(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Kl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);No(s)}var Wn=new Map,vE=new Set;function pf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var gs=le.d;le.d={f:uR,r:cR,D:fR,C:dR,L:hR,m:pR,X:gR,S:mR,M:yR};function uR(){var s=gs.f(),o=rf();return s||o}function cR(s){var o=Fn(s);o!==null&&o.tag===5&&o.type==="form"?V_(o):gs.r(s)}var ca=typeof document>"u"?null:document;function EE(s,o,l){var c=ca;if(c&&typeof o=="string"&&o){var _=_n(o);_='link[rel="'+s+'"][href="'+_+'"]',typeof l=="string"&&(_+='[crossorigin="'+l+'"]'),vE.has(_)||(vE.add(_),s={rel:s,crossOrigin:l,href:o},c.querySelector(_)===null&&(o=c.createElement("link"),nn(o,"link",s),Pt(o),c.head.appendChild(o)))}}function fR(s){gs.D(s),EE("dns-prefetch",s,null)}function dR(s,o){gs.C(s,o),EE("preconnect",s,o)}function hR(s,o,l){gs.L(s,o,l);var c=ca;if(c&&s&&o){var _='link[rel="preload"][as="'+_n(o)+'"]';o==="image"&&l&&l.imageSrcSet?(_+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(_+='[imagesizes="'+_n(l.imageSizes)+'"]')):_+='[href="'+_n(s)+'"]';var v=_;switch(o){case"style":v=fa(s);break;case"script":v=da(s)}Wn.has(v)||(s=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Wn.set(v,s),c.querySelector(_)!==null||o==="style"&&c.querySelector(Jl(v))||o==="script"&&c.querySelector(Yl(v))||(o=c.createElement("link"),nn(o,"link",s),Pt(o),c.head.appendChild(o)))}}function pR(s,o){gs.m(s,o);var l=ca;if(l&&s){var c=o&&typeof o.as=="string"?o.as:"script",_='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(s)+'"]',v=_;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=da(s)}if(!Wn.has(v)&&(s=E({rel:"modulepreload",href:s},o),Wn.set(v,s),l.querySelector(_)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yl(v)))return}c=l.createElement("link"),nn(c,"link",s),Pt(c),l.head.appendChild(c)}}}function mR(s,o,l){gs.S(s,o,l);var c=ca;if(c&&s){var _=xi(c).hoistableStyles,v=fa(s);o=o||"default";var A=_.get(v);if(!A){var x={loading:0,preload:null};if(A=c.querySelector(Jl(v)))x.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Wn.get(v))&&zp(s,l);var F=A=c.createElement("link");Pt(F),nn(F,"link",s),F._p=new Promise(function(W,ne){F.onload=W,F.onerror=ne}),F.addEventListener("load",function(){x.loading|=1}),F.addEventListener("error",function(){x.loading|=2}),x.loading|=4,mf(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:x},_.set(v,A)}}}function gR(s,o){gs.X(s,o);var l=ca;if(l&&s){var c=xi(l).hoistableScripts,_=da(s),v=c.get(_);v||(v=l.querySelector(Yl(_)),v||(s=E({src:s,async:!0},o),(o=Wn.get(_))&&Gp(s,o),v=l.createElement("script"),Pt(v),nn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(_,v))}}function yR(s,o){gs.M(s,o);var l=ca;if(l&&s){var c=xi(l).hoistableScripts,_=da(s),v=c.get(_);v||(v=l.querySelector(Yl(_)),v||(s=E({src:s,async:!0,type:"module"},o),(o=Wn.get(_))&&Gp(s,o),v=l.createElement("script"),Pt(v),nn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(_,v))}}function TE(s,o,l,c){var _=(_=De.current)?pf(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=fa(l.href),l=xi(_).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=fa(l.href);var v=xi(_).hoistableStyles,A=v.get(s);if(A||(_=_.ownerDocument||_,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=_.querySelector(Jl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),Wn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Wn.set(s,l),v||_R(_,s,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=da(l),l=xi(_).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function fa(s){return'href="'+_n(s)+'"'}function Jl(s){return'link[rel="stylesheet"]['+s+"]"}function SE(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function _R(s,o,l,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),nn(o,"link",l),Pt(o),s.head.appendChild(o))}function da(s){return'[src="'+_n(s)+'"]'}function Yl(s){return"script[async]"+s}function AE(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return o.instance=c,Pt(c),c;var _=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Pt(c),nn(c,"style",_),mf(c,l.precedence,s),o.instance=c;case"stylesheet":_=fa(l.href);var v=s.querySelector(Jl(_));if(v)return o.state.loading|=4,o.instance=v,Pt(v),v;c=SE(l),(_=Wn.get(_))&&zp(c,_),v=(s.ownerDocument||s).createElement("link"),Pt(v);var A=v;return A._p=new Promise(function(x,F){A.onload=x,A.onerror=F}),nn(v,"link",c),o.state.loading|=4,mf(v,l.precedence,s),o.instance=v;case"script":return v=da(l.src),(_=s.querySelector(Yl(v)))?(o.instance=_,Pt(_),_):(c=l,(_=Wn.get(v))&&(c=E({},l),Gp(c,_)),s=s.ownerDocument||s,_=s.createElement("script"),Pt(_),nn(_,"link",c),s.head.appendChild(_),o.instance=_);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,mf(c,l.precedence,s));return o.instance}function mf(s,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=c.length?c[c.length-1]:null,v=_,A=0;A<c.length;A++){var x=c[A];if(x.dataset.precedence===o)v=x;else if(v!==_)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function zp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Gp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var gf=null;function CE(s,o,l){if(gf===null){var c=new Map,_=gf=new Map;_.set(l,c)}else _=gf,c=_.get(l),c||(c=new Map,_.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),_=0;_<l.length;_++){var v=l[_];if(!(v[wi]||v[bt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var x=c.get(A);x?x.push(v):c.set(A,[v])}}return c}function wE(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function vR(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function IE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ER(s,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var _=fa(c.href),v=o.querySelector(Jl(_));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=yf.bind(s),o.then(s,s)),l.state.loading|=4,l.instance=v,Pt(v);return}v=o.ownerDocument||o,c=SE(c),(_=Wn.get(_))&&zp(c,_),v=v.createElement("link"),Pt(v);var A=v;A._p=new Promise(function(x,F){A.onload=x,A.onerror=F}),nn(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=yf.bind(s),o.addEventListener("load",l),o.addEventListener("error",l))}}var $p=0;function TR(s,o){return s.stylesheets&&s.count===0&&vf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&vf(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&$p===0&&($p=62500*tR());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&vf(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>$p?50:800)+o);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(_)}}:null}function yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var _f=null;function vf(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,_f=new Map,o.forEach(SR,s),_f=null,yf.call(s))}function SR(s,o){if(!(o.state.loading&4)){var l=_f.get(s);if(l)var c=l.get(null);else{l=new Map,_f.set(s,l);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var A=_[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}_=o.instance,A=_.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,_),l.set(A,_),this.count++,c=yf.bind(this),_.addEventListener("load",c),_.addEventListener("error",c),v?v.parentNode.insertBefore(_,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),o.state.loading|=4}}var Ql={$$typeof:B,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function AR(s,o,l,c,_,v,A,x,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=c,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function xE(s,o,l,c,_,v,A,x,F,W,ne,oe){return s=new AR(s,o,l,A,F,W,ne,oe,x),o=1,v===!0&&(o|=24),v=bn(3,null,null,o),s.current=v,v.stateNode=s,o=Ch(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:o},Rh(v),s}function RE(s){return s?(s=zo,s):zo}function NE(s,o,l,c,_,v){_=RE(_),c.context===null?c.context=_:c.pendingContext=_,c=Qs(o),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Ws(s,c,o),l!==null&&(Cn(l,s,o),xl(l,s,o))}function bE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Kp(s,o){bE(s,o),(s=s.alternate)&&bE(s,o)}function PE(s){if(s.tag===13||s.tag===31){var o=Qr(s,67108864);o!==null&&Cn(o,s,67108864),Kp(s,67108864)}}function ME(s){if(s.tag===13||s.tag===31){var o=Ln();o=Ur(o);var l=Qr(s,o);l!==null&&Cn(l,s,o),Kp(s,o)}}var Ef=!0;function CR(s,o,l,c){var _=$.T;$.T=null;var v=le.p;try{le.p=2,Jp(s,o,l,c)}finally{le.p=v,$.T=_}}function wR(s,o,l,c){var _=$.T;$.T=null;var v=le.p;try{le.p=8,Jp(s,o,l,c)}finally{le.p=v,$.T=_}}function Jp(s,o,l,c){if(Ef){var _=Yp(c);if(_===null)Dp(s,o,c,Tf,l),kE(s,c);else if(xR(_,s,o,l,c))c.stopPropagation();else if(kE(s,c),o&4&&-1<IR.indexOf(s)){for(;_!==null;){var v=Fn(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ti(v.pendingLanes);if(A!==0){var x=v;for(x.pendingLanes|=2,x.entangledLanes|=2;A;){var F=1<<31-At(A);x.entanglements[1]|=F,A&=~F}qi(v),(tt&6)===0&&(nf=hn()+500,zl(0))}}break;case 31:case 13:x=Qr(v,2),x!==null&&Cn(x,v,2),rf(),Kp(v,2)}if(v=Yp(c),v===null&&Dp(s,o,c,Tf,l),v===_)break;_=v}_!==null&&c.stopPropagation()}else Dp(s,o,c,null,l)}}function Yp(s){return s=qn(s),Qp(s)}var Tf=null;function Qp(s){if(Tf=null,s=Ii(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=u(o),s!==null)return s;s=null}else if(l===31){if(s=f(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Tf=s,null}function DE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dr()){case Xa:return 2;case Za:return 8;case ks:case th:return 32;case Xu:return 268435456;default:return 32}default:return 32}}var Wp=!1,ar=null,lr=null,ur=null,Wl=new Map,jl=new Map,cr=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kE(s,o){switch(s){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Wl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(o.pointerId)}}function Xl(s,o,l,c,_,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[_]},o!==null&&(o=Fn(o),o!==null&&PE(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),s)}function xR(s,o,l,c,_){switch(o){case"focusin":return ar=Xl(ar,s,o,l,c,_),!0;case"dragenter":return lr=Xl(lr,s,o,l,c,_),!0;case"mouseover":return ur=Xl(ur,s,o,l,c,_),!0;case"pointerover":var v=_.pointerId;return Wl.set(v,Xl(Wl.get(v)||null,s,o,l,c,_)),!0;case"gotpointercapture":return v=_.pointerId,jl.set(v,Xl(jl.get(v)||null,s,o,l,c,_)),!0}return!1}function LE(s){var o=Ii(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){s.blockedOn=o,ri(s.priority,function(){ME(l)});return}}else if(o===31){if(o=f(l),o!==null){s.blockedOn=o,ri(s.priority,function(){ME(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Sf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Yp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);fl=c,l.target.dispatchEvent(c),fl=null}else return o=Fn(l),o!==null&&PE(o),s.blockedOn=l,!1;o.shift()}return!0}function VE(s,o,l){Sf(s)&&l.delete(o)}function RR(){Wp=!1,ar!==null&&Sf(ar)&&(ar=null),lr!==null&&Sf(lr)&&(lr=null),ur!==null&&Sf(ur)&&(ur=null),Wl.forEach(VE),jl.forEach(VE)}function Af(s,o){s.blockedOn===o&&(s.blockedOn=null,Wp||(Wp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,RR)))}var Cf=null;function UE(s){Cf!==s&&(Cf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cf===s&&(Cf=null);for(var o=0;o<s.length;o+=3){var l=s[o],c=s[o+1],_=s[o+2];if(typeof c!="function"){if(Qp(c||l)===null)continue;break}var v=Fn(l);v!==null&&(s.splice(o,3),o-=3,Yh(v,{pending:!0,data:_,method:l.method,action:c},c,_))}}))}function ha(s){function o(F){return Af(F,s)}ar!==null&&Af(ar,s),lr!==null&&Af(lr,s),ur!==null&&Af(ur,s),Wl.forEach(o),jl.forEach(o);for(var l=0;l<cr.length;l++){var c=cr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<cr.length&&(l=cr[0],l.blockedOn===null);)LE(l),l.blockedOn===null&&cr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var _=l[c],v=l[c+1],A=_[$t]||null;if(typeof v=="function")A||UE(l);else if(A){var x=null;if(v&&v.hasAttribute("formAction")){if(_=v,A=v[$t]||null)x=A.formAction;else if(Qp(_)!==null)continue}else x=A.action;typeof x=="function"?l[c+1]=x:(l.splice(c,3),c-=3),UE(l)}}}function OE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return _=A})},focusReset:"manual",scroll:"manual"})}function o(){_!==null&&(_(),_=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),_!==null&&(_(),_=null)}}}function jp(s){this._internalRoot=s}wf.prototype.render=jp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Ln();NE(l,c,s,o,null,null)},wf.prototype.unmount=jp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;NE(s.current,2,null,s,null,null),rf(),o[Ci]=null}};function wf(s){this._internalRoot=s}wf.prototype.unstable_scheduleHydration=function(s){if(s){var o=sc();s={blockedOn:null,target:s,priority:o};for(var l=0;l<cr.length&&o!==0&&o<cr[l].priority;l++);cr.splice(l,0,s),l===0&&LE(s)}};var FE=e.version;if(FE!=="19.2.0")throw Error(i(527,FE,"19.2.0"));le.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var NR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{ii=If.inject(NR),jt=If}catch{}}return eu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,c="",_=K_,v=J_,A=Y_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=xE(s,1,!1,null,null,l,c,null,_,v,A,OE),s[Ci]=o.current,Mp(s),new jp(o)},eu.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var c=!1,_="",v=K_,A=J_,x=Y_,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),o=xE(s,1,!0,o,l??null,c,_,F,v,A,x,OE),o.context=RE(null),l=o.current,c=Ln(),c=Ur(c),_=Qs(c),_.callback=null,Ws(l,_,c),l=c,o.current.lanes=l,Lr(o,l),qi(o),s[Ci]=o.current,Mp(s),new wf(o)},eu.version="19.2.0",eu}var QE;function qR(){if(QE)return em.exports;QE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),em.exports=FR(),em.exports}var BR=qR();const HR=xA(BR);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var WE="popstate";function zR(n={}){function e(i,r){let{pathname:a,search:u,hash:f}=i.location;return Cm("",{pathname:a,search:u,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Au(r)}return $R(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GR(){return Math.random().toString(36).substring(2,10)}function jE(n,e){return{usr:n.state,key:n.key,idx:e}}function Cm(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Oa(e):e,state:t,key:e&&e.key||i||GR()}}function Au({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Oa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function $R(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,u=r.history,f="POP",d=null,h=y();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function y(){return(u.state||{idx:null}).idx}function E(){f="POP";let L=y(),H=L==null?null:L-h;h=L,d&&d({action:f,location:U.location,delta:H})}function T(L,H){f="PUSH";let J=Cm(U.location,L,H);h=y()+1;let B=jE(J,h),te=U.createHref(J);try{u.pushState(B,"",te)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;r.location.assign(te)}a&&d&&d({action:f,location:U.location,delta:1})}function I(L,H){f="REPLACE";let J=Cm(U.location,L,H);h=y();let B=jE(J,h),te=U.createHref(J);u.replaceState(B,"",te),a&&d&&d({action:f,location:U.location,delta:0})}function N(L){return KR(L)}let U={get action(){return f},get location(){return n(r,u)},listen(L){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(WE,E),d=L,()=>{r.removeEventListener(WE,E),d=null}},createHref(L){return e(r,L)},createURL:N,encodeLocation(L){let H=N(L);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:I,go(L){return u.go(L)}};return U}function KR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Au(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function RA(n,e,t="/"){return JR(n,e,t,!1)}function JR(n,e,t,i){let r=typeof e=="string"?Oa(e):e,a=As(r.pathname||"/",t);if(a==null)return null;let u=NA(n);YR(u);let f=null;for(let d=0;f==null&&d<u.length;++d){let h=rN(a);f=iN(u[d],h,i)}return f}function NA(n,e=[],t=[],i="",r=!1){let a=(u,f,d=r,h)=>{let y={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&d)return;yt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let E=Es([i,y.relativePath]),T=t.concat(y);u.children&&u.children.length>0&&(yt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),NA(u.children,e,T,E,d)),!(u.path==null&&!u.index)&&e.push({path:E,score:tN(E,u.index),routesMeta:T})};return n.forEach((u,f)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,f);else for(let h of bA(u.path))a(u,f,!0,h)}),e}function bA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let u=bA(i.join("/")),f=[];return f.push(...u.map(d=>d===""?a:[a,d].join("/"))),r&&f.push(...u),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function YR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var QR=/^:[\w-]+$/,WR=3,jR=2,XR=1,ZR=10,eN=-2,XE=n=>n==="*";function tN(n,e){let t=n.split("/"),i=t.length;return t.some(XE)&&(i+=eN),e&&(i+=jR),t.filter(r=>!XE(r)).reduce((r,a)=>r+(QR.test(a)?WR:a===""?XR:ZR),i)}function nN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function iN(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",u=[];for(let f=0;f<i.length;++f){let d=i[f],h=f===i.length-1,y=a==="/"?e:e.slice(a.length)||"/",E=ed({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},y),T=d.route;if(!E&&h&&t&&!i[i.length-1].route.index&&(E=ed({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!E)return null;Object.assign(r,E.params),u.push({params:r,pathname:Es([a,E.pathname]),pathnameBase:cN(Es([a,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(a=Es([a,E.pathnameBase]))}return u}function ed(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=sN(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],u=a.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:i.reduce((h,{paramName:y,isOptional:E},T)=>{if(y==="*"){let N=f[T]||"";u=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const I=f[T];return E&&!I?h[y]=void 0:h[y]=(I||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:n}}function sN(n,e=!1,t=!0){ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,d)=>(i.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function rN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function As(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var oN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aN=n=>oN.test(n);function lN(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Oa(n):n,a;if(t)if(aN(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?a=ZE(t.substring(1),"/"):a=ZE(t,e)}else a=e;return{pathname:a,search:fN(i),hash:dN(r)}}function ZE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function sm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pg(n){let e=uN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function mg(n,e,t,i=!1){let r;typeof n=="string"?r=Oa(n):(r={...n},yt(!r.pathname||!r.pathname.includes("?"),sm("?","pathname","search",r)),yt(!r.pathname||!r.pathname.includes("#"),sm("#","pathname","hash",r)),yt(!r.search||!r.search.includes("#"),sm("#","search","hash",r)));let a=n===""||r.pathname==="",u=a?"/":r.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),E-=1;r.pathname=T.join("/")}f=E>=0?e[E]:"/"}let d=lN(r,f),h=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||y)&&(d.pathname+="/"),d}var Es=n=>n.join("/").replace(/\/\/+/g,"/"),cN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),fN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function hN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var PA=["POST","PUT","PATCH","DELETE"];new Set(PA);var pN=["GET",...PA];new Set(pN);var Fa=G.createContext(null);Fa.displayName="DataRouter";var Nd=G.createContext(null);Nd.displayName="DataRouterState";G.createContext(!1);var MA=G.createContext({isTransitioning:!1});MA.displayName="ViewTransition";var mN=G.createContext(new Map);mN.displayName="Fetchers";var gN=G.createContext(null);gN.displayName="Await";var _i=G.createContext(null);_i.displayName="Navigation";var Ou=G.createContext(null);Ou.displayName="Location";var ji=G.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var gg=G.createContext(null);gg.displayName="RouteError";function yN(n,{relative:e}={}){yt(qa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=G.useContext(_i),{hash:r,pathname:a,search:u}=Fu(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:Es([t,a])),i.createHref({pathname:f,search:u,hash:r})}function qa(){return G.useContext(Ou)!=null}function Ns(){return yt(qa(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Ou).location}var DA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kA(n){G.useContext(_i).static||G.useLayoutEffect(n)}function yg(){let{isDataRoute:n}=G.useContext(ji);return n?bN():_N()}function _N(){yt(qa(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(Fa),{basename:e,navigator:t}=G.useContext(_i),{matches:i}=G.useContext(ji),{pathname:r}=Ns(),a=JSON.stringify(pg(i)),u=G.useRef(!1);return kA(()=>{u.current=!0}),G.useCallback((d,h={})=>{if(ei(u.current,DA),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=mg(d,JSON.parse(a),r,h.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Es([e,y.pathname])),(h.replace?t.replace:t.push)(y,h.state,h)},[e,t,a,r,n])}G.createContext(null);function Fu(n,{relative:e}={}){let{matches:t}=G.useContext(ji),{pathname:i}=Ns(),r=JSON.stringify(pg(t));return G.useMemo(()=>mg(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function vN(n,e){return LA(n,e)}function LA(n,e,t,i,r){var J;yt(qa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(_i),{matches:u}=G.useContext(ji),f=u[u.length-1],d=f?f.params:{},h=f?f.pathname:"/",y=f?f.pathnameBase:"/",E=f&&f.route;{let B=E&&E.path||"";VA(h,!E||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=Ns(),I;if(e){let B=typeof e=="string"?Oa(e):e;yt(y==="/"||((J=B.pathname)==null?void 0:J.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),I=B}else I=T;let N=I.pathname||"/",U=N;if(y!=="/"){let B=y.replace(/^\//,"").split("/");U="/"+N.replace(/^\//,"").split("/").slice(B.length).join("/")}let L=RA(n,{pathname:U});ei(E||L!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),ei(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=CN(L&&L.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:Es([y,a.encodeLocation?a.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Es([y,a.encodeLocation?a.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),u,t,i,r);return e&&H?G.createElement(Ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},H):H}function EN(){let n=NN(),e=hN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:r},t):null,u)}var TN=G.createElement(EN,null),SN=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?G.createElement(ji.Provider,{value:this.props.routeContext},G.createElement(gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AN({routeContext:n,match:e,children:t}){let i=G.useContext(Fa);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(ji.Provider,{value:n},t)}function CN(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=t==null?void 0:t.errors;if(u!=null){let y=a.findIndex(E=>E.route.id&&(u==null?void 0:u[E.route.id])!==void 0);yt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let f=!1,d=-1;if(t)for(let y=0;y<a.length;y++){let E=a[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(d=y),E.route.id){let{loaderData:T,errors:I}=t,N=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||N){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let h=t&&i?(y,E)=>{var T,I;i(y,{location:t.location,params:((I=(T=t.matches)==null?void 0:T[0])==null?void 0:I.params)??{},errorInfo:E})}:void 0;return a.reduceRight((y,E,T)=>{let I,N=!1,U=null,L=null;t&&(I=u&&E.route.id?u[E.route.id]:void 0,U=E.route.errorElement||TN,f&&(d<0&&T===0?(VA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,L=null):d===T&&(N=!0,L=E.route.hydrateFallbackElement||null)));let H=e.concat(a.slice(0,T+1)),J=()=>{let B;return I?B=U:N?B=L:E.route.Component?B=G.createElement(E.route.Component,null):E.route.element?B=E.route.element:B=y,G.createElement(AN,{match:E,routeContext:{outlet:y,matches:H,isDataRoute:t!=null},children:B})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?G.createElement(SN,{location:t.location,revalidation:t.revalidation,component:U,error:I,children:J(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:h}):J()},null)}function _g(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(n){let e=G.useContext(Fa);return yt(e,_g(n)),e}function IN(n){let e=G.useContext(Nd);return yt(e,_g(n)),e}function xN(n){let e=G.useContext(ji);return yt(e,_g(n)),e}function vg(n){let e=xN(n),t=e.matches[e.matches.length-1];return yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function RN(){return vg("useRouteId")}function NN(){var i;let n=G.useContext(gg),e=IN("useRouteError"),t=vg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function bN(){let{router:n}=wN("useNavigate"),e=vg("useNavigate"),t=G.useRef(!1);return kA(()=>{t.current=!0}),G.useCallback(async(r,a={})=>{ei(t.current,DA),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var eT={};function VA(n,e,t){!e&&!eT[n]&&(eT[n]=!0,ei(!1,t))}G.memo(PN);function PN({routes:n,future:e,state:t,unstable_onError:i}){return LA(n,void 0,t,i,e)}function tu({to:n,replace:e,state:t,relative:i}){yt(qa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=G.useContext(_i);ei(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=G.useContext(ji),{pathname:u}=Ns(),f=yg(),d=mg(n,pg(a),u,i==="path"),h=JSON.stringify(d);return G.useEffect(()=>{f(JSON.parse(h),{replace:e,state:t,relative:i})},[f,h,i,e,t]),null}function lo(n){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1}){yt(!qa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=G.useMemo(()=>({basename:u,navigator:r,static:a,future:{}}),[u,r,a]);typeof t=="string"&&(t=Oa(t));let{pathname:d="/",search:h="",hash:y="",state:E=null,key:T="default"}=t,I=G.useMemo(()=>{let N=As(d,u);return N==null?null:{location:{pathname:N,search:h,hash:y,state:E,key:T},navigationType:i}},[u,d,h,y,E,T,i]);return ei(I!=null,`<Router basename="${u}"> is not able to match the URL "${d}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:G.createElement(_i.Provider,{value:f},G.createElement(Ou.Provider,{children:e,value:I}))}function DN({children:n,location:e}){return vN(wm(n),e)}function wm(n,e=[]){let t=[];return G.Children.forEach(n,(i,r)=>{if(!G.isValidElement(i))return;let a=[...e,r];if(i.type===G.Fragment){t.push.apply(t,wm(i.props.children,a));return}yt(i.type===lo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=wm(i.props.children,a)),t.push(u)}),t}var qf="get",Bf="application/x-www-form-urlencoded";function bd(n){return n!=null&&typeof n.tagName=="string"}function kN(n){return bd(n)&&n.tagName.toLowerCase()==="button"}function LN(n){return bd(n)&&n.tagName.toLowerCase()==="form"}function VN(n){return bd(n)&&n.tagName.toLowerCase()==="input"}function UN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ON(n,e){return n.button===0&&(!e||e==="_self")&&!UN(n)}var xf=null;function FN(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var qN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rm(n){return n!=null&&!qN.has(n)?(ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bf}"`),null):n}function BN(n,e){let t,i,r,a,u;if(LN(n)){let f=n.getAttribute("action");i=f?As(f,e):null,t=n.getAttribute("method")||qf,r=rm(n.getAttribute("enctype"))||Bf,a=new FormData(n)}else if(kN(n)||VN(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(i=d?As(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||qf,r=rm(n.getAttribute("formenctype"))||rm(f.getAttribute("enctype"))||Bf,a=new FormData(f,n),!FN()){let{name:h,type:y,value:E}=n;if(y==="image"){let T=h?`${h}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else h&&a.append(h,E)}}else{if(bd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qf,i=null,r=Bf,u=n}return a&&r==="text/plain"&&(u=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function HN(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&As(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function zN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $N(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let u=await zN(a,t);return u.links?u.links():[]}return[]}));return QN(i.flat(1).filter(GN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function tT(n,e,t,i,r,a){let u=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,f=(d,h)=>{var y;return t[h].pathname!==d.pathname||((y=t[h].route.path)==null?void 0:y.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,h)=>u(d,h)||f(d,h)):a==="data"?e.filter((d,h)=>{var E;let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,h)||f(d,h))return!0;if(d.route.shouldRevalidate){let T=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function KN(n,e,{includeHydrateFallback:t}={}){return JN(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function JN(n){return[...new Set(n)]}function YN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function QN(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(YN(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function UA(){let n=G.useContext(Fa);return Eg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function WN(){let n=G.useContext(Nd);return Eg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Tg=G.createContext(void 0);Tg.displayName="FrameworkContext";function OA(){let n=G.useContext(Tg);return Eg(n,"You must render this element inside a <HydratedRouter> element"),n}function jN(n,e){let t=G.useContext(Tg),[i,r]=G.useState(!1),[a,u]=G.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:h,onMouseLeave:y,onTouchStart:E}=e,T=G.useRef(null);G.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let U=H=>{H.forEach(J=>{u(J.isIntersecting)})},L=new IntersectionObserver(U,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),G.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let I=()=>{r(!0)},N=()=>{r(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:nu(f,I),onBlur:nu(d,N),onMouseEnter:nu(h,I),onMouseLeave:nu(y,N),onTouchStart:nu(E,I)}]:[!1,T,{}]}function nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function XN({page:n,...e}){let{router:t}=UA(),i=G.useMemo(()=>RA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?G.createElement(eb,{page:n,matches:i,...e}):null}function ZN(n){let{manifest:e,routeModules:t}=OA(),[i,r]=G.useState([]);return G.useEffect(()=>{let a=!1;return $N(n,e,t).then(u=>{a||r(u)}),()=>{a=!0}},[n,e,t]),i}function eb({page:n,matches:e,...t}){let i=Ns(),{manifest:r,routeModules:a}=OA(),{basename:u}=UA(),{loaderData:f,matches:d}=WN(),h=G.useMemo(()=>tT(n,e,d,r,i,"data"),[n,e,d,r,i]),y=G.useMemo(()=>tT(n,e,d,r,i,"assets"),[n,e,d,r,i]),E=G.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,U=!1;if(e.forEach(H=>{var B;let J=r.routes[H.route.id];!J||!J.hasLoader||(!h.some(te=>te.route.id===H.route.id)&&H.route.id in f&&((B=a[H.route.id])!=null&&B.shouldRevalidate)||J.hasClientLoader?U=!0:N.add(H.route.id))}),N.size===0)return[];let L=HN(n,u,"data");return U&&N.size>0&&L.searchParams.set("_routes",e.filter(H=>N.has(H.route.id)).map(H=>H.route.id).join(",")),[L.pathname+L.search]},[u,f,i,r,h,e,n,a]),T=G.useMemo(()=>KN(y,r),[y,r]),I=ZN(y);return G.createElement(G.Fragment,null,E.map(N=>G.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),T.map(N=>G.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),I.map(({key:N,link:U})=>G.createElement("link",{key:N,nonce:t.nonce,...U})))}function tb(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FA&&(window.__reactRouterVersion="7.9.6")}catch{}function nb({basename:n,children:e,window:t}){let i=G.useRef();i.current==null&&(i.current=zR({window:t,v5Compat:!0}));let r=i.current,[a,u]=G.useState({action:r.action,location:r.location}),f=G.useCallback(d=>{G.startTransition(()=>u(d))},[u]);return G.useLayoutEffect(()=>r.listen(f),[r,f]),G.createElement(MN,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var qA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cu=G.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:u,state:f,target:d,to:h,preventScrollReset:y,viewTransition:E,...T},I){let{basename:N}=G.useContext(_i),U=typeof h=="string"&&qA.test(h),L,H=!1;if(typeof h=="string"&&U&&(L=h,FA))try{let R=new URL(window.location.href),k=h.startsWith("//")?new URL(R.protocol+h):new URL(h),V=As(k.pathname,N);k.origin===R.origin&&V!=null?h=V+k.search+k.hash:H=!0}catch{ei(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=yN(h,{relative:r}),[B,te,ue]=jN(i,T),ie=ob(h,{replace:u,state:f,target:d,preventScrollReset:y,relative:r,viewTransition:E});function P(R){e&&e(R),R.defaultPrevented||ie(R)}let M=G.createElement("a",{...T,...ue,href:L||J,onClick:H||a?e:P,ref:tb(I,te),target:d,"data-discover":!U&&t==="render"?"true":void 0});return B&&!U?G.createElement(G.Fragment,null,M,G.createElement(XN,{page:J})):M});Cu.displayName="Link";var ib=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:u,viewTransition:f,children:d,...h},y){let E=Fu(u,{relative:h.relative}),T=Ns(),I=G.useContext(Nd),{navigator:N,basename:U}=G.useContext(_i),L=I!=null&&fb(E)&&f===!0,H=N.encodeLocation?N.encodeLocation(E).pathname:E.pathname,J=T.pathname,B=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(J=J.toLowerCase(),B=B?B.toLowerCase():null,H=H.toLowerCase()),B&&U&&(B=As(B,U)||B);const te=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ue=J===H||!r&&J.startsWith(H)&&J.charAt(te)==="/",ie=B!=null&&(B===H||!r&&B.startsWith(H)&&B.charAt(H.length)==="/"),P={isActive:ue,isPending:ie,isTransitioning:L},M=ue?e:void 0,R;typeof i=="function"?R=i(P):R=[i,ue?"active":null,ie?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return G.createElement(Cu,{...h,"aria-current":M,className:R,ref:y,style:k,to:u,viewTransition:f},typeof d=="function"?d(P):d)});ib.displayName="NavLink";var sb=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:u=qf,action:f,onSubmit:d,relative:h,preventScrollReset:y,viewTransition:E,...T},I)=>{let N=ub(),U=cb(f,{relative:h}),L=u.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&qA.test(f),J=B=>{if(d&&d(B),B.defaultPrevented)return;B.preventDefault();let te=B.nativeEvent.submitter,ue=(te==null?void 0:te.getAttribute("formmethod"))||u;N(te||B.currentTarget,{fetcherKey:e,method:ue,navigate:t,replace:r,state:a,relative:h,preventScrollReset:y,viewTransition:E})};return G.createElement("form",{ref:I,method:L,action:U,onSubmit:i?d:J,...T,"data-discover":!H&&n==="render"?"true":void 0})});sb.displayName="Form";function rb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(n){let e=G.useContext(Fa);return yt(e,rb(n)),e}function ob(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:u}={}){let f=yg(),d=Ns(),h=Fu(n,{relative:a});return G.useCallback(y=>{if(ON(y,e)){y.preventDefault();let E=t!==void 0?t:Au(d)===Au(h);f(n,{replace:E,state:i,preventScrollReset:r,relative:a,viewTransition:u})}},[d,f,h,t,i,e,n,r,a,u])}var ab=0,lb=()=>`__${String(++ab)}__`;function ub(){let{router:n}=BA("useSubmit"),{basename:e}=G.useContext(_i),t=RN();return G.useCallback(async(i,r={})=>{let{action:a,method:u,encType:f,formData:d,body:h}=BN(i,e);if(r.navigate===!1){let y=r.fetcherKey||lb();await n.fetch(y,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:h,formMethod:r.method||u,formEncType:r.encType||f,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:h,formMethod:r.method||u,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function cb(n,{relative:e}={}){let{basename:t}=G.useContext(_i),i=G.useContext(ji);yt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Fu(n||".",{relative:e})},u=Ns();if(n==null){a.search=u.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(E=>E).forEach(E=>f.append("index",E));let y=f.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Es([t,a.pathname])),Au(a)}function fb(n,{relative:e}={}){let t=G.useContext(MA);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=BA("useViewTransitionState"),r=Fu(n,{relative:e});if(!t.isTransitioning)return!1;let a=As(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=As(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ed(r.pathname,u)!=null||ed(r.pathname,a)!=null}const db=({user:n,onLogout:e,plan:t,invoiceCount:i,onUpgrade:r,companies:a,warehouses:u,selectedCompanyId:f,selectedWarehouseId:d,onCompanyChange:h,onWarehouseChange:y,setCompanies:E,setWarehouses:T})=>{const[I,N]=G.useState([]),[U,L]=G.useState(!1),[H,J]=G.useState(!1),[B,te]=G.useState(!1),[ue,ie]=G.useState(""),[P,M]=G.useState(""),R=G.useRef(null);G.useEffect(()=>{const D=Ee=>{R.current&&!R.current.contains(Ee.target)&&te(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]),G.useEffect(()=>{var D;if(f){const Ee=u.filter(be=>be.companyId===f);N(Ee),Ee.some(be=>be.id===d)||y(((D=Ee[0])==null?void 0:D.id)||"")}else N([])},[f,u,d,y]);const k=()=>{if(ue.trim()){const D={id:crypto.randomUUID(),name:ue.trim()};E(Ee=>[...Ee,D]),ie(""),L(!1),h(D.id)}},V=()=>{if(P.trim()&&f){const D={id:crypto.randomUUID(),name:P.trim(),companyId:f};T(Ee=>[...Ee,D]),M(""),J(!1),y(D.id)}},O=Math.min(i/t.invoiceLimit*100,100);return C.jsxs(C.Fragment,{children:[C.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:C.jsxs("div",{className:"container mx-auto px-4 md:px-8 py-3 flex items-center justify-between flex-wrap",children:[C.jsx("div",{className:"flex items-center space-x-4",children:C.jsx(Cu,{to:"/",className:"text-xl font-bold text-slate-800",children:"Invoice AI Parser"})}),C.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("select",{value:f||"",onChange:D=>h(D.target.value),className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:a.map(D=>C.jsx("option",{value:D.id,children:D.name},D.id))}),C.jsx("button",{onClick:()=>L(!0),className:"px-2 py-1 text-sm text-indigo-600 hover:text-indigo-800",children:"+"})]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("select",{value:d||"",onChange:D=>y(D.target.value),disabled:!f||I.length===0,className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm disabled:bg-slate-100",children:I.length>0?I.map(D=>C.jsx("option",{value:D.id,children:D.name},D.id)):C.jsx("option",{children:"No warehouses"})}),C.jsx("button",{onClick:()=>J(!0),disabled:!f,className:"px-2 py-1 text-sm text-indigo-600 hover:text-indigo-800 disabled:text-slate-400",children:"+"})]}),C.jsxs("div",{className:"relative",ref:R,children:[C.jsx("button",{onClick:()=>te(!B),children:C.jsx("img",{src:n.picture,alt:n.name,className:"h-9 w-9 rounded-full"})}),B&&C.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:[C.jsxs("div",{className:"p-4",children:[C.jsx("p",{className:"text-sm font-semibold text-slate-800",children:n.name}),C.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email}),C.jsxs("div",{className:"mt-4",children:[C.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-600 mb-1",children:[C.jsxs("span",{children:[t.name," Plan"]}),C.jsxs("span",{children:[i," / ",t.invoiceLimit]})]}),C.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:C.jsx("div",{className:"bg-indigo-600 h-1.5 rounded-full",style:{width:`${O}%`}})})]})]}),C.jsxs("div",{className:"border-t border-slate-100",children:[C.jsx("button",{onClick:r,className:"block w-full text-left px-4 py-2 text-sm text-indigo-600 hover:bg-slate-50",children:"Upgrade Plan"}),C.jsx("button",{onClick:e,className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:"Logout"})]})]})]})]})]})}),U&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[C.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Add New Company"}),C.jsx("input",{type:"text",value:ue,onChange:D=>ie(D.target.value),placeholder:"Company Name",className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),C.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[C.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Cancel"}),C.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Add"})]})]})}),H&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[C.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Add New Warehouse"}),C.jsx("input",{type:"text",value:P,onChange:D=>M(D.target.value),placeholder:"Warehouse Name",className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),C.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[C.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Cancel"}),C.jsx("button",{onClick:V,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Add"})]})]})})]})},Re=n=>typeof n=="string",iu=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},nT=n=>n==null?"":""+n,hb=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},pb=/###/g,iT=n=>n&&n.indexOf("###")>-1?n.replace(pb,"."):n,sT=n=>!n||Re(n),hu=(n,e,t)=>{const i=Re(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(sT(n))return{};const a=iT(i[r]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++r}return sT(n)?{}:{obj:n,k:iT(i[r])}},rT=(n,e,t)=>{const{obj:i,k:r}=hu(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let a=e[e.length-1],u=e.slice(0,e.length-1),f=hu(n,u,Object);for(;f.obj===void 0&&u.length;)a=`${u[u.length-1]}.${a}`,u=u.slice(0,u.length-1),f=hu(n,u,Object),f!=null&&f.obj&&typeof f.obj[`${f.k}.${a}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${a}`]=t},mb=(n,e,t,i)=>{const{obj:r,k:a}=hu(n,e,Object);r[a]=r[a]||[],r[a].push(t)},td=(n,e)=>{const{obj:t,k:i}=hu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},gb=(n,e,t)=>{const i=td(n,t);return i!==void 0?i:td(e,t)},HA=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Re(n[i])||n[i]instanceof String||Re(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):HA(n[i],e[i],t):n[i]=e[i]);return n},pa=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var yb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _b=n=>Re(n)?n.replace(/[&<>"'\/]/g,e=>yb[e]):n;class vb{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Eb=[" ",",","?","!",";"],Tb=new vb(20),Sb=(n,e,t)=>{e=e||"",t=t||"";const i=Eb.filter(u=>e.indexOf(u)<0&&t.indexOf(u)<0);if(i.length===0)return!0;const r=Tb.getRegExp(`(${i.map(u=>u==="?"?"\\?":u).join("|")})`);let a=!r.test(n);if(!a){const u=n.indexOf(t);u>0&&!r.test(n.substring(0,u))&&(a=!0)}return a},Im=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let a=0;a<i.length;){if(!r||typeof r!="object")return;let u,f="";for(let d=a;d<i.length;++d)if(d!==a&&(f+=t),f+=i[d],u=r[f],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&d<i.length-1)continue;a+=d-a+1;break}r=u}return r},wu=n=>n==null?void 0:n.replace("_","-"),Ab={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,i;(i=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||i.call(t,console,e)}};let Cb=class xm{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Ab,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Re(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new xm(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new xm(this.logger,e)}};var zi=new Cb;class Pd{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,a])=>{for(let u=0;u<a;u++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,a])=>{for(let u=0;u<a;u++)r.apply(r,[e,...t])})}}class oT extends Pd{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){var h,y;const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,u=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;e.indexOf(".")>-1?f=e.split("."):(f=[e,t],i&&(Array.isArray(i)?f.push(...i):Re(i)&&a?f.push(...i.split(a)):f.push(i)));const d=td(this.data,f);return!d&&!t&&!i&&e.indexOf(".")>-1&&(e=f[0],t=f[1],i=f.slice(2).join(".")),d||!u||!Re(i)?d:Im((y=(h=this.data)==null?void 0:h[e])==null?void 0:y[t],i,a)}addResource(e,t,i,r,a={silent:!1}){const u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let f=[e,t];i&&(f=f.concat(u?i.split(u):i)),e.indexOf(".")>-1&&(f=e.split("."),r=t,t=f[1]),this.addNamespaces(t),rT(this.data,f,r),a.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const a in i)(Re(i[a])||Array.isArray(i[a]))&&this.addResource(e,t,a,i[a],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,a,u={silent:!1,skipCopy:!1}){let f=[e,t];e.indexOf(".")>-1&&(f=e.split("."),r=i,i=t,t=f[1]),this.addNamespaces(t);let d=td(this.data,f)||{};u.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?HA(d,i,a):d={...d,...i},rT(this.data,f,d),u.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var zA={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(a=>{var u;e=((u=this.processors[a])==null?void 0:u.process(e,t,i,r))??e}),e}};const GA=Symbol("i18next/PATH_KEY");function wb(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>{var a;return(a=t==null?void 0:t.revoke)==null||a.call(t),r===GA?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Rm(n,e){const{[GA]:t}=n(wb());return t.join((e==null?void 0:e.keySeparator)??".")}const aT={},om=n=>!Re(n)&&typeof n!="boolean"&&typeof n!="number";class nd extends Pd{constructor(e,t={}){super(),hb(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=zi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if((r==null?void 0:r.res)===void 0)return!1;const a=om(r.res);return!(i.returnObjects===!1&&a)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const u=i&&e.indexOf(i)>-1,f=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Sb(e,i,r);if(u&&!f){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Re(a)?[a]:a};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(r)}return{key:e,namespaces:Re(a)?[a]:a}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=Rm(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,u=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:f,namespaces:d}=this.extractFromKey(e[e.length-1],r),h=d[d.length-1];let y=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const E=r.lng||this.language,T=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((E==null?void 0:E.toLowerCase())==="cimode")return T?a?{res:`${h}${y}${f}`,usedKey:f,exactUsedKey:f,usedLng:E,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${y}${f}`:a?{res:f,usedKey:f,exactUsedKey:f,usedLng:E,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:f;const I=this.resolve(e,r);let N=I==null?void 0:I.res;const U=(I==null?void 0:I.usedKey)||f,L=(I==null?void 0:I.exactUsedKey)||f,H=["[object Number]","[object Function]","[object RegExp]"],J=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,te=r.count!==void 0&&!Re(r.count),ue=nd.hasDefaultValue(r),ie=te?this.pluralResolver.getSuffix(E,r.count,r):"",P=r.ordinal&&te?this.pluralResolver.getSuffix(E,r.count,{ordinal:!1}):"",M=te&&!r.ordinal&&r.count===0,R=M&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${ie}`]||r[`defaultValue${P}`]||r.defaultValue;let k=N;B&&!N&&ue&&(k=R);const V=om(k),O=Object.prototype.toString.apply(k);if(B&&k&&V&&H.indexOf(O)<0&&!(Re(J)&&Array.isArray(k))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,k,{...r,ns:d}):`key '${f} (${this.language})' returned an object instead of string.`;return a?(I.res=D,I.usedParams=this.getUsedParamsDetails(r),I):D}if(u){const D=Array.isArray(k),Ee=D?[]:{},be=D?L:U;for(const $ in k)if(Object.prototype.hasOwnProperty.call(k,$)){const le=`${be}${u}${$}`;ue&&!N?Ee[$]=this.translate(le,{...r,defaultValue:om(R)?R[$]:void 0,joinArrays:!1,ns:d}):Ee[$]=this.translate(le,{...r,joinArrays:!1,ns:d}),Ee[$]===le&&(Ee[$]=k[$])}N=Ee}}else if(B&&Re(J)&&Array.isArray(N))N=N.join(J),N&&(N=this.extendTranslation(N,e,r,i));else{let D=!1,Ee=!1;!this.isValidLookup(N)&&ue&&(D=!0,N=R),this.isValidLookup(N)||(Ee=!0,N=f);const $=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ee?void 0:N,le=ue&&R!==N&&this.options.updateMissing;if(Ee||D||le){if(this.logger.log(le?"updateKey":"missingKey",E,h,f,le?R:N),u){const q=this.resolve(f,{...r,keySeparator:!1});q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let he=[];const xe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&xe&&xe[0])for(let q=0;q<xe.length;q++)he.push(xe[q]);else this.options.saveMissingTo==="all"?he=this.languageUtils.toResolveHierarchy(r.lng||this.language):he.push(r.lng||this.language);const Fe=(q,ee,re)=>{var ye;const fe=ue&&re!==N?re:$;this.options.missingKeyHandler?this.options.missingKeyHandler(q,h,ee,fe,le,r):(ye=this.backendConnector)!=null&&ye.saveMissing&&this.backendConnector.saveMissing(q,h,ee,fe,le,r),this.emit("missingKey",q,h,ee,N)};this.options.saveMissing&&(this.options.saveMissingPlurals&&te?he.forEach(q=>{const ee=this.pluralResolver.getSuffixes(q,r);M&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(re=>{Fe([q],f+re,r[`defaultValue${re}`]||R)})}):Fe(he,f,R))}N=this.extendTranslation(N,e,r,I,i),Ee&&N===f&&this.options.appendNamespaceToMissingKey&&(N=`${h}${y}${f}`),(Ee||D)&&this.options.parseMissingKeyHandler&&(N=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${y}${f}`:f,D?N:void 0,r))}return a?(I.res=N,I.usedParams=this.getUsedParamsDetails(r),I):N}extendTranslation(e,t,i,r,a){var d,h;if((d=this.i18nFormat)!=null&&d.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const y=Re(e)&&(((h=i==null?void 0:i.interpolation)==null?void 0:h.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let E;if(y){const I=e.match(this.interpolator.nestingRegexp);E=I&&I.length}let T=i.replace&&!Re(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),e=this.interpolator.interpolate(e,T,i.lng||this.language||r.usedLng,i),y){const I=e.match(this.interpolator.nestingRegexp),N=I&&I.length;E<N&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...I)=>(a==null?void 0:a[0])===I[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${t[0]}`),null):this.translate(...I,t),i)),i.interpolation&&this.interpolator.reset()}const u=i.postProcess||this.options.postProcess,f=Re(u)?[u]:u;return e!=null&&(f!=null&&f.length)&&i.applyPostProcessor!==!1&&(e=zA.handle(f,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,a,u,f;return Re(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(d,t),y=h.key;r=y;let E=h.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const T=t.count!==void 0&&!Re(t.count),I=T&&!t.ordinal&&t.count===0,N=t.context!==void 0&&(Re(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);E.forEach(L=>{var H,J;this.isValidLookup(i)||(f=L,!aT[`${U[0]}-${L}`]&&((H=this.utils)!=null&&H.hasLoadedNamespace)&&!((J=this.utils)!=null&&J.hasLoadedNamespace(f))&&(aT[`${U[0]}-${L}`]=!0,this.logger.warn(`key "${r}" for languages "${U.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(B=>{var ie;if(this.isValidLookup(i))return;u=B;const te=[y];if((ie=this.i18nFormat)!=null&&ie.addLookupKeys)this.i18nFormat.addLookupKeys(te,y,B,L,t);else{let P;T&&(P=this.pluralResolver.getSuffix(B,t.count,t));const M=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(T&&(t.ordinal&&P.indexOf(R)===0&&te.push(y+P.replace(R,this.options.pluralSeparator)),te.push(y+P),I&&te.push(y+M)),N){const k=`${y}${this.options.contextSeparator||"_"}${t.context}`;te.push(k),T&&(t.ordinal&&P.indexOf(R)===0&&te.push(k+P.replace(R,this.options.pluralSeparator)),te.push(k+P),I&&te.push(k+M))}}let ue;for(;ue=te.pop();)this.isValidLookup(i)||(a=ue,i=this.getResource(B,L,ue,t))}))})}),{res:i,usedKey:r,exactUsedKey:a,usedLng:u,usedNS:f}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Re(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const a of t)delete r[a]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class lT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=zi.create("languageUtils")}getScriptPartFromCode(e){if(e=wu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=wu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Re(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(u=>{if(u===a)return u;if(!(u.indexOf("-")<0&&a.indexOf("-")<0)&&(u.indexOf("-")>0&&a.indexOf("-")<0&&u.substring(0,u.indexOf("-"))===a||u.indexOf(a)===0&&a.length>1))return u})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Re(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],a=u=>{u&&(this.isSupportedCode(u)?r.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return Re(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Re(e)&&a(this.formatLanguageCode(e)),i.forEach(u=>{r.indexOf(u)<0&&a(this.formatLanguageCode(u))}),r}}const uT={zero:0,one:1,two:2,few:3,many:4,other:5},cT={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ib{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=zi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=wu(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let u;try{u=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),cT;if(!e.match(/-|_/))return cT;const d=this.languageUtils.getLanguagePartFromCode(e);u=this.getRule(d,t)}return this.pluralRulesCache[a]=u,u}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,a)=>uT[r]-uT[a]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const fT=(n,e,t,i=".",r=!0)=>{let a=gb(n,e,t);return!a&&r&&Re(t)&&(a=Im(n,t,i),a===void 0&&(a=Im(e,t,i))),a},am=n=>n.replace(/\$/g,"$$$$");class xb{constructor(e={}){var t;this.logger=zi.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(i=>i),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:a,prefixEscaped:u,suffix:f,suffixEscaped:d,formatSeparator:h,unescapeSuffix:y,unescapePrefix:E,nestingPrefix:T,nestingPrefixEscaped:I,nestingSuffix:N,nestingSuffixEscaped:U,nestingOptionsSeparator:L,maxReplaces:H,alwaysFormat:J}=e.interpolation;this.escape=t!==void 0?t:_b,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?pa(a):u||"{{",this.suffix=f?pa(f):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=y?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=T?pa(T):I||pa("$t("),this.nestingSuffix=N?pa(N):U||pa(")"),this.nestingOptionsSeparator=L||",",this.maxReplaces=H||1e3,this.alwaysFormat=J!==void 0?J:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>(t==null?void 0:t.source)===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){var I;let a,u,f;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=N=>{if(N.indexOf(this.formatSeparator)<0){const J=fT(t,d,N,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(J,void 0,i,{...r,...t,interpolationkey:N}):J}const U=N.split(this.formatSeparator),L=U.shift().trim(),H=U.join(this.formatSeparator).trim();return this.format(fT(t,d,L,this.options.keySeparator,this.options.ignoreJSONStructure),H,i,{...r,...t,interpolationkey:L})};this.resetRegExp();const y=(r==null?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((I=r==null?void 0:r.interpolation)==null?void 0:I.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:N=>am(N)},{regex:this.regexp,safeValue:N=>this.escapeValue?am(this.escape(N)):am(N)}].forEach(N=>{for(f=0;a=N.regex.exec(e);){const U=a[1].trim();if(u=h(U),u===void 0)if(typeof y=="function"){const H=y(e,a,r);u=Re(H)?H:""}else if(r&&Object.prototype.hasOwnProperty.call(r,U))u="";else if(E){u=a[0];continue}else this.logger.warn(`missed to pass in variable ${U} for interpolating ${e}`),u="";else!Re(u)&&!this.useRawValueToEscape&&(u=nT(u));const L=N.safeValue(u);if(e=e.replace(a[0],L),E?(N.regex.lastIndex+=u.length,N.regex.lastIndex-=a[0].length):N.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,a,u;const f=(d,h)=>{const y=this.nestingOptionsSeparator;if(d.indexOf(y)<0)return d;const E=d.split(new RegExp(`${y}[ ]*{`));let T=`{${E[1]}`;d=E[0],T=this.interpolate(T,u);const I=T.match(/'/g),N=T.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!N||N.length%2!==0)&&(T=T.replace(/'/g,'"'));try{u=JSON.parse(T),h&&(u={...h,...u})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,U),`${d}${y}${T}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,d};for(;r=this.nestingRegexp.exec(e);){let d=[];u={...i},u=u.replace&&!Re(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(d=r[1].slice(h).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),a=t(f.call(this,r[1].trim(),u),u),a&&r[0]===e&&!Re(a))return a;Re(a)||(a=nT(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),a=""),d.length&&(a=d.reduce((y,E)=>this.format(y,E,i.lng,{...i,interpolationkey:r[1].trim()}),a.trim())),e=e.replace(r[0],a),this.regexp.lastIndex=0}return e}}const Rb=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(u=>{if(u){const[f,...d]=u.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),y=f.trim();t[y]||(t[y]=h),h==="false"&&(t[y]=!1),h==="true"&&(t[y]=!0),isNaN(h)||(t[y]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},dT=n=>{const e={};return(t,i,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const u=i+JSON.stringify(a);let f=e[u];return f||(f=n(wu(i),r),e[u]=f),f(t)}},Nb=n=>(e,t,i)=>n(wu(t),i)(e);class bb{constructor(e={}){this.logger=zi.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?dT:Nb;this.formats={number:i((r,a)=>{const u=new Intl.NumberFormat(r,{...a});return f=>u.format(f)}),currency:i((r,a)=>{const u=new Intl.NumberFormat(r,{...a,style:"currency"});return f=>u.format(f)}),datetime:i((r,a)=>{const u=new Intl.DateTimeFormat(r,{...a});return f=>u.format(f)}),relativetime:i((r,a)=>{const u=new Intl.RelativeTimeFormat(r,{...a});return f=>u.format(f,a.range||"day")}),list:i((r,a)=>{const u=new Intl.ListFormat(r,{...a});return f=>u.format(f)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=dT(t)}format(e,t,i,r={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(f=>f.indexOf(")")>-1)){const f=a.findIndex(d=>d.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,f)].join(this.formatSeparator)}return a.reduce((f,d)=>{var E;const{formatName:h,formatOptions:y}=Rb(d);if(this.formats[h]){let T=f;try{const I=((E=r==null?void 0:r.formatParams)==null?void 0:E[r.interpolationkey])||{},N=I.locale||I.lng||r.locale||r.lng||i;T=this.formats[h](f,N,{...y,...r,...I})}catch(I){this.logger.warn(I)}return T}else this.logger.warn(`there was no format function for ${h}`);return f},e)}}const Pb=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Mb extends Pd{constructor(e,t,i,r={}){var a,u;super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=zi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],(u=(a=this.backend)==null?void 0:a.init)==null||u.call(a,i,r.backend,r)}queueLoad(e,t,i,r){const a={},u={},f={},d={};return e.forEach(h=>{let y=!0;t.forEach(E=>{const T=`${h}|${E}`;!i.reload&&this.store.hasResourceBundle(h,E)?this.state[T]=2:this.state[T]<0||(this.state[T]===1?u[T]===void 0&&(u[T]=!0):(this.state[T]=1,y=!1,u[T]===void 0&&(u[T]=!0),a[T]===void 0&&(a[T]=!0),d[E]===void 0&&(d[E]=!0)))}),y||(f[h]=!0)}),(Object.keys(a).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(d)}}loaded(e,t,i){const r=e.split("|"),a=r[0],u=r[1];t&&this.emit("failedLoading",a,u,t),!t&&i&&this.store.addResourceBundle(a,u,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const f={};this.queue.forEach(d=>{mb(d.loaded,[a],u),Pb(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{f[h]||(f[h]={});const y=d.loaded[h];y.length&&y.forEach(E=>{f[h][E]===void 0&&(f[h][E]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(d=>!d.done)}read(e,t,i,r=0,a=this.retryTimeout,u){if(!e.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:a,callback:u});return}this.readingCalls++;const f=(h,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(h&&y&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,a*2,u)},a);return}u(h,y)},d=this.backend[i].bind(this.backend);if(d.length===2){try{const h=d(e,t);h&&typeof h.then=="function"?h.then(y=>f(null,y)).catch(f):f(null,h)}catch(h){f(h)}return}return d(e,t,f)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Re(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Re(t)&&(t=[t]);const a=this.queueLoad(e,t,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(u=>{this.loadOne(u)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(u,f)=>{u&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,u),!u&&f&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,f),this.loaded(e,u,f)})}saveMissing(e,t,i,r,a,u={},f=()=>{}){var d,h,y,E,T;if((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace&&!((E=(y=this.services)==null?void 0:y.utils)!=null&&E.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((T=this.backend)!=null&&T.create){const I={...u,isUpdate:a},N=this.backend.create.bind(this.backend);if(N.length<6)try{let U;N.length===5?U=N(e,t,i,r,I):U=N(e,t,i,r),U&&typeof U.then=="function"?U.then(L=>f(null,L)).catch(f):f(null,U)}catch(U){f(U)}else N(e,t,i,r,f,I)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const hT=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Re(n[1])&&(e.defaultValue=n[1]),Re(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),pT=n=>{var e,t;return Re(n.ns)&&(n.ns=[n.ns]),Re(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Re(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},Rf=()=>{},Db=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class pu extends Pd{constructor(e={},t){if(super(),this.options=pT(e),this.services={},this.logger=zi,this.modules={external:[]},Db(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Re(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=hT();this.options={...i,...this.options,...pT(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?zi.init(r(this.modules.logger),this.options):zi.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=bb;const y=new lT(this.options);this.store=new oT(this.options.resources,this.options);const E=this.services;E.logger=zi,E.resourceStore=this.store,E.languageUtils=y,E.pluralResolver=new Ib(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(E.formatter=r(h),E.formatter.init&&E.formatter.init(E,this.options),this.options.interpolation.format=E.formatter.format.bind(E.formatter)),E.interpolator=new xb(this.options),E.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},E.backendConnector=new Mb(r(this.modules.backend),E.resourceStore,E,this.options),E.backendConnector.on("*",(I,...N)=>{this.emit(I,...N)}),this.modules.languageDetector&&(E.languageDetector=r(this.modules.languageDetector),E.languageDetector.init&&E.languageDetector.init(E,this.options.detection,this.options)),this.modules.i18nFormat&&(E.i18nFormat=r(this.modules.i18nFormat),E.i18nFormat.init&&E.i18nFormat.init(this)),this.translator=new nd(this.services,this.options),this.translator.on("*",(I,...N)=>{this.emit(I,...N)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Rf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...y)=>this.store[h](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...y)=>(this.store[h](...y),this)});const f=iu(),d=()=>{const h=(y,E)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(E),t(y,E)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),f}loadResources(e,t=Rf){var a,u;let i=t;const r=Re(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((r==null?void 0:r.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const f=[],d=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(E=>{E!=="cimode"&&f.indexOf(E)<0&&f.push(E)})};r?d(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(y=>d(y)),(u=(a=this.options.preload)==null?void 0:a.forEach)==null||u.call(a,h=>d(h)),this.services.backendConnector.load(f,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(h)})}else i(null)}reloadResources(e,t,i){const r=iu();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Rf),this.services.backendConnector.reload(e,t,a=>{r.resolve(),i(a)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&zA.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=iu();this.emit("languageChanging",e);const r=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},a=(f,d)=>{d?this.isLanguageChangingTo===e&&(r(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(f,(...h)=>this.t(...h))},u=f=>{var y,E;!e&&!f&&this.services.languageDetector&&(f=[]);const d=Re(f)?f:f&&f[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Re(f)?[f]:f);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),(E=(y=this.services.languageDetector)==null?void 0:y.cacheUserLanguage)==null||E.call(y,h)),this.loadResources(h,T=>{a(T,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),i}getFixedT(e,t,i){const r=(a,u,...f)=>{let d;typeof u!="object"?d=this.options.overloadTranslationOptionHandler([a,u].concat(f)):d={...u},d.lng=d.lng||r.lng,d.lngs=d.lngs||r.lngs,d.ns=d.ns||r.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let y;return d.keyPrefix&&Array.isArray(a)?y=a.map(E=>(typeof E=="function"&&(E=Rm(E,{...this.options,...u})),`${d.keyPrefix}${h}${E}`)):(typeof a=="function"&&(a=Rm(a,{...this.options,...u})),y=d.keyPrefix?`${d.keyPrefix}${h}${a}`:a),this.t(y,d)};return Re(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const u=(f,d)=>{const h=this.services.backendConnector.state[`${f}|${d}`];return h===-1||h===0||h===2};if(t.precheck){const f=t.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(i,e)&&(!r||u(a,e)))}loadNamespaces(e,t){const i=iu();return this.options.ns?(Re(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=iu();Re(e)&&(e=[e]);const r=this.options.preload||[],a=e.filter(u=>r.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return a.length?(this.options.preload=r.concat(a),this.loadResources(u=>{i.resolve(),t&&t(u)}),i):(t&&t(),Promise.resolve())}dir(e){var r,a;if(e||(e=this.resolvedLanguage||(((r=this.languages)==null?void 0:r.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const u=new Intl.Locale(e);if(u&&u.getTextInfo){const f=u.getTextInfo();if(f&&f.direction)return f.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((a=this.services)==null?void 0:a.languageUtils)||new lT(hT());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const i=new pu(e,t);return i.createInstance=pu.createInstance,i}cloneInstance(e={},t=Rf){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new pu(r);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(f=>{a[f]=this[f]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i){const f=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((y,E)=>(y[E]={...d[h][E]},y),d[h]),d),{});a.store=new oT(f,r),a.services.resourceStore=a.store}return a.translator=new nd(a.services,r),a.translator.on("*",(f,...d)=>{a.emit(f,...d)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const gn=pu.createInstance();gn.createInstance;gn.dir;gn.init;gn.loadResources;gn.reloadResources;gn.use;gn.changeLanguage;gn.getFixedT;gn.t;gn.exists;gn.setDefaultNamespace;gn.hasLoadedNamespace;gn.loadNamespaces;gn.loadLanguages;const kb=(n,e,t,i)=>{var a,u,f,d;const r=[t,{code:e,...i||{}}];if((u=(a=n==null?void 0:n.services)==null?void 0:a.logger)!=null&&u.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);po(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),(d=(f=n==null?void 0:n.services)==null?void 0:f.logger)!=null&&d.warn?n.services.logger.warn(...r):console!=null&&console.warn&&console.warn(...r)},mT={},$A=(n,e,t,i)=>{po(t)&&mT[t]||(po(t)&&(mT[t]=new Date),kb(n,e,t,i))},KA=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Nm=(n,e,t)=>{n.loadNamespaces(e,KA(n,t))},gT=(n,e,t,i)=>{if(po(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Nm(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,KA(n,i))},Lb=(n,e,t={})=>!e.languages||!e.languages.length?($A(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),po=n=>typeof n=="string",Vb=n=>typeof n=="object"&&n!==null,Ub=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ob={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Fb=n=>Ob[n],qb=n=>n.replace(Ub,Fb);let bm={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:qb};const Bb=(n={})=>{bm={...bm,...n}},Hb=()=>bm;let JA;const zb=n=>{JA=n},Gb=()=>JA,$b={type:"3rdParty",init(n){Bb(n.options.react),zb(n)}},Kb=G.createContext();class Jb{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var lm={exports:{}},um={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function Yb(){if(yT)return um;yT=1;var n=Rd();function e(E,T){return E===T&&(E!==0||1/E===1/T)||E!==E&&T!==T}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,u=n.useDebugValue;function f(E,T){var I=T(),N=i({inst:{value:I,getSnapshot:T}}),U=N[0].inst,L=N[1];return a(function(){U.value=I,U.getSnapshot=T,d(U)&&L({inst:U})},[E,I,T]),r(function(){return d(U)&&L({inst:U}),E(function(){d(U)&&L({inst:U})})},[E]),u(I),I}function d(E){var T=E.getSnapshot;E=E.value;try{var I=T();return!t(E,I)}catch{return!0}}function h(E,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return um.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,um}var _T;function Qb(){return _T||(_T=1,lm.exports=Yb()),lm.exports}var Wb=Qb();const jb=(n,e)=>po(e)?e:Vb(e)&&po(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,Xb={t:jb,ready:!1},Zb=()=>()=>{},Md=(n,e={})=>{var P,M;const{i18n:t}=e,{i18n:i,defaultNS:r}=G.useContext(Kb)||{},a=t||i||Gb();a&&!a.reportNamespaces&&(a.reportNamespaces=new Jb),a||$A(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=G.useMemo(()=>{var R;return{...Hb(),...(R=a==null?void 0:a.options)==null?void 0:R.react,...e}},[a,e]),{useSuspense:f,keyPrefix:d}=u,h=G.useMemo(()=>{var k;const R=r||((k=a==null?void 0:a.options)==null?void 0:k.defaultNS);return po(R)?[R]:R||["translation"]},[n,r,a]);(M=(P=a==null?void 0:a.reportNamespaces)==null?void 0:P.addUsedNamespaces)==null||M.call(P,h);const y=G.useRef(0),E=G.useCallback(R=>{if(!a)return Zb;const{bindI18n:k,bindI18nStore:V}=u,O=()=>{y.current+=1,R()};return k&&a.on(k,O),V&&a.store.on(V,O),()=>{k&&k.split(" ").forEach(D=>a.off(D,O)),V&&V.split(" ").forEach(D=>a.store.off(D,O))}},[a,u]),T=G.useRef(),I=G.useCallback(()=>{if(!a)return Xb;const R=!!(a.isInitialized||a.initializedStoreOnce)&&h.every(be=>Lb(be,a,u)),k=e.lng||a.language,V=y.current,O=T.current;if(O&&O.ready===R&&O.lng===k&&O.keyPrefix===d&&O.revision===V)return O;const Ee={t:a.getFixedT(k,u.nsMode==="fallback"?h:h[0],d),ready:R,lng:k,keyPrefix:d,revision:V};return T.current=Ee,Ee},[a,h,d,u,e.lng]),[N,U]=G.useState(0),{t:L,ready:H}=Wb.useSyncExternalStore(E,I,I);G.useEffect(()=>{if(a&&!H&&!f){const R=()=>U(k=>k+1);e.lng?gT(a,e.lng,h,R):Nm(a,h,R)}},[a,e.lng,h,H,f,N]);const J=a||{},B=G.useRef(null),te=G.useRef(),ue=R=>{const k=Object.getOwnPropertyDescriptors(R);k.__original&&delete k.__original;const V=Object.create(Object.getPrototypeOf(R),k);if(!Object.prototype.hasOwnProperty.call(V,"__original"))try{Object.defineProperty(V,"__original",{value:R,writable:!1,enumerable:!1,configurable:!1})}catch{}return V},ie=G.useMemo(()=>{const R=J,k=R==null?void 0:R.language;let V=R;R&&(B.current&&B.current.__original===R?te.current!==k?(V=ue(R),B.current=V,te.current=k):V=B.current:(V=ue(R),B.current=V,te.current=k));const O=[L,V,H];return O.t=L,O.i18n=V,O.ready=H,O},[L,J,H,J.resolvedLanguage,J.language,J.languages]);if(a&&f&&!H)throw new Promise(R=>{const k=()=>R();e.lng?gT(a,e.lng,h,k):Nm(a,h,k)});return ie},Pm=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),Hi=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),YA=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Dd=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),QA=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),e1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),t1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125V6.375m1.125 13.125A1.125 1.125 0 004.5 18.375h15A1.125 1.125 0 0020.625 19.5m-17.25 0h17.25m-17.25 0h17.25M4.5 6.375V18.375m15-12V6.375m0 0A1.125 1.125 0 0018.375 5.25h-12.75A1.125 1.125 0 004.5 6.375m15 0h.008v.015h-.008V6.375zm-15 0h.008v.015h-.008V6.375z"})}),n1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 6.375h17.25m-17.25 0V18h17.25V6.375m-17.25 0V3.75c0-.966.784-1.75 1.75-1.75h13.75c.966 0 1.75.784 1.75 1.75v2.625m-17.25 0h17.25m-17.25 0h17.25m-17.25 5.625h17.25M9 3.75v16.5M15 3.75v16.5"})}),i1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 0a.375.375 0 01-.375-.375V5.625c0-.207.168-.375.375-.375h7.5c.207 0 .375.168.375.375v11.25c0 .207-.168.375-.375.375h-7.5a.375.375 0 01-.375-.375z"})}),s1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),r1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5m-15 0a7.5 7.5 0 1115 0m-15 0H3m18 0h-1.5M12 9.75v1.5m0 4.5v1.5m-4.5-4.5H6m1.5 0H9m10.5-1.5h-1.5m-1.5 0h-1.5m-4.5 6H6m1.5 0H9m10.5-1.5h-1.5m-1.5 0h-1.5"})}),o1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),a1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),l1=({className:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),u1=()=>{const{t:n}=Md(),e=t=>{const i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth",block:"start"})};return C.jsx("footer",{className:"bg-slate-800 text-slate-300",children:C.jsxs("div",{className:"container mx-auto px-6 py-12",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[C.jsx(Dd,{className:"w-7 h-7 text-indigo-400"}),C.jsx("h1",{className:"text-xl font-bold text-white",children:"Invoice AI Parser"})]}),C.jsx("p",{className:"text-sm text-slate-400",children:n("footer.about")})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-white mb-4",children:n("footer.navigation")}),C.jsxs("ul",{className:"space-y-2 text-sm",children:[C.jsx("li",{children:C.jsx("a",{href:"#features",onClick:t=>{t.preventDefault(),e("features")},className:"hover:text-indigo-400 transition-colors",children:n("header.features")})}),C.jsx("li",{children:C.jsx("a",{href:"#how-it-works",onClick:t=>{t.preventDefault(),e("how-it-works")},className:"hover:text-indigo-400 transition-colors",children:n("header.how_it_works")})}),C.jsx("li",{children:C.jsx("a",{href:"#pricing",onClick:t=>{t.preventDefault(),e("pricing")},className:"hover:text-indigo-400 transition-colors",children:n("header.pricing")})}),C.jsx("li",{children:C.jsx("a",{href:"#faq",onClick:t=>{t.preventDefault(),e("faq")},className:"hover:text-indigo-400 transition-colors",children:n("header.faq")})})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-white mb-4",children:n("footer.legal")}),C.jsxs("ul",{className:"space-y-2 text-sm",children:[C.jsx("li",{children:C.jsx(Cu,{to:"/privacy-policy",className:"hover:text-indigo-400 transition-colors",children:n("footer.privacy_policy")})}),C.jsx("li",{children:C.jsx(Cu,{to:"/terms-of-service",className:"hover:text-indigo-400 transition-colors",children:n("footer.terms_of_service")})})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-white mb-4",children:n("footer.contact")}),C.jsx("ul",{className:"space-y-2 text-sm",children:C.jsx("li",{children:C.jsx("a",{href:"mailto:support@invoiceaiparser.com",className:"hover:text-indigo-400 transition-colors",children:"support@invoiceaiparser.com"})})})]})]}),C.jsx("div",{className:"mt-12 border-t border-slate-700 pt-8 text-center text-sm text-slate-500",children:C.jsx("p",{children:" 2024 Invoice AI Parser. All rights reserved."})})]})})},c1=({onNomenclatureUpload:n,existingNomenclature:e})=>{const[t,i]=G.useState(e||""),[r,a]=G.useState(null),[u,f]=G.useState(null),[d,h]=G.useState(""),[y,E]=G.useState("idle"),[T,I]=G.useState(!1),N=G.useRef(null),U=G.useRef(null),L=G.useCallback((ie,P)=>{if(!ie.trim()){a(null),f(null),h("");return}try{const M=XLSX.read(ie,{type:"string"}),R=M.SheetNames[0];if(!R)throw new Error("No data found to preview.");const k=M.Sheets[R],V=XLSX.utils.sheet_to_json(k,{header:1});if(!V||V.length===0||V.length===1&&V[0].length===0){a(null),f(null),h("");return}const O=V[0]||[],D=V.slice(1)||[];D.length===0&&O.length>0?(a({headers:O,rows:D}),f("Nomenclature has headers but no data rows.")):D.length===0?(f("The file seems to be empty or in an incorrect format."),a(null)):(a({headers:O,rows:D}),f(null)),h(P)}catch{f("Could not parse nomenclature data. Please ensure it's a valid CSV format."),a(null)}},[]);G.useEffect(()=>{const ie=e||"";i(ie),L(ie,ie?"Saved Nomenclature":""),I(!!ie)},[e,L]),G.useEffect(()=>{if(t!==e)return E("saving"),U.current&&clearTimeout(U.current),U.current=window.setTimeout(()=>{n(t),L(t,"Edited Nomenclature"),E("saved")},1e3),()=>{U.current&&clearTimeout(U.current)}},[t,n,L,e]),G.useEffect(()=>{if(y==="saved"){const ie=setTimeout(()=>E("idle"),2e3);return()=>clearTimeout(ie)}},[y]);const H=ie=>{i(ie.target.value),I(!1)},J=ie=>{var M,R;const P=(M=ie.target.files)==null?void 0:M[0];if(P){a(null),f(null);const k=new FileReader,V=(R=P.name.split(".").pop())==null?void 0:R.toLowerCase();k.onload=O=>{var D,Ee;try{let be;if(V==="csv")be=(D=O.target)==null?void 0:D.result;else if(V==="xlsx"||V==="xls"){const $=(Ee=O.target)==null?void 0:Ee.result,le=XLSX.read($,{type:"array"}),he=le.SheetNames[0],xe=le.Sheets[he];be=XLSX.utils.sheet_to_csv(xe)}else throw new Error("Unsupported file format. Please upload a CSV or Excel file.");U.current&&clearTimeout(U.current),i(be),n(be),L(be,P.name),E("saved"),I(!0)}catch(be){f(be.message),a(null),n("")}},k.onerror=()=>{f("Failed to read the file."),a(null),n("")},V==="csv"?k.readAsText(P):V==="xlsx"||V==="xls"?k.readAsArrayBuffer(P):(f("Unsupported file format. Please upload a CSV or Excel file."),n(""))}},B=G.useCallback(ie=>{ie.preventDefault(),ie.stopPropagation()},[]),te=G.useCallback(ie=>{if(ie.preventDefault(),ie.stopPropagation(),ie.dataTransfer.files&&ie.dataTransfer.files[0]&&N.current){N.current.files=ie.dataTransfer.files;const P=new Event("change",{bubbles:!0});N.current.dispatchEvent(P)}},[]),ue=()=>{switch(y){case"saving":return C.jsx("span",{className:"text-xs text-slate-500 animate-pulse",children:"Saving..."});case"saved":return C.jsx("span",{className:"text-xs text-green-600 font-medium",children:" Saved"});default:return null}};return C.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[C.jsxs("div",{className:"flex items-center mb-4",children:[C.jsx("div",{className:"flex-shrink-0 bg-indigo-100 text-indigo-600 rounded-full h-10 w-10 flex items-center justify-center font-bold text-lg",children:"1"}),C.jsx("h2",{className:"ml-4 text-xl font-semibold text-slate-700",children:"Upload or Edit Nomenclature"})]}),C.jsx("p",{className:"text-slate-500 mb-4 text-sm",children:"Upload a CSV/Excel file, or paste/edit the contents directly below. Changes are auto-saved for the selected warehouse."}),C.jsxs("label",{htmlFor:"nomenclature-upload",className:"flex justify-center w-full h-32 px-4 transition bg-white border-2 border-slate-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-indigo-400 focus:outline-none",onDragOver:B,onDrop:te,children:[C.jsxs("span",{className:"flex items-center space-x-2",children:[C.jsx(Pm,{className:"w-6 h-6 text-slate-500"}),C.jsxs("span",{className:"font-medium text-slate-600",children:["Drop files to attach, or ",C.jsx("span",{className:"text-indigo-600 underline",children:"browse"})]})]}),C.jsx("input",{ref:N,id:"nomenclature-upload",type:"file",accept:".csv, .xlsx, .xls, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:J,className:"hidden"})]}),C.jsxs("div",{className:"mt-4",children:[C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsxs("label",{htmlFor:"nomenclature-textarea",className:"text-sm font-medium text-slate-700 flex items-center",children:[C.jsx(s1,{className:"w-4 h-4 mr-2"}),"Edit Nomenclature Data"]}),ue()]}),C.jsx("textarea",{id:"nomenclature-textarea",rows:8,className:"block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono text-xs",placeholder:`Paste your CSV data here, e.g.,
name,sku,price
Product A,SKU001,10.99`,value:t,onChange:H,"aria-label":"Nomenclature Data Editor"})]}),u&&C.jsxs("div",{className:"mt-4 flex items-center p-3 bg-red-50 text-red-700 rounded-lg",children:[C.jsx(YA,{className:"h-5 w-5 mr-2"}),C.jsx("span",{children:u})]}),T&&r&&!u&&C.jsxs("div",{className:"mt-4 flex items-center p-3 bg-green-50 text-green-700 rounded-lg",children:[C.jsx(Hi,{className:"h-5 w-5 mr-2"}),C.jsxs("span",{children:["Successfully loaded ",r.rows.length," products from ",C.jsx("strong",{children:d}),". You can now proceed to step 2."]})]}),r&&C.jsxs("div",{className:"mt-4",children:[C.jsxs("h3",{className:"text-sm font-semibold text-slate-600 flex items-center",children:[C.jsx(t1,{className:"w-4 h-4 mr-2"})," Nomenclature Preview"]}),C.jsx("div",{className:"max-h-40 overflow-y-auto mt-2 border rounded-lg",children:C.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[C.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50 sticky top-0",children:C.jsx("tr",{children:r.headers.map((ie,P)=>C.jsx("th",{scope:"col",className:"px-4 py-2",children:ie},P))})}),C.jsx("tbody",{children:r.rows.slice(0,5).map((ie,P)=>C.jsx("tr",{className:"bg-white border-b",children:ie.map((M,R)=>C.jsx("td",{className:"px-4 py-2 font-medium text-slate-900 truncate max-w-xs",children:String(M)},R))},P))})]})}),r.rows.length>5&&C.jsxs("p",{className:"text-xs text-right text-slate-400 mt-1",children:["Showing 5 of ",r.rows.length," items..."]})]})]})},f1=({data:n,onRowHover:e,onUpdateItem:t,productList:i})=>{const r=()=>{const d=["Invoice File","Matched Product Name","Original Name","SKU","Quantity","Total Quantity","Unit of Measure","Unit Price","Total Price"],h=n.map(I=>[`"${I.invoiceFileName.replace(/"/g,'""')}"`,`"${I.matchedProductName.replace(/"/g,'""')}"`,`"${I.originalName.replace(/"/g,'""')}"`,I.sku,I.quantity,I.totalQuantity,I.unitOfMeasure,I.unitPrice,I.totalPrice]),y=[d.join(","),...h.map(I=>I.join(","))].join(`
`),E=new Blob([y],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");if(T.download!==void 0){const I=URL.createObjectURL(E);T.setAttribute("href",I),T.setAttribute("download","invoice_data.csv"),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)}},a=(d,h)=>{const y=i.find(E=>E.name===h);t(d,{matchedProductName:h,sku:y?y.sku:h==="UNKNOWN"?"UNKNOWN":"CUSTOM"})},u=(d,h,y)=>{t(d,{[h]:y})},f=(d,h,y)=>{const E=y.replace(",","."),T=parseFloat(E);if(isNaN(T)&&E.trim()!=="")return;const I=n.find(L=>L.id===d);if(!I)return;const N=isNaN(T)?0:T,U={[h]:N};if(h==="quantity"||h==="unitPrice"){const L=h==="quantity"?N:I.quantity,H=h==="unitPrice"?N:I.unitPrice;U.totalPrice=parseFloat((L*H).toFixed(2))}t(d,U)};return C.jsxs("div",{children:[C.jsx("div",{className:"flex justify-end mb-4",children:C.jsxs("button",{onClick:r,className:"flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:[C.jsx(QA,{className:"w-4 h-4 mr-2"}),"Download this table"]})}),C.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg border max-h-[60vh]",children:C.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[C.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0",children:C.jsxs("tr",{children:[C.jsx("th",{scope:"col",className:"py-3 px-4",children:"Matched Product"}),C.jsx("th",{scope:"col",className:"py-3 px-4",children:"Original Name"}),C.jsx("th",{scope:"col",className:"py-3 px-4",children:"SKU"}),C.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Qty"}),C.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Total Qty"}),C.jsx("th",{scope:"col",className:"py-3 px-4",children:"UoM"}),C.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Unit Price"}),C.jsx("th",{scope:"col",className:"py-3 px-4 text-right",children:"Total Price"})]})}),C.jsx("tbody",{children:n.map((d,h)=>C.jsxs("tr",{className:`border-b transition-colors duration-150 group ${d.matchedProductName==="UNKNOWN"?"bg-red-50 hover:bg-red-100":"bg-white hover:bg-gray-50"}`,onMouseEnter:()=>d.boundingBox&&e(d),onMouseLeave:()=>d.boundingBox&&e(null),children:[C.jsx("td",{className:"p-1 px-2",style:{minWidth:"200px"},children:C.jsxs("select",{value:d.matchedProductName,onChange:y=>a(d.id,y.target.value),className:`w-full bg-transparent border rounded-md px-2 py-1 text-gray-900 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 ${d.matchedProductName==="UNKNOWN"?"border-red-300":"border-slate-200 group-hover:border-slate-300"}`,children:[!i.some(y=>y.name===d.matchedProductName)&&d.matchedProductName!=="UNKNOWN"&&C.jsxs("option",{value:d.matchedProductName,children:[d.matchedProductName," (Custom)"]}),C.jsx("option",{value:"UNKNOWN",children:"UNKNOWN"}),i.map(y=>C.jsx("option",{value:y.name,children:y.name},y.sku))]})}),C.jsx("td",{className:"p-1 px-2",style:{minWidth:"200px"},children:C.jsx("input",{type:"text",value:d.originalName,onChange:y=>u(d.id,"originalName",y.target.value),className:"w-full bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 text-slate-500 italic focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),C.jsx("td",{className:"p-1 px-2 text-slate-600 font-mono",style:{minWidth:"100px"},children:d.sku}),C.jsx("td",{className:"p-1 px-2 text-right",style:{width:"110px"},children:C.jsx("input",{type:"text",value:d.quantity,onChange:y=>f(d.id,"quantity",y.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),C.jsx("td",{className:"p-1 px-2 text-right",style:{width:"110px"},children:C.jsx("input",{type:"text",value:d.totalQuantity,onChange:y=>f(d.id,"totalQuantity",y.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 font-medium text-gray-700"})}),C.jsx("td",{className:"p-1 px-2",style:{width:"90px"},children:C.jsx("input",{type:"text",value:d.unitOfMeasure,onChange:y=>u(d.id,"unitOfMeasure",y.target.value),className:"w-full bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),C.jsx("td",{className:"p-1 px-2 text-right",style:{width:"130px"},children:C.jsx("input",{type:"text",value:d.unitPrice,onChange:y=>f(d.id,"unitPrice",y.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})}),C.jsx("td",{className:"p-1 px-2 text-right",style:{width:"130px"},children:C.jsx("input",{type:"text",value:d.totalPrice,onChange:y=>f(d.id,"totalPrice",y.target.value),className:"w-full text-right bg-transparent border border-slate-200 group-hover:border-slate-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 font-semibold text-gray-800"})})]},d.id))})]})})]})},d1=()=>C.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[C.jsxs("svg",{className:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C.jsx("p",{className:"text-sm text-slate-500",children:"AI is analyzing your document..."})]}),h1=({imageUrl:n,highlightedItem:e})=>{const[t,i]=G.useState(null),r=G.useRef(null),a=G.useCallback(()=>{if(r.current&&r.current.complete&&r.current.naturalWidth>0){const f=r.current,d=f.offsetWidth,h=f.offsetHeight,y=f.naturalWidth,E=f.naturalHeight,T=d/h,I=y/E;let N,U,L,H;T>I?(U=h,N=U*I,L=(d-N)/2,H=0):(N=d,U=N/I,L=0,H=(h-U)/2),i({containerWidth:d,containerHeight:h,renderedWidth:N,renderedHeight:U,offsetX:L,offsetY:H})}else i(null)},[]);G.useEffect(()=>{var f;return window.addEventListener("resize",a),(f=r.current)!=null&&f.complete&&a(),()=>{window.removeEventListener("resize",a)}},[a]),G.useEffect(()=>{i(null)},[n]);const u=f=>{if(!t)return"";const{renderedWidth:d,renderedHeight:h,offsetX:y,offsetY:E}=t;return f.map(T=>`${T.x*d+y},${T.y*h+E}`).join(" ")};return C.jsxs("div",{className:"relative w-full",children:[C.jsx("img",{ref:r,src:n,alt:"Invoice",onLoad:a,className:"w-full h-auto object-contain"}),e&&e.boundingBox&&t&&C.jsx("svg",{className:"absolute top-0 left-0 pointer-events-none",width:t.containerWidth,height:t.containerHeight,viewBox:`0 0 ${t.containerWidth} ${t.containerHeight}`,children:C.jsx("polygon",{points:u(e.boundingBox),className:"fill-red-500/40 stroke-red-600 stroke-2"})})]})},p1=({isOpen:n,onClose:e,config:t,onSave:i,defaultConfig:r})=>{const[a,u]=G.useState([]),f=G.useRef(null),d=G.useRef(null);if(G.useEffect(()=>{u(JSON.parse(JSON.stringify(t.sort((L,H)=>L.order-H.order))))},[t,n]),!n)return null;const h=(L,H)=>{f.current=H,L.dataTransfer.effectAllowed="move"},y=(L,H)=>{d.current=H},E=()=>{if(f.current===null||d.current===null||f.current===d.current){f.current=null,d.current=null;return}const L=[...a],H=L.splice(f.current,1)[0];L.splice(d.current,0,H);const J=L.map((B,te)=>({...B,order:te}));u(J),f.current=null,d.current=null},T=(L,H)=>{u(J=>J.map(B=>B.key===L?{...B,enabled:H}:B))},I=(L,H)=>{u(J=>J.map(B=>B.key===L?{...B,header:H}:B))},N=()=>{i(a),e()},U=()=>{u(JSON.parse(JSON.stringify(r.sort((L,H)=>L.order-H.order))))};return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:C.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[C.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Configure Export Format"}),C.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Drag and drop to reorder columns. Enable or disable columns and rename headers for your exported CSV and Excel files."}),C.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2",children:C.jsx("ul",{className:"space-y-2",children:a.map((L,H)=>C.jsxs("li",{draggable:!0,onDragStart:J=>h(J,H),onDragEnter:J=>y(J,H),onDragEnd:E,onDragOver:J=>J.preventDefault(),className:"flex items-center p-3 bg-slate-50 rounded-lg border border-slate-200 cursor-move",children:[C.jsx(o1,{className:"w-5 h-5 text-slate-400 mr-3 flex-shrink-0"}),C.jsx("input",{type:"checkbox",checked:L.enabled,onChange:J=>T(L.key,J.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-4"}),C.jsx("div",{className:"flex-grow",children:C.jsx("input",{type:"text",value:L.header,onChange:J=>I(L.key,J.target.value),className:"w-full bg-transparent px-2 py-1 border border-transparent hover:border-slate-300 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 rounded-md text-sm",disabled:!L.enabled})})]},L.key))})}),C.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 flex items-center justify-between",children:[C.jsx("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-md",children:"Reset to Default"}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-md",children:"Cancel"}),C.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md",children:"Save Configuration"})]})]})]})})},m1=({nomenclatureLoaded:n,onFilesUpload:e,onProcessInvoices:t,onReset:i,uploadedFiles:r,invoiceData:a,isLoading:u,error:f,setError:d,onUpdateItem:h,productList:y,plan:E,invoiceCount:T,onUpgrade:I,exportConfig:N,onExportConfigChange:U,defaultExportConfig:L})=>{const H=G.useRef(null),[J,B]=G.useState(null),[te,ue]=G.useState(null),[ie,P]=G.useState(!1),M=G.useMemo(()=>a?a.reduce(($,le)=>{const he=le.invoiceFileName;return $[he]||($[he]=[]),$[he].push(le),$},{}):{},[a]),R=Object.keys(M),[k,V]=G.useState(null);G.useEffect(()=>{R.length>0&&!R.includes(k||"")?V(R[0]):R.length===0&&V(null)},[R,k]),G.useEffect(()=>{ue(null)},[r]);const O=()=>{const $=r.length;if(T+$>E.invoiceLimit){ue(`Processing ${$} invoices would exceed your ${E.name} plan limit of ${E.invoiceLimit} (current usage: ${T}).`);return}t()},D=G.useMemo(()=>{var $;return($=r.find(le=>le.file.name===k))==null?void 0:$.preview},[k,r]),Ee=()=>{if(!a)return;const $=N.filter(re=>re.enabled).sort((re,fe)=>re.order-fe.order),le=$.map(re=>re.header),he=a.map(re=>$.map(fe=>{const ye=re[fe.key]??"";return`"${String(ye).replace(/"/g,'""')}"`}).join(",")),xe=[le.join(","),...he].join(`
`),Fe=new Blob([xe],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),ee=URL.createObjectURL(Fe);q.setAttribute("href",ee),q.setAttribute("download","all_invoices_data.csv"),document.body.appendChild(q),q.click(),document.body.removeChild(q)},be=()=>{if(a)try{const $=new Map;a.forEach(re=>{const fe=re.sku;if(fe==="UNKNOWN")return;$.has(fe)||$.set(fe,{sku:re.sku,matchedProductName:re.matchedProductName,unitOfMeasure:re.unitOfMeasure,unitPrice:re.unitPrice,quantity:0,totalQuantity:0,totalPrice:0,invoiceFileNames:new Set,originalNames:new Set});const ye=$.get(fe);ye.quantity+=re.quantity,ye.totalQuantity+=re.totalQuantity,ye.totalPrice+=re.totalPrice,ye.invoiceFileNames.add(re.invoiceFileName),ye.originalNames.add(re.originalName)});const le=Array.from($.values()).map(re=>({...re,invoiceFileName:Array.from(re.invoiceFileNames).join("; "),originalName:Array.from(re.originalNames).join("; ")})),he=N.filter(re=>re.enabled).sort((re,fe)=>re.order-fe.order),xe=he.map(re=>re.header),Fe=le.map(re=>{const fe={};return he.forEach(ye=>{fe[ye.header]=re[ye.key]??""}),fe}),q=XLSX.utils.json_to_sheet(Fe,{header:xe}),ee=XLSX.utils.book_new();XLSX.utils.book_append_sheet(ee,q,"Aggregated Inventory"),XLSX.writeFile(ee,`Aggregated_Inventory_${new Date().toISOString().split("T")[0]}.xlsx`)}catch($){console.error("Failed to export to Excel:",$),d("Failed to generate the Excel file.")}};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-md border border-slate-200 transition-opacity duration-500 ${n?"opacity-100":"opacity-50 cursor-not-allowed"}`,children:[C.jsxs("div",{className:"flex items-center mb-4",children:[C.jsx("div",{className:`flex-shrink-0 rounded-full h-10 w-10 flex items-center justify-center font-bold text-lg ${n?"bg-indigo-100 text-indigo-600":"bg-slate-200 text-slate-500"}`,children:"2"}),C.jsx("h2",{className:"ml-4 text-xl font-semibold text-slate-700",children:"Process Invoice(s)"})]}),!n&&C.jsx("p",{className:"text-slate-500 text-sm",children:"Please upload your nomenclature in Step 1 to enable this section."}),n&&!a&&C.jsxs("div",{className:"space-y-6",children:[C.jsx("p",{className:"text-slate-500 text-sm",children:"Upload one or more clear photos or PDFs of the invoices you want to process."}),C.jsxs("div",{children:[C.jsx("input",{ref:H,type:"file",accept:"image/png, image/jpeg, application/pdf",onChange:$=>$.target.files&&e($.target.files),className:"hidden",multiple:!0}),C.jsxs("button",{onClick:()=>{var $;return($=H.current)==null?void 0:$.click()},disabled:u,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[C.jsx(Pm,{className:"w-5 h-5 mr-2"}),r.length>0?"Upload Different Files":"Upload Invoice Files (Image/PDF)"]}),r.length>0&&C.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:r.map(({file:$,preview:le},he)=>C.jsx("div",{className:"relative border rounded-lg p-2 bg-slate-50 aspect-square flex items-center justify-center",children:$.type.startsWith("image/")?C.jsx("img",{src:le,alt:$.name,className:"max-w-full max-h-full object-contain rounded-md"}):C.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-1",children:[C.jsx(i1,{className:"w-10 h-10 text-slate-400"}),C.jsx("p",{className:"mt-1 text-xs font-semibold text-slate-600 break-all",children:$.name})]})},he))})]}),C.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 min-h-[50px]",children:[r.length>0&&!u&&C.jsxs("button",{onClick:O,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[C.jsx(e1,{className:"w-6 h-6 mr-3"}),"Process ",r.length," Invoice(s)"]}),u&&C.jsx(d1,{}),!u&&(f||te)&&C.jsxs("div",{className:"w-full text-center p-4 bg-red-50 text-red-700 rounded-lg",children:[C.jsxs("div",{className:"flex items-center justify-center mb-2",children:[C.jsx(YA,{className:"h-6 w-6 mr-2"}),C.jsx("span",{className:"font-semibold",children:"Processing Failed"})]}),C.jsx("span",{className:"text-sm",children:f||te}),te&&C.jsx("button",{onClick:I,className:"mt-3 px-4 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md shadow-sm",children:"Upgrade Plan"})]})]})]}),a&&k&&C.jsxs("div",{children:[C.jsxs("div",{className:"p-4 bg-green-50 text-green-800 rounded-lg mb-6 flex flex-wrap justify-between items-center gap-4",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-semibold",children:"Processing Complete"}),C.jsxs("p",{className:"text-sm",children:["Found ",a.length," items across ",R.length," invoice(s)."]})]}),a.length>0&&C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsxs("button",{onClick:()=>P(!0),className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:[C.jsx(r1,{className:"w-4 h-4 mr-2"})," Configure Export"]}),C.jsxs("button",{onClick:Ee,className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-500",children:[C.jsx(QA,{className:"w-4 h-4 mr-2"})," Download as CSV"]}),C.jsxs("button",{onClick:be,className:"flex-shrink-0 flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600",children:[C.jsx(n1,{className:"w-4 h-4 mr-2"})," Export Aggregated (Excel)"]})]})]}),C.jsx("div",{className:"border-b border-slate-200",children:C.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:R.map($=>C.jsx("button",{onClick:()=>V($),className:`${$===k?"border-indigo-500 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm`,children:$},$))})}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("h3",{className:"font-semibold text-slate-800",children:"Invoice Preview"}),D?C.jsx("div",{className:"border rounded-lg overflow-hidden",children:C.jsx(h1,{imageUrl:D,highlightedItem:J})}):C.jsx("div",{className:"aspect-video bg-slate-100 rounded-lg flex items-center justify-center",children:C.jsx("p",{className:"text-slate-500",children:"No image preview available."})})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("h3",{className:"font-semibold text-slate-800",children:"Extracted Data (Editable)"}),C.jsx(f1,{data:M[k]||[],onRowHover:B,onUpdateItem:h,productList:y})]})]}),C.jsx("div",{className:"mt-8 text-center",children:C.jsxs("button",{onClick:i,className:"flex items-center justify-center mx-auto px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[C.jsx(Pm,{className:"w-5 h-5 mr-2"})," Process More Invoices"]})})]})]}),C.jsx(p1,{isOpen:ie,onClose:()=>P(!1),config:N,onSave:U,defaultConfig:L})]})},g1=({user:n,selectedWarehouseId:e,handleNomenclatureUpload:t,nomenclature:i,handleFilesInvoicesUpload:r,handleProcessInvoices:a,handleResetInvoices:u,uploadedInvoices:f,invoiceData:d,isLoading:h,error:y,setError:E,handleUpdateInvoiceItem:T,productList:I,currentPlan:N,invoiceCount:U,openPricingModal:L,exportConfig:H,handleExportConfigSave:J,DEFAULT_EXPORT_CONFIG:B})=>C.jsx("main",{className:"container mx-auto p-4 md:p-8",children:C.jsx("div",{className:"max-w-4xl mx-auto space-y-12",children:e?C.jsxs(C.Fragment,{children:[C.jsx(c1,{onNomenclatureUpload:t,existingNomenclature:i},`${n.id}-${e}`),C.jsx(m1,{nomenclatureLoaded:i.length>0,onFilesUpload:r,onProcessInvoices:a,onReset:u,uploadedFiles:f,invoiceData:d,isLoading:h,error:y,setError:E,onUpdateItem:T,productList:I,plan:N,invoiceCount:U,onUpgrade:L,exportConfig:H,onExportConfigChange:J,defaultExportConfig:B})]}):C.jsxs("div",{className:"text-center bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[C.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"No Warehouse Selected"}),C.jsx("p",{className:"text-slate-500 mt-2",children:"Please select a company and a warehouse to begin."})]})})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let y1,_1;function v1(){return{geminiUrl:y1,vertexUrl:_1}}function E1(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=v1();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bs{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const d=n[f];if(Array.isArray(t))for(let h=0;h<d.length;h++){const y=d[h];g(y,e.slice(a+1),t[h])}else for(const h of d)g(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const d=n[f];g(d[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>p(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function T1(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){f=d;break}if(f!==-1&&a.length>f)for(let d=f;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Mm(n,r,a,0,u)}}function Mm(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const d of f[u])Mm(d,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),d={};for(const h of f)d[h]=u[h];for(const[h,y]of Object.entries(d)){const E=[];for(const T of t.slice(i))T==="*"?E.push(h):E.push(T);g(u,E,y)}for(const h of f)delete u[h]}}else{const u=n;a in u&&Mm(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S1(n){const e={},t=p(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function A1(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],w1(u)),e}function C1(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response"]);return u!=null&&g(e,["response"],I1(u)),e}function w1(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>x1(u))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function I1(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>R1(u))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function x1(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],k1(t)),e}function R1(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],L1(t)),e}function N1(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function b1(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function P1(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response"]);return u!=null&&g(e,["response"],M1(u)),e}function M1(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function WA(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response"]);return u!=null&&g(e,["response"],D1(u)),e}function D1(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function k1(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Sg(i));const r=p(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function L1(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Sg(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vT||(vT={}));var ET;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ET||(ET={}));var TT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(TT||(TT={}));var Yt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Yt||(Yt={}));var ST;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ST||(ST={}));var AT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(AT||(AT={}));var CT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(CT||(CT={}));var wT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(wT||(wT={}));var IT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(IT||(IT={}));var xT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xT||(xT={}));var RT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(RT||(RT={}));var NT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(NT||(NT={}));var bT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bT||(bT={}));var PT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(PT||(PT={}));var MT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(MT||(MT={}));var DT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(DT||(DT={}));var kT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(kT||(kT={}));var LT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(LT||(LT={}));var id;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(id||(id={}));var VT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(VT||(VT={}));var UT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(UT||(UT={}));var OT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OT||(OT={}));var Dm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dm||(Dm={}));var FT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(FT||(FT={}));var qT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(qT||(qT={}));var BT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(BT||(BT={}));var HT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(HT||(HT={}));var zT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zT||(zT={}));var GT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(GT||(GT={}));var $T;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($T||($T={}));var KT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(KT||(KT={}));var JT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(JT||(JT={}));var YT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YT||(YT={}));var QT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(QT||(QT={}));var WT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WT||(WT={}));var jT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(jT||(jT={}));var XT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(XT||(XT={}));var ZT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ZT||(ZT={}));var e0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(e0||(e0={}));var t0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(t0||(t0={}));var n0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(n0||(n0={}));var i0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(i0||(i0={}));var s0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(s0||(s0={}));var r0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(r0||(r0={}));var o0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(o0||(o0={}));var a0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(a0||(a0={}));var l0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(l0||(l0={}));var u0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(u0||(u0={}));var c0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(c0||(c0={}));var f0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(f0||(f0={}));var d0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(d0||(d0={}));var h0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(h0||(h0={}));var Ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ta||(Ta={}));class km{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class su{get text(){var e,t,i,r,a,u,f,d;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(d=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&d!==void 0?d:[]){for(const[I,N]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(N!==null||N!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,t,i,r,a,u,f,d;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(d=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&d!==void 0?d:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,a,u,f,d;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,a,u,f,d,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,a,u,f,d,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class p0{}class m0{}class V1{}class U1{}class O1{}class F1{}class g0{}class y0{}class _0{}class q1{}class sd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new sd;let r;const a=e;return t?r=C1(a):r=A1(a),Object.assign(i,r),i}}class v0{}class E0{}class T0{}class B1{}class H1{}class z1{}class Ag{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ag,a=P1(e);return Object.assign(i,a),i}}class G1{}class $1{}class K1{}class S0{}class J1{get text(){var e,t,i;let r="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(f))d!=="text"&&d!=="thought"&&h!==null&&u.push(d);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="inlineData"&&d!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Y1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Cg,a=WA(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jA(n,e){const t=Ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function XA(n){return Array.isArray(n)?n.map(e=>rd(e)):[rd(n)]}function rd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ZA(n){const e=rd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eC(n){const e=rd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function A0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>A0(e)):[A0(n)]}function Lm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function C0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function w0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function fn(n){if(n==null)throw new Error("ContentUnion is required");return Lm(n)?n:{role:"user",parts:tC(n)}}function wg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=fn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=fn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>fn(t)):[fn(e)]}function Zn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(C0(n)||w0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(n)]}const e=[],t=[],i=Lm(n[0]);for(const r of n){const a=Lm(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(C0(r)||w0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:tC(t)}),e}function Q1(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Yt).includes(t[0].toUpperCase())?t[0].toUpperCase():Yt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Yt).includes(i.toUpperCase())?i.toUpperCase():Yt.TYPE_UNSPECIFIED})}}function Sa(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&Q1(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Yt).includes(f.toUpperCase())?f.toUpperCase():Yt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Sa(f);else if(i.includes(u)){const d=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}d.push(Sa(h))}e[u]=d}else if(r.includes(u)){const d={};for(const[h,y]of Object.entries(f))d[h]=Sa(y);e[u]=d}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Ig(n){return Sa(n)}function xg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Rg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ba(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sa(e.response));return n}function Ha(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function W1(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Ps(n,e){if(typeof e!="string")throw new Error("name must be a string");return W1(n,e,"cachedContents")}function nC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Nr(n){return Sg(n)}function j1(n){return n!=null&&typeof n=="object"&&"name"in n}function X1(n){return n!=null&&typeof n=="object"&&"video"in n}function Z1(n){return n!=null&&typeof n=="object"&&"uri"in n}function iC(n){var e;let t;if(j1(n)&&(t=n.name),!(Z1(n)&&(t=n.uri,t===void 0))&&!(X1(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rC(n){for(const e of["models","tunedModels","publisherModels"])if(eP(n,e))return n[e];return[]}function eP(n,e){return n!==null&&typeof n=="object"&&e in n}function tP(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function nP(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=tP(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function oC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function iP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function aC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const d=u.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function za(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(n){const e={},t=p(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>LP(u))),g(e,["inlinedResponses"],a)}const r=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function rP(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=p(n,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function oP(n){const e={},t=p(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hf(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["metadata","state"]);r!=null&&g(e,["state"],lC(r));const a=p(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=p(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const f=p(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const d=p(n,["metadata","model"]);d!=null&&g(e,["model"],d);const h=p(n,["metadata","output"]);return h!=null&&g(e,["dest"],sP(aC(h))),e}function Vm(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["state"]);r!=null&&g(e,["state"],lC(r));const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["createTime"]);u!=null&&g(e,["createTime"],u);const f=p(n,["startTime"]);f!=null&&g(e,["startTime"],f);const d=p(n,["endTime"]);d!=null&&g(e,["endTime"],d);const h=p(n,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(n,["model"]);y!=null&&g(e,["model"],y);const E=p(n,["inputConfig"]);E!=null&&g(e,["src"],aP(E));const T=p(n,["outputConfig"]);T!=null&&g(e,["dest"],rP(aC(T)));const I=p(n,["completionStats"]);return I!=null&&g(e,["completionStats"],I),e}function aP(n){const e={},t=p(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=p(n,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function lP(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(t,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>kP(n,u))),g(t,["requests","requests"],a)}return t}function uP(n){const e={},t=p(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cP(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function fP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function dP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function hP(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],pP(i));const r=p(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const f=p(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const d=p(n,["index"]);d!=null&&g(e,["index"],d);const h=p(n,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(n,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(I=>I)),g(e,["safetyRatings"],T)}const E=p(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function pP(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function uC(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>HP(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function mP(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function gP(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],oP(iP(r))),t}function I0(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["src"]);r!=null&&g(t,["batch","inputConfig"],lP(n,oC(n,r)));const a=p(e,["config"]);return a!=null&&mP(a,t),t}function yP(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],Ze(n,i));const r=p(e,["src"]);r!=null&&g(t,["inputConfig"],uP(oC(n,r)));const a=p(e,["config"]);return a!=null&&gP(a,t),t}function _P(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function vP(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["src"]);r!=null&&g(t,["batch","inputConfig"],IP(n,r));const a=p(e,["config"]);return a!=null&&_P(a,t),t}function EP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function TP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function SP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function AP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function CP(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=wg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(t,["_self"],wP(r,t)),T1(t,{"requests[].*":"requests[].request.*"})),t}function wP(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function IP(n,e){const t={},i=p(e,["fileName"]);i!=null&&g(t,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&g(t,["requests"],CP(n,r)),t}function xP(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function RP(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],uC(fn(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const f=p(e,["topK"]);f!=null&&g(i,["topK"],f);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Ig(H));const J=p(e,["responseJsonSchema"]);if(J!=null&&g(i,["responseJsonSchema"],J),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(t!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(D=>zP(D))),g(t,["safetySettings"],O)}const te=p(e,["tools"]);if(t!==void 0&&te!=null){let O=Ha(te);Array.isArray(O)&&(O=O.map(D=>GP(Ba(D)))),g(t,["tools"],O)}const ue=p(e,["toolConfig"]);if(t!==void 0&&ue!=null&&g(t,["toolConfig"],ue),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=p(e,["cachedContent"]);t!==void 0&&ie!=null&&g(t,["cachedContent"],Ps(n,ie));const P=p(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],xg(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=p(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const V=p(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function NP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>hP(h))),g(e,["candidates"],d)}const r=p(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(n,["responseId"]);u!=null&&g(e,["responseId"],u);const f=p(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function bP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function PP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function MP(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function DP(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function kP(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["request","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let f=Zn(r);Array.isArray(f)&&(f=f.map(d=>uC(d))),g(t,["request","contents"],f)}const a=p(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=p(e,["config"]);return u!=null&&g(t,["request","generationConfig"],RP(n,u,p(t,["request"],{}))),t}function LP(n){const e={},t=p(n,["response"]);t!=null&&g(e,["response"],NP(t));const i=p(n,["error"]);return i!=null&&g(e,["error"],i),e}function VP(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function UP(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function OP(n){const e={},t=p(n,["config"]);return t!=null&&VP(t,e),e}function FP(n){const e={},t=p(n,["config"]);return t!=null&&UP(t,e),e}function qP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Hf(u))),g(e,["batchJobs"],a)}return e}function BP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Vm(u))),g(e,["batchJobs"],a)}return e}function HP(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],xP(a));const u=p(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],cP(f));const d=p(n,["text"]);d!=null&&g(e,["text"],d);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function zP(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function GP(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],MP(f));const d=p(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],DP(d));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class So{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $P extends bs{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new So(Cs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=I0(this.apiClient,e),i=t._url,r=pe("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,d=f.requests,h=[];for(const y of d){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}h.push(E)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=yP(this.apiClient,e);return f=pe("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Vm(y))}else{const h=I0(this.apiClient,e);return f=pe("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Hf(y))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=vP(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Hf(d))}}async get(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=PP(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Vm(y))}else{const h=bP(this.apiClient,e);return f=pe("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Hf(y))}}async cancel(e){var t,i,r,a;let u="",f={};if(this.apiClient.isVertexAI()){const d=dP(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=fP(this.apiClient,e);u=pe("batches/{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=FP(e);return f=pe("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=BP(y),T=new S0;return Object.assign(T,E),T})}else{const h=OP(e);return f=pe("batches",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=qP(y),T=new S0;return Object.assign(T,E),T})}}async delete(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=TP(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>AP(y))}else{const h=EP(this.apiClient,e);return f=pe("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>SP(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KP(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function x0(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>hM(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function JP(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let y=Zn(u);Array.isArray(y)&&(y=y.map(E=>x0(E))),g(e,["contents"],y)}const f=p(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],x0(fn(f)));const d=p(n,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>pM(E))),g(e,["tools"],y)}const h=p(n,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function YP(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let E=Zn(u);Array.isArray(E)&&(E=E.map(T=>T)),g(e,["contents"],E)}const f=p(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],fn(f));const d=p(n,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>mM(T))),g(e,["tools"],E)}const h=p(n,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(n,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),t}function QP(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],jA(n,i));const r=p(e,["config"]);return r!=null&&JP(r,t),t}function WP(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],jA(n,i));const r=p(e,["config"]);return r!=null&&YP(r,t),t}function jP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Ps(n,i)),t}function XP(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Ps(n,i)),t}function ZP(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function eM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function tM(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function nM(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const f=p(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function iM(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Ps(n,i)),t}function sM(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Ps(n,i)),t}function rM(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function oM(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function aM(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function lM(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function uM(n){const e={},t=p(n,["config"]);return t!=null&&aM(t,e),e}function cM(n){const e={},t=p(n,["config"]);return t!=null&&lM(t,e),e}function fM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function dM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function hM(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],tM(a));const u=p(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],KP(f));const d=p(n,["text"]);d!=null&&g(e,["text"],d);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function pM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],rM(f));const d=p(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],oM(d));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function mM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>nM(T))),g(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const f=p(n,["enterpriseWebSearch"]);f!=null&&g(e,["enterpriseWebSearch"],f);const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function gM(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function yM(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function _M(n,e){const t={},i=p(e,["name"]);i!=null&&g(t,["_url","name"],Ps(n,i));const r=p(e,["config"]);return r!=null&&gM(r,t),t}function vM(n,e){const t={},i=p(e,["name"]);i!=null&&g(t,["_url","name"],Ps(n,i));const r=p(e,["config"]);return r!=null&&yM(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EM extends bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new So(Cs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=WP(this.apiClient,e);return f=pe("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=QP(this.apiClient,e);return f=pe("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=sM(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=iM(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=XP(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=eM(y),T=new E0;return Object.assign(T,E),T})}else{const h=jP(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=ZP(y),T=new E0;return Object.assign(T,E),T})}}async update(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=_M(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=cM(e);return f=pe("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=dM(y),T=new T0;return Object.assign(T,E),T})}else{const h=uM(e);return f=pe("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=fM(y),T=new T0;return Object.assign(T,E),T})}}}function R0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ht(n){return this instanceof ht?(this.v=n,this):new ht(n)}function Aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(I){return function(N){return Promise.resolve(N).then(I,E)}}function f(I,N){i[I]&&(r[I]=function(U){return new Promise(function(L,H){a.push([I,U,L,H])>1||d(I,U)})},N&&(r[I]=N(r[I])))}function d(I,N){try{h(i[I](N))}catch(U){T(a[0][3],U)}}function h(I){I.value instanceof ht?Promise.resolve(I.value.v).then(y,E):T(a[0][2],I)}function y(I){d("next",I)}function E(I){d("throw",I)}function T(I,N){I(N),a.shift(),a.length&&d(a[0][0],a[0][1])}}function mu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R0=="function"?R0(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,d){u=n[a](u),r(f,d,u.done,u.value)})}}function r(a,u,f,d){Promise.resolve(d).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TM(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:cC(t)}function cC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function SM(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function N0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!cC(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class AM{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new CM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class CM{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),SM(a)}async sendMessage(e){var t;await this.sendPromise;const i=fn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const d=await r,h=(u=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,y=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(f=y.slice(E))!==null&&f!==void 0?f:[]);const I=h?[h]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=fn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?N0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return Aa(this,arguments,function*(){var u,f,d,h;const y=[];try{for(var E=!0,T=mu(e),I;I=yield ht(T.next()),u=I.done,!u;E=!0){h=I.value,E=!1;const N=h;if(TM(N)){const U=(r=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;U!==void 0&&y.push(U)}yield yield ht(N)}}catch(N){f={error:N}}finally{try{!E&&!u&&(d=T.return)&&(yield ht(d.call(T)))}finally{if(f)throw f.error}}this.recordHistory(t,y)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...N0(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(n){const e={},t=p(n,["file"]);return t!=null&&g(e,["file"],t),e}function IM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xM(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],iC(t)),e}function RM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function NM(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],iC(t)),e}function bM(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function PM(n){const e={},t=p(n,["config"]);return t!=null&&bM(t,e),e}function MM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DM extends bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new So(Cs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PM(e);return a=pe("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>{const h=MM(d),y=new G1;return Object.assign(y,h),y})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wM(e);return a=pe("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=IM(d),y=new $1;return Object.assign(y,h),y})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NM(e);return a=pe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xM(e);return a=pe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>{const h=RM(d),y=new K1;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zf(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function kM(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>QM(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function LM(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function VM(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const f=p(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function UM(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const f=p(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const d=p(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(n,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const I=p(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const N=p(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const U=p(n,["responseSchema"]);U!=null&&g(e,["responseSchema"],U);const L=p(n,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const H=p(n,["seed"]);H!=null&&g(e,["seed"],H);const J=p(n,["speechConfig"]);J!=null&&g(e,["speechConfig"],fC(J));const B=p(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const te=p(n,["temperature"]);te!=null&&g(e,["temperature"],te);const ue=p(n,["thinkingConfig"]);ue!=null&&g(e,["thinkingConfig"],ue);const ie=p(n,["topK"]);ie!=null&&g(e,["topK"],ie);const P=p(n,["topP"]);if(P!=null&&g(e,["topP"],P),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OM(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function FM(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function qM(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=p(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const d=p(n,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Rg(E));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],kM(fn(N)));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ie=Ha(U);Array.isArray(ie)&&(ie=ie.map(P=>jM(Ba(P)))),g(e,["setup","tools"],ie)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],WM(L));const H=p(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const J=p(n,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const te=p(n,["contextWindowCompression"]);e!==void 0&&te!=null&&g(e,["setup","contextWindowCompression"],te);const ue=p(n,["proactivity"]);return e!==void 0&&ue!=null&&g(e,["setup","proactivity"],ue),t}function BM(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],UM(i));const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=p(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const d=p(n,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],fC(Rg(E)));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],fn(N));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ie=Ha(U);Array.isArray(ie)&&(ie=ie.map(P=>XM(Ba(P)))),g(e,["setup","tools"],ie)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],L);const H=p(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const J=p(n,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const te=p(n,["contextWindowCompression"]);e!==void 0&&te!=null&&g(e,["setup","contextWindowCompression"],te);const ue=p(n,["proactivity"]);return e!==void 0&&ue!=null&&g(e,["setup","proactivity"],ue),t}function HM(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],Ze(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],qM(r,t)),t}function zM(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],Ze(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],BM(r,t)),t}function GM(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function $M(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function KM(n){const e={},t=p(n,["media"]);if(t!=null){let h=XA(t);Array.isArray(h)&&(h=h.map(y=>zf(y))),g(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&g(e,["audio"],zf(eC(i)));const r=p(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&g(e,["video"],zf(ZA(a)));const u=p(n,["text"]);u!=null&&g(e,["text"],u);const f=p(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const d=p(n,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function JM(n){const e={},t=p(n,["media"]);if(t!=null){let h=XA(t);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&g(e,["audio"],eC(i));const r=p(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&g(e,["video"],ZA(a));const u=p(n,["text"]);u!=null&&g(e,["text"],u);const f=p(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const d=p(n,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function YM(n){const e={},t=p(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=p(n,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=p(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],ZM(u));const f=p(n,["goAway"]);f!=null&&g(e,["goAway"],f);const d=p(n,["sessionResumptionUpdate"]);return d!=null&&g(e,["sessionResumptionUpdate"],d),e}function QM(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],LM(a));const u=p(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],zf(f));const d=p(n,["text"]);d!=null&&g(e,["text"],d);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function WM(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fC(n){const e={},t=p(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=p(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function jM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],OM(f));const d=p(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],FM(d));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function XM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>VM(T))),g(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const f=p(n,["enterpriseWebSearch"]);f!=null&&g(e,["enterpriseWebSearch"],f);const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function ZM(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=p(n,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=p(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const f=p(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const d=p(n,["promptTokensDetails"]);if(d!=null){let I=d;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["promptTokensDetails"],I)}const h=p(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["cacheTokensDetails"],I)}const y=p(n,["candidatesTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["responseTokensDetails"],I)}const E=p(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["toolUsePromptTokensDetails"],I)}const T=p(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eD(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function tD(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],nD(i));const r=p(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const f=p(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const d=p(n,["index"]);d!=null&&g(e,["index"],d);const h=p(n,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(n,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(I=>I)),g(e,["safetyRatings"],T)}const E=p(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function nD(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function iD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let a=Zn(r);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function sD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function rD(n){const e={},t=p(n,["values"]);t!=null&&g(e,["values"],t);const i=p(n,["statistics"]);return i!=null&&g(e,["statistics"],oD(i)),e}function oD(n){const e={},t=p(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=p(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Ld(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>f2(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function aD(n){const e={},t=p(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=p(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function lD(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function uD(n,e){const t={},i=p(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],fn(i));const r=p(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>gC(f))),g(e,["tools"],u)}const a=p(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],XD(a)),t}function cD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(f=>Ld(f))),g(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&lD(a),t}function fD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&uD(a,t),t}function dD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const r=p(n,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function hD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function pD(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],Ze(n,i)),t}function mD(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],Ze(n,i)),t}function gD(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function yD(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function _D(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const d=p(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const I=p(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const N=p(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const U=p(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","compressionQuality"],U);const L=p(n,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const H=p(n,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const J=p(n,["editMode"]);e!==void 0&&J!=null&&g(e,["parameters","editMode"],J);const B=p(n,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),t}function vD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(d=>y2(d))),g(t,["instances[0]","referenceImages"],f)}const u=p(e,["config"]);return u!=null&&_D(u,t),t}function ED(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Vd(a))),g(e,["generatedImages"],r)}return e}function TD(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function SD(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=p(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const f=p(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function AD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let f=wg(n,r);Array.isArray(f)&&(f=f.map(d=>d)),g(t,["requests[]","content"],f)}const a=p(e,["config"]);a!=null&&TD(a,t);const u=p(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Ze(n,u)),t}function CD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let u=wg(n,r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&SD(a,t),t}function wD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const r=p(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function ID(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>rD(u))),g(e,["embeddings"],a)}const r=p(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function xD(n){const e={},t=p(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=p(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function RD(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ND(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&g(e,["response"],u);const f=p(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function bD(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],Ld(fn(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const f=p(e,["topK"]);f!=null&&g(i,["topK"],f);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Ig(H));const J=p(e,["responseJsonSchema"]);if(J!=null&&g(i,["responseJsonSchema"],J),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(t!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(D=>_2(D))),g(t,["safetySettings"],O)}const te=p(e,["tools"]);if(t!==void 0&&te!=null){let O=Ha(te);Array.isArray(O)&&(O=O.map(D=>C2(Ba(D)))),g(t,["tools"],O)}const ue=p(e,["toolConfig"]);if(t!==void 0&&ue!=null&&g(t,["toolConfig"],ue),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=p(e,["cachedContent"]);t!==void 0&&ie!=null&&g(t,["cachedContent"],Ps(n,ie));const P=p(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],xg(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=p(e,["thinkingConfig"]);k!=null&&g(i,["thinkingConfig"],k);const V=p(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function PD(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],fn(r));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const f=p(e,["topK"]);f!=null&&g(i,["topK"],f);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Ig(H));const J=p(e,["responseJsonSchema"]);J!=null&&g(i,["responseJsonSchema"],J);const B=p(e,["routingConfig"]);B!=null&&g(i,["routingConfig"],B);const te=p(e,["modelSelectionConfig"]);te!=null&&g(i,["modelConfig"],te);const ue=p(e,["safetySettings"]);if(t!==void 0&&ue!=null){let $=ue;Array.isArray($)&&($=$.map(le=>le)),g(t,["safetySettings"],$)}const ie=p(e,["tools"]);if(t!==void 0&&ie!=null){let $=Ha(ie);Array.isArray($)&&($=$.map(le=>gC(Ba(le)))),g(t,["tools"],$)}const P=p(e,["toolConfig"]);t!==void 0&&P!=null&&g(t,["toolConfig"],P);const M=p(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const R=p(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Ps(n,R));const k=p(e,["responseModalities"]);k!=null&&g(i,["responseModalities"],k);const V=p(e,["mediaResolution"]);V!=null&&g(i,["mediaResolution"],V);const O=p(e,["speechConfig"]);O!=null&&g(i,["speechConfig"],mC(xg(O)));const D=p(e,["audioTimestamp"]);D!=null&&g(i,["audioTimestamp"],D);const Ee=p(e,["thinkingConfig"]);Ee!=null&&g(i,["thinkingConfig"],Ee);const be=p(e,["imageConfig"]);return be!=null&&g(i,["imageConfig"],be),i}function b0(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(f=>Ld(f))),g(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],bD(n,a,t)),t}function P0(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],PD(n,a,t)),t}function M0(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>tD(h))),g(e,["candidates"],d)}const r=p(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(n,["responseId"]);u!=null&&g(e,["responseId"],u);const f=p(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function D0(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const r=p(n,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=p(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const f=p(n,["responseId"]);f!=null&&g(e,["responseId"],f);const d=p(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function MD(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const d=p(n,["includeSafetyAttributes"]);e!==void 0&&d!=null&&g(e,["parameters","includeSafetyAttributes"],d);const h=p(n,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(n,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const E=p(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const T=p(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=p(n,["imageSize"]);if(e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function DD(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const d=p(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const I=p(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const N=p(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const U=p(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","compressionQuality"],U);const L=p(n,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const H=p(n,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const J=p(n,["imageSize"]);e!==void 0&&J!=null&&g(e,["parameters","sampleImageSize"],J);const B=p(n,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),t}function kD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&MD(a,t),t}function LD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&DD(a,t),t}function VD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>YD(u))),g(e,["generatedImages"],a)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],hC(r)),e}function UD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Vd(u))),g(e,["generatedImages"],a)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],pC(r)),e}function OD(n,e){const t={},i=p(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(n,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=p(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const f=p(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(n,["negativePrompt"]);e!==void 0&&d!=null&&g(e,["parameters","negativePrompt"],d);const h=p(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(n,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Ud(y));const E=p(n,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>U2(I))),g(e,["instances[0]","referenceImages"],T)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function FD(n,e){const t={},i=p(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=p(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const f=p(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const d=p(n,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const h=p(n,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const T=p(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const I=p(n,["enhancePrompt"]);e!==void 0&&I!=null&&g(e,["parameters","enhancePrompt"],I);const N=p(n,["generateAudio"]);e!==void 0&&N!=null&&g(e,["parameters","generateAudio"],N);const U=p(n,["lastFrame"]);e!==void 0&&U!=null&&g(e,["instances[0]","lastFrame"],vi(U));const L=p(n,["referenceImages"]);if(e!==void 0&&L!=null){let B=L;Array.isArray(B)&&(B=B.map(te=>O2(te))),g(e,["instances[0]","referenceImages"],B)}const H=p(n,["mask"]);e!==void 0&&H!=null&&g(e,["instances[0]","mask"],V2(H));const J=p(n,["compressionQuality"]);return e!==void 0&&J!=null&&g(e,["parameters","compressionQuality"],J),t}function qD(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],GD(u)),e}function BD(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response"]);return u!=null&&g(e,["response"],$D(u)),e}function HD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ud(a));const u=p(e,["video"]);u!=null&&g(t,["instances[0]","video"],yC(u));const f=p(e,["source"]);f!=null&&KD(f,t);const d=p(e,["config"]);return d!=null&&OD(d,t),t}function zD(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],vi(a));const u=p(e,["video"]);u!=null&&g(t,["instances[0]","video"],_C(u));const f=p(e,["source"]);f!=null&&JD(f,t);const d=p(e,["config"]);return d!=null&&FD(d,t),t}function GD(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>WD(u))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function $D(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>jD(u))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function KD(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],Ud(r));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],yC(a)),t}function JD(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],vi(r));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],_C(a)),t}function YD(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],i2(t));const i=p(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(n,["_self"]);return r!=null&&g(e,["safetyAttributes"],hC(r)),e}function Vd(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],dC(t));const i=p(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(n,["_self"]);r!=null&&g(e,["safetyAttributes"],pC(r));const a=p(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function QD(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["mask"],dC(t));const i=p(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function WD(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],k2(t)),e}function jD(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],L2(t)),e}function XD(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const f=p(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const d=p(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(n,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const I=p(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const N=p(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const U=p(n,["responseSchema"]);U!=null&&g(e,["responseSchema"],U);const L=p(n,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const H=p(n,["seed"]);H!=null&&g(e,["seed"],H);const J=p(n,["speechConfig"]);J!=null&&g(e,["speechConfig"],mC(J));const B=p(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const te=p(n,["temperature"]);te!=null&&g(e,["temperature"],te);const ue=p(n,["thinkingConfig"]);ue!=null&&g(e,["thinkingConfig"],ue);const ie=p(n,["topK"]);ie!=null&&g(e,["topK"],ie);const P=p(n,["topP"]);if(P!=null&&g(e,["topP"],P),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZD(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],Ze(n,i)),t}function e2(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],Ze(n,i)),t}function t2(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function n2(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function i2(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Nr(t));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function dC(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Nr(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Ud(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Nr(t));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vi(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Nr(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function s2(n,e,t){const i={},r=p(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=p(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const f=p(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],sC(n,f)),i}function r2(n,e,t){const i={},r=p(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=p(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const f=p(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],sC(n,f)),i}function o2(n,e){const t={},i=p(e,["config"]);return i!=null&&s2(n,i,t),t}function a2(n,e){const t={},i=p(e,["config"]);return i!=null&&r2(n,i,t),t}function l2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["_self"]);if(r!=null){let a=rC(r);Array.isArray(a)&&(a=a.map(u=>Um(u))),g(e,["models"],a)}return e}function u2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["_self"]);if(r!=null){let a=rC(r);Array.isArray(a)&&(a=a.map(u=>Om(u))),g(e,["models"],a)}return e}function c2(n){const e={},t=p(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=p(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const r=p(n,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function Um(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);r!=null&&g(e,["description"],r);const a=p(n,["version"]);a!=null&&g(e,["version"],a);const u=p(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],w2(u));const f=p(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const d=p(n,["outputTokenLimit"]);d!=null&&g(e,["outputTokenLimit"],d);const h=p(n,["supportedGenerationMethods"]);h!=null&&g(e,["supportedActions"],h);const y=p(n,["temperature"]);y!=null&&g(e,["temperature"],y);const E=p(n,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const T=p(n,["topP"]);T!=null&&g(e,["topP"],T);const I=p(n,["topK"]);I!=null&&g(e,["topK"],I);const N=p(n,["thinking"]);return N!=null&&g(e,["thinking"],N),e}function Om(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);r!=null&&g(e,["description"],r);const a=p(n,["versionId"]);a!=null&&g(e,["version"],a);const u=p(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>xD(T))),g(e,["endpoints"],E)}const f=p(n,["labels"]);f!=null&&g(e,["labels"],f);const d=p(n,["_self"]);d!=null&&g(e,["tunedModelInfo"],I2(d));const h=p(n,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(n,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(T=>T)),g(e,["checkpoints"],E)}return e}function f2(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],RD(a));const u=p(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],eD(f));const d=p(n,["text"]);d!=null&&g(e,["text"],d);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function d2(n){const e={},t=p(n,["productImage"]);return t!=null&&g(e,["image"],vi(t)),e}function h2(n,e){const t={},i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=p(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const f=p(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const d=p(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=p(n,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(n,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const E=p(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const T=p(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const I=p(n,["labels"]);return e!==void 0&&I!=null&&g(e,["labels"],I),t}function p2(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["source"]);r!=null&&g2(r,t);const a=p(e,["config"]);return a!=null&&h2(a,t),t}function m2(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Vd(r))),g(e,["generatedImages"],i)}return e}function g2(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],vi(r));const a=p(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>d2(f))),g(e,["instances[0]","productImages"],u)}return t}function y2(n){const e={},t=p(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],vi(t));const i=p(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const r=p(n,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],c2(a));const u=p(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],aD(u));const f=p(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const d=p(n,["subjectImageConfig"]);return d!=null&&g(e,["subjectImageConfig"],d),e}function hC(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function pC(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function _2(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function v2(n){const e={},t=p(n,["image"]);return t!=null&&g(e,["image"],vi(t)),e}function E2(n,e){const t={},i=p(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const r=p(n,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=p(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const f=p(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const d=p(n,["labels"]);return e!==void 0&&d!=null&&g(e,["labels"],d),t}function T2(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["source"]);r!=null&&A2(r,t);const a=p(e,["config"]);return a!=null&&E2(a,t),t}function S2(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>QD(r))),g(e,["generatedMasks"],i)}return e}function A2(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],vi(r));const a=p(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],v2(a)),t}function mC(n){const e={},t=p(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=p(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function C2(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],t2(f));const d=p(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],n2(d));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function gC(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>ND(T))),g(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const f=p(n,["enterpriseWebSearch"]);f!=null&&g(e,["enterpriseWebSearch"],f);const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function w2(n){const e={},t=p(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function I2(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function x2(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function R2(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function N2(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","name"],Ze(n,i));const r=p(e,["config"]);return r!=null&&x2(r,t),t}function b2(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["config"]);return r!=null&&R2(r,t),t}function P2(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=p(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const f=p(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const d=p(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","compressionQuality"],d);const h=p(n,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=p(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const I=p(n,["mode"]);return e!==void 0&&I!=null&&g(e,["parameters","mode"],I),t}function M2(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],Ze(n,i));const r=p(e,["image"]);r!=null&&g(t,["instances[0]","image"],vi(r));const a=p(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&P2(u,t),t}function D2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Vd(a))),g(e,["generatedImages"],r)}return e}function k2(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Nr(i));const r=p(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function L2(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Nr(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function V2(n){const e={},t=p(n,["image"]);t!=null&&g(e,["_self"],vi(t));const i=p(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function U2(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],Ud(t));const i=p(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function O2(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],vi(t));const i=p(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function yC(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Nr(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function _C(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Nr(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F2="Content-Type",q2="X-Server-Timeout",B2="User-Agent",Fm="x-goog-api-client",H2="1.29.1",z2=`google-genai-sdk/${H2}`,G2="v1beta1",$2="v1beta",k0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class K2{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:G2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:$2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&J2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await L0(r),new km(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await L0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Aa(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:d}=yield ht(r.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),I=T.status,N=T.code,U=`got status: ${I}. ${JSON.stringify(E)}`;if(N>=400&&N<600)throw new kd({message:U,status:N})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let y=u.match(k0);for(;y;){const E=y[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ht(new km(T)),u=u.slice(y[0].length),y=u.match(k0)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=z2+" "+this.clientOptions.userAgentExtra;return e[B2]=t,e[Fm]=t,e[F2]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(q2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const d={file:r},h=this.getFileName(e),y=pe("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,d,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,f,d,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var f;let d={};u?d=u:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function L0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new kd({message:r,status:t}):new Error(r)}}function J2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d)){const h=u[d],y=f[d];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?f[d]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),f[d]=h)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y2="mcp_used/unknown";let Q2=!1;function vC(n){for(const e of n)if(W2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Q2}function EC(n){var e;const t=(e=n[Fm])!==null&&e!==void 0?e:"";n[Fm]=(t+` ${Y2}`).trimStart()}function W2(n){return n!==null&&typeof n=="object"&&n instanceof Ng}function j2(n,e=100){return Aa(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield ht(n.listTools({cursor:i}));for(const u of a.tools)yield yield ht(u),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class Ng{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ng(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const y of this.mcpClients)try{for(var f=!0,d=(t=void 0,mu(j2(y))),h;h=await d.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const E=r;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){t={error:E}}finally{try{!f&&!e&&(i=d.return)&&await i.call(d)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),nP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function X2(n,e,t){const i=new Y1;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class Z2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=nk(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const y=new Promise(B=>{h=B}),E=e.callbacks,T=function(){h({})},I=this.apiClient,N={onopen:T,onmessage:B=>{X2(I,E.onmessage,B)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(B){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(B){}},U=this.webSocketFactory.create(d,tk(u),N);U.connect(),await y;const J={setup:{model:Ze(this.apiClient,e.model)}};return U.send(JSON.stringify(J)),new ek(U,this.apiClient)}}class ek{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$M(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=GM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ta.PLAY)}pause(){this.sendPlaybackControl(Ta.PAUSE)}stop(){this.sendPlaybackControl(Ta.STOP)}resetContext(){this.sendPlaybackControl(Ta.RESET_CONTEXT)}close(){this.conn.close()}}function tk(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function nk(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ik="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sk(n,e,t){const i=new J1;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=YM(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class rk{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Z2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&vC(e.config.tools)&&EC(E);const T=uk(E);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",V="access_token"),y=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${k}?${V}=${R}`}let I=()=>{};const N=new Promise(R=>{I=R}),U=e.callbacks,L=function(){var R;(R=U==null?void 0:U.onopen)===null||R===void 0||R.call(U),I({})},H=this.apiClient,J={onopen:L,onmessage:R=>{sk(H,U.onmessage,R)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(R){}},B=this.webSocketFactory.create(y,lk(T),J);B.connect(),await N;let te=Ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&te.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();te=`projects/${R}/locations/${k}/`+te}let ue={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[id.AUDIO]}:e.config.responseModalities=[id.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],P=[];for(const R of ie)if(this.isCallableTool(R)){const k=R;P.push(await k.tool())}else P.push(R);P.length>0&&(e.config.tools=P);const M={model:te,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ue=zM(this.apiClient,M):ue=HM(this.apiClient,M),delete ue.config,B.send(JSON.stringify(ue)),new ak(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ok={turnComplete:!0};class ak{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Zn(t.turns),e.isVertexAI()||(i=i.map(r=>Ld(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(ik)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},ok),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:JM(e)}:t={realtimeInput:KM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function lk(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function uk(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V0=10;function U0(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ca(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ca(n){return"callTool"in n&&typeof n.callTool=="function"}function ck(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Ca(r)))!==null&&i!==void 0?i:!1}function O0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Ca(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function F0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fk extends bs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,u,f;const d=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!ck(t)||U0(t.config))return await this.generateContentInternal(d);const h=O0(t);if(h.length>0){const U=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let y,E;const T=Zn(d.contents),I=(a=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:V0;let N=0;for(;N<I&&(y=await this.generateContentInternal(d),!(!y.functionCalls||y.functionCalls.length===0));){const U=y.candidates[0].content,L=[];for(const H of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ca(H)){const B=await H.callTool(y.functionCalls);L.push(...B)}N++,E={role:"user",parts:L},d.contents=Zn(d.contents),d.contents.push(U),d.contents.push(E),F0(d.config)&&(T.push(U),T.push(E))}return F0(d.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),U0(t.config)){const r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}const i=O0(t);if(i.length>0){const r=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:u.push(d);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new So(Cs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,f,d;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((d=(f=t.source)===null||f===void 0?void 0:f.video)===null||d===void 0)&&d.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async d=>Ca(d)?await d.tool():d)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&vC(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),EC(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ca(u)){const f=u,d=await f.tool();for(const h of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:V0;let u=!1,f=0;const d=await this.initAfcToolsMap(e);return(function(h,y,E){var T,I;return Aa(this,arguments,function*(){for(var N,U,L,H;f<a;){u&&(f++,u=!1);const ue=yield ht(h.processParamsMaybeAddMcpUsage(E)),ie=yield ht(h.generateContentStreamInternal(ue)),P=[],M=[];try{for(var J=!0,B=(U=void 0,mu(ie)),te;te=yield ht(B.next()),N=te.done,!N;J=!0){H=te.value,J=!1;const R=H;if(yield yield ht(R),R.candidates&&(!((T=R.candidates[0])===null||T===void 0)&&T.content)){M.push(R.candidates[0].content);for(const k of(I=R.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(f<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(k.functionCall.name)){const V=yield ht(y.get(k.functionCall.name).callTool([k.functionCall]));P.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){U={error:R}}finally{try{!J&&!N&&(L=B.return)&&(yield ht(L.call(B)))}finally{if(U)throw U.error}}if(P.length>0){u=!0;const R=new su;R.candidates=[{content:{role:"user",parts:P}}],yield yield ht(R);const k=[];k.push(...M),k.push({role:"user",parts:P});const V=Zn(E.contents).concat(k);E.contents=V}else break}})})(this,d,e)}async generateContentInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=P0(this.apiClient,e);return f=pe("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=D0(y),T=new su;return Object.assign(T,E),T})}else{const h=b0(this.apiClient,e);return f=pe("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=M0(y),T=new su;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=P0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Aa(this,arguments,function*(){var T,I,N,U;try{for(var L=!0,H=mu(E),J;J=yield ht(H.next()),T=J.done,!T;L=!0){U=J.value,L=!1;const B=U,te=D0(yield ht(B.json()));te.sdkHttpResponse={headers:B.headers};const ue=new su;Object.assign(ue,te),yield yield ht(ue)}}catch(B){I={error:B}}finally{try{!L&&!T&&(N=H.return)&&(yield ht(N.call(H)))}finally{if(I)throw I.error}}})})}else{const h=b0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Aa(this,arguments,function*(){var T,I,N,U;try{for(var L=!0,H=mu(E),J;J=yield ht(H.next()),T=J.done,!T;L=!0){U=J.value,L=!1;const B=U,te=M0(yield ht(B.json()));te.sdkHttpResponse={headers:B.headers};const ue=new su;Object.assign(ue,te),yield yield ht(ue)}}catch(B){I={error:B}}finally{try{!L&&!T&&(N=H.return)&&(yield ht(N.call(H)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=CD(this.apiClient,e);return f=pe("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=ID(y),T=new p0;return Object.assign(T,E),T})}else{const h=AD(this.apiClient,e);return f=pe("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=wD(y),T=new p0;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=LD(this.apiClient,e);return f=pe("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=UD(y),T=new m0;return Object.assign(T,E),T})}else{const h=kD(this.apiClient,e);return f=pe("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=VD(y),T=new m0;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=vD(this.apiClient,e);return a=pe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>{const h=ED(d),y=new V1;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=M2(this.apiClient,e);return a=pe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>{const h=D2(d),y=new U1;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=p2(this.apiClient,e);return a=pe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=m2(d),y=new O1;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=T2(this.apiClient,e);return a=pe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=S2(d),y=new F1;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=e2(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Om(y))}else{const h=ZD(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Um(y))}}async listInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=a2(this.apiClient,e);return f=pe("{models_url}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=u2(y),T=new g0;return Object.assign(T,E),T})}else{const h=o2(this.apiClient,e);return f=pe("{models_url}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=l2(y),T=new g0;return Object.assign(T,E),T})}}async update(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=b2(this.apiClient,e);return f=pe("{model}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Om(y))}else{const h=N2(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Um(y))}}async delete(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=mD(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=yD(y),T=new y0;return Object.assign(T,E),T})}else{const h=pD(this.apiClient,e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=gD(y),T=new y0;return Object.assign(T,E),T})}}async countTokens(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=fD(this.apiClient,e);return f=pe("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=hD(y),T=new _0;return Object.assign(T,E),T})}else{const h=cD(this.apiClient,e);return f=pe("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=dD(y),T=new _0;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=iD(this.apiClient,e);return a=pe("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>{const h=sD(d),y=new q1;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=zD(this.apiClient,e);return f=pe("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const E=BD(y),T=new sd;return Object.assign(T,E),T})}else{const h=HD(this.apiClient,e);return f=pe("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>{const E=qD(y),T=new sd;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dk extends bs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=b1(e);return f=pe("{operationName}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u}else{const h=N1(e);return f=pe("{operationName}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=S1(e);return a=pe("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hk(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pk(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>Sk(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function mk(n,e,t){const i={},r=p(e,["expireTime"]);t!==void 0&&r!=null&&g(t,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=p(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const f=p(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],Tk(n,f));const d=p(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&g(t,["fieldMask"],d),i}function gk(n,e){const t={},i=p(e,["config"]);return i!=null&&g(t,["config"],mk(n,i,t)),t}function yk(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function _k(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function vk(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Ek(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=p(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const d=p(n,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Rg(E));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],pk(fn(N)));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ie=Ha(U);Array.isArray(ie)&&(ie=ie.map(P=>Ck(Ba(P)))),g(e,["setup","tools"],ie)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],Ak(L));const H=p(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const J=p(n,["outputAudioTranscription"]);e!==void 0&&J!=null&&g(e,["setup","outputAudioTranscription"],J);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const te=p(n,["contextWindowCompression"]);e!==void 0&&te!=null&&g(e,["setup","contextWindowCompression"],te);const ue=p(n,["proactivity"]);return e!==void 0&&ue!=null&&g(e,["setup","proactivity"],ue),t}function Tk(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],Ze(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],Ek(r,t)),t}function Sk(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],yk(a));const u=p(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],hk(f));const d=p(n,["text"]);d!=null&&g(e,["text"],d);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Ak(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ck(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],_k(f));const d=p(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],vk(d));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wk(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function Ik(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=wk(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),f.length>0&&d.push(...f),d.length>0?n.fieldMask=d.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class xk extends bs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=gk(this.apiClient,e);a=pe("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const d=Ik(f,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function Nk(n){const e={},t=p(n,["config"]);return t!=null&&Rk(t,e),e}function bk(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function Pk(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&bk(i,e),e}function Mk(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function Dk(n,e){const t={},i=p(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const r=p(n,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),t}function kk(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const u=p(n,["response"]);return u!=null&&g(e,["response"],Vk(u)),e}function Lk(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=p(n,["fileName"]);i!=null&&g(e,["fileName"],i);const r=p(n,["config"]);return r!=null&&Dk(r,e),e}function Vk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function Uk(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function Ok(n){const e={},t=p(n,["config"]);return t!=null&&Uk(t,e),e}function Fk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function qk(n,e){const t={},i=p(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=p(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(d=>d)),g(e,["customMetadata"],f)}const u=p(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function Bk(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=p(n,["config"]);return i!=null&&qk(i,e),e}function Hk(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zk(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function Gk(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&zk(i,e),e}function $k(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function Kk(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function Jk(n){const e={},t=p(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=p(n,["config"]);return i!=null&&Kk(i,e),e}function Yk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qk extends bs{constructor(e){super(),this.apiClient=e,this.list=async t=>new So(Cs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$k(e);return a=pe("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gk(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Jk(e);return a=pe("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Yk(d),y=new B1;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wk extends bs{constructor(e,t=new Qk(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new So(Cs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Nk(e);return a=pe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Mk(e);return a=pe("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Pk(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ok(e);return a=pe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Fk(d),y=new H1;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Bk(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=Hk(d),y=new z1;return Object.assign(y,h),y})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Lk(e);return a=pe("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=kk(d),y=new Ag;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jk(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function Xk(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function Zk(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=p(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const d=p(n,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function eL(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=p(n,["validationDataset"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec"],q0(I))}else if(r==="PREFERENCE_TUNING"){const I=p(n,["validationDataset"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec"],q0(I))}const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=p(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const I=p(n,["epochCount"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(f==="PREFERENCE_TUNING"){const I=p(n,["epochCount"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let d=p(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=p(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(d==="PREFERENCE_TUNING"){const I=p(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=p(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=p(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let y=p(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=p(n,["adapterSize"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(y==="PREFERENCE_TUNING"){const I=p(n,["adapterSize"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function tL(n,e){const t={},i=p(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&dL(a);const u=p(n,["config"]);return u!=null&&Zk(u,t),t}function nL(n,e){const t={},i=p(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&hL(a,t,e);const u=p(n,["config"]);return u!=null&&eL(u,t,e),t}function iL(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function sL(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function rL(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function oL(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function aL(n,e){const t={},i=p(n,["config"]);return i!=null&&rL(i,t),t}function lL(n,e){const t={},i=p(n,["config"]);return i!=null&&oL(i,t),t}function uL(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const a=p(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>TC(f))),g(t,["tuningJobs"],u)}return t}function cL(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const a=p(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>qm(f))),g(t,["tuningJobs"],u)}return t}function fL(n,e){const t={},i=p(n,["name"]);i!=null&&g(t,["model"],i);const r=p(n,["name"]);return r!=null&&g(t,["endpoint"],r),t}function dL(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(t,["examples","examples"],r)}return t}function hL(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=p(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=p(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function TC(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["state"]);a!=null&&g(t,["state"],nC(a));const u=p(n,["createTime"]);u!=null&&g(t,["createTime"],u);const f=p(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const d=p(n,["tuningTask","completeTime"]);d!=null&&g(t,["endTime"],d);const h=p(n,["updateTime"]);h!=null&&g(t,["updateTime"],h);const y=p(n,["description"]);y!=null&&g(t,["description"],y);const E=p(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const T=p(n,["_self"]);return T!=null&&g(t,["tunedModel"],fL(T)),t}function qm(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["state"]);a!=null&&g(t,["state"],nC(a));const u=p(n,["createTime"]);u!=null&&g(t,["createTime"],u);const f=p(n,["startTime"]);f!=null&&g(t,["startTime"],f);const d=p(n,["endTime"]);d!=null&&g(t,["endTime"],d);const h=p(n,["updateTime"]);h!=null&&g(t,["updateTime"],h);const y=p(n,["error"]);y!=null&&g(t,["error"],y);const E=p(n,["description"]);E!=null&&g(t,["description"],E);const T=p(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const I=p(n,["tunedModel"]);I!=null&&g(t,["tunedModel"],I);const N=p(n,["preTunedModel"]);N!=null&&g(t,["preTunedModel"],N);const U=p(n,["supervisedTuningSpec"]);U!=null&&g(t,["supervisedTuningSpec"],U);const L=p(n,["preferenceOptimizationSpec"]);L!=null&&g(t,["preferenceOptimizationSpec"],L);const H=p(n,["tuningDataStats"]);H!=null&&g(t,["tuningDataStats"],H);const J=p(n,["encryptionSpec"]);J!=null&&g(t,["encryptionSpec"],J);const B=p(n,["partnerModelTuningSpec"]);B!=null&&g(t,["partnerModelTuningSpec"],B);const te=p(n,["customBaseModel"]);te!=null&&g(t,["customBaseModel"],te);const ue=p(n,["experiment"]);ue!=null&&g(t,["experiment"],ue);const ie=p(n,["labels"]);ie!=null&&g(t,["labels"],ie);const P=p(n,["outputUri"]);P!=null&&g(t,["outputUri"],P);const M=p(n,["pipelineJob"]);M!=null&&g(t,["pipelineJob"],M);const R=p(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const k=p(n,["tunedModelDisplayName"]);k!=null&&g(t,["tunedModelDisplayName"],k);const V=p(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function pL(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=p(n,["done"]);u!=null&&g(t,["done"],u);const f=p(n,["error"]);return f!=null&&g(t,["error"],f),t}function q0(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const r=p(n,["vertexDatasetResource"]);return r!=null&&g(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL extends bs{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new So(Cs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Dm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=sL(e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>qm(y))}else{const h=iL(e);return f=pe("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>TC(y))}}async listInternal(e){var t,i,r,a;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=lL(e);return f=pe("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=cL(y),T=new v0;return Object.assign(T,E),T})}else{const h=aL(e);return f=pe("tunedModels",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=uL(y),T=new v0;return Object.assign(T,E),T})}}async cancel(e){var t,i,r,a;let u="",f={};if(this.apiClient.isVertexAI()){const d=Xk(e);u=pe("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=jk(e);u=pe("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=nL(e,e);return a=pe("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>qm(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tL(e);return a=pe("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),r.then(d=>pL(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yL=1024*1024*8,_L=3,vL=1e3,EL=2,od="x-goog-upload-status";async function TL(n,e,t){var i;const r=await SC(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[od])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function SL(n,e,t){var i;const r=await SC(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[od])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=WA(a),f=new Cg;return Object.assign(f,u),f}async function SC(n,e,t){var i,r;let a=0,u=0,f=new km(new Response),d="upload";for(a=n.size;u<a;){const h=Math.min(yL,a-u),y=n.slice(u,u+h);u+h>=a&&(d+=", finalize");let E=0,T=vL;for(;E<_L&&(f=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[od]));)E++,await CL(T),T=T*EL;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[od])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function AL(n){return{size:n.size,type:n.type}}function CL(n){return new Promise(e=>setTimeout(e,n))}class wL{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TL(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SL(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IL{create(e,t,i){return new xL(e,t,i)}}class xL{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B0="x-goog-api-key";class RL{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(B0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(B0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NL="gl-node/";class bL{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=E1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new RL(this.apiKey);this.apiClient=new K2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:NL+"web",uploader:new wL,downloader:new gL}),this.models=new fk(this.apiClient),this.live=new rk(this.apiClient,r,new IL),this.batches=new $P(this.apiClient),this.chats=new AM(this.models,this.apiClient),this.caches=new EM(this.apiClient),this.files=new DM(this.apiClient),this.operations=new dk(this.apiClient),this.authTokens=new xk(this.apiClient),this.tunings=new mL(this.apiClient),this.fileSearchStores=new Wk(this.apiClient)}}const PL=new bL({apiKey:"AIzaSyA9jbTu-7qhbZbcDGF7vUte5ith4S_bS-Y"}),ML={type:Yt.ARRAY,items:{type:Yt.OBJECT,properties:{matchedProductName:{type:Yt.STRING,description:"The product name from the nomenclature that best matches the original name from the invoice. Set to 'UNKNOWN' if no suitable match is found."},originalName:{type:Yt.STRING,description:"The product name exactly as it appears on the invoice."},quantity:{type:Yt.NUMBER,description:"The quantity of the item listed."},unitPrice:{type:Yt.NUMBER,description:"The price per single unit of the item."},totalPrice:{type:Yt.NUMBER,description:"The total price for the line item (quantity * unit price)."},sku:{type:Yt.STRING,description:"The corresponding SKU from the nomenclature for the matched product. Set to 'UNKNOWN' if no match is found."},totalQuantity:{type:Yt.NUMBER,description:"The total number of individual units if specified (e.g., 10 packs of 12 units = 120). If not specified, this should be the same as 'quantity'."},unitOfMeasure:{type:Yt.STRING,description:"The unit of measurement for the item (e.g., 'kg', 'pcs', 'box')."}},required:["matchedProductName","originalName","quantity","unitPrice","totalPrice","sku","totalQuantity","unitOfMeasure"]}},DL=async(n,e,t)=>{try{const i=`
You are an expert invoice processing AI. Your task is to analyze an invoice image, extract all line items, and match them against a provided product nomenclature.

**Instructions:**
1.  Carefully read the line items from the provided invoice image.
2.  For each line item, use the provided nomenclature data (in CSV format) to find the best match for the product.
3.  If a product from the invoice cannot be confidently matched to an item in the nomenclature, you MUST set 'matchedProductName' and 'sku' to the string 'UNKNOWN'.
4.  Extract the following fields for each line item:
    *   **originalName**: The product name as it appears on the invoice.
    *   **matchedProductName**: The corresponding 'name' from the nomenclature.
    *   **sku**: The corresponding 'sku' from the nomenclature.
    *   **quantity**: The quantity of the item.
    *   **unitPrice**: The price per unit.
    *   **totalPrice**: The total price for the line item.
    *   **totalQuantity**: The absolute total quantity. For example, if the line is "10 boxes of 12 units", quantity is 10 and totalQuantity is 120. If not specified, make it equal to quantity.
    *   **unitOfMeasure**: The unit of measure (e.g., kg, pcs, box).
5.  Return the data as a JSON array of objects, strictly adhering to the provided schema. Do not return anything other than the JSON array.

**Nomenclature Data:**
---
${t}
---
`,a=(await PL.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:i},{inlineData:{mimeType:e,data:n}}]},config:{responseMimeType:"application/json",responseSchema:ML}})).text.trim();if(!a.startsWith("[")||!a.endsWith("]"))throw console.error("Gemini response is not a valid JSON array:",a),new Error("The AI returned data in an unexpected format. Please try again with a clearer image.");return JSON.parse(a)}catch(i){console.error("Error calling Gemini to process invoice:",i);const r=i.message||"An unknown error occurred.";throw r.includes("API key not valid")?new Error("The API key is invalid. Please check your configuration."):new Error(`Failed to process the invoice with AI. Details: ${r}`)}},H0=n=>new Promise((e,t)=>{const i=new FileReader;i.readAsDataURL(n),i.onload=()=>e(i.result),i.onerror=r=>t(r)}),kL=({onSetupComplete:n})=>{const[e,t]=G.useState(""),[i,r]=G.useState(""),[a,u]=G.useState(""),f=d=>{d.preventDefault(),e.trim()&&i.trim()?n(e.trim(),i.trim()):u("Both company and warehouse names are required.")};return C.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center p-4",children:C.jsxs("div",{className:"w-full max-w-md",children:[C.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-slate-200",children:[C.jsx("div",{className:"flex justify-center mb-6",children:C.jsx("div",{className:"bg-indigo-600 p-4 rounded-full text-white",children:C.jsx(Dd,{className:"h-10 w-10"})})}),C.jsx("h1",{className:"text-2xl font-bold text-center text-slate-800",children:"Welcome!"}),C.jsx("p",{className:"text-center text-slate-500 mt-2 mb-6",children:"Let's get started by setting up your first company and warehouse."}),C.jsxs("form",{onSubmit:f,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"company-name",className:"block text-sm font-medium text-slate-700",children:"Company Name"}),C.jsx("input",{id:"company-name",type:"text",value:e,onChange:d=>t(d.target.value),placeholder:"e.g., My Restaurant Group",className:"mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"warehouse-name",className:"block text-sm font-medium text-slate-700",children:"Warehouse / Location Name"}),C.jsx("input",{id:"warehouse-name",type:"text",value:i,onChange:d=>r(d.target.value),placeholder:"e.g., Central Kitchen",className:"mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),a&&C.jsx("p",{className:"text-sm text-red-600",children:a}),C.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Start Processing Invoices"})]})]}),C.jsx("footer",{className:"text-center p-4 text-xs text-slate-400 mt-4",children:C.jsx("p",{children:" 2024 Invoice AI Parser."})})]})})},LL=()=>{};var z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},VL=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],f=n[t++],d=((r&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},CC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,f=u?n[r+1]:0,d=r+2<n.length,h=d?n[r+2]:0,y=a>>2,E=(a&3)<<4|f>>4;let T=(f&15)<<2|h>>6,I=h&63;d||(I=64,u||(T=64)),i.push(t[y],t[E],t[T],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||f==null||h==null||E==null)throw new UL;const T=a<<2|f>>4;if(i.push(T),h!==64){const I=f<<4&240|h>>2;if(i.push(I),E!==64){const N=h<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OL=function(n){const e=AC(n);return CC.encodeByteArray(e,!0)},ad=function(n){return OL(n).replace(/\./g,"")},wC=function(n){try{return CC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=()=>FL().__FIREBASE_DEFAULTS__,BL=()=>{if(typeof process>"u"||typeof z0>"u")return;const n=z0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wC(n[1]);return e&&JSON.parse(e)},Od=()=>{try{return LL()||qL()||BL()||HL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IC=n=>{var e,t;return(t=(e=Od())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},zL=n=>{const e=IC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},xC=()=>{var n;return(n=Od())==null?void 0:n.config},RC=n=>{var e;return(e=Od())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ad(JSON.stringify(t)),ad(JSON.stringify(u)),""].join(".")}const gu={};function KL(){const n={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?n.emulator.push(e):n.prod.push(e);return n}function JL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G0=!1;function bC(n,e){if(typeof window>"u"||typeof document>"u"||!Ga(window.location.host)||gu[n]===e||gu[n]||G0)return;gu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=KL().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{G0=!0,u()},T}function y(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=JL(i),I=t("text"),N=document.getElementById(I)||document.createElement("span"),U=t("learnmore"),L=document.getElementById(U)||document.createElement("a"),H=t("preprendIcon"),J=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;f(B),y(L,U);const te=h();d(J,H),B.append(J,N,L,te),document.body.appendChild(B)}a?(N.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function QL(){var e;const n=(e=Od())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZL(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eV(){return!QL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tV(){try{return typeof indexedDB=="object"}catch{return!1}}function nV(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="FirebaseError";class Ms extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iV,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?sV(a,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new Ms(r,f,i)}}function sV(n,e){return n.replace(rV,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const rV=/\{\$([^}]+)}/g;function oV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if($0(a)&&$0(u)){if(!mo(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function $0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function au(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aV(n,e){const t=new lV(n,e);return t.subscribe.bind(t)}class lV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uV(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=cm),r.error===void 0&&(r.error=cm),r.complete===void 0&&(r.complete=cm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n){return n&&n._delegate?n._delegate:n}class go{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GL;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dV(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fV(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fV(n){return n===uo?void 0:n}function dV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const pV={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},mV=Ke.INFO,gV={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},yV=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=gV[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=mV,this._logHandler=yV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const _V=(n,e)=>e.some(t=>n instanceof t);let K0,J0;function vV(){return K0||(K0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EV(){return J0||(J0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PC=new WeakMap,Bm=new WeakMap,MC=new WeakMap,fm=new WeakMap,Pg=new WeakMap;function TV(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(yr(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&PC.set(t,n)}).catch(()=>{}),Pg.set(e,n),e}function SV(n){if(Bm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Bm.set(n,e)}let Hm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AV(n){Hm=n(Hm)}function CV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(dm(this),e,...t);return MC.set(i,e.sort?e.sort():[e]),yr(i)}:EV().includes(n)?function(...e){return n.apply(dm(this),e),yr(PC.get(this))}:function(...e){return yr(n.apply(dm(this),e))}}function wV(n){return typeof n=="function"?CV(n):(n instanceof IDBTransaction&&SV(n),_V(n,vV())?new Proxy(n,Hm):n)}function yr(n){if(n instanceof IDBRequest)return TV(n);if(fm.has(n))return fm.get(n);const e=wV(n);return e!==n&&(fm.set(n,e),Pg.set(e,n)),e}const dm=n=>Pg.get(n);function IV(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),f=yr(u);return i&&u.addEventListener("upgradeneeded",d=>{i(yr(u.result),d.oldVersion,d.newVersion,yr(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const xV=["get","getKey","getAll","getAllKeys","count"],RV=["put","add","delete","clear"],hm=new Map;function Y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=RV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xV.includes(t)))return;const a=async function(u,...f){const d=this.transaction(u,r?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&d.done]))[0]};return hm.set(e,a),a}AV(n=>({...n,get:(e,t,i)=>Y0(e,t)||n.get(e,t,i),has:(e,t)=>!!Y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zm="@firebase/app",Q0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new bg("@firebase/app"),PV="@firebase/app-compat",MV="@firebase/analytics-compat",DV="@firebase/analytics",kV="@firebase/app-check-compat",LV="@firebase/app-check",VV="@firebase/auth",UV="@firebase/auth-compat",OV="@firebase/database",FV="@firebase/data-connect",qV="@firebase/database-compat",BV="@firebase/functions",HV="@firebase/functions-compat",zV="@firebase/installations",GV="@firebase/installations-compat",$V="@firebase/messaging",KV="@firebase/messaging-compat",JV="@firebase/performance",YV="@firebase/performance-compat",QV="@firebase/remote-config",WV="@firebase/remote-config-compat",jV="@firebase/storage",XV="@firebase/storage-compat",ZV="@firebase/firestore",eU="@firebase/ai",tU="@firebase/firestore-compat",nU="firebase",iU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",sU={[zm]:"fire-core",[PV]:"fire-core-compat",[DV]:"fire-analytics",[MV]:"fire-analytics-compat",[LV]:"fire-app-check",[kV]:"fire-app-check-compat",[VV]:"fire-auth",[UV]:"fire-auth-compat",[OV]:"fire-rtdb",[FV]:"fire-data-connect",[qV]:"fire-rtdb-compat",[BV]:"fire-fn",[HV]:"fire-fn-compat",[zV]:"fire-iid",[GV]:"fire-iid-compat",[$V]:"fire-fcm",[KV]:"fire-fcm-compat",[JV]:"fire-perf",[YV]:"fire-perf-compat",[QV]:"fire-rc",[WV]:"fire-rc-compat",[jV]:"fire-gcs",[XV]:"fire-gcs-compat",[ZV]:"fire-fst",[tU]:"fire-fst-compat",[eU]:"fire-vertex","fire-js":"fire-js",[nU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map,rU=new Map,$m=new Map;function W0(n,e){try{n.container.addComponent(e)}catch(t){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ba(n){const e=n.name;if($m.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;$m.set(e,n);for(const t of ld.values())W0(t,n);for(const t of rU.values())W0(t,n);return!0}function Mg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new qu("app","Firebase",oU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=iU;function DC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Gm,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(t||(t=xC()),!t)throw _r.create("no-options");const a=ld.get(r);if(a){if(mo(t,a.options)&&mo(i,a.config))return a;throw _r.create("duplicate-app",{appName:r})}const u=new hV(r);for(const d of $m.values())u.addComponent(d);const f=new aU(t,i,u);return ld.set(r,f),f}function kC(n=Gm){const e=ld.get(n);if(!e&&n===Gm&&xC())return DC();if(!e)throw _r.create("no-app",{appName:n});return e}function vr(n,e,t){let i=sU[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(u.join(" "));return}ba(new go(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="firebase-heartbeat-database",uU=1,Iu="firebase-heartbeat-store";let pm=null;function LC(){return pm||(pm=IV(lU,uU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw _r.create("idb-open",{originalErrorMessage:n.message})})),pm}async function cU(n){try{const t=(await LC()).transaction(Iu),i=await t.objectStore(Iu).get(VC(n));return await t.done,i}catch(e){if(e instanceof Ms)ws.warn(e.message);else{const t=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(t.message)}}}async function j0(n,e){try{const i=(await LC()).transaction(Iu,"readwrite");await i.objectStore(Iu).put(e,VC(n)),await i.done}catch(t){if(t instanceof Ms)ws.warn(t.message);else{const i=_r.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ws.warn(i.message)}}}function VC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=1024,dU=30;class hU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=X0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>dU){const u=gU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ws.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=X0(),{heartbeatsToSend:i,unsentEntries:r}=pU(this._heartbeatsCache.heartbeats),a=ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ws.warn(t),""}}}function X0(){return new Date().toISOString().substring(0,10)}function pU(n,e=fU){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),Z0(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Z0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tV()?nV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return j0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Z0(n){return ad(JSON.stringify({version:2,heartbeats:n})).length}function gU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){ba(new go("platform-logger",e=>new NV(e),"PRIVATE")),ba(new go("heartbeat",e=>new hU(e),"PRIVATE")),vr(zm,Q0,n),vr(zm,Q0,"esm2020"),vr("fire-js","")}yU("");function UC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=UC,OC=new qu("auth","Firebase",UC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new bg("@firebase/auth");function vU(n,...e){ud.logLevel<=Ke.WARN&&ud.warn(`Auth (${$a}): ${n}`,...e)}function Gf(n,...e){ud.logLevel<=Ke.ERROR&&ud.error(`Auth (${$a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,...e){throw kg(n,...e)}function yi(n,...e){return kg(n,...e)}function Dg(n,e,t){const i={..._U(),[e]:t};return new qu("auth","Firebase",i).create(e,{appName:n.name})}function Ts(n){return Dg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EU(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ti(n,"argument-error"),Dg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return OC.create(n,...e)}function we(n,e,...t){if(!n)throw kg(e,...t)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gf(e),new Error(e)}function Is(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function TU(){return eS()==="http:"||eS()==="https:"}function eS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TU()||jL()||"connection"in navigator)?navigator.onLine:!0}function AU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=YL()||XL()}get(){return SU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e){Is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IU=new Hu(3e4,6e4);function br(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pr(n,e,t,i,r={}){return qC(n,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=Bu({key:n.config.apiKey,...u}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...a};return WL()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ga(n.emulatorConfig.host)&&(h.credentials="include"),FC.fetch()(await BC(n,n.config.apiHost,t,f),h)})}async function qC(n,e,t){n._canInitEmulator=!1;const i={...CU,...e};try{const r=new RU(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Nf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[d,h]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nf(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Nf(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Nf(n,"user-disabled",u);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Dg(n,y,h);ti(n,y)}}catch(r){if(r instanceof Ms)throw r;ti(n,"network-request-failed",{message:String(r)})}}async function zu(n,e,t,i,r={}){const a=await Pr(n,e,t,i,r);return"mfaPendingCredential"in a&&ti(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function BC(n,e,t,i){const r=`${e}${t}?${i}`,a=n,u=a.config.emulator?Lg(n.config,r):`${n.config.apiScheme}://${r}`;return wU.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function xU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yi(this.auth,"network-request-failed")),IU.get())})}}function Nf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=yi(n,e,i);return r.customData._tokenResponse=t,r}function tS(n){return n!==void 0&&n.enterprise!==void 0}class NU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bU(n,e){return Pr(n,"GET","/v2/recaptchaConfig",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e){return Pr(n,"POST","/v1/accounts:delete",e)}async function cd(n,e){return Pr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MU(n,e=!1){const t=Un(n),i=await t.getIdToken(e),r=Vg(i);we(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:yu(mm(r.auth_time)),issuedAtTime:yu(mm(r.iat)),expirationTime:yu(mm(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function mm(n){return Number(n)*1e3}function Vg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{const r=wC(t);return r?JSON.parse(r):(Gf("Failed to decode base64 JWT payload"),null)}catch(r){return Gf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function nS(n){const e=Vg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ms&&DU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function DU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(n){var E;const e=n.auth,t=await n.getIdToken(),i=await xu(n,cd(e,{idToken:t}));we(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(E=r.providerUserInfo)!=null&&E.length?HC(r.providerUserInfo):[],u=VU(n.providerData,a),f=n.isAnonymous,d=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=f?d:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new Jm(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function LU(n){const e=Un(n);await fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VU(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function HC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(n,e){const t=await qC(n,{},async()=>{const i=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,u=await BC(n,r,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:i};return n.emulatorConfig&&Ga(n.emulatorConfig.host)&&(d.credentials="include"),FC.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OU(n,e){return Pr(n,"POST","/v2/accounts:revokeToken",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=nS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await UU(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,u=new wa;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(we(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(we(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class mi{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new kU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Jm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await xu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MU(this,e)}reload(){return LU(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await fd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await xu(this,PU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:N,stsTokenManager:U}=t;we(E&&U,e,"internal-error");const L=wa.fromJSON(this.name,U);we(typeof E=="string",e,"internal-error"),dr(i,e.name),dr(r,e.name),we(typeof T=="boolean",e,"internal-error"),we(typeof I=="boolean",e,"internal-error"),dr(a,e.name),dr(u,e.name),dr(f,e.name),dr(d,e.name),dr(h,e.name),dr(y,e.name);const H=new mi({uid:E,auth:e,email:r,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:L,createdAt:h,lastLoginAt:y});return N&&Array.isArray(N)&&(H.providerData=N.map(J=>({...J}))),d&&(H._redirectEventId=d),H}static async _fromIdTokenResponse(e,t,i=!1){const r=new wa;r.updateFromServerResponse(t);const a=new mi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await fd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];we(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?HC(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),f=new wa;f.updateFromIdToken(i);const d=new mi({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Jm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new Map;function vs(n){Is(n instanceof Function,"Expected a class definition");let e=iS.get(n);return e?(Is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zC.type="NONE";const sS=zC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e,t){return`firebase:${n}:${e}:${t}`}class Ia{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=$f(this.userKey,r.apiKey,a),this.fullPersistenceKey=$f("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?mi._fromGetAccountInfoResponse(this.auth,t,e):null}return mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ia(vs(sS),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||vs(sS);const u=$f(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const y=await h._get(u);if(y){let E;if(typeof y=="string"){const T=await cd(e,{idToken:y}).catch(()=>{});if(!T)break;E=await mi._fromGetAccountInfoResponse(e,T,y)}else E=mi._fromJSON(e,y);h!==a&&(f=E),a=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ia(a,e,i):(a=d[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Ia(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QC(e))return"Blackberry";if(WC(e))return"Webos";if($C(e))return"Safari";if((e.includes("chrome/")||KC(e))&&!e.includes("edge/"))return"Chrome";if(YC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function GC(n=dn()){return/firefox\//i.test(n)}function $C(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KC(n=dn()){return/crios\//i.test(n)}function JC(n=dn()){return/iemobile/i.test(n)}function YC(n=dn()){return/android/i.test(n)}function QC(n=dn()){return/blackberry/i.test(n)}function WC(n=dn()){return/webos/i.test(n)}function Ug(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FU(n=dn()){var e;return Ug(n)&&!!((e=window.navigator)!=null&&e.standalone)}function qU(){return ZL()&&document.documentMode===10}function jC(n=dn()){return Ug(n)||YC(n)||WC(n)||QC(n)||/windows phone/i.test(n)||JC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n,e=[]){let t;switch(n){case"Browser":t=rS(dn());break;case"Worker":t=`${rS(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const d=e(a);u(d)}catch(d){f(d)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(n,e={}){return Pr(n,"GET","/v2/passwordPolicy",br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=6;class GU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oS(this),this.idTokenSubscription=new oS(this),this.beforeStateQueue=new BU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),i=await mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Vn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===f)&&(d!=null&&d.user)&&(i=d.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Ts(this));const t=e?Un(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HU(this),t=new GU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await OU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,r);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&vU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mr(n){return Un(n)}class oS{constructor(e){this.auth=e,this.observer=null,this.addObserver=aV(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KU(n){Fd=n}function ZC(n){return Fd.loadJS(n)}function JU(){return Fd.recaptchaEnterpriseScript}function YU(){return Fd.gapiScript}function QU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class WU{constructor(){this.enterprise=new jU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const XU="recaptcha-enterprise",ew="NO_RECAPTCHA";class ZU{constructor(e){this.type=XU,this.auth=Mr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{bU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new NU(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(d=>{f(d)})})}function r(a,u,f){const d=window.grecaptcha;tS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(ew)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WU().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!t&&tS(window.grecaptcha))r(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=JU();d.length!==0&&(d+=f),ZC(d).then(()=>{r(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function aS(n,e,t,i=!1,r=!1){const a=new ZU(n);let u;if(r)u=ew;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ym(n,e,t,i,r){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await aS(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await aS(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n,e){const t=Mg(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(mo(a,e??{}))return r;ti(r,"already-initialized")}return t.initialize({options:e})}function tO(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nO(n,e,t){const i=Mr(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=tw(e),{host:u,port:f}=iO(e),d=f===null?"":`:${f}`,h={url:`${a}//${u}${d}/`},y=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(mo(h,i.config.emulator)&&mo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Ga(u)?(NC(`${a}//${u}${d}`),bC("Auth",!0)):sO()}function tw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iO(n){const e=tw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:lS(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:lS(u)}}}function lS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function rO(n,e){return Pr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(n,e){return zu(n,"POST","/v1/accounts:signInWithPassword",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n,e){return zu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}async function lO(n,e){return zu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Og{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ru(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ru(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,t,"signInWithPassword",oO);case"emailLink":return aO(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,i,"signUpPassword",rO);case"emailLink":return lO(e,{idToken:t,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e){return zu(n,"POST","/v1/accounts:signInWithIdp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="http://localhost";class yo extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const u=new yo(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){const e={requestUri:uO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fO(n){const e=au(lu(n)).link,t=e?au(lu(e)).deep_link_id:null,i=au(lu(n)).deep_link_id;return(i?au(lu(i)).link:null)||i||t||e||n}class Fg{constructor(e){const t=au(lu(e)),i=t.apiKey??null,r=t.oobCode??null,a=cO(t.mode??null);we(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=fO(e);try{return new Fg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,t){return Ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Fg.parseLink(t);return we(i,"argument-error"),Ru._fromEmailAndCode(e,i.code,i.tenantId)}}Ka.PROVIDER_ID="password";Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends qg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Gu{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Gu{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Gu{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(n,e){return zu(n,"POST","/v1/accounts:signUp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await mi._fromIdTokenResponse(e,i,r),u=uS(i);return new _o({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=uS(i);return new _o({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function uS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends Ms{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,dd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new dd(e,t,i,r)}}function nw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dd._fromErrorAndOperation(n,a,e,i):a})}async function hO(n,e,t=!1){const i=await xu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _o._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(n,e,t=!1){const{auth:i}=n;if(Vn(i.app))return Promise.reject(Ts(i));const r="reauthenticate";try{const a=await xu(n,nw(i,r,e,n),t);we(a.idToken,i,"internal-error");const u=Vg(a.idToken);we(u,i,"internal-error");const{sub:f}=u;return we(n.uid===f,i,"user-mismatch"),_o._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ti(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(n,e,t=!1){if(Vn(n.app))return Promise.reject(Ts(n));const i="signIn",r=await nw(n,i,e),a=await _o._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}async function mO(n,e){return iw(Mr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(n){const e=Mr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gO(n,e,t){if(Vn(n.app))return Promise.reject(Ts(n));const i=Mr(n),u=await Ym(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&sw(n),d}),f=await _o._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function yO(n,e,t){return Vn(n.app)?Promise.reject(Ts(n)):mO(Un(n),Ka.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sw(n),i})}function _O(n,e,t,i){return Un(n).onIdTokenChanged(e,t,i)}function vO(n,e,t){return Un(n).beforeAuthStateChanged(e,t)}function EO(n,e,t,i){return Un(n).onAuthStateChanged(e,t,i)}function TO(n){return Un(n).signOut()}const hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hd,"1"),this.storage.removeItem(hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=1e3,AO=10;class ow extends rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,d)=>{this.notifyListeners(u,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);qU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,AO):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},SO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const CO=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aw.type="SESSION";const lw=aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new qd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(u).map(async h=>h(t.origin,a)),d=await wO(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((f,d)=>{const h=Bg("",20);r.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function xO(n){Gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function RO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function bO(){return uw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebaseLocalStorageDb",PO=1,pd="firebaseLocalStorage",fw="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bd(n,e){return n.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function MO(){const n=indexedDB.deleteDatabase(cw);return new $u(n).toPromise()}function Qm(){const n=indexedDB.open(cw,PO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(pd,{keyPath:fw})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(pd)?e(i):(i.close(),await MO(),e(await Qm()))})})}async function cS(n,e,t){const i=Bd(n,!0).put({[fw]:e,value:t});return new $u(i).toPromise()}async function DO(n,e){const t=Bd(n,!1).get(e),i=await new $u(t).toPromise();return i===void 0?null:i.value}function fS(n,e){const t=Bd(n,!0).delete(e);return new $u(t).toPromise()}const kO=800,LO=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>LO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(bO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await RO(),!this.activeServiceWorker)return;this.sender=new IO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await cS(e,hd,"1"),await fS(e,hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>cS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>DO(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Bd(r,!1).getAll();return new $u(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const VO=dw;new Hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(n,e){return e?vs(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UO(n){return iw(n.auth,new Hg(n),n.bypassAuthState)}function OO(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),pO(t,new Hg(n),n.bypassAuthState)}async function FO(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),hO(t,new Hg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UO;case"linkViaPopup":case"linkViaRedirect":return FO;case"reauthViaPopup":case"reauthViaRedirect":return OO;default:ti(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new Hu(2e3,1e4);async function BO(n,e,t){if(Vn(n.app))return Promise.reject(yi(n,"operation-not-supported-in-this-environment"));const i=Mr(n);EU(n,e,qg);const r=hw(i,t);return new co(i,"signInViaPopup",e,r).executeNotNull()}class co extends pw{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=Bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qO.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="pendingRedirect",Kf=new Map;class zO extends pw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Kf.get(this.auth._key());if(!e){try{const i=await GO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Kf.set(this.auth._key(),e)}return this.bypassAuthState||Kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GO(n,e){const t=JO(e),i=KO(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function $O(n,e){Kf.set(n._key(),e)}function KO(n){return vs(n._redirectPersistence)}function JO(n){return $f(HO,n.config.apiKey,n.name)}async function YO(n,e,t=!1){if(Vn(n.app))return Promise.reject(Ts(n));const i=Mr(n),r=hw(i,e),u=await new zO(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=600*1e3;class WO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!mw(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(yi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QO&&this.cachedEventUids.clear(),this.cachedEventUids.has(dS(e))}saveEventToCache(e){this.cachedEventUids.add(dS(e)),this.lastProcessedEventTime=Date.now()}}function dS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,e={}){return Pr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e4=/^https?/;async function t4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XO(n);for(const t of e)try{if(n4(t))return}catch{}ti(n,"unauthorized-domain")}function n4(n){const e=Km(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!e4.test(t))return!1;if(ZO.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Hu(3e4,6e4);function hS(){const n=Gi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function s4(n){return new Promise((e,t)=>{var r,a,u;function i(){hS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hS(),t(yi(n,"network-request-failed"))},timeout:i4.get()})}if((a=(r=Gi().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Gi().gapi)!=null&&u.load)i();else{const f=QU("iframefcb");return Gi()[f]=()=>{gapi.load?i():t(yi(n,"network-request-failed"))},ZC(`${YU()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function r4(n){return Jf=Jf||s4(n),Jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new Hu(5e3,15e3),a4="__/auth/iframe",l4="emulator/auth/iframe",u4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f4(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lg(e,l4):`https://${n.config.authDomain}/${a4}`,i={apiKey:e.apiKey,appName:n.name,v:$a},r=c4.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Bu(i).slice(1)}`}async function d4(n){const e=await r4(n),t=Gi().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:f4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u4,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=yi(n,"network-request-failed"),f=Gi().setTimeout(()=>{a(u)},o4.get());function d(){Gi().clearTimeout(f),r(i)}i.ping(d).then(d,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p4=500,m4=600,g4="_blank",y4="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _4(n,e,t,i=p4,r=m4){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const d={...h4,width:i.toString(),height:r.toString(),top:a,left:u},h=dn().toLowerCase();t&&(f=KC(h)?g4:t),GC(h)&&(e=e||y4,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[I,N])=>`${T}${I}=${N},`,"");if(FU(h)&&f!=="_self")return v4(e||"",f),new pS(null);const E=window.open(e||"",f,y);we(E,n,"popup-blocked");try{E.focus()}catch{}return new pS(E)}function v4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="__/auth/handler",T4="emulator/auth/handler",S4=encodeURIComponent("fac");async function mS(n,e,t,i,r,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$a,eventId:r};if(e instanceof qg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",oV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof Gu){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await n._getAppCheckToken(),h=d?`#${S4}=${encodeURIComponent(d)}`:"";return`${A4(n)}?${Bu(f).slice(1)}${h}`}function A4({config:n}){return n.emulator?Lg(n,T4):`https://${n.authDomain}/${E4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class C4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lw,this._completeRedirectFn=YO,this._overrideRedirectResult=$O}async _openPopup(e,t,i,r){var u;Is((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await mS(e,t,i,Km(),r);return _4(e,a,Bg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await mS(e,t,i,Km(),r);return xO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Is(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await d4(e),i=new WO(e);return t.register("authEvent",r=>(we(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gm,{type:gm},r=>{var u;const a=(u=r==null?void 0:r[0])==null?void 0:u[gm];a!==void 0&&t(!!a),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jC()||$C()||Ug()}}const w4=C4;var gS="@firebase/auth",yS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(n){ba(new go("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XC(n)},h=new $U(i,r,a,d);return tO(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ba(new go("auth-internal",e=>{const t=Mr(e.getProvider("auth").getImmediate());return(i=>new I4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(gS,yS,x4(n)),vr(gS,yS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=300,b4=RC("authIdTokenMaxAge")||N4;let _S=null;const P4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>b4)return;const r=t==null?void 0:t.token;_S!==r&&(_S=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function M4(n=kC()){const e=Mg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=eO(n,{popupRedirectResolver:w4,persistence:[VO,CO,lw]}),i=RC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=P4(a.toString());vO(t,u,()=>u(t.currentUser)),_O(t,f=>u(f))}}const r=IC("auth");return r&&nO(t,`http://${r}`),t}function D4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}KU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=yi("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",D4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");var k4="firebase",L4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(k4,L4,"app");var vS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,gw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,M){function R(){}R.prototype=M.prototype,P.F=M.prototype,P.prototype=new R,P.prototype.constructor=P,P.D=function(k,V,O){for(var D=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)D[Ee-2]=arguments[Ee];return M.prototype[V].apply(k,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,M,R){R||(R=0);const k=Array(16);if(typeof M=="string")for(var V=0;V<16;++V)k[V]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(V=0;V<16;++V)k[V]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=P.g[0],R=P.g[1],V=P.g[2];let O=P.g[3],D;D=M+(O^R&(V^O))+k[0]+3614090360&4294967295,M=R+(D<<7&4294967295|D>>>25),D=O+(V^M&(R^V))+k[1]+3905402710&4294967295,O=M+(D<<12&4294967295|D>>>20),D=V+(R^O&(M^R))+k[2]+606105819&4294967295,V=O+(D<<17&4294967295|D>>>15),D=R+(M^V&(O^M))+k[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(O^R&(V^O))+k[4]+4118548399&4294967295,M=R+(D<<7&4294967295|D>>>25),D=O+(V^M&(R^V))+k[5]+1200080426&4294967295,O=M+(D<<12&4294967295|D>>>20),D=V+(R^O&(M^R))+k[6]+2821735955&4294967295,V=O+(D<<17&4294967295|D>>>15),D=R+(M^V&(O^M))+k[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(O^R&(V^O))+k[8]+1770035416&4294967295,M=R+(D<<7&4294967295|D>>>25),D=O+(V^M&(R^V))+k[9]+2336552879&4294967295,O=M+(D<<12&4294967295|D>>>20),D=V+(R^O&(M^R))+k[10]+4294925233&4294967295,V=O+(D<<17&4294967295|D>>>15),D=R+(M^V&(O^M))+k[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(O^R&(V^O))+k[12]+1804603682&4294967295,M=R+(D<<7&4294967295|D>>>25),D=O+(V^M&(R^V))+k[13]+4254626195&4294967295,O=M+(D<<12&4294967295|D>>>20),D=V+(R^O&(M^R))+k[14]+2792965006&4294967295,V=O+(D<<17&4294967295|D>>>15),D=R+(M^V&(O^M))+k[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=M+(V^O&(R^V))+k[1]+4129170786&4294967295,M=R+(D<<5&4294967295|D>>>27),D=O+(R^V&(M^R))+k[6]+3225465664&4294967295,O=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(O^M))+k[11]+643717713&4294967295,V=O+(D<<14&4294967295|D>>>18),D=R+(O^M&(V^O))+k[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^O&(R^V))+k[5]+3593408605&4294967295,M=R+(D<<5&4294967295|D>>>27),D=O+(R^V&(M^R))+k[10]+38016083&4294967295,O=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(O^M))+k[15]+3634488961&4294967295,V=O+(D<<14&4294967295|D>>>18),D=R+(O^M&(V^O))+k[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^O&(R^V))+k[9]+568446438&4294967295,M=R+(D<<5&4294967295|D>>>27),D=O+(R^V&(M^R))+k[14]+3275163606&4294967295,O=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(O^M))+k[3]+4107603335&4294967295,V=O+(D<<14&4294967295|D>>>18),D=R+(O^M&(V^O))+k[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(V^O&(R^V))+k[13]+2850285829&4294967295,M=R+(D<<5&4294967295|D>>>27),D=O+(R^V&(M^R))+k[2]+4243563512&4294967295,O=M+(D<<9&4294967295|D>>>23),D=V+(M^R&(O^M))+k[7]+1735328473&4294967295,V=O+(D<<14&4294967295|D>>>18),D=R+(O^M&(V^O))+k[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=M+(R^V^O)+k[5]+4294588738&4294967295,M=R+(D<<4&4294967295|D>>>28),D=O+(M^R^V)+k[8]+2272392833&4294967295,O=M+(D<<11&4294967295|D>>>21),D=V+(O^M^R)+k[11]+1839030562&4294967295,V=O+(D<<16&4294967295|D>>>16),D=R+(V^O^M)+k[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^O)+k[1]+2763975236&4294967295,M=R+(D<<4&4294967295|D>>>28),D=O+(M^R^V)+k[4]+1272893353&4294967295,O=M+(D<<11&4294967295|D>>>21),D=V+(O^M^R)+k[7]+4139469664&4294967295,V=O+(D<<16&4294967295|D>>>16),D=R+(V^O^M)+k[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^O)+k[13]+681279174&4294967295,M=R+(D<<4&4294967295|D>>>28),D=O+(M^R^V)+k[0]+3936430074&4294967295,O=M+(D<<11&4294967295|D>>>21),D=V+(O^M^R)+k[3]+3572445317&4294967295,V=O+(D<<16&4294967295|D>>>16),D=R+(V^O^M)+k[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(R^V^O)+k[9]+3654602809&4294967295,M=R+(D<<4&4294967295|D>>>28),D=O+(M^R^V)+k[12]+3873151461&4294967295,O=M+(D<<11&4294967295|D>>>21),D=V+(O^M^R)+k[15]+530742520&4294967295,V=O+(D<<16&4294967295|D>>>16),D=R+(V^O^M)+k[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=M+(V^(R|~O))+k[0]+4096336452&4294967295,M=R+(D<<6&4294967295|D>>>26),D=O+(R^(M|~V))+k[7]+1126891415&4294967295,O=M+(D<<10&4294967295|D>>>22),D=V+(M^(O|~R))+k[14]+2878612391&4294967295,V=O+(D<<15&4294967295|D>>>17),D=R+(O^(V|~M))+k[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~O))+k[12]+1700485571&4294967295,M=R+(D<<6&4294967295|D>>>26),D=O+(R^(M|~V))+k[3]+2399980690&4294967295,O=M+(D<<10&4294967295|D>>>22),D=V+(M^(O|~R))+k[10]+4293915773&4294967295,V=O+(D<<15&4294967295|D>>>17),D=R+(O^(V|~M))+k[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~O))+k[8]+1873313359&4294967295,M=R+(D<<6&4294967295|D>>>26),D=O+(R^(M|~V))+k[15]+4264355552&4294967295,O=M+(D<<10&4294967295|D>>>22),D=V+(M^(O|~R))+k[6]+2734768916&4294967295,V=O+(D<<15&4294967295|D>>>17),D=R+(O^(V|~M))+k[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=M+(V^(R|~O))+k[4]+4149444226&4294967295,M=R+(D<<6&4294967295|D>>>26),D=O+(R^(M|~V))+k[11]+3174756917&4294967295,O=M+(D<<10&4294967295|D>>>22),D=V+(M^(O|~R))+k[2]+718787259&4294967295,V=O+(D<<15&4294967295|D>>>17),D=R+(O^(V|~M))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+M&4294967295,P.g[1]=P.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+O&4294967295}i.prototype.v=function(P,M){M===void 0&&(M=P.length);const R=M-this.blockSize,k=this.C;let V=this.h,O=0;for(;O<M;){if(V==0)for(;O<=R;)r(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<M;)if(k[V++]=P.charCodeAt(O++),V==this.blockSize){r(this,k),V=0;break}}else for(;O<M;)if(k[V++]=P[O++],V==this.blockSize){r(this,k),V=0;break}}this.h=V,this.o+=M},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var M=1;M<P.length-8;++M)P[M]=0;M=this.o*8;for(var R=P.length-8;R<P.length;++R)P[R]=M&255,M/=256;for(this.v(P),P=Array(16),M=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)P[M++]=this.g[R]>>>k&255;return P};function a(P,M){var R=f;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=M(P)}function u(P,M){this.h=M;const R=[];let k=!0;for(let V=P.length-1;V>=0;V--){const O=P[V]|0;k&&O==M||(R[V]=O,k=!1)}this.g=R}var f={};function d(P){return-128<=P&&P<128?a(P,function(M){return new u([M|0],M<0?-1:0)}):new u([P|0],P<0?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return E;if(P<0)return L(h(-P));const M=[];let R=1;for(let k=0;P>=R;k++)M[k]=P/R|0,R*=4294967296;return new u(M,0)}function y(P,M){if(P.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(P.charAt(0)=="-")return L(y(P.substring(1),M));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(M,8));let k=E;for(let O=0;O<P.length;O+=8){var V=Math.min(8,P.length-O);const D=parseInt(P.substring(O,O+V),M);V<8?(V=h(Math.pow(M,V)),k=k.j(V).add(h(D))):(k=k.j(R),k=k.add(h(D)))}return k}var E=d(0),T=d(1),I=d(16777216);n=u.prototype,n.m=function(){if(U(this))return-L(this).m();let P=0,M=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);P+=(k>=0?k:4294967296+k)*M,M*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(N(this))return"0";if(U(this))return"-"+L(this).toString(P);const M=h(Math.pow(P,6));var R=this;let k="";for(;;){const V=te(R,M).g;R=H(R,V.j(M));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(P);if(R=V,N(R))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function N(P){if(P.h!=0)return!1;for(let M=0;M<P.g.length;M++)if(P.g[M]!=0)return!1;return!0}function U(P){return P.h==-1}n.l=function(P){return P=H(this,P),U(P)?-1:N(P)?0:1};function L(P){const M=P.g.length,R=[];for(let k=0;k<M;k++)R[k]=~P.g[k];return new u(R,~P.h).add(T)}n.abs=function(){return U(this)?L(this):this},n.add=function(P){const M=Math.max(this.g.length,P.g.length),R=[];let k=0;for(let V=0;V<=M;V++){let O=k+(this.i(V)&65535)+(P.i(V)&65535),D=(O>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);k=D>>>16,O&=65535,D&=65535,R[V]=D<<16|O}return new u(R,R[R.length-1]&-2147483648?-1:0)};function H(P,M){return P.add(L(M))}n.j=function(P){if(N(this)||N(P))return E;if(U(this))return U(P)?L(this).j(L(P)):L(L(this).j(P));if(U(P))return L(this.j(L(P)));if(this.l(I)<0&&P.l(I)<0)return h(this.m()*P.m());const M=this.g.length+P.g.length,R=[];for(var k=0;k<2*M;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let V=0;V<P.g.length;V++){const O=this.i(k)>>>16,D=this.i(k)&65535,Ee=P.i(V)>>>16,be=P.i(V)&65535;R[2*k+2*V]+=D*be,J(R,2*k+2*V),R[2*k+2*V+1]+=O*be,J(R,2*k+2*V+1),R[2*k+2*V+1]+=D*Ee,J(R,2*k+2*V+1),R[2*k+2*V+2]+=O*Ee,J(R,2*k+2*V+2)}for(P=0;P<M;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=M;P<2*M;P++)R[P]=0;return new u(R,0)};function J(P,M){for(;(P[M]&65535)!=P[M];)P[M+1]+=P[M]>>>16,P[M]&=65535,M++}function B(P,M){this.g=P,this.h=M}function te(P,M){if(N(M))throw Error("division by zero");if(N(P))return new B(E,E);if(U(P))return M=te(L(P),M),new B(L(M.g),L(M.h));if(U(M))return M=te(P,L(M)),new B(L(M.g),M.h);if(P.g.length>30){if(U(P)||U(M))throw Error("slowDivide_ only works with positive integers.");for(var R=T,k=M;k.l(P)<=0;)R=ue(R),k=ue(k);var V=ie(R,1),O=ie(k,1);for(k=ie(k,2),R=ie(R,2);!N(k);){var D=O.add(k);D.l(P)<=0&&(V=V.add(R),O=D),k=ie(k,1),R=ie(R,1)}return M=H(P,V.j(M)),new B(V,M)}for(V=E;P.l(M)>=0;){for(R=Math.max(1,Math.floor(P.m()/M.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=h(R),D=O.j(M);U(D)||D.l(P)>0;)R-=k,O=h(R),D=O.j(M);N(O)&&(O=T),V=V.add(O),P=H(P,D)}return new B(V,P)}n.B=function(P){return te(this,P).h},n.and=function(P){const M=Math.max(this.g.length,P.g.length),R=[];for(let k=0;k<M;k++)R[k]=this.i(k)&P.i(k);return new u(R,this.h&P.h)},n.or=function(P){const M=Math.max(this.g.length,P.g.length),R=[];for(let k=0;k<M;k++)R[k]=this.i(k)|P.i(k);return new u(R,this.h|P.h)},n.xor=function(P){const M=Math.max(this.g.length,P.g.length),R=[];for(let k=0;k<M;k++)R[k]=this.i(k)^P.i(k);return new u(R,this.h^P.h)};function ue(P){const M=P.g.length+1,R=[];for(let k=0;k<M;k++)R[k]=P.i(k)<<1|P.i(k-1)>>>31;return new u(R,P.h)}function ie(P,M){const R=M>>5;M%=32;const k=P.g.length-R,V=[];for(let O=0;O<k;O++)V[O]=M>0?P.i(O+R)>>>M|P.i(O+R+1)<<32-M:P.i(O+R);return new u(V,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=y,Er=u}).apply(typeof vS<"u"?vS:typeof self<"u"?self:typeof window<"u"?window:{});var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yw,uu,_w,Yf,Wm,vw,Ew,Tw;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof bf=="object"&&bf];for(var S=0;S<m.length;++S){var w=m[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function r(m,S){if(S)e:{var w=i;m=m.split(".");for(var b=0;b<m.length-1;b++){var Y=m[b];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],b=w[m],S=S(b),S!=b&&S!=null&&e(w,m,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(S){var w=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&w.push([b,S[b]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function d(m,S,w){return m.call.apply(m.bind,arguments)}function h(m,S,w){return h=d,h.apply(null,arguments)}function y(m,S){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function E(m,S){function w(){}w.prototype=S.prototype,m.Z=S.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(b,Y,X){for(var de=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)de[Ve-2]=arguments[Ve];return S.prototype[Y].apply(b,de)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const S=m.length;if(S>0){const w=Array(S);for(let b=0;b<S;b++)w[b]=m[b];return w}return[]}function N(m,S){for(let b=1;b<arguments.length;b++){const Y=arguments[b];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=m.length||0;const X=Y.length||0;m.length=w+X;for(let de=0;de<X;de++)m[w+de]=Y[de]}else m.push(Y)}}class U{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function L(m){u.setTimeout(()=>{throw m},0)}function H(){var m=P;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class J{constructor(){this.h=this.g=null}add(S,w){const b=B.get();b.set(S,w),this.h?this.h.next=b:this.g=b,this.h=b}}var B=new U(()=>new te,m=>m.reset());class te{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ie=!1,P=new J,M=()=>{const m=Promise.resolve(void 0);ue=()=>{m.then(R)}};function R(){for(var m;m=H();){try{m.h.call(m.g)}catch(w){L(w)}var S=B;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}ie=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,S),u.removeEventListener("test",w,S)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Ee(m,S){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}E(Ee,V),Ee.prototype.init=function(m,S){const w=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(w=="mouseover"?S=m.fromElement:w=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),$=0;function le(m,S,w,b,Y){this.listener=m,this.proxy=null,this.src=S,this.type=w,this.capture=!!b,this.ha=Y,this.key=++$,this.da=this.fa=!1}function he(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,S,w){for(const b in m)S.call(w,m[b],b,m)}function Fe(m,S){for(const w in m)S.call(void 0,m[w],w,m)}function q(m){const S={};for(const w in m)S[w]=m[w];return S}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(m,S){let w,b;for(let Y=1;Y<arguments.length;Y++){b=arguments[Y];for(w in b)m[w]=b[w];for(let X=0;X<ee.length;X++)w=ee[X],Object.prototype.hasOwnProperty.call(b,w)&&(m[w]=b[w])}}function fe(m){this.src=m,this.g={},this.h=0}fe.prototype.add=function(m,S,w,b,Y){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const de=De(m,S,b,Y);return de>-1?(S=m[de],w||(S.fa=!1)):(S=new le(S,this.src,X,!!b,Y),S.fa=w,m.push(S)),S};function ye(m,S){const w=S.type;if(w in m.g){var b=m.g[w],Y=Array.prototype.indexOf.call(b,S,void 0),X;(X=Y>=0)&&Array.prototype.splice.call(b,Y,1),X&&(he(S),m.g[w].length==0&&(delete m.g[w],m.h--))}}function De(m,S,w,b){for(let Y=0;Y<m.length;++Y){const X=m[Y];if(!X.da&&X.listener==S&&X.capture==!!w&&X.ha==b)return Y}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Et={};function _e(m,S,w,b,Y){if(Array.isArray(S)){for(let X=0;X<S.length;X++)_e(m,S[X],w,b,Y);return null}return w=ja(w),m&&m[be]?m.J(S,w,f(b)?!!b.capture:!1,Y):qe(m,S,w,!1,b,Y)}function qe(m,S,w,b,Y,X){if(!S)throw Error("Invalid event type");const de=f(Y)?!!Y.capture:!!Y;let Ve=Ft(m);if(Ve||(m[ze]=Ve=new fe(m)),w=Ve.add(S,w,b,de,X),w.proxy)return w;if(b=ke(),w.proxy=b,b.src=m,b.listener=w,m.addEventListener)O||(Y=de),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),b,Y);else if(m.attachEvent)m.attachEvent(Gt(S.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ke(){function m(w){return S.call(m.src,m.listener,w)}const S=In;return m}function Le(m,S,w,b,Y){if(Array.isArray(S))for(var X=0;X<S.length;X++)Le(m,S[X],w,b,Y);else b=f(b)?!!b.capture:!!b,w=ja(w),m&&m[be]?(m=m.i,X=String(S).toString(),X in m.g&&(S=m.g[X],w=De(S,w,b,Y),w>-1&&(he(S[w]),Array.prototype.splice.call(S,w,1),S.length==0&&(delete m.g[X],m.h--)))):m&&(m=Ft(m))&&(S=m.g[S.toString()],m=-1,S&&(m=De(S,w,b,Y)),(w=m>-1?S[m]:null)&&yn(w))}function yn(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[be])ye(S.i,m);else{var w=m.type,b=m.proxy;S.removeEventListener?S.removeEventListener(w,b,m.capture):S.detachEvent?S.detachEvent(Gt(w),b):S.addListener&&S.removeListener&&S.removeListener(b),(w=Ft(S))?(ye(w,m),w.h==0&&(w.src=null,S[ze]=null)):he(m)}}}function Gt(m){return m in Et?Et[m]:Et[m]="on"+m}function In(m,S){if(m.da)m=!0;else{S=new Ee(S,this);const w=m.listener,b=m.ha||m.src;m.fa&&yn(m),m=w.call(b,S)}return m}function Ft(m){return m=m[ze],m instanceof fe?m:null}var ni="__closure_events_fn_"+(Math.random()*1e9>>>0);function ja(m){return typeof m=="function"?m:(m[ni]||(m[ni]=function(S){return m.handleEvent(S)}),m[ni])}function Rt(){k.call(this),this.i=new fe(this),this.M=this,this.G=null}E(Rt,k),Rt.prototype[be]=!0,Rt.prototype.removeEventListener=function(m,S,w,b){Le(this,m,S,w,b)};function qt(m,S){var w,b=m.G;if(b)for(w=[];b;b=b.G)w.push(b);if(m=m.M,b=S.type||S,typeof S=="string")S=new V(S,m);else if(S instanceof V)S.target=S.target||m;else{var Y=S;S=new V(b,m),re(S,Y)}Y=!0;let X,de;if(w)for(de=w.length-1;de>=0;de--)X=S.g=w[de],Y=Ds(X,b,!0,S)&&Y;if(X=S.g=m,Y=Ds(X,b,!0,S)&&Y,Y=Ds(X,b,!1,S)&&Y,w)for(de=0;de<w.length;de++)X=S.g=w[de],Y=Ds(X,b,!1,S)&&Y}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const w=m.g[S];for(let b=0;b<w.length;b++)he(w[b]);delete m.g[S],m.h--}}this.G=null},Rt.prototype.J=function(m,S,w,b){return this.i.add(String(m),S,!1,w,b)},Rt.prototype.K=function(m,S,w,b){return this.i.add(String(m),S,!0,w,b)};function Ds(m,S,w,b){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let Y=!0;for(let X=0;X<S.length;++X){const de=S[X];if(de&&!de.da&&de.capture==w){const Ve=de.listener,Ct=de.ha||de.src;de.fa&&ye(m.i,de),Y=Ve.call(Ct,b)!==!1&&Y}}return Y&&!b.defaultPrevented}function eh(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(m,S||0)}function ju(m){m.g=eh(()=>{m.g=null,m.i&&(m.i=!1,ju(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class hn extends k{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(m){k.call(this),this.h=m,this.g={}}E(Dr,k);var Xa=[];function Za(m){xe(m.g,function(S,w){this.g.hasOwnProperty(w)&&yn(S)},m),m.g={}}Dr.prototype.N=function(){Dr.Z.N.call(this),Za(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ks=u.JSON.stringify,th=u.JSON.parse,Xu=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Zu(){}function ec(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function jt(){V.call(this,"d")}E(jt,V);function On(){V.call(this,"c")}E(On,V);var At={},tc=null;function xo(){return tc=tc||new Rt}At.Ia="serverreachability";function nc(m){V.call(this,At.Ia,m)}E(nc,V);function Ei(m){const S=xo();qt(S,new nc(S))}At.STAT_EVENT="statevent";function kr(m,S){V.call(this,At.STAT_EVENT,m),this.stat=S}E(kr,V);function Nt(m){const S=xo();qt(S,new kr(S,m))}At.Ja="timingevent";function Ti(m,S){V.call(this,At.Ja,m),this.size=S}E(Ti,V);function Si(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},S)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function nh(m,S,w,b,Y,X){m.info(function(){if(m.g)if(X){var de="",Ve=X.split("&");for(let et=0;et<Ve.length;et++){var Ct=Ve[et].split("=");if(Ct.length>1){const mt=Ct[0];Ct=Ct[1];const Hn=mt.split("_");de=Hn.length>=2&&Hn[1]=="type"?de+(mt+"="+Ct+"&"):de+(mt+"=redacted&")}}}else de=null;else de=X;return"XMLHTTP REQ ("+b+") [attempt "+Y+"]: "+S+`
`+w+`
`+de})}function ic(m,S,w,b,Y,X,de){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+Y+"]: "+S+`
`+w+`
`+X+" "+de})}function Ai(m,S,w,b){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+ih(m,w)+(b?" "+b:"")})}function Lr(m,S){m.info(function(){return"TIMEOUT: "+S})}si.prototype.info=function(){};function ih(m,S){if(!m.g)return S;if(!S)return null;try{const X=JSON.parse(S);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var w=X[m];if(!(w.length<2)){var b=w[1];if(Array.isArray(b)&&!(b.length<1)){var Y=b[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let de=1;de<b.length;de++)b[de]=""}}}}return ks(X)}catch{return S}}var Vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},el={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tl;function Ur(){}E(Ur,Zu),Ur.prototype.g=function(){return new XMLHttpRequest},tl=new Ur;function Xi(m){return encodeURIComponent(String(m))}function sc(m){var S=1;m=m.split(":");const w=[];for(;S>0&&m.length;)w.push(m.shift()),S--;return m.length&&w.push(m.join(":")),w}function ri(m,S,w,b){this.j=m,this.i=S,this.l=w,this.S=b||1,this.V=new Dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var bt={},$t={};function Ci(m,S,w){m.M=1,m.A=Or(Mt(S)),m.u=w,m.R=!0,Ro(m,null)}function Ro(m,S){m.F=Date.now(),wi(m),m.B=Mt(m.A);var w=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),Mo(w.i,"t",b),m.C=0,w=m.j.L,m.h=new oi,m.g=vc(m.j,w?S:null,!m.u),m.P>0&&(m.O=new hn(h(m.Y,m,m.g),m.P)),S=m.V,w=m.g,b=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Xa[0]=Y.toString()),Y=Xa);for(let X=0;X<Y.length;X++){const de=_e(w,Y[X],b||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),Ei(),nh(m.i,m.v,m.B,m.l,m.S,m.u)}ri.prototype.ba=function(m){m=m.target;const S=this.O;S&&ui(m)==3?S.j():this.Y(m)},ri.prototype.Y=function(m){try{if(m==this.g)e:{const Ve=ui(this.g),Ct=this.g.ya(),et=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ve!=4||Ct==7||(Ct==8||et<=0?Ei(3):Ei(2)),Ii(this);var S=this.g.ca();this.X=S;var w=sh(this);if(this.o=S==200,ic(this.i,this.v,this.B,this.l,this.S,Ve,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,Y=this.g;if((b=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var X=b;break t}}X=null}if(m=X)Ai(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,m);else{this.o=!1,this.m=3,Nt(12),xn(this),Fn(this);break e}}if(this.R){m=!0;let mt;for(;!this.K&&this.C<w.length;)if(mt=oc(this,w),mt==$t){Ve==4&&(this.m=4,Nt(14),m=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==bt){this.m=4,Nt(15),Ai(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Ai(this.i,this.l,mt,null),xi(this,mt);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||w.length!=0||this.h.h||(this.m=1,Nt(16),m=!1),this.o=this.o&&m,!m)Ai(this.i,this.l,w,"[Invalid Chunked Response]"),xn(this),Fn(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),gl(de),de.P=!0,Nt(11))}}else Ai(this.i,this.l,w,null),xi(this,w);Ve==4&&xn(this),this.o&&!this.K&&(Ve==4?mc(this.j,this):(this.o=!1,wi(this)))}else es(this.g),S==400&&w.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),xn(this),Fn(this)}}}catch{}finally{}};function sh(m){if(!rc(m))return m.g.la();const S=Xt(m.g);if(S==="")return"";let w="";const b=S.length,Y=ui(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return xn(m),Fn(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<b;X++)m.h.h=!0,w+=m.h.i.decode(S[X],{stream:!(Y&&X==b-1)});return S.length=0,m.h.g+=w,m.C=0,m.h.g}function rc(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function oc(m,S){var w=m.C,b=S.indexOf(`
`,w);return b==-1?$t:(w=Number(S.substring(w,b)),isNaN(w)?bt:(b+=1,b+w>S.length?$t:(S=S.slice(b,b+w),m.C=b+w,S)))}ri.prototype.cancel=function(){this.K=!0,xn(this)};function wi(m){m.T=Date.now()+m.H,No(m,m.H)}function No(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Si(h(m.aa,m),S)}function Ii(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ri.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Lr(this.i,this.B),this.M!=2&&(Ei(),Nt(17)),xn(this),this.m=2,Fn(this)):No(this,this.T-m)};function Fn(m){m.j.I==0||m.K||mc(m.j,m)}function xn(m){Ii(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,Za(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function xi(m,S){try{var w=m.j;if(w.I!=0&&(w.g==m||Ni(w.h,m))){if(!m.L&&Ni(w.h,m)&&w.I==3){try{var b=w.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var Y=b;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)Uo(w),Hs(w);else break e;$r(w),Nt(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Si(h(w.Va,w),6e3));Ri(w.h)<=1&&w.ta&&(w.ta=void 0)}else Li(w,11)}else if((m.L||w.g==m)&&Uo(w),!D(S))for(Y=w.Ba.g.parse(S),S=0;S<Y.length;S++){let et=Y[S];const mt=et[0];if(!(mt<=w.K))if(w.K=mt,et=et[1],w.I==2)if(et[0]=="c"){w.M=et[1],w.ba=et[2];const Hn=et[3];Hn!=null&&(w.ka=Hn,w.j.info("VER="+w.ka));const Vi=et[4];Vi!=null&&(w.za=Vi,w.j.info("SVER="+w.za));const ci=et[5];ci!=null&&typeof ci=="number"&&ci>0&&(b=1.5*ci,w.O=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const fi=m.g;if(fi){const Kr=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var X=b.h;X.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(sl(X,X.h),X.h=null))}if(b.G){const Oo=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(b.wa=Oo,it(b.J,b.G,Oo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),b=w;var de=m;if(b.na=_c(b,b.L?b.ba:null,b.W),de.L){rl(b.h,de);var Ve=de,Ct=b.O;Ct&&(Ve.H=Ct),Ve.D&&(Ii(Ve),wi(Ve)),b.g=de}else hc(b);w.i.length>0&&ki(w)}else et[0]!="stop"&&et[0]!="close"||Li(w,7);else w.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Li(w,7):pl(w):et[0]!="noop"&&w.l&&w.l.qa(et),w.A=0)}}Ei(4)}catch{}}var Pt=class{constructor(m,S){this.g=m,this.map=S}};function nl(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ri(m){return m.h?1:m.g?m.g.size:0}function Ni(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function sl(m,S){m.g?m.g.add(S):m.h=S}function rl(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}nl.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ol(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const w of m.g.values())S=S.concat(w.G);return S}return I(m.i)}var ac=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bo(m,S){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const b=m[w].indexOf("=");let Y,X=null;b>=0?(Y=m[w].substring(0,b),X=m[w].substring(b+1)):Y=m[w],S(Y,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Rn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof Rn?(this.l=m.l,Kt(this,m.j),this.o=m.o,this.g=m.g,Ls(this,m.u),this.h=m.h,al(this,fc(m.i)),this.m=m.m):m&&(S=String(m).match(ac))?(this.l=!1,Kt(this,S[1]||"",!0),this.o=bi(S[2]||""),this.g=bi(S[3]||"",!0),Ls(this,S[4]),this.h=bi(S[5]||"",!0),al(this,S[6]||"",!0),this.m=bi(S[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}Rn.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(Fr(S,Po,!0),":");var w=this.g;return(w||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Fr(S,Po,!0),"@"),m.push(Xi(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Fr(w,w.charAt(0)=="/"?ll:lc,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Fr(w,uc)),m.join("")},Rn.prototype.resolve=function(m){const S=Mt(this);let w=!!m.j;w?Kt(S,m.j):w=!!m.o,w?S.o=m.o:w=!!m.g,w?S.g=m.g:w=m.u!=null;var b=m.h;if(w)Ls(S,m.u);else if(w=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var Y=S.h.lastIndexOf("/");Y!=-1&&(b=S.h.slice(0,Y+1)+b)}if(Y=b,Y==".."||Y==".")b="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){b=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const X=[];for(let de=0;de<Y.length;){const Ve=Y[de++];Ve=="."?b&&de==Y.length&&X.push(""):Ve==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&de==Y.length&&X.push("")):(X.push(Ve),b=!0)}b=X.join("/")}else b=Y}return w?S.h=b:w=m.i.toString()!=="",w?al(S,fc(m.i)):w=!!m.m,w&&(S.m=m.m),S};function Mt(m){return new Rn(m)}function Kt(m,S,w){m.j=w?bi(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Ls(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function al(m,S,w){S instanceof Us?(m.i=S,Do(m.i,m.l)):(w||(S=Fr(S,Vs)),m.i=new Us(S,m.l))}function it(m,S,w){m.i.set(S,w)}function Or(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function bi(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Fr(m,S,w){return typeof m=="string"?(m=encodeURI(m).replace(S,_n),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function _n(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Po=/[#\/\?@]/g,lc=/[#\?:]/g,ll=/[#\?]/g,Vs=/[#\?@]/g,uc=/#/g;function Us(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function vn(m){m.g||(m.g=new Map,m.h=0,m.i&&bo(m.i,function(S,w){m.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=Us.prototype,n.add=function(m,S){vn(this),this.i=null,m=Os(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(S),this.h+=1,this};function cc(m,S){vn(m),S=Os(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function ul(m,S){return vn(m),S=Os(m,S),m.g.has(S)}n.forEach=function(m,S){vn(this),this.g.forEach(function(w,b){w.forEach(function(Y){m.call(S,Y,b,this)},this)},this)};function cl(m,S){vn(m);let w=[];if(typeof S=="string")ul(m,S)&&(w=w.concat(m.g.get(Os(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)w=w.concat(m[S]);return w}n.set=function(m,S){return vn(this),this.i=null,m=Os(this,m),ul(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=cl(this,m),m.length>0?String(m[0]):S):S};function Mo(m,S,w){cc(m,S),w.length>0&&(m.i=null,m.g.set(Os(m,S),I(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var w=S[b];const Y=Xi(w);w=cl(this,w);for(let X=0;X<w.length;X++){let de=Y;w[X]!==""&&(de+="="+Xi(w[X])),m.push(de)}}return this.i=m.join("&")};function fc(m){const S=new Us;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Os(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Do(m,S){S&&!m.j&&(vn(m),m.i=null,m.g.forEach(function(w,b){const Y=b.toLowerCase();b!=Y&&(cc(this,b),Mo(this,Y,w))},m)),m.j=S}function ai(m,S){const w=new si;if(u.Image){const b=new Image;b.onload=y(qn,w,"TestLoadImage: loaded",!0,S,b),b.onerror=y(qn,w,"TestLoadImage: error",!1,S,b),b.onabort=y(qn,w,"TestLoadImage: abort",!1,S,b),b.ontimeout=y(qn,w,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else S(!1)}function fl(m,S){const w=new si,b=new AbortController,Y=setTimeout(()=>{b.abort(),qn(w,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:b.signal}).then(X=>{clearTimeout(Y),X.ok?qn(w,"TestPingServer: ok",!0,S):qn(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),qn(w,"TestPingServer: error",!1,S)})}function qn(m,S,w,b,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),b(w)}catch{}}function Fs(){this.g=new Xu}function Pi(m){this.i=m.Sb||null,this.h=m.ab||!1}E(Pi,Zu),Pi.prototype.g=function(){return new qr(this.i,this.h)};function qr(m,S){Rt.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(qr,Rt),n=qr.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,li(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ko(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ko(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?qs(this):li(this),this.readyState==3&&ko(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,qs(this))},n.Na=function(m){this.g&&(this.response=m,qs(this))},n.ga=function(){this.g&&qs(this)};function qs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,li(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=S.next();return m.join(`\r
`)};function li(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Bn(m){let S="";return xe(m,function(w,b){S+=b,S+=":",S+=w,S+=`\r
`}),S}function Br(m,S,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=Bn(w),typeof m=="string"?w!=null&&Xi(w):it(m,S,w))}function ot(m){Rt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ot,Rt);var Mi=/^https?$/i,dl=["POST","PUT"];n=ot.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tl.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(X){Hr(this,X);return}if(m=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var Y in b)w.set(Y,b[Y]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())w.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(dl,S,void 0)>=0)||b||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of w)this.g.setRequestHeader(X,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){Hr(this,X)}};function Hr(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,hl(m),Zi(m)}function hl(m){m.A||(m.A=!0,qt(m,"complete"),qt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,qt(this,"complete"),qt(this,"abort"),Zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},n.Xa=function(){zr(this)};function zr(m){if(m.h&&typeof a<"u"){if(m.v&&ui(m)==4)setTimeout(m.Ca.bind(m),0);else if(qt(m,"readystatechange"),ui(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var b;if(b=X===0){let de=String(m.D).match(ac)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),b=!Mi.test(de?de.toLowerCase():"")}w=b}if(w)qt(m,"complete"),qt(m,"success");else{m.o=6;try{var Y=ui(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",hl(m)}}finally{Zi(m)}}}}function Zi(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,S||qt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),th(S)}};function Xt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function es(m){const S={};m=(m.g&&ui(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(D(m[b]))continue;var w=sc(m[b]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=S[Y]||[];S[Y]=X,X.push(w)}Fe(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(m,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||S}function Bs(m){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,m),this.Za=Di("retryDelaySeedMs",1e4,m),this.Ta=Di("forwardChannelMaxRetries",2,m),this.va=Di("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new nl(m&&m.concurrentRequestLimit),this.Ba=new Fs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Bs.prototype,n.ka=8,n.I=1,n.connect=function(m,S,w,b){Nt(0),this.W=m,this.H=S||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.J=_c(this,null,this.W),ki(this)};function pl(m){if(Lo(m),m.I==3){var S=m.V++,w=Mt(m.J);if(it(w,"SID",m.M),it(w,"RID",S),it(w,"TYPE","terminate"),Gr(m,w),S=new ri(m,m.j,S),S.M=2,S.A=Or(Mt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=S.A,w=!0),w||(S.g=vc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),wi(S)}yc(m)}function Hs(m){m.g&&(gl(m),m.g.cancel(),m.g=null)}function Lo(m){Hs(m),m.v&&(u.clearTimeout(m.v),m.v=null),Uo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function ki(m){if(!il(m.h)&&!m.m){m.m=!0;var S=m.Ea;ue||M(),ie||(ue(),ie=!0),P.add(S,m),m.D=0}}function Vo(m,S){return Ri(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Si(h(m.Ea,m,S),gc(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new ri(this,this.j,m);let X=this.o;if(this.U&&(X?(X=q(X),re(X,this.U)):X=this.U),this.u!==null||this.R||(Y.J=X,X=null),this.S)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=dc(this,Y,S),w=Mt(this.J),it(w,"RID",m),it(w,"CVER",22),this.G&&it(w,"X-HTTP-Session-Id",this.G),Gr(this,w),X&&(this.R?S="headers="+Xi(Bn(X))+"&"+S:this.u&&Br(w,this.u,X)),sl(this.h,Y),this.Ra&&it(w,"TYPE","init"),this.S?(it(w,"$req",S),it(w,"SID","null"),Y.U=!0,Ci(Y,w,null)):Ci(Y,w,S),this.I=2}}else this.I==3&&(m?ml(this,m):this.i.length==0||il(this.h)||ml(this))};function ml(m,S){var w;S?w=S.l:w=m.V++;const b=Mt(m.J);it(b,"SID",m.M),it(b,"RID",w),it(b,"AID",m.K),Gr(m,b),m.u&&m.o&&Br(b,m.u,m.o),w=new ri(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),S&&(m.i=S.G.concat(m.i)),S=dc(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),sl(m.h,w),Ci(w,b,S)}function Gr(m,S){m.H&&xe(m.H,function(w,b){it(S,b,w)}),m.l&&xe({},function(w,b){it(S,b,w)})}function dc(m,S,w){w=Math.min(m.i.length,w);const b=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Ve=-1;for(;;){const Ct=["count="+w];Ve==-1?w>0?(Ve=Y[0].g,Ct.push("ofs="+Ve)):Ve=0:Ct.push("ofs="+Ve);let et=!0;for(let mt=0;mt<w;mt++){var X=Y[mt].g;const Hn=Y[mt].map;if(X-=Ve,X<0)Ve=Math.max(0,Y[mt].g-100),et=!1;else try{X="req"+X+"_"||"";try{var de=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Vi,ci]of de){let fi=ci;f(ci)&&(fi=ks(ci)),Ct.push(X+Vi+"="+encodeURIComponent(fi))}}catch(Vi){throw Ct.push(X+"type="+encodeURIComponent("_badmap")),Vi}}catch{b&&b(Hn)}}if(et){de=Ct.join("&");break e}}de=void 0}return m=m.i.splice(0,w),S.G=m,de}function hc(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;ue||M(),ie||(ue(),ie=!0),P.add(S,m),m.A=0}}function $r(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Si(h(m.Da,m),gc(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,pc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Si(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Hs(this),pc(this))};function gl(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function pc(m){m.g=new ri(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=Mt(m.na);it(S,"RID","rpc"),it(S,"SID",m.M),it(S,"AID",m.K),it(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(S,"TO",m.ia),it(S,"TYPE","xmlhttp"),Gr(m,S),m.u&&m.o&&Br(S,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=Or(Mt(S)),w.u=null,w.R=!0,Ro(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Hs(this),$r(this),Nt(19))};function Uo(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function mc(m,S){var w=null;if(m.g==S){Uo(m),gl(m),m.g=null;var b=2}else if(Ni(m.h,S))w=S.G,rl(m.h,S),b=1;else return;if(m.I!=0){if(S.o)if(b==1){w=S.u?S.u.length:0,S=Date.now()-S.F;var Y=m.D;b=xo(),qt(b,new Ti(b,w)),ki(m)}else hc(m);else if(Y=S.m,Y==3||Y==0&&S.X>0||!(b==1&&Vo(m,S)||b==2&&$r(m)))switch(w&&w.length>0&&(S=m.h,S.i=S.i.concat(w)),Y){case 1:Li(m,5);break;case 4:Li(m,10);break;case 3:Li(m,6);break;default:Li(m,2)}}}function gc(m,S){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*S}function Li(m,S){if(m.j.info("Error code "+S),S==2){var w=h(m.bb,m),b=m.Ua;const Y=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kt(b,"https"),Or(b),Y?ai(b.toString(),w):fl(b.toString(),w)}else Nt(2);m.I=0,m.l&&m.l.pa(S),yc(m),Lo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function yc(m){if(m.I=0,m.ja=[],m.l){const S=ol(m.h);(S.length!=0||m.i.length!=0)&&(N(m.ja,S),N(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function _c(m,S,w){var b=w instanceof Rn?Mt(w):new Rn(w);if(b.g!="")S&&(b.g=S+"."+b.g),Ls(b,b.u);else{var Y=u.location;b=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;const X=new Rn(null);b&&Kt(X,b),S&&(X.g=S),Y&&Ls(X,Y),w&&(X.h=w),b=X}return w=m.G,S=m.wa,w&&S&&it(b,w,S),it(b,"VER",m.ka),Gr(m,b),b}function vc(m,S,w){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new ot(new Pi({ab:w})):new ot(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}n=Ec.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function zs(){}zs.prototype.g=function(m,S){return new pn(m,S)};function pn(m,S){Rt.call(this),this.g=new Bs(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!D(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new ts(this)}E(pn,Rt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){pl(this.g)},pn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=ks(m),m=w);S.i.push(new Pt(S.Ya++,m)),S.I==3&&ki(S)},pn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,pn.Z.N.call(this)};function Tc(m){jt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const w in S){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(Tc,jt);function Sc(){On.call(this),this.status=1}E(Sc,On);function ts(m){this.g=m}E(ts,Ec),ts.prototype.ra=function(){qt(this.g,"a")},ts.prototype.qa=function(m){qt(this.g,new Tc(m))},ts.prototype.pa=function(m){qt(this.g,new Sc)},ts.prototype.oa=function(){qt(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Tw=function(){return new zs},Ew=function(){return xo()},vw=At,Wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,Yf=Vr,el.COMPLETE="complete",_w=el,ec.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,uu=ec,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,yw=ot}).apply(typeof bf<"u"?bf:typeof self<"u"?self:typeof window<"u"?window:{});const ES="@firebase/firestore",TS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new bg("@firebase/firestore");function ya(){return vo.logLevel}function me(n,...e){if(vo.logLevel<=Ke.DEBUG){const t=e.map(zg);vo.debug(`Firestore (${Ja}): ${n}`,...t)}}function xs(n,...e){if(vo.logLevel<=Ke.ERROR){const t=e.map(zg);vo.error(`Firestore (${Ja}): ${n}`,...t)}}function Pa(n,...e){if(vo.logLevel<=Ke.WARN){const t=e.map(zg);vo.warn(`Firestore (${Ja}): ${n}`,...t)}}function zg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sw(n,i,t)}function Sw(n,e,t){let i=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw xs(i),new Error(i)}function nt(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||Sw(e,r,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class U4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class O4{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let a=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tr,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},f=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new Aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class F4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new F4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class SS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new SS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new SS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=H4(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Je(n,e){return n<e?-1:n>e?1:0}function jm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return ym(r)===ym(a)?Je(r,a):ym(r)?1:-1}return Je(n.length,e.length)}const z4=55296,G4=57343;function ym(n){const e=n.charCodeAt(0);return e>=z4&&e<=G4}function Ma(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="__name__";class Bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Bi.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Je(e.length,t.length)}static compareSegments(e,t){const i=Bi.isNumericId(e),r=Bi.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class _t extends Bi{construct(e,t,i){return new _t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const $4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Bi{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return $4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AS}static keyField(){return new rn([AS])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(a(),r++)}if(a(),u)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(_t.fromString(e))}static fromName(e){return new Ae(_t.fromString(e).popFirst(5))}static empty(){return new Ae(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n,e,t){if(!t)throw new Te(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function J4(n,e,t,i){if(e===!0&&i===!0)throw new Te(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CS(n){if(!Ae.isDocumentKey(n))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $g(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Nu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$g(n);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ku(n,e){if(!Cw(n))throw new Te(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Te(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=-62135596800,IS=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*IS);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wS)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IS}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ot("string",pt._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new pt(0,0))}static max(){return new Ne(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=-1;function Y4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new Sr(r,Ae.empty(),e)}function Q4(n){return new Sr(n.readTime,n.key,bu)}class Sr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Sr(Ne.min(),Ae.empty(),bu)}static max(){return new Sr(Ne.max(),Ae.empty(),bu)}}function W4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==j4)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,i)=>{t(e)}))}static reject(e){return new ae(((t,i)=>{i(e)}))}static waitFor(e){return new ae(((t,i)=>{let r=0,a=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++a,u&&a===r&&t()}),(d=>i(d)))})),u=!0,a===r&&t()}))}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next((r=>r?ae.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new ae(((i,r)=>{const a=e.length,u=new Array(a);let f=0;for(let d=0;d<a;d++){const h=d;t(e[h]).next((y=>{u[h]=y,++f,f===a&&i(u)}),(y=>r(y)))}}))}static doWhile(e,t){return new ae(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Z4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=-1;function zd(n){return n==null}function md(n){return n===0&&1/n==-1/0}function e5(n){return typeof n=="number"&&Number.isInteger(n)&&!md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="";function t5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xS(e)),e=n5(n.get(t),e);return xS(e)}function n5(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case ww:t+="";break;default:t+=a}}return t}function xS(n){return n+ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pf(this.root,e,this.comparator,!0)}}class Pf{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??sn.RED,this.left=r??sn.EMPTY,this.right=a??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new sn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return sn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NS(this.data.getIterator())}getIteratorFrom(e){return new NS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class NS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new gi([])}unionWith(e){let t=new zt(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new xw("Invalid base64 string: "+a):a}})(e);return new on(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const i5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=i5.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cr(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="server_timestamp",Nw="__type__",bw="__previous_value__",Pw="__local_write_time__";function Jg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Nw])==null?void 0:i.stringValue)===Rw}function Gd(n){const e=n.mapValue.fields[bw];return Jg(e)?Gd(e):e}function Pu(n){const e=Ar(n.mapValue.fields[Pw].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t,i,r,a,u,f,d,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=y}}const gd="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||gd}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===gd}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="__type__",r5="__max__",Mf={mapValue:{}},Dw="__vector__",yd="value";function wr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jg(n)?4:a5(n)?9007199254740991:o5(n)?10:11:Ie(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const t=wr(n);if(t!==wr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pu(n).isEqual(Pu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=Ar(r.timestampValue),f=Ar(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Cr(r.bytesValue).isEqual(Cr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return xt(r.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(r.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return xt(r.integerValue)===xt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=xt(r.doubleValue),f=xt(a.doubleValue);return u===f?md(u)===md(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Ma(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},f=a.mapValue.fields||{};if(RS(u)!==RS(f))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(f[d]===void 0||!Qi(u[d],f[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Du(n,e){return(n.values||[]).find((t=>Qi(t,e)))!==void 0}function Da(n,e){if(n===e)return 0;const t=wr(n),i=wr(e);if(t!==i)return Je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=xt(a.integerValue||a.doubleValue),d=xt(u.integerValue||u.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return bS(n.timestampValue,e.timestampValue);case 4:return bS(Pu(n),Pu(e));case 5:return jm(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=Cr(a),d=Cr(u);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),d=u.split("/");for(let h=0;h<f.length&&h<d.length;h++){const y=Je(f[h],d[h]);if(y!==0)return y}return Je(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=Je(xt(a.latitude),xt(u.latitude));return f!==0?f:Je(xt(a.longitude),xt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return PS(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,N,U;const f=a.fields||{},d=u.fields||{},h=(T=f[yd])==null?void 0:T.arrayValue,y=(I=d[yd])==null?void 0:I.arrayValue,E=Je(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((U=y==null?void 0:y.values)==null?void 0:U.length)||0);return E!==0?E:PS(h,y)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Mf.mapValue&&u===Mf.mapValue)return 0;if(a===Mf.mapValue)return 1;if(u===Mf.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),h=u.fields||{},y=Object.keys(h);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=jm(d[E],y[E]);if(T!==0)return T;const I=Da(f[d[E]],h[y[E]]);if(I!==0)return I}return Je(d.length,y.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function bS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Ar(n),i=Ar(e),r=Je(t.seconds,i.seconds);return r!==0?r:Je(t.nanos,i.nanos)}function PS(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Da(t[r],i[r]);if(a)return a}return Je(t.length,i.length)}function ka(n){return Xm(n)}function Xm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ar(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=Xm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${Xm(t.fields[u])}`;return r+"}"})(n.mapValue):Ie(61005,{value:n})}function Qf(n){switch(wr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(n);return e?16+Qf(e):16;case 5:return 2*n.stringValue.length;case 6:return Cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Qf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ao(i.fields,((a,u)=>{r+=a.length+Qf(u)})),r})(n.mapValue);default:throw Ie(13486,{value:n})}}function Zm(n){return!!n&&"integerValue"in n}function Yg(n){return!!n&&"arrayValue"in n}function MS(n){return!!n&&"nullValue"in n}function DS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wf(n){return!!n&&"mapValue"in n}function o5(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Mw])==null?void 0:i.stringValue)===Dw}function _u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=_u(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return{...n}}function a5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===r5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=rn.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=_u(u):r.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Wf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ao(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new jn(_u(this.value))}}function kw(n){const e=[];return Ao(n.fields,((t,i)=>{const r=new rn([t]);if(Wf(i)){const a=kw(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,i,r,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new cn(e,0,Ne.min(),Ne.min(),Ne.min(),jn.empty(),0)}static newFoundDocument(e,t,i,r){return new cn(e,1,t,Ne.min(),i,r,0)}static newNoDocument(e,t){return new cn(e,2,t,Ne.min(),Ne.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ne.min(),Ne.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.position=e,this.inclusive=t}}function kS(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=Ae.comparator(Ae.fromName(u.referenceValue),t.key):i=Da(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function LS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function l5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{}class Ht extends Lw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new c5(e,t,i):t==="array-contains"?new h5(e,i):t==="in"?new p5(e,i):t==="not-in"?new m5(e,i):t==="array-contains-any"?new g5(e,i):new Ht(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new f5(e,i):new d5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Da(t,this.value)):t!==null&&wr(this.value)===wr(t)&&this.matchesComparison(Da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends Lw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wi(e,t)}matches(e){return Vw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vw(n){return n.op==="and"}function Uw(n){return u5(n)&&Vw(n)}function u5(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function eg(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+ka(n.value);if(Uw(n))return n.filters.map((e=>eg(e))).join(",");{const e=n.filters.map((t=>eg(t))).join(",");return`${n.op}(${e})`}}function Ow(n,e){return n instanceof Ht?(function(i,r){return r instanceof Ht&&i.op===r.op&&i.field.isEqual(r.field)&&Qi(i.value,r.value)})(n,e):n instanceof Wi?(function(i,r){return r instanceof Wi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,f)=>a&&Ow(u,r.filters[f])),!0):!1})(n,e):void Ie(19439)}function Fw(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${ka(t.value)}`})(n):n instanceof Wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Fw).join(" ,")+"}"})(n):"Filter"}class c5 extends Ht{constructor(e,t,i){super(e,t,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class f5 extends Ht{constructor(e,t){super(e,"in",t),this.keys=qw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class d5 extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=qw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ae.fromName(i.referenceValue)))}class h5 extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yg(t)&&Du(t.arrayValue,this.value)}}class p5 extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class m5 extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class g5 extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Du(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t=null,i=[],r=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function VS(n,e=null,t=[],i=[],r=null,a=null,u=null){return new y5(n,e,t,i,r,a,u)}function Qg(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>eg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ka(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ka(i))).join(",")),e.Te=t}return e.Te}function Wg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ow(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LS(n.startAt,e.startAt)&&LS(n.endAt,e.endAt)}function tg(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t=null,i=[],r=[],a=null,u="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _5(n,e,t,i,r,a,u,f){return new $d(n,e,t,i,r,a,u,f)}function jg(n){return new $d(n)}function US(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function v5(n){return n.collectionGroup!==null}function vu(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new zt(rn.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new vd(a,i))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new vd(rn.keyField(),i))}return e.Ie}function $i(n){const e=Me(n);return e.Ee||(e.Ee=E5(e,vu(n))),e.Ee}function E5(n,e){if(n.limitType==="F")return VS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new vd(r.field,a)}));const t=n.endAt?new _d(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new _d(n.startAt.position,n.startAt.inclusive):null;return VS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ng(n,e,t){return new $d(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return Wg($i(n),$i(e))&&n.limitType===e.limitType}function Bw(n){return`${Qg($i(n))}|lt:${n.limitType}`}function _a(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Fw(r))).join(", ")}]`),zd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>ka(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>ka(r))).join(",")),`Target(${i})`})($i(n))}; limitType=${n.limitType})`}function Jd(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ae.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of vu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,d){const h=kS(u,f,d);return u.inclusive?h<=0:h<0})(i.startAt,vu(i),r)||i.endAt&&!(function(u,f,d){const h=kS(u,f,d);return u.inclusive?h>=0:h>0})(i.endAt,vu(i),r))})(n,e)}function T5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hw(n){return(e,t)=>{let i=!1;for(const r of vu(n)){const a=S5(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function S5(n,e,t){const i=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,u,f){const d=u.data.field(a),h=f.data.field(a);return d!==null&&h!==null?Da(d,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=new vt(Ae.comparator);function Rs(){return A5}const zw=new vt(Ae.comparator);function cu(...n){let e=zw;for(const t of n)e=e.insert(t.key,t);return e}function Gw(n){let e=zw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return Eu()}function $w(){return Eu()}function Eu(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const C5=new vt(Ae.comparator),w5=new zt(Ae.comparator);function Ye(...n){let e=w5;for(const t of n)e=e.add(t);return e}const I5=new zt(Je);function x5(){return I5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function Kw(n){return{integerValue:""+n}}function R5(n,e){return e5(e)?Kw(e):Xg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function N5(n,e,t){return n instanceof Ed?(function(r,a){const u={fields:{[Nw]:{stringValue:Rw},[Pw]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Jg(a)&&(a=Gd(a)),a&&(u.fields[bw]=a),{mapValue:u}})(t,e):n instanceof ku?Yw(n,e):n instanceof Lu?Qw(n,e):(function(r,a){const u=Jw(r,a),f=OS(u)+OS(r.Ae);return Zm(u)&&Zm(r.Ae)?Kw(f):Xg(r.serializer,f)})(n,e)}function b5(n,e,t){return n instanceof ku?Yw(n,e):n instanceof Lu?Qw(n,e):t}function Jw(n,e){return n instanceof Td?(function(i){return Zm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ed extends Yd{}class ku extends Yd{constructor(e){super(),this.elements=e}}function Yw(n,e){const t=Ww(e);for(const i of n.elements)t.some((r=>Qi(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Lu extends Yd{constructor(e){super(),this.elements=e}}function Qw(n,e){let t=Ww(e);for(const i of n.elements)t=t.filter((r=>!Qi(r,i)));return{arrayValue:{values:t}}}class Td extends Yd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OS(n){return xt(n.integerValue||n.doubleValue)}function Ww(n){return Yg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function P5(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof ku&&r instanceof ku||i instanceof Lu&&r instanceof Lu?Ma(i.elements,r.elements,Qi):i instanceof Td&&r instanceof Td?Qi(i.Ae,r.Ae):i instanceof Ed&&r instanceof Ed})(n.transform,e.transform)}class M5{constructor(e,t){this.version=e,this.transformResults=t}}class Ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ss}static exists(e){return new Ss(void 0,e)}static updateTime(e){return new Ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qd{}function jw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zw(n.key,Ss.none()):new Ju(n.key,n.data,Ss.none());{const t=n.data,i=jn.empty();let r=new zt(rn.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new wo(n.key,i,new gi(r.toArray()),Ss.none())}}function D5(n,e,t){n instanceof Ju?(function(r,a,u){const f=r.value.clone(),d=qS(r.fieldTransforms,a,u.transformResults);f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof wo?(function(r,a,u){if(!jf(r.precondition,a))return void a.convertToUnknownDocument(u.version);const f=qS(r.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(Xw(r)),d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Tu(n,e,t,i){return n instanceof Ju?(function(a,u,f,d){if(!jf(a.precondition,u))return f;const h=a.value.clone(),y=BS(a.fieldTransforms,d,u);return h.setAll(y),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof wo?(function(a,u,f,d){if(!jf(a.precondition,u))return f;const h=BS(a.fieldTransforms,d,u),y=u.data;return y.setAll(Xw(a)),y.setAll(h),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,f){return jf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function k5(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=Jw(i.transform,r||null);a!=null&&(t===null&&(t=jn.empty()),t.set(i.field,a))}return t||null}function FS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ma(i,r,((a,u)=>P5(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ju extends Qd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wo extends Qd{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Xw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function qS(n,e,t){const i=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,f=e.data.field(a.field);i.set(a.field,b5(u,f,t[r]))}return i}function BS(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,N5(a,u,e))}return i}class Zw extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L5 extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&D5(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Tu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Tu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$w();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(r.key)?null:f;const d=jw(u,f);d!==null&&i.set(r.key,d),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,((t,i)=>FS(t,i)))&&Ma(this.baseMutations,e.baseMutations,((t,i)=>FS(t,i)))}}class Zg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return C5})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new Zg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,We;function F5(n){switch(n){case ce.OK:return Ie(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function eI(n){if(n===void 0)return xs("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Ut.OK:return ce.OK;case Ut.CANCELLED:return ce.CANCELLED;case Ut.UNKNOWN:return ce.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ce.INTERNAL;case Ut.UNAVAILABLE:return ce.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ce.NOT_FOUND;case Ut.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ut.ABORTED:return ce.ABORTED;case Ut.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ut.DATA_LOSS:return ce.DATA_LOSS;default:return Ie(39323,{code:n})}}(We=Ut||(Ut={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=new Er([4294967295,4294967295],0);function HS(n){const e=q5().encode(n),t=new gw;return t.update(e),new Uint8Array(t.digest())}function zS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Er([t,i],0),new Er([r,a],0)]}class ey{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(i<0)throw new fu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Er.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Er.fromNumber(i)));return r.compare(B5)===1&&(r=new Er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HS(e),[i,r]=zS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ey(a,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=HS(e),[i,r]=zS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wd(Ne.min(),r,new vt(Je),Rs(),Ye())}}class Yu{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Yu(i,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class tI{constructor(e,t){this.targetId=e,this.Ce=t}}class nI{constructor(e,t,i=on.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class GS{constructor(){this.ve=0,this.Fe=$S(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),i=Ye();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ie(38017,{changeType:a})}})),new Yu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=$S()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class H5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.Je=Df(),this.He=Df(),this.Ye=new vt(Je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(tg(a))if(i===0){const u=new Ae(a.path);this.et(t,u,cn.newNoDocument(u,Ne.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),d=f?this.ct(f,e,u):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,f;try{u=Cr(i).toUint8Array()}catch(d){if(d instanceof xw)return Pa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new ey(u,r,a)}catch(d){return Pa(d instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&tg(f.target)){const d=new Ae(f.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,cn.newNoDocument(d,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ye();this.He.forEach(((a,u)=>{let f=!0;u.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new Wd(e,t,this.Ye,this.je,i);return this.je=Rs(),this.Je=Df(),this.He=Df(),this.Ye=new vt(Je),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new GS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(Je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(Je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Df(){return new vt(Ae.comparator)}function $S(){return new vt(Ae.comparator)}const z5={asc:"ASCENDING",desc:"DESCENDING"},G5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$5={and:"AND",or:"OR"};class K5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ig(n,e){return n.useProto3Json||zd(e)?e:{value:e}}function Sd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J5(n,e){return Sd(n,e.toTimestamp())}function Ki(n){return nt(!!n,49232),Ne.fromTimestamp((function(t){const i=Ar(t);return new pt(i.seconds,i.nanos)})(n))}function ty(n,e){return sg(n,e).canonicalString()}function sg(n,e){const t=(function(r){return new _t(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sI(n){const e=_t.fromString(n);return nt(uI(e),10190,{key:e.toString()}),e}function rg(n,e){return ty(n.databaseId,e.path)}function _m(n,e){const t=sI(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(oI(t))}function rI(n,e){return ty(n.databaseId,e)}function Y5(n){const e=sI(n);return e.length===4?_t.emptyPath():oI(e)}function og(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oI(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KS(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function Q5(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(nt(y===void 0||typeof y=="string",58123),on.fromBase64String(y||"")):(nt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),on.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const y=h.code===void 0?ce.UNKNOWN:eI(h.code);return new Te(y,h.message||"")})(u);t=new nI(i,r,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=_m(n,i.document.name),a=Ki(i.document.updateTime),u=i.document.createTime?Ki(i.document.createTime):Ne.min(),f=new jn({mapValue:{fields:i.document.fields}}),d=cn.newFoundDocument(r,a,u,f),h=i.targetIds||[],y=i.removedTargetIds||[];t=new Xf(h,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=_m(n,i.document),a=i.readTime?Ki(i.readTime):Ne.min(),u=cn.newNoDocument(r,a),f=i.removedTargetIds||[];t=new Xf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=_m(n,i.document),a=i.removedTargetIds||[];t=new Xf([],a,r,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new O5(r,a),f=i.targetId;t=new tI(f,u)}}return t}function W5(n,e){let t;if(e instanceof Ju)t={update:KS(n,e.key,e.value)};else if(e instanceof Zw)t={delete:rg(n,e.key)};else if(e instanceof wo)t={update:KS(n,e.key,e.data),updateMask:r3(e.fieldMask)};else{if(!(e instanceof L5))return Ie(16599,{Vt:e.type});t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof Ed)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ku)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Lu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Td)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:J5(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function j5(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?Ki(r.updateTime):Ki(a);return u.isEqual(Ne.min())&&(u=Ki(a)),new M5(u,r.transformResults||[])})(t,e)))):[]}function X5(n,e){return{documents:[rI(n,e.path)]}}function Z5(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rI(n,r);const a=(function(h){if(h.length!==0)return lI(Wi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:va(T.field),direction:n3(T.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=ig(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function e3(n){let e=Y5(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){nt(i===1,65062);const y=t.from[0];y.allDescendants?r=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(E){const T=aI(E);return T instanceof Wi&&Uw(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(N){return new vd(Ea(N.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,zd(T)?null:T})(t.limit));let d=null;t.startAt&&(d=(function(E){const T=!!E.before,I=E.values||[];return new _d(I,T)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const T=!E.before,I=E.values||[];return new _d(I,T)})(t.endAt)),_5(e,r,u,a,f,"F",d,h)}function t3(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ea(t.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ea(t.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ea(t.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ea(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(Ea(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wi.create(t.compositeFilter.filters.map((i=>aI(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function n3(n){return z5[n]}function i3(n){return G5[n]}function s3(n){return $5[n]}function va(n){return{fieldPath:n.canonicalString()}}function Ea(n){return rn.fromServerFormat(n.fieldPath)}function lI(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(DS(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NAN"}};if(MS(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DS(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NAN"}};if(MS(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(t.field),op:i3(t.op),value:t.value}}})(n):n instanceof Wi?(function(t){const i=t.getFilters().map((r=>lI(r)));return i.length===1?i[0]:{compositeFilter:{op:s3(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function r3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t,i,r,a=Ne.min(),u=Ne.min(),f=on.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.yt=e}}function a3(n){const e=e3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ng(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.Cn=new u3}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Sr.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class u3{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new zt(_t.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new zt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cI=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(cI,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="LruGarbageCollector",c3=1048576;function QS([n,e],[t,i]){const r=Je(n,t);return r===0?Je(e,i):r}class f3{constructor(e){this.Ir=e,this.buffer=new zt(QS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();QS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d3{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(YS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qa(t)?me(YS,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Vr(3e5)}))}}class h3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Hd.ce);const i=new f3(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(JS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,a,u,f,d,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,u=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),ya()<=Ke.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-y}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:E}))))}}function p3(n,e){return new h3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Tu(i.mutation,r,gi.empty(),pt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ye()){const r=fo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=cu();return a.forEach(((f,d)=>{u=u.insert(f,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ye())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let a=Rs();const u=Eu(),f=(function(){return Eu()})();return t.forEach(((d,h)=>{const y=i.get(h.key);r.has(h.key)&&(y===void 0||y.mutation instanceof wo)?a=a.insert(h.key,h):y!==void 0?(u.set(h.key,y.mutation.getFieldMask()),Tu(y.mutation,h,y.mutation.getFieldMask(),pt.now())):u.set(h.key,gi.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,y)=>u.set(h,y))),t.forEach(((h,y)=>f.set(h,new g3(y,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Eu();let r=new vt(((u,f)=>u-f)),a=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let y=i.get(d)||gi.empty();y=f.applyToLocalView(h,y),i.set(d,y);const E=(r.get(f.batchId)||Ye()).add(d);r=r.insert(f.batchId,E)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),h=d.key,y=d.value,E=$w();y.forEach((T=>{if(!a.has(T)){const I=jw(t.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):ae.resolve(fo());let f=bu,d=a;return u.next((h=>ae.forEach(h,((y,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),a.get(y)?ae.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,Ye()))).next((y=>({batchId:f,changes:Gw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((i=>{let r=cu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=cu();return this.indexManager.getCollectionParents(e,a).next((f=>ae.forEach(f,(d=>{const h=(function(E,T){return new $d(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((y=>{y.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((d,h)=>{const y=h.getKey();u.get(y)===null&&(u=u.insert(y,cn.newInvalidDocument(y)))}));let f=cu();return u.forEach(((d,h)=>{const y=a.get(d);y!==void 0&&Tu(y.mutation,h,gi.empty(),pt.now()),Jd(t,h)&&(f=f.insert(d,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ki(r.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:a3(r.bundledQuery),readTime:Ki(r.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.overlays=new vt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return ae.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.St(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const r=fo(),a=t.length+1,u=new Ae(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const d=f.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&r.set(d.getKey(),d)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new vt(((h,y)=>h-y));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=fo(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const f=fo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,y)=>f.set(h,y))),!(f.size()>=r)););return ae.resolve(f)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new U5(t,i));let a=this.qr.get(t);a===void 0&&(a=Ye(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.Qr=new zt(Qt.$r),this.Ur=new zt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ae(new _t([])),i=new Qt(t,e),r=new Qt(t,e+1),a=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new _t([])),i=new Qt(t,e),r=new Qt(t,e+1);let a=Ye();return this.Ur.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Je(e.Yr,t.Yr)}static Kr(e,t){return Je(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Qt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new V5(a,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new Qt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),a=r<0?0:r;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Kg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Qt(t,0),r=new Qt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(u=>{const f=this.Xr(u.Yr);a.push(f)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zt(Je);return t.forEach((r=>{const a=new Qt(r,0),u=new Qt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(f=>{i=i.add(f.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Ae.isDocumentKey(a)||(a=a.child(""));const u=new Qt(new Ae(a),0);let f=new zt(Je);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(f=f.add(d.Yr)),!0)}),u),ae.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(t.mutations,(r=>{const a=new Qt(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Qt(t,0),r=this.Zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let i=Rs();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():cn.newInvalidDocument(r))})),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Rs();const u=t.path,f=new Ae(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:h,value:{document:y}}=d.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||W4(Q4(y),i)<=0||(r.has(y.key)||Jd(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Ie(9500)}ii(e,t){return ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new A3(this)}getSize(e){return ae.resolve(this.size)}}class A3 extends m3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.persistence=e,this.si=new Co((t=>Qg(t)),Wg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new ny,this.targetCount=0,this.ai=La.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new La(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),ae.waitFor(a).next((()=>r))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hd(0),this.li=!1,this.li=!0,this.hi=new E3,this.referenceDelegate=e(this),this.Pi=new C3(this),this.indexManager=new l3,this.remoteDocumentCache=(function(r){return new S3(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new o3(t),this.Ii=new _3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new T3(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const r=new w3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,t){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class w3 extends X4{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new ny,this.Vi=null}static mi(e){return new iy(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const r=Ae.fromPath(i);return this.gi(e,r).next((a=>{a||t.removeEntry(r,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ad{constructor(e,t){this.persistence=e,this.pi=new Co((i=>t5(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=p3(this,t)}static mi(e,t){return new Ad(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ae.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?ae.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,a.removeEntry(u,Ne.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qf(e.data.value)),t}br(e,t,i){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ae.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Ye(),r=Ye();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new sy(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eV()?8:Z4(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new I3;return this.Ss(e,t,u).next((f=>{if(a.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>a.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(ya()<=Ke.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",_a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(ya()<=Ke.DEBUG&&me("QueryEngine","Query:",_a(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ya()<=Ke.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",_a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):ae.resolve())}ys(e,t){if(US(t))return ae.resolve(null);let i=$i(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ng(t,null,"F"),i=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ye(...a);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.Ds(t,f);return this.Cs(t,h,u,d.readTime)?this.ys(e,ng(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,i,r){return US(t)||r.isEqual(Ne.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,r)?ae.resolve(null):(ya()<=Ke.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_a(t)),this.vs(e,u,t,Y4(r,bu)).next((f=>f)))}))}Ds(e,t){let i=new zt(Hw(e));return t.forEach(((r,a)=>{Jd(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,i){return ya()<=Ke.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",_a(t)),this.ps.getDocumentsMatchingQuery(e,t,Sr.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="LocalStore",R3=3e8;class N3{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new vt(Je),this.xs=new Co((a=>Qg(a)),Wg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function b3(n,e,t,i){return new N3(n,e,t,i)}async function dI(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let d=Ye();for(const h of r){u.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}for(const h of a){f.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(i,d).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function P3(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,d,h,y){const E=h.batch,T=E.keys();let I=ae.resolve();return T.forEach((N=>{I=I.next((()=>y.getEntry(d,N))).next((U=>{const L=h.docVersions.get(N);nt(L!==null,48541),U.version.compareTo(L)<0&&(E.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),y.addEntry(U)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(d,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let d=Ye();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(d=d.add(f.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function hI(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function M3(n,e){const t=Me(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((y,E)=>{const T=r.get(E);if(!T)return;f.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(on.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,i)),r=r.insert(E,I),(function(U,L,H){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=R3?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,I,y)&&f.push(t.Pi.updateTargetData(a,I))}));let d=Rs(),h=Ye();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),f.push(D3(a,u,e.documentUpdates).next((y=>{d=y.ks,h=y.qs}))),!i.isEqual(Ne.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(y)}return ae.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(t.Ms=r,a)))}function D3(n,e,t){let i=Ye(),r=Ye();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Rs();return t.forEach(((f,d)=>{const h=a.get(f);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(f,d.readTime),u=u.insert(f,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),u=u.insert(f,d)):me(ry,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",d.version)})),{ks:u,qs:r}}))}function k3(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function L3(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((a=>a?(r=a,ae.resolve(r)):t.Pi.allocateTargetId(i).next((u=>(r=new gr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ag(n,e,t){const i=Me(n),r=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Qa(u))throw u;me(ry,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function WS(n,e,t){const i=Me(n);let r=Ne.min(),a=Ye();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,h,y){const E=Me(d),T=E.xs.get(y);return T!==void 0?ae.resolve(E.Ms.get(T)):E.Pi.getTargetData(h,y)})(i,u,$i(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((d=>{a=d}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?r:Ne.min(),t?a:Ye()))).next((f=>(V3(i,T5(e),f),{documents:f,Qs:a})))))}function V3(n,e,t){let i=n.Os.get(e)||Ne.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class jS{constructor(){this.activeTargetIds=x5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U3{constructor(){this.Mo=new jS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="ConnectivityMonitor";class ZS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(XS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(XS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf=null;function lg(){return kf===null?kf=(function(){return 268435456+Math.round(2147483648*Math.random())})():kf++,"0x"+kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",F3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===gd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,a){const u=lg(),f=this.zo(e,t.toUriEncodedString());me(vm,`Sending RPC '${e}' ${u}:`,f,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,r,a);const{host:h}=new URL(f),y=Ga(h);return this.Jo(e,f,d,i,y).then((E=>(me(vm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Pa(vm,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,r,a,u){return this.Go(e,t,i,r,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,t){const i=F3[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class H3 extends q3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,a){const u=lg();return new Promise(((f,d)=>{const h=new yw;h.setWithCredentials(!0),h.listenOnce(_w.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Yf.NO_ERROR:const E=h.getResponseJson();me(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Yf.TIMEOUT:me(ln,`RPC '${e}' ${u} timed out`),d(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const T=h.getStatus();if(me(ln,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const U=(function(H){const J=H.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(J)>=0?J:ce.UNKNOWN})(N.status);d(new Te(U,N.message))}else d(new Te(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{me(ln,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(r);me(ln,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",y,i,15)}))}T_(e,t,i){const r=lg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Tw(),f=Ew(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const y=a.join("");me(ln,`Creating RPC '${e}' stream ${r}: ${y}`,d);const E=u.createWebChannel(y,d);this.I_(E);let T=!1,I=!1;const N=new B3({Yo:L=>{I?me(ln,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(T||(me(ln,`Opening RPC '${e}' stream ${r} transport.`),E.open(),T=!0),me(ln,`RPC '${e}' stream ${r} sending:`,L),E.send(L))},Zo:()=>E.close()}),U=(L,H,J)=>{L.listen(H,(B=>{try{J(B)}catch(te){setTimeout((()=>{throw te}),0)}}))};return U(E,uu.EventType.OPEN,(()=>{I||(me(ln,`RPC '${e}' stream ${r} transport opened.`),N.o_())})),U(E,uu.EventType.CLOSE,(()=>{I||(I=!0,me(ln,`RPC '${e}' stream ${r} transport closed`),N.a_(),this.E_(E))})),U(E,uu.EventType.ERROR,(L=>{I||(I=!0,Pa(ln,`RPC '${e}' stream ${r} transport errored. Name:`,L.name,"Message:",L.message),N.a_(new Te(ce.UNAVAILABLE,"The operation could not be completed")))})),U(E,uu.EventType.MESSAGE,(L=>{var H;if(!I){const J=L.data[0];nt(!!J,16349);const B=J,te=(B==null?void 0:B.error)||((H=B[0])==null?void 0:H.error);if(te){me(ln,`RPC '${e}' stream ${r} received error:`,te);const ue=te.status;let ie=(function(R){const k=Ut[R];if(k!==void 0)return eI(k)})(ue),P=te.message;ie===void 0&&(ie=ce.INTERNAL,P="Unknown error status: "+ue+" with message "+te.message),I=!0,N.a_(new Te(ie,P)),E.close()}else me(ln,`RPC '${e}' stream ${r} received:`,J),N.u_(J)}})),U(f,vw.STAT_EVENT,(L=>{L.stat===Wm.PROXY?me(ln,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===Wm.NOPROXY&&me(ln,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(n){return new K5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="PersistentStream";class mI{constructor(e,t,i,r,a,u,f,d){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(xs(t.toString()),xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Te(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(eA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(eA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z3 extends mI{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Q5(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ne.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Ki(u.readTime):Ne.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=og(this.serializer),t.addTarget=(function(a,u){let f;const d=u.target;if(f=tg(d)?{documents:X5(a,d)}:{query:Z5(a,d).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=iI(a,u.resumeToken);const h=ig(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ne.min())>0){f.readTime=Sd(a,u.snapshotVersion.toTimestamp());const h=ig(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=t3(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=og(this.serializer),t.removeTarget=e,this.q_(t)}}class G3 extends mI{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=j5(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=og(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>W5(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{}class K3 extends $3{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,sg(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(ce.UNKNOWN,a.toString())}))}Ho(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,sg(t,i),r,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ce.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xs(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class Y3{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Io(this)&&(me(Eo,"Restarting streams for network reachability change."),await(async function(d){const h=Me(d);h.Ea.add(4),await Qu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Xd(h)})(this))}))})),this.Ra=new J3(i,r)}}async function Xd(n){if(Io(n))for(const e of n.da)await e(!0)}async function Qu(n){for(const e of n.da)await e(!1)}function gI(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uy(t)?ly(t):Wa(t).O_()&&ay(t,e))}function oy(n,e){const t=Me(n),i=Wa(t);t.Ia.delete(e),i.O_()&&yI(t,e),t.Ia.size===0&&(i.O_()?i.L_():Io(t)&&t.Ra.set("Unknown"))}function ay(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wa(n).Y_(e)}function yI(n,e){n.Va.Ue(e),Wa(n).Z_(e)}function ly(n){n.Va=new H5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wa(n).start(),n.Ra.ua()}function uy(n){return Io(n)&&!Wa(n).x_()&&n.Ia.size>0}function Io(n){return Me(n).Ea.size===0}function _I(n){n.Va=void 0}async function Q3(n){n.Ra.set("Online")}async function W3(n){n.Ia.forEach(((e,t)=>{ay(n,e)}))}async function j3(n,e){_I(n),uy(n)?(n.Ra.ha(e),ly(n)):n.Ra.set("Unknown")}async function X3(n,e,t){if(n.Ra.set("Online"),e instanceof nI&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const f of a.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(i){me(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cd(n,i)}else if(e instanceof Xf?n.Va.Ze(e):e instanceof tI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const i=await hI(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.Va.Tt(u);return f.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ia.get(h);y&&a.Ia.set(h,y.withResumeToken(d.resumeToken,u))}})),f.targetMismatches.forEach(((d,h)=>{const y=a.Ia.get(d);if(!y)return;a.Ia.set(d,y.withResumeToken(on.EMPTY_BYTE_STRING,y.snapshotVersion)),yI(a,d);const E=new gr(y.target,d,h,y.sequenceNumber);ay(a,E)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){me(Eo,"Failed to raise snapshot:",i),await Cd(n,i)}}async function Cd(n,e,t){if(!Qa(e))throw e;n.Ea.add(1),await Qu(n),n.Ra.set("Offline"),t||(t=()=>hI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(Eo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xd(n)}))}function vI(n,e){return e().catch((t=>Cd(n,t,e)))}async function Zd(n){const e=Me(n),t=Ir(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kg;for(;Z3(e);)try{const r=await k3(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,e6(e,r)}catch(r){await Cd(e,r)}EI(e)&&TI(e)}function Z3(n){return Io(n)&&n.Ta.length<10}function e6(n,e){n.Ta.push(e);const t=Ir(n);t.O_()&&t.X_&&t.ea(e.mutations)}function EI(n){return Io(n)&&!Ir(n).x_()&&n.Ta.length>0}function TI(n){Ir(n).start()}async function t6(n){Ir(n).ra()}async function n6(n){const e=Ir(n);for(const t of n.Ta)e.ea(t.mutations)}async function i6(n,e,t){const i=n.Ta.shift(),r=Zg.from(i,e,t);await vI(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Zd(n)}async function s6(n,e){e&&Ir(n).X_&&await(async function(i,r){if((function(u){return F5(u)&&u!==ce.ABORTED})(r.code)){const a=i.Ta.shift();Ir(i).B_(),await vI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Zd(i)}})(n,e),EI(n)&&TI(n)}async function tA(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),me(Eo,"RemoteStore received new credentials");const i=Io(t);t.Ea.add(3),await Qu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xd(t)}async function r6(n,e){const t=Me(n);e?(t.Ea.delete(2),await Xd(t)):e||(t.Ea.add(2),await Qu(t),t.Ra.set("Unknown"))}function Wa(n){return n.ma||(n.ma=(function(t,i,r){const a=Me(t);return a.sa(),new z3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:Q3.bind(null,n),t_:W3.bind(null,n),r_:j3.bind(null,n),H_:X3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),uy(n)?ly(n):n.Ra.set("Unknown")):(await n.ma.stop(),_I(n))}))),n.ma}function Ir(n){return n.fa||(n.fa=(function(t,i,r){const a=Me(t);return a.sa(),new G3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:t6.bind(null,n),r_:s6.bind(null,n),ta:n6.bind(null,n),na:i6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Zd(n)):(await n.fa.stop(),n.Ta.length>0&&(me(Eo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,f=new cy(e,t,u,r,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(xs("AsyncQueue",`${e}: ${n}`),Qa(n))return new Te(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ae.comparator(t.key,i.key):(t,i)=>Ae.comparator(t.key,i.key),this.keyedMap=cu(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ra;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.ga=new vt(Ae.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Va{constructor(e,t,i,r,a,u,f,d,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Va(e,t,Ra.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class a6{constructor(){this.queries=iA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Me(t),a=r.queries;r.queries=iA(),a.forEach(((u,f)=>{for(const d of f.Sa)d.onError(i)}))})(this,new Te(ce.ABORTED,"Firestore shutting down"))}}function iA(){return new Co((n=>Bw(n)),Kd)}async function l6(n,e){const t=Me(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new o6,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=fy(u,`Initialization of query '${_a(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&dy(t)}async function u6(n,e){const t=Me(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function c6(n,e){const t=Me(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const f of u.Sa)f.Fa(r)&&(i=!0);u.wa=r}}i&&dy(t)}function f6(n,e,t){const i=Me(n),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(t);i.queries.delete(e)}function dy(n){n.Ca.forEach((e=>{e.next()}))}var ug,sA;(sA=ug||(ug={})).Ma="default",sA.Cache="cache";class d6{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.key=e}}class AI{constructor(e){this.key=e}}class h6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=Hw(e),this.tu=new Ra(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new nA,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((y,E)=>{const T=r.get(y),I=Jd(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;T&&I?T.data.isEqual(I.data)?N!==U&&(i.track({type:3,doc:I}),L=!0):this.su(T,I)||(i.track({type:2,doc:I}),L=!0,(d&&this.eu(I,d)>0||h&&this.eu(I,h)<0)&&(f=!0)):!T&&I?(i.track({type:0,doc:I}),L=!0):T&&!I&&(i.track({type:1,doc:T}),L=!0,(d||h)&&(f=!0)),L&&(I?(u=u.add(I),a=U?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{tu:u,iu:i,Cs:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,E)=>(function(I,N){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:L})}};return U(I)-U(N)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],d=this.Xa.size===0&&this.current&&!r?1:0,h=d!==this.Za;return this.Za=d,u.length!==0||h?{snapshot:new Va(this.query,e.tu,a,u,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new AI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new SI(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hy="SyncEngine";class p6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class m6{constructor(e){this.key=e,this.hu=!1}}class g6{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Co((f=>Bw(f)),Kd),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ae.comparator),this.Au=new Map,this.Ru=new ny,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y6(n,e,t=!0){const i=NI(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await CI(i,e,t,!0),r}async function _6(n,e){const t=NI(n);await CI(t,e,!0,!1)}async function CI(n,e,t,i){const r=await L3(n.localStore,$i(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await v6(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&gI(n.remoteStore,r),f}async function v6(n,e,t,i,r){n.pu=(E,T,I)=>(async function(U,L,H,J){let B=L.view.ru(H);B.Cs&&(B=await WS(U.localStore,L.query,!1).then((({documents:P})=>L.view.ru(P,B))));const te=J&&J.targetChanges.get(L.targetId),ue=J&&J.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(B,U.isPrimaryClient,te,ue);return oA(U,L.targetId,ie.au),ie.snapshot})(n,E,T,I);const a=await WS(n.localStore,e,!0),u=new h6(e,a.Qs),f=u.ru(a.documents),d=Yu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,d);oA(n,t,h.au);const y=new p6(e,t,u);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function E6(n,e,t){const i=Me(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!Kd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ag(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&oy(i.remoteStore,r.targetId),cg(i,r.targetId)})).catch(Ya)):(cg(i,r.targetId),await ag(i.localStore,r.targetId,!0))}async function T6(n,e){const t=Me(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),oy(t.remoteStore,i.targetId))}async function S6(n,e,t){const i=N6(n);try{const r=await(function(u,f){const d=Me(u),h=pt.now(),y=f.reduce(((I,N)=>I.add(N.key)),Ye());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let N=Rs(),U=Ye();return d.Ns.getEntries(I,y).next((L=>{N=L,N.forEach(((H,J)=>{J.isValidDocument()||(U=U.add(H))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,N))).next((L=>{E=L;const H=[];for(const J of f){const B=k5(J,E.get(J.key).overlayedDocument);B!=null&&H.push(new wo(J.key,B,kw(B.value.mapValue),Ss.exists(!0)))}return d.mutationQueue.addMutationBatch(I,h,H,f)})).next((L=>{T=L;const H=L.applyToLocalDocumentSet(E,U);return d.documentOverlayCache.saveOverlays(I,L.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:Gw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,d){let h=u.Vu[u.currentUser.toKey()];h||(h=new vt(Je)),h=h.insert(f,d),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,t),await Wu(i,r.changes),await Zd(i.remoteStore)}catch(r){const a=fy(r,"Failed to persist write");t.reject(a)}}async function wI(n,e){const t=Me(n);try{const i=await M3(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?nt(u.hu,14607):r.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))})),await Wu(t,i,e)}catch(i){await Ya(i)}}function rA(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const d=Me(u);d.onlineState=f;let h=!1;d.queries.forEach(((y,E)=>{for(const T of E.Sa)T.va(f)&&(h=!0)})),h&&dy(d)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A6(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new vt(Ae.comparator);u=u.insert(a,cn.newNoDocument(a,Ne.min()));const f=Ye().add(a),d=new Wd(Ne.min(),new Map,new vt(Je),u,f);await wI(i,d),i.du=i.du.remove(a),i.Au.delete(e),py(i)}else await ag(i.localStore,e,!1).then((()=>cg(i,e,t))).catch(Ya)}async function C6(n,e){const t=Me(n),i=e.batch.batchId;try{const r=await P3(t.localStore,e);xI(t,i,null),II(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Wu(t,r)}catch(r){await Ya(r)}}async function w6(n,e,t){const i=Me(n);try{const r=await(function(u,f){const d=Me(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return d.mutationQueue.lookupMutationBatch(h,f).next((E=>(nt(E!==null,37113),y=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>d.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);xI(i,e,t),II(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Wu(i,r)}catch(r){await Ya(r)}}function II(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function xI(n,e,t){const i=Me(n);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||RI(n,i)}))}function RI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(oy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),py(n))}function oA(n,e,t){for(const i of t)i instanceof SI?(n.Ru.addReference(i.key,e),I6(n,i)):i instanceof AI?(me(hy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||RI(n,i.key)):Ie(19791,{wu:i})}function I6(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(me(hy,"New document in limbo: "+t),n.Eu.add(i),py(n))}function py(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(_t.fromString(e)),i=n.fu.next();n.Au.set(i,new m6(t)),n.du=n.du.insert(t,i),gI(n.remoteStore,new gr($i(jg(t.path)),i,"TargetPurposeLimboResolution",Hd.ce))}}async function Wu(n,e,t){const i=Me(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,d)=>{u.push(i.pu(d,e,t).then((h=>{var y;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){r.push(h);const E=sy.As(d.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(d,h){const y=Me(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ae.forEach(h,(T=>ae.forEach(T.Es,(I=>y.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>ae.forEach(T.ds,(I=>y.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!Qa(E))throw E;me(ry,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const I=y.Ms.get(T),N=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(N);y.Ms=y.Ms.insert(T,U)}}})(i.localStore,a))}async function x6(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){me(hy,"User change. New user:",e.toKey());const i=await dI(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new Te(ce.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wu(t,i.Ls)}}function R6(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let r=Ye();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function NI(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.H_=c6.bind(null,e.eventManager),e.Pu.yu=f6.bind(null,e.eventManager),e}function N6(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w6.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return b3(this.persistence,new x3,e.initialUser,this.serializer)}Cu(e){return new fI(iy.mi,this.serializer)}Du(e){return new U3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class b6 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof Ad,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new d3(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new fI((i=>Ad.mi(i,t)),this.serializer)}}class fg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x6.bind(null,this.syncEngine),await r6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new a6})()}createDatastore(e){const t=jd(e.databaseInfo.databaseId),i=(function(a){return new H3(a)})(e.databaseInfo);return(function(a,u,f,d){return new K3(a,u,f,d)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,f){return new Y3(i,r,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>rA(this.syncEngine,t,0)),(function(){return ZS.v()?new ZS:new O3})())}createSyncEngine(e,t){return(function(r,a,u,f,d,h,y){const E=new g6(r,a,u,f,d,h);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Me(r);me(Eo,"RemoteStore shutting down."),a.Ea.add(5),await Qu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}fg.provider={build:()=>new fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class M6{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=un.UNAUTHENTICATED,this.clientId=Gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me(xr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(xr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Tm(n,e){n.asyncQueue.verifyOperationInProgress(),me(xr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await dI(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function aA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await D6(n);me(xr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>tA(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>tA(e.remoteStore,r))),n._onlineComponents=e}async function D6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(xr,"Using user provided OfflineComponentProvider");try{await Tm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Pa("Error using user provided cache. Falling back to memory cache: "+t),await Tm(n,new wd)}}else me(xr,"Using default OfflineComponentProvider"),await Tm(n,new b6(void 0));return n._offlineComponents}async function bI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(xr,"Using user provided OnlineComponentProvider"),await aA(n,n._uninitializedComponentsProvider._online)):(me(xr,"Using default OnlineComponentProvider"),await aA(n,new fg))),n._onlineComponents}function k6(n){return bI(n).then((e=>e.syncEngine))}async function L6(n){const e=await bI(n),t=e.eventManager;return t.onListen=y6.bind(null,e.syncEngine),t.onUnlisten=E6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T6.bind(null,e.syncEngine),t}function V6(n,e,t={}){const i=new Tr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,d,h){const y=new P6({next:T=>{y.Nu(),u.enqueueAndForget((()=>u6(a,E)));const I=T.docs.has(f);!I&&T.fromCache?h.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&d&&d.source==="server"?h.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new d6(jg(f.path),y,{includeMetadataChanges:!0,qa:!0});return l6(a,E)})(await L6(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firestore.googleapis.com",uA=!0;class cA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MI,this.ssl=uA}else this.host=e.host,this.ssl=e.ssl??uA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c3)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class my{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new V4;switch(i.type){case"firstParty":return new q4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=lA.get(t);i&&(me("ComponentProvider","Removing Datastore"),lA.delete(t),i.terminate())})(this),Promise.resolve()}}function U6(n,e,t,i={}){var h;n=Nu(n,my);const r=Ga(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(NC(`https://${f}`),bC("Firestore",!0)),a.host!==MI&&a.host!==f&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:r,emulatorOptions:i};if(!mo(d,u)&&(n._setSettings(d),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=un.MOCK_USER;else{y=$L(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(T)}n._authCredentials=new U4(new Aw(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gy(this.firestore,e,this._query)}}class Wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ku(t,Wt._jsonSchema))return new Wt(e,i||null,new Ae(_t.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:Ot("string",Wt._jsonSchemaVersion),referencePath:Ot("string")};class Vu extends gy{constructor(e,t,i){super(e,t,jg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new Ae(e))}withConverter(e){return new Vu(this.firestore,e,this._path)}}function Lf(n,e,...t){if(n=Un(n),arguments.length===1&&(e=Gg.newId()),K4("doc","path",e),n instanceof my){const i=_t.fromString(e,...t);return CS(i),new Wt(n,null,new Ae(i))}{if(!(n instanceof Wt||n instanceof Vu))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return CS(i),new Wt(n.firestore,n instanceof Vu?n.converter:null,new Ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="AsyncQueue";class dA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pI(this,"async_queue_retry"),this._c=()=>{const i=Em();i&&me(fA,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Em();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Tr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qa(e))throw e;me(fA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,xs("INTERNAL UNHANDLED ERROR: ",hA(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=cy.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:hA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yy extends my{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new dA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dA(e),this._firestoreClient=void 0,await e}}}function O6(n,e){const t=typeof n=="object"?n:kC(),i=typeof n=="string"?n:gd,r=Mg(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=zL("firestore");a&&U6(r,...a)}return r}function DI(n){if(n._terminated)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||F6(n),n._firestoreClient}function F6(n){var i,r,a;const e=n._freezeSettings(),t=(function(f,d,h,y){return new s5(f,d,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,PI(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const d=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(d),_online:d}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(on.fromBase64String(e))}catch(t){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Ot("string",Xn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Ot("string",Ji._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yi(e.vectorValues);throw new Te(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Ot("string",Yi._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=/^__.*__$/;class B6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}function LI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class vy{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Id(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LI(this.Ac)&&q6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class H6{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jd(e)}Cc(e,t,i,r=!1){return new vy({Ac:e,methodName:t,Dc:i,path:rn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z6(n){const e=n._freezeSettings(),t=jd(n._databaseId);return new H6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function G6(n,e,t,i,r,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,r);FI("Data must be an object, but it was:",u,i);const f=UI(i,u);let d,h;if(a.merge)d=new gi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=$6(e,E,t);if(!u.contains(T))throw new Te(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);J6(y,T)||y.push(T)}d=new gi(y),h=u.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=u.fieldTransforms;return new B6(new jn(f),d,h)}function VI(n,e){if(OI(n=Un(n)))return FI("Unsupported field value:",e,n),UI(n,e);if(n instanceof kI)return(function(i,r){if(!LI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const f of i){let d=VI(f,r.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Un(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return R5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=pt.fromDate(i);return{timestampValue:Sd(r.serializer,a)}}if(i instanceof pt){const a=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sd(r.serializer,a)}}if(i instanceof Ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:iI(r.serializer,i._byteString)};if(i instanceof Wt){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ty(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Yi)return(function(u,f){return{mapValue:{fields:{[Mw]:{stringValue:Dw},[yd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return Xg(f.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${$g(i)}`)})(n,e)}function UI(n,e){const t={};return Iw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,((i,r)=>{const a=VI(r,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function OI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Ji||n instanceof Xn||n instanceof Wt||n instanceof kI||n instanceof Yi)}function FI(n,e,t){if(!OI(t)||!Cw(t)){const i=$g(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function $6(n,e,t){if((e=Un(e))instanceof _y)return e._internalPath;if(typeof e=="string")return qI(n,e);throw Id("Field path arguments must be of type string or ",n,!1,void 0,t)}const K6=new RegExp("[~\\*/\\[\\]]");function qI(n,e,t){if(e.search(K6)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _y(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Id(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||u)&&(d+=" (found",a&&(d+=` in field ${i}`),u&&(d+=` in document ${r}`),d+=")"),new Te(ce.INVALID_ARGUMENT,f+n+d)}function J6(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Y6 extends BI{data(){return super.data()}}function HI(n,e){return typeof e=="string"?qI(n,e):e instanceof _y?e._internalPath:e._delegate._internalPath}class Q6{convertValue(e,t="none"){switch(wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ao(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[yd].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>xt(u.doubleValue)));return new Yi(t)}convertGeoPoint(e){return new Ji(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Gd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const t=Ar(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=_t.fromString(e);nt(uI(i),9688,{name:e});const r=new Mu(i.get(1),i.get(3)),a=new Ae(i.popFirst(5));return r.isEqual(t)||xs(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends BI{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(HI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Ot("string",ho._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Zf extends ho{data(e={}){return super.data(e)}}class Su{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new du(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Zf(this._firestore,this._userDataWriter,i.key,i,new du(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const d=new Zf(r._firestore,r._userDataWriter,f.doc.key,f.doc,new du(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new Zf(r._firestore,r._userDataWriter,f.doc.key,f.doc,new du(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,y=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:j6(f.type),doc:d,oldIndex:h,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Su._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){n=Nu(n,Wt);const e=Nu(n.firestore,yy);return V6(DI(e),n._key).then((t=>eF(e,n,t)))}Su._jsonSchemaVersion="firestore/querySnapshot/1.0",Su._jsonSchema={type:Ot("string",Su._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class X6 extends Q6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function mA(n,e,t){n=Nu(n,Wt);const i=Nu(n.firestore,yy),r=W6(n.converter,e,t);return Z6(i,[G6(z6(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ss.none())])}function Z6(n,e){return(function(i,r){const a=new Tr;return i.asyncQueue.enqueueAndForget((async()=>S6(await k6(i),r,a))),a.promise})(DI(n),e)}function eF(n,e,t){const i=t.docs.get(e._key),r=new X6(n);return new ho(n,r,e._key,i,new du(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ja=r})($a),ba(new go("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new yy(new O4(i.getProvider("auth-internal")),new B4(u,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(h.options.projectId,y)})(u,r),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),vr(ES,TS,e),vr(ES,TS,"esm2020")})();const tF={apiKey:"AIzaSyBqHAr-VX41AaHj5YIL9E3qjy98H3fbZvg",authDomain:"invoice-ai-7f9f5.firebaseapp.com",projectId:"invoice-ai-7f9f5",storageBucket:"invoice-ai-7f9f5.firebasestorage.app",messagingSenderId:"840098157464",appId:"1:840098157464:web:b89b53953d7cc8475b11ed",measurementId:"G-JJC59GREEH"},zI=DC(tF),Na=M4(zI),Vf=O6(zI),nF=({onLogin:n})=>{const[e,t]=G.useState(!1),[i,r]=G.useState(""),[a,u]=G.useState(""),[f,d]=G.useState(""),h=async E=>{if(E.preventDefault(),d(""),!i||!a){d("Please enter both email and password.");return}if(!/\S+@\S+\.\S+/.test(i)){d("Please enter a valid email address.");return}try{let T;if(e){if(a.length<6){d("Password must be at least 6 characters long.");return}T=await gO(Na,i,a)}else T=await yO(Na,i,a);const I=T.user,N={id:I.uid,name:I.displayName||i.split("@")[0],email:I.email,picture:I.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.split("@")[0])}&background=random&color=fff`};n(N)}catch(T){T.code==="auth/email-already-in-use"?d("An account with this email already exists. Please sign in."):T.code==="auth/user-not-found"?d("No account found with this email. Please sign up."):T.code==="auth/wrong-password"?d("Incorrect password."):d("Authentication failed. Please try again."),console.error("Firebase authentication error:",T)}},y=async()=>{d("");try{const E=new ys,I=(await BO(Na,E)).user,N={id:I.uid,name:I.displayName,email:I.email,picture:I.photoURL};n(N)}catch(E){d("Google Sign-In failed. Please try again."),console.error("Google Sign-In error:",E)}};return C.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 flex items-center justify-center p-4",children:C.jsxs("div",{className:"w-full max-w-sm",children:[C.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-slate-200",children:[C.jsx("div",{className:"flex justify-center mb-6",children:C.jsx("div",{className:"bg-indigo-600 p-4 rounded-full text-white",children:C.jsx(Dd,{className:"h-10 w-10"})})}),C.jsx("h1",{className:"text-2xl font-bold text-center text-slate-800",children:"Invoice AI Parser"}),C.jsx("p",{className:"text-center text-slate-500 mt-2 mb-6",children:e?"Create an account to get started.":"Sign in to your account."}),C.jsxs("form",{onSubmit:h,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),C.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:E=>r(E.target.value),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Email address"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),C.jsx("input",{id:"password",name:"password",type:"password",autoComplete:e?"new-password":"current-password",required:!0,value:a,onChange:E=>u(E.target.value),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password"})]}),f&&C.jsx("p",{className:"text-xs text-red-600 text-center",children:f}),C.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:e?"Sign Up":"Sign In"})]}),C.jsx("div",{className:"text-center my-4",children:C.jsx("button",{onClick:()=>{t(!e),d("")},className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:e?"Already have an account? Sign In":"Don't have an account? Sign Up"})}),C.jsx("div",{className:"my-6",children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("div",{className:"w-full border-t border-slate-300"})}),C.jsx("div",{className:"relative flex justify-center text-sm",children:C.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Or"})})]})}),C.jsx("div",{className:"flex justify-center",children:C.jsxs("button",{onClick:y,className:"flex items-center justify-center w-full px-4 py-2 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50",children:[C.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:C.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 111.3 512 0 398.5 0 256S111.3 0 244 0c69.1 0 125.3 27.2 170.4 69.1L377.5 128C345.1 98.1 300.5 80 244 80c-87.6 0-158.3 70.7-158.3 158.3s70.7 158.3 158.3 158.3c96.1 0 133.3-67.9 138-102.3H244v-73.4h239.3c5.1 27.3 8.7 56.4 8.7 87.5z"})}),"Sign in with Google"]})})]}),C.jsx("footer",{className:"text-center p-4 text-xs text-slate-400 mt-4",children:C.jsx("p",{children:" 2024 Invoice AI Parser."})})]})})};var GI="clover",iF=function(e){return e===3?"v3":e},$I="https://js.stripe.com",sF="".concat($I,"/").concat(GI,"/stripe.js"),rF=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,oF=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var aF=function(e){return rF.test(e)||oF.test(e)},lF=function(){for(var e=document.querySelectorAll('script[src^="'.concat($I,'"]')),t=0;t<e.length;t++){var i=e[t];if(aF(i.src))return i}return null},gA=function(e){var t="",i=document.createElement("script");i.src="".concat(sF).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(i),i},uF=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.4.0",startTime:t})},ru=null,Uf=null,Of=null,cF=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},fF=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},dF=function(e){return ru!==null?ru:(ru=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var r=lF();if(!(r&&e)){if(!r)r=gA(e);else if(r&&Of!==null&&Uf!==null){var a;r.removeEventListener("load",Of),r.removeEventListener("error",Uf),(a=r.parentNode)===null||a===void 0||a.removeChild(r),r=gA(e)}}Of=fF(t,i),Uf=cF(i),r.addEventListener("load",Of),r.addEventListener("error",Uf)}catch(u){i(u);return}}),ru.catch(function(t){return ru=null,Promise.reject(t)}))},hF=function(e,t,i){if(e===null)return null;var r=t[0],a=r.match(/^pk_test/),u=iF(e.version),f=GI;a&&u!==f&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("8.4.0"," expected Stripe.js@").concat(f,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,t);return uF(d,i),d},ou,KI=!1,JI=function(){return ou||(ou=dF(null).catch(function(e){return ou=null,Promise.reject(e)}),ou)};Promise.resolve().then(function(){return JI()}).catch(function(n){KI||console.warn(n)});var pF=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];KI=!0;var r=Date.now();return JI().then(function(a){return hF(a,t,r)})};const mF="pk_test_51PbsA5RqcWwIeHkP3F5y6hN1DEk3qSt0cs5a7yLdeWDoaFzAnz5pA9VbJ2zTGNkpqd7T2n6SzoM957QZXaFxDR3z00qAbUfAb4";pF(mF);const gF=({isOpen:n,onClose:e,onSelectPlan:t,currentPlanId:i,plans:r,userEmail:a})=>{const[u,f]=G.useState(!1),d=async y=>{if(y.price===0)t(y.id),e();else{f(!0);try{const E=await fetch("http://localhost:4242/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:y.stripePriceId,userEmail:a})}),{url:T}=await E.json();T?window.location.href=T:console.error("Failed to get Stripe checkout URL")}catch(E){console.error("Error creating Stripe checkout session:",E)}finally{f(!1)}}};if(!n)return null;const h=Object.values(r);return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:C.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",onClick:y=>y.stopPropagation(),children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Choose Your Plan"}),C.jsx("p",{className:"text-slate-500 mt-2",children:"Start for free, then upgrade as you grow."})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.map(y=>C.jsxs("div",{className:`p-6 rounded-lg border-2 flex flex-col ${i===y.id?"border-indigo-500":"border-slate-200"}`,children:[C.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:y.name}),C.jsx("p",{className:"text-slate-500 mt-1 flex-grow",children:y.description}),C.jsxs("div",{className:"my-6",children:[C.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:["",y.price]}),y.price>0&&C.jsx("span",{className:"text-slate-500",children:" / month"})]}),C.jsxs("ul",{className:"space-y-3 text-sm text-slate-600 mb-8",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),C.jsxs("span",{children:["Process up to ",C.jsx("strong",{children:y.invoiceLimit.toLocaleString()})," invoices"]})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),C.jsx("span",{children:"AI-powered data extraction"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),C.jsx("span",{children:"Excel & CSV export"})]})]}),C.jsx("button",{onClick:()=>d(y),disabled:i===y.id||u,className:"w-full mt-auto px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:cursor-not-allowed disabled:opacity-70 bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 disabled:bg-slate-400",children:u?"Processing...":i===y.id?"Current Plan":"Choose Plan"})]},y.id))}),C.jsx("div",{className:"text-center mt-6",children:C.jsx("button",{onClick:e,className:"text-sm text-slate-500 hover:text-slate-700",children:"Close"})})]})})},yF=({question:n,answer:e,isOpen:t,onClick:i})=>C.jsxs("div",{className:"border-b border-slate-200 py-4",children:[C.jsxs("button",{onClick:i,className:"w-full flex justify-between items-center text-left",children:[C.jsx("span",{className:"text-lg font-medium text-slate-800",children:n}),C.jsx(l1,{className:`w-6 h-6 text-slate-500 transition-transform ${t?"transform rotate-180":""}`})]}),C.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${t?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:C.jsx("div",{className:"overflow-hidden",children:C.jsx("p",{className:"pt-2 text-slate-600",children:e})})})]}),_F=()=>{const{t:n}=Md(),[e,t]=G.useState(null),i=[{question:n("faq.q1"),answer:n("faq.a1")},{question:n("faq.q2"),answer:n("faq.a2")},{question:n("faq.q3"),answer:n("faq.a3")},{question:n("faq.q4"),answer:n("faq.a4")}],r=a=>{t(e===a?null:a)};return C.jsx("section",{id:"faq",className:"py-20 bg-white",children:C.jsxs("div",{className:"container mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-12",children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:n("faq.title")}),C.jsx("p",{className:"mt-4 text-lg text-slate-600",children:n("faq.subtitle")})]}),C.jsx("div",{className:"max-w-3xl mx-auto",children:i.map((a,u)=>C.jsx(yF,{question:a.question,answer:a.answer,isOpen:e===u,onClick:()=>r(u)},u))})]})})},vF=()=>{const{i18n:n}=Md(),e=t=>{n.changeLanguage(t)};return C.jsxs("div",{className:"flex space-x-2 text-sm",children:[C.jsx("button",{onClick:()=>e("en"),className:`px-2 py-1 rounded ${n.language==="en"?"bg-indigo-600 text-white":"hover:bg-slate-100"}`,children:"EN"}),C.jsx("button",{onClick:()=>e("ru"),className:`px-2 py-1 rounded ${n.language==="ru"?"bg-indigo-600 text-white":"hover:bg-slate-100"}`,children:"RU"})]})},EF=({plans:n})=>{const{t:e,i18n:t}=Md(),i=yg(),r=()=>{i("/login")},a=f=>{const d=document.getElementById(f);d&&d.scrollIntoView({behavior:"smooth",block:"start"})},u=Object.values(n);return C.jsxs("div",{className:"bg-white text-slate-800 font-sans",children:[C.jsx("header",{className:"bg-white/90 backdrop-blur-lg fixed top-0 left-0 right-0 z-50 border-b border-slate-200",children:C.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[C.jsxs("a",{href:"#",className:"flex items-center space-x-2",children:[C.jsx(Dd,{className:"w-7 h-7 text-indigo-600"}),C.jsx("h1",{className:"text-xl font-bold",children:"Invoice AI Parser"})]}),C.jsxs("nav",{className:"hidden md:flex items-center space-x-8 text-sm font-medium text-slate-600",children:[C.jsx("a",{href:"#features",onClick:f=>{f.preventDefault(),a("features")},className:"hover:text-indigo-600 transition-colors",children:e("header.features")}),C.jsx("a",{href:"#how-it-works",onClick:f=>{f.preventDefault(),a("how-it-works")},className:"hover:text-indigo-600 transition-colors",children:e("header.how_it_works")}),C.jsx("a",{href:"#pricing",onClick:f=>{f.preventDefault(),a("pricing")},className:"hover:text-indigo-600 transition-colors",children:e("header.pricing")}),C.jsx("a",{href:"#faq",onClick:f=>{f.preventDefault(),a("faq")},className:"hover:text-indigo-600 transition-colors",children:e("header.faq")})]}),C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx(vF,{}),C.jsx("button",{onClick:r,className:"px-5 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all",children:e("header.login")})]})]})}),C.jsxs("main",{children:[C.jsx("section",{className:"relative pt-32 pb-20 md:pt-48 md:pb-32 bg-slate-50",children:C.jsxs("div",{className:"container mx-auto px-6 grid md:grid-cols-2 gap-10 items-center",children:[C.jsxs("div",{className:"text-center md:text-left",children:[C.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 leading-tight",dangerouslySetInnerHTML:{__html:e("hero.title",{1:'<span class="text-indigo-600">',postProcess:"html"})}}),C.jsx("p",{className:"mt-6 text-lg text-slate-600",children:e("hero.subtitle")}),C.jsxs("div",{className:"mt-10",children:[C.jsxs("button",{onClick:r,className:"inline-flex items-center justify-center px-8 py-3 text-lg font-semibold text-white bg-indigo-600 rounded-lg shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform hover:scale-105 transition-all",children:[e("hero.cta"),C.jsx(a1,{className:"w-5 h-5 ml-2"})]}),C.jsx("p",{className:"mt-4 text-xs text-slate-500",children:e("hero.cta_note")})]})]}),C.jsx("div",{className:"relative",children:C.jsx("img",{src:"https://images.unsplash.com/photo-1554224155-1696413565d3?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Invoice processing demonstration",className:"rounded-xl shadow-2xl w-full h-auto object-cover"})})]})}),C.jsx("section",{id:"how-it-works",className:"py-20 bg-white",children:C.jsxs("div",{className:"container mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:e("how_it_works.title")}),C.jsx("p",{className:"mt-4 text-lg text-slate-600 max-w-2xl mx-auto",children:e("how_it_works.subtitle")})]}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-10 text-center relative",children:[C.jsx("div",{className:"hidden md:block absolute top-1/2 left-0 w-full h-px -translate-y-1/2",children:C.jsx("svg",{width:"100%",height:"2",children:C.jsx("line",{x1:"0",y1:"1",x2:"100%",y2:"1",stroke:"#cbd5e1",strokeWidth:"2",strokeDasharray:"8 8"})})}),C.jsxs("div",{className:"relative bg-white z-10",children:[C.jsx("div",{className:"mx-auto mb-6 w-16 h-16 flex items-center justify-center bg-slate-100 text-indigo-600 rounded-full font-bold text-2xl border-2 border-white ring-4 ring-slate-100",children:"1"}),C.jsx("h3",{className:"text-xl font-semibold mb-2",children:e("how_it_works.step1_title")}),C.jsx("p",{className:"text-slate-600",children:e("how_it_works.step1_description")})]}),C.jsxs("div",{className:"relative bg-white z-10",children:[C.jsx("div",{className:"mx-auto mb-6 w-16 h-16 flex items-center justify-center bg-slate-100 text-indigo-600 rounded-full font-bold text-2xl border-2 border-white ring-4 ring-slate-100",children:"2"}),C.jsx("h3",{className:"text-xl font-semibold mb-2",children:e("how_it_works.step2_title")}),C.jsx("p",{className:"text-slate-600",children:e("how_it_works.step2_description")})]}),C.jsxs("div",{className:"relative bg-white z-10",children:[C.jsx("div",{className:"mx-auto mb-6 w-16 h-16 flex items-center justify-center bg-slate-100 text-indigo-600 rounded-full font-bold text-2xl border-2 border-white ring-4 ring-slate-100",children:"3"}),C.jsx("h3",{className:"text-xl font-semibold mb-2",children:e("how_it_works.step3_title")}),C.jsx("p",{className:"text-slate-600",children:e("how_it_works.step3_description")})]})]})]})}),C.jsx("section",{id:"features",className:"py-20 bg-slate-50",children:C.jsx("div",{className:"container mx-auto px-6",children:C.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:e("features.title")}),C.jsx("p",{className:"mt-4 text-lg text-slate-600",children:e("features.subtitle")}),C.jsxs("ul",{className:"mt-8 space-y-6",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-6 w-6 text-indigo-600 mr-3 flex-shrink-0 mt-1"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-lg",children:e("features.feature1_title")}),C.jsx("p",{className:"text-slate-600",children:e("features.feature1_description")})]})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-6 w-6 text-indigo-600 mr-3 flex-shrink-0 mt-1"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-lg",children:e("features.feature2_title")}),C.jsx("p",{className:"text-slate-600",children:e("features.feature2_description")})]})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx(Hi,{className:"h-6 w-6 text-indigo-600 mr-3 flex-shrink-0 mt-1"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-lg",children:e("features.feature3_title")}),C.jsx("p",{className:"text-slate-600",children:e("features.feature3_description")})]})]})]})]}),C.jsx("div",{children:C.jsx("img",{src:"https://images.unsplash.com/photo-1587573089734-09cb69c0f2b4?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Business analytics dashboard",className:"rounded-xl shadow-2xl w-full h-auto object-cover"})})]})})}),C.jsx("section",{id:"pricing",className:"py-20 bg-white",children:C.jsxs("div",{className:"container mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-12",children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:e("pricing.title")}),C.jsx("p",{className:"mt-4 text-lg text-slate-600",children:e("pricing.subtitle")})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:u.map(f=>C.jsxs("div",{className:`p-8 rounded-xl border flex flex-col ${f.id==="pro"?"border-indigo-500":"border-slate-200"}`,children:[C.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e(`plans.${f.id}.name`)}),C.jsx("p",{className:"text-slate-500 mt-2 flex-grow",children:e(`plans.${f.id}.description`)}),C.jsxs("div",{className:"my-8 text-center",children:[C.jsxs("span",{className:"text-5xl font-extrabold text-slate-900",children:["",f.price]}),f.price>0&&C.jsxs("span",{className:"text-slate-500",children:[" / ",t.language==="ru"?"":"month"]})]}),C.jsxs("ul",{className:"space-y-4 text-sm text-slate-600 mb-8",children:[C.jsxs("li",{className:"flex items-center",children:[C.jsx(Hi,{className:"h-5 w-5 text-indigo-600 mr-3"}),C.jsxs("span",{children:[C.jsx("strong",{children:f.invoiceLimit.toLocaleString()})," ",e("plans.invoices_per_month",{count:f.invoiceLimit})]})]}),C.jsxs("li",{className:"flex items-center",children:[C.jsx(Hi,{className:"h-5 w-5 text-indigo-600 mr-3"}),C.jsx("span",{children:e("plans.ai_powered_extraction")})]}),C.jsxs("li",{className:"flex items-center",children:[C.jsx(Hi,{className:"h-5 w-5 text-indigo-600 mr-3"}),C.jsx("span",{children:e("plans.excel_csv_export")})]})]}),C.jsx("button",{onClick:r,className:`w-full mt-auto px-6 py-3 text-sm font-semibold rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${f.id==="pro"?"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500":"bg-slate-100 text-slate-700 hover:bg-slate-200 focus:ring-slate-300"}`,children:e("pricing.cta")})]},f.id))})]})}),C.jsx(_F,{}),C.jsx("section",{className:"py-20 bg-slate-800 text-white",children:C.jsxs("div",{className:"container mx-auto px-6 text-center",children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:e("cta_final.title")}),C.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-slate-300",children:e("cta_final.subtitle")}),C.jsx("div",{className:"mt-8",children:C.jsx("button",{onClick:r,className:"inline-flex items-center justify-center px-8 py-3 text-lg font-semibold text-slate-900 bg-white rounded-lg shadow-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transform hover:scale-105 transition-all",children:e("cta_final.cta")})})]})})]})]})},Sm={free:{id:"free",name:"Starter",price:0,currency:"EUR",invoiceLimit:50,description:"Great for testing the service.",stripePriceId:""},pro:{id:"pro",name:"Pro",price:19.99,currency:"EUR",invoiceLimit:1e3,description:"Ideal for small to medium businesses.",stripePriceId:"price_1Pbum2RqcWwIeHkP3sVkYF3h"},premium:{id:"premium",name:"Premium",price:79.99,currency:"EUR",invoiceLimit:1e4,description:"For large companies and high volumes.",stripePriceId:"price_1PbumMRqcWwIeHkPz11L95Yv"}},Ff=[{key:"invoiceFileName",header:"Invoice File",enabled:!0,order:0},{key:"matchedProductName",header:"Matched Product Name",enabled:!0,order:1},{key:"originalName",header:"Original Name",enabled:!0,order:2},{key:"sku",header:"SKU",enabled:!0,order:3},{key:"quantity",header:"Quantity",enabled:!0,order:4},{key:"totalQuantity",header:"Total Quantity",enabled:!0,order:5},{key:"unitOfMeasure",header:"Unit of Measure",enabled:!0,order:6},{key:"unitPrice",header:"Unit Price",enabled:!0,order:7},{key:"totalPrice",header:"Total Price",enabled:!0,order:8}],TF=({children:n})=>{const t=Ns().pathname==="/",[i]=G.useState(Na.currentUser);return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 font-sans flex flex-col",children:[n,(!i||!t)&&C.jsx(u1,{})]})},SF=()=>{const[n,e]=G.useState(null),[t,i]=G.useState("free"),[r,a]=G.useState(0),[u,f]=G.useState(!1),[d,h]=G.useState(""),[y,E]=G.useState(null),[T,I]=G.useState(!1),[N,U]=G.useState(null),[L,H]=G.useState([]),[J,B]=G.useState([]),[te,ue]=G.useState([]),[ie,P]=G.useState(null),[M,R]=G.useState(null),[k,V]=G.useState(Ff),[O,D]=G.useState(!1);G.useEffect(()=>{const _e=EO(Na,async qe=>{if(qe){const ke={id:qe.uid,name:qe.displayName||qe.email.split("@")[0],email:qe.email,picture:qe.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(qe.email.split("@")[0])}&background=random&color=fff`};e(ke),await Ee(ke.id)}else e(null),he();D(!0)});return()=>_e()},[]);const Ee=async _e=>{const qe=Lf(Vf,"users",_e);try{const ke=await pA(qe);if(ke.exists()){const Le=ke.data();i(Le.planId||"free"),a(Le.invoiceCount||0);const yn=Le.companies||[];B(yn);const Gt=Le.warehouses||[];if(ue(Gt),yn.length>0){const In=Le.selectedCompanyId||yn[0].id;P(In);const Ft=Gt.filter(ni=>ni.companyId===In);if(Ft.length>0){const ni=Le.selectedWarehouseId||Ft[0].id;R(ni)}}}}catch(ke){console.error("Failed to load user data from Firestore",ke),U("Could not load your profile. Please try refreshing the page.")}},be=G.useCallback(async()=>{if(!n)return;const _e=Lf(Vf,"users",n.id),qe={planId:t,invoiceCount:r,companies:J,warehouses:te,selectedCompanyId:ie,selectedWarehouseId:M};try{await mA(_e,qe,{merge:!0})}catch(ke){console.error("Failed to save data to Firestore",ke)}},[n,t,r,J,te,ie,M]);G.useEffect(()=>{n&&be()},[be]),G.useEffect(()=>{(async()=>{if(n&&M){const qe=Lf(Vf,"users",n.id,"warehouses",M);try{await mA(qe,{nomenclature:d,exportConfig:k},{merge:!0})}catch(ke){console.error("Failed to save warehouse-specific data",ke)}}})()},[n,M,d,k]),G.useEffect(()=>{(async()=>{if(n&&M){const qe=Lf(Vf,"users",n.id,"warehouses",M);try{const ke=await pA(qe);if(ke.exists()){const Le=ke.data();h(Le.nomenclature||""),V(Le.exportConfig||Ff)}else h(""),V(Ff)}catch(ke){console.error("Failed to load warehouse-specific data",ke)}}})(),fe()},[n,M]);const $=_e=>{e(_e)},le=async()=>{try{await TO(Na)}catch(_e){console.error("Logout failed:",_e)}},he=()=>{B([]),ue([]),P(null),R(null),h(""),fe(),i("free"),a(0),D(!1)},xe=_e=>{i(_e),_e!=="free"&&a(0),f(!1)},Fe=_e=>{h(_e),fe()},q=_e=>{V(_e)},ee=async _e=>{if(!(!_e||_e.length===0)){E(null),U(null),I(!0);try{const qe=await Promise.all(Array.from(_e).map(async ke=>({file:ke,preview:await H0(ke)})));H(qe)}catch(qe){U("Failed to read one or more files."),console.error(qe)}finally{I(!1)}}},re=async()=>{if(L.length===0||d.length===0){U("Please upload nomenclature and at least one invoice file first.");return}I(!0),U(null),E(null);try{const _e=await Promise.allSettled(L.map(async({file:Le})=>{const Gt=(await H0(Le)).split(",")[1],In=Le.type;return(await DL(Gt,In,d)).map(ni=>({...ni,id:crypto.randomUUID(),invoiceFileName:Le.name}))})),qe=_e.filter(Le=>Le.status==="fulfilled").flatMap(Le=>Le.value),ke=_e.filter(Le=>Le.status==="rejected");if(ke.length>0&&(console.error("Some invoices failed to process:",ke),U(`Failed to process ${ke.length} out of ${L.length} invoices. Check the console.`)),qe.length===0&&ke.length>0){const Le=ke[0].reason;throw new Error((Le==null?void 0:Le.message)||"All invoices failed to process.")}E(qe),a(Le=>Le+qe.length>0?L.length:0)}catch(_e){console.error(_e),U(_e.message||"An unexpected error occurred during processing.")}finally{I(!1)}},fe=()=>{H([]),E(null),U(null)},ye=(_e,qe)=>{const ke={id:crypto.randomUUID(),name:_e},Le={id:crypto.randomUUID(),name:qe,companyId:ke.id};B([ke]),ue([Le]),P(ke.id),R(ke.id)},De=(_e,qe)=>{E(ke=>ke?ke.map(Le=>Le.id===_e?{...Le,...qe}:Le):null)},ze=G.useMemo(()=>{if(!d)return[];try{const _e=XLSX.read(d,{type:"string"}),qe=_e.SheetNames[0],ke=_e.Sheets[qe],Le=XLSX.utils.sheet_to_json(ke,{header:1});if(Le.length<2)return[];const yn=Le[0].map(Ft=>String(Ft).toLowerCase().trim()),Gt=yn.indexOf("name"),In=yn.indexOf("sku");return Gt===-1||In===-1?[]:Le.slice(1).map(Ft=>({name:String(Ft[Gt]||""),sku:String(Ft[In]||"")})).filter(Ft=>Ft.name&&Ft.sku)}catch{return[]}},[d]),Et=G.useMemo(()=>Sm[t],[t]);return O?C.jsx(nb,{children:C.jsxs(TF,{children:[C.jsxs(DN,{children:[C.jsx(lo,{path:"/login",element:n?C.jsx(tu,{to:"/app"}):C.jsx(nF,{onLogin:$})}),C.jsx(lo,{path:"/setup",element:n&&J.length===0?C.jsx(kL,{onSetupComplete:ye}):C.jsx(tu,{to:"/app"})}),C.jsx(lo,{path:"/app",element:n?J.length===0?C.jsx(tu,{to:"/setup"}):C.jsxs(C.Fragment,{children:[C.jsx(db,{user:n,onLogout:le,plan:Et,invoiceCount:r,onUpgrade:()=>f(!0),companies:J,warehouses:te,selectedCompanyId:ie,onCompanyChange:P,onWarehouseChange:R,setCompanies:B,setWarehouses:ue}),C.jsx(g1,{user:n,selectedWarehouseId:M,handleNomenclatureUpload:Fe,nomenclature:d,handleFilesInvoicesUpload:ee,handleProcessInvoices:re,handleResetInvoices:fe,uploadedInvoices:L,invoiceData:y,isLoading:T,error:N,setError:U,handleUpdateInvoiceItem:De,productList:ze,currentPlan:Et,invoiceCount:r,openPricingModal:()=>f(!0),exportConfig:k,handleExportConfigSave:q,DEFAULT_EXPORT_CONFIG:Ff})]}):C.jsx(tu,{to:"/"})}),C.jsx(lo,{path:"/",element:n?C.jsx(tu,{to:"/app"}):C.jsx(EF,{plans:Object.values(Sm)})}),C.jsx(lo,{path:"/privacy-policy",element:C.jsx("div",{children:"Privacy Policy Page"})}),C.jsx(lo,{path:"/terms-of-service",element:C.jsx("div",{children:"Terms of Service Page"})})]}),C.jsx(gF,{isOpen:u,onClose:()=>f(!1),onSelectPlan:xe,currentPlanId:t,plans:Sm,userEmail:(n==null?void 0:n.email)??""})]})}):C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsx("p",{children:"Loading..."})})},{slice:AF,forEach:CF}=[];function wF(n){return CF.call(AF.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function IF(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const yA=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,xF=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let a=`${n}=${r}`;if(i.maxAge>0){const u=i.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(u)}`}if(i.domain){if(!yA.test(i.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${i.domain}`}if(i.path){if(!yA.test(i.path))throw new TypeError("option path is invalid");a+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(a+="; Partitioned"),a},_A={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=xF(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var RF={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return _A.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:a}=e;t&&typeof document<"u"&&_A.create(t,n,i,r,a)}},NF={name:"querystring",lookup(n){var i;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&((i=window.location.hash)==null?void 0:i.indexOf("?"))>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const u=r.substring(1).split("&");for(let f=0;f<u.length;f++){const d=u[f].indexOf("=");d>0&&u[f].substring(0,d)===e&&(t=u[f].substring(d+1))}}return t}},bF={name:"hash",lookup(n){var r;let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const u=a.substring(1);if(e){const f=u.split("&");for(let d=0;d<f.length;d++){const h=f[d].indexOf("=");h>0&&f[d].substring(0,h)===e&&(i=f[d].substring(h+1))}}if(i)return i;if(!i&&t>-1){const f=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(f)?(r=f[typeof t=="number"?t:0])==null?void 0:r.replace("/",""):void 0}}}return i}};let ma=null;const vA=()=>{if(ma!==null)return ma;try{if(ma=typeof window<"u"&&window.localStorage!==null,!ma)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{ma=!1}return ma};var PF={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&vA())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&vA()&&window.localStorage.setItem(t,n)}};let ga=null;const EA=()=>{if(ga!==null)return ga;try{if(ga=typeof window<"u"&&window.sessionStorage!==null,!ga)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{ga=!1}return ga};var MF={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&EA())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&EA()&&window.sessionStorage.setItem(t,n)}},DF={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let a=0;a<t.length;a++)e.push(t[a]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},kF={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},LF={name:"path",lookup(n){var r;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(r=t[typeof e=="number"?e:0])==null?void 0:r.replace("/",""):void 0}},VF={name:"subdomain",lookup(n){var r,a;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&((a=(r=window.location)==null?void 0:r.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[t]}};let YI=!1;try{document.cookie,YI=!0}catch{}const QI=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];YI||QI.splice(1,1);const UF=()=>({order:QI,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class WI{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=wF(t,this.options||{},UF()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(RF),this.addDetector(NF),this.addDetector(PF),this.addDetector(MF),this.addDetector(DF),this.addDetector(kF),this.addDetector(LF),this.addDetector(VF),this.addDetector(bF)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!IF(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}WI.type="languageDetector";function dg(n){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(n)}function jI(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":dg(XMLHttpRequest))==="object"}function OF(n){return!!n&&typeof n.then=="function"}function FF(n){return OF(n)?n:Promise.resolve(n)}const qF="modulepreload",BF=function(n){return"/"+n},TA={},HF=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let u=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),d=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));r=u(t.map(h=>{if(h=BF(h),h in TA)return;TA[h]=!0;const y=h.endsWith(".css"),E=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":qF,y||(T.as="script"),T.crossOrigin="",T.href=h,d&&T.setAttribute("nonce",d),document.head.appendChild(T),y)return new Promise((I,N)=>{T.addEventListener("load",I),T.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return r.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};function SA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function AA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SA(Object(t),!0).forEach(function(i){zF(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zF(n,e,t){return(e=GF(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GF(n){var e=$F(n,"string");return To(e)=="symbol"?e:e+""}function $F(n,e){if(To(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(To(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function To(n){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(n)}var Rr=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Rr=global.fetch:typeof window<"u"&&window.fetch&&(Rr=window.fetch);var Uu;jI()&&(typeof global<"u"&&global.XMLHttpRequest?Uu=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Uu=window.XMLHttpRequest));var xd;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?xd=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(xd=window.ActiveXObject));typeof Rr!="function"&&(Rr=void 0);if(!Rr&&!Uu&&!xd)try{HF(()=>import("./browser-ponyfill-DQUcH9nV.js").then(n=>n.b),[]).then(function(n){Rr=n.default}).catch(function(){})}catch{}var hg=function(e,t){if(t&&To(t)==="object"){var i="";for(var r in t)i+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},CA=function(e,t,i,r){var a=function(d){if(!d.ok)return i(d.statusText||"Error",{status:d.status});d.text().then(function(h){i(null,{status:d.status,data:h})}).catch(i)};if(r){var u=r(e,t);if(u instanceof Promise){u.then(a).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(a).catch(i):Rr(e,t).then(a).catch(i)},wA=!1,KF=function(e,t,i,r){e.queryStringParams&&(t=hg(t,e.queryStringParams));var a=AA({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(a["Content-Type"]="application/json");var u=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,f=AA({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:a},wA?{}:u),d=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{CA(t,f,r,d)}catch(h){if(!u||Object.keys(u).length===0||!h.message||h.message.indexOf("not implemented")<0)return r(h);try{Object.keys(u).forEach(function(y){delete f[y]}),CA(t,f,r,d),wA=!0}catch(y){r(y)}}},JF=function(e,t,i,r){i&&To(i)==="object"&&(i=hg("",i).slice(1)),e.queryStringParams&&(t=hg(t,e.queryStringParams));try{var a=Uu?new Uu:new xd("MSXML2.XMLHTTP.3.0");a.open(i?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,i&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var u=e.customHeaders;if(u=typeof u=="function"?u():u,u)for(var f in u)a.setRequestHeader(f,u[f]);a.onreadystatechange=function(){a.readyState>3&&r(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(i)}catch(d){console&&console.log(d)}},YF=function(e,t,i,r){if(typeof i=="function"&&(r=i,i=void 0),r=r||function(){},Rr&&t.indexOf("file:")!==0)return KF(e,t,i,r);if(jI()||typeof ActiveXObject=="function")return JF(e,t,i,r);r(new Error("No fetch and no xhr implementation found!"))};function Ua(n){"@babel/helpers - typeof";return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ua(n)}function IA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Am(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(t),!0).forEach(function(i){XI(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function QF(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function WF(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,ZI(i.key),i)}}function jF(n,e,t){return e&&WF(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function XI(n,e,t){return(e=ZI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZI(n){var e=XF(n,"string");return Ua(e)=="symbol"?e:e+""}function XF(n,e){if(Ua(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Ua(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ZF=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,r){return XI({},i,r||"")},parseLoadPayload:function(t,i){},request:YF,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ex=(function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};QF(this,n),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return jF(n,[{key:"init",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=Am(Am(Am({},ZF()),this.options||{}),r),this.allOptions=a,this.services&&this.options.reloadInterval){var u=setInterval(function(){return i.reload()},this.options.reloadInterval);Ua(u)==="object"&&typeof u.unref=="function"&&u.unref()}}},{key:"readMulti",value:function(t,i,r){this._readAny(t,t,i,i,r)}},{key:"read",value:function(t,i,r){this._readAny([t],t,[i],i,r)}},{key:"_readAny",value:function(t,i,r,a,u){var f=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(t,r)),d=FF(d),d.then(function(h){if(!h)return u(null,{});var y=f.services.interpolator.interpolate(h,{lng:t.join("+"),ns:r.join("+")});f.loadUrl(y,u,i,a)})}},{key:"loadUrl",value:function(t,i,r,a){var u=this,f=typeof r=="string"?[r]:r,d=typeof a=="string"?[a]:a,h=this.options.parseLoadPayload(f,d);this.options.request(this.options,t,h,function(y,E){if(E&&(E.status>=500&&E.status<600||!E.status))return i("failed loading "+t+"; status code: "+E.status,!0);if(E&&E.status>=400&&E.status<500)return i("failed loading "+t+"; status code: "+E.status,!1);if(!E&&y&&y.message){var T=y.message.toLowerCase(),I=["failed","fetch","network","load"].find(function(L){return T.indexOf(L)>-1});if(I)return i("failed loading "+t+": "+y.message,!0)}if(y)return i(y,!1);var N,U;try{typeof E.data=="string"?N=u.options.parse(E.data,r,a):N=E.data}catch{U="failed parsing "+t+" to json"}if(U)return i(U,!1);i(null,N)})}},{key:"create",value:function(t,i,r,a,u){var f=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var d=this.options.parsePayload(i,r,a),h=0,y=[],E=[];t.forEach(function(T){var I=f.options.addPath;typeof f.options.addPath=="function"&&(I=f.options.addPath(T,i));var N=f.services.interpolator.interpolate(I,{lng:T,ns:i});f.options.request(f.options,N,d,function(U,L){h+=1,y.push(U),E.push(L),h===t.length&&typeof u=="function"&&u(y,E)})})}}},{key:"reload",value:function(){var t=this,i=this.services,r=i.backendConnector,a=i.languageUtils,u=i.logger,f=r.language;if(!(f&&f.toLowerCase()==="cimode")){var d=[],h=function(E){var T=a.toResolveHierarchy(E);T.forEach(function(I){d.indexOf(I)<0&&d.push(I)})};h(f),this.allOptions.preload&&this.allOptions.preload.forEach(function(y){return h(y)}),d.forEach(function(y){t.allOptions.ns.forEach(function(E){r.read(y,E,"read",null,null,function(T,I){T&&u.warn("loading namespace ".concat(E," for language ").concat(y," failed"),T),!T&&I&&u.log("loaded namespace ".concat(E," for language ").concat(y),I),r.loaded("".concat(y,"|").concat(E),T,I)})})})}}}])})();ex.type="backend";gn.use(ex).use(WI).use($b).init({supportedLngs:["en","ru"],fallbackLng:"en",detection:{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],caches:["cookie"]},backend:{loadPath:"/locales/{{lng}}/translation.json"},react:{useSuspense:!1}});HR.createRoot(document.getElementById("root")).render(C.jsx(kR.StrictMode,{children:C.jsx(SF,{})}));export{eq as c,xA as g};
